import{_ as Y,Z as G,O as J,P as K,z as Q,C as Z,r as m,T as W,Q as X,a2 as $,a as A,R as ee,g as u,o as r,x as D,w as i,U as v,N as te,k as d,l as t,J as c,q as se,K as ae,i as _,L as F,F as I,y as M,B as C,p as oe,n as V}from"./vendor-ddfbd976.js";import{L as ne}from"./main-306a5ea6.js";import{P as le}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import{s as ie}from"./search-2c17aadd.js";import{s as de}from"./searchbar-3acbc236.js";import{l as ce}from"./footer-e648049d.js";import{_ as ue}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const fe={data(){return{rightOffcanvas:!1}},components:{Layout:ne,PageHeader:le,Head:G,Pagination:re,Multiselect:J,flatPickr:K,Link:Q,search:ie,searchbar:de},props:{successMessage:String,alertMessage:String,serviceLocations:{type:Object,required:!0}},setup(o){const{t:e}=Z(),h=m(""),s=W({all:"",locked:"",limit:10}),p=m([]),P=m({}),w=m(!1),b=m(!1),y=m(null),k=m({}),x=m(o.successMessage||""),B=m(o.alertMessage||""),H=()=>{x.value="",B.value=""},T=()=>{b.value=!0},N=()=>{s.reset(),f(),b.value=!1},E=()=>{w.value=!1},L=async n=>{try{await A.delete(`/driver-bank-info/delete/${n}`);const l=p.value.findIndex(g=>g.id===n);l!==-1&&p.value.splice(l,1),w.value=!1,v.fire(e("success"),e("bank_info_deleted_successfully"),"success")}catch{v.fire(e("error"),e("failed_to_delete_bank_info"),"error")}},a=async(n,l)=>{v.fire({title:e("are_you_sure"),text:e("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:e("yes"),cancelButtonText:e("cancel")}).then(async g=>{if(g.isConfirmed)try{await A.post("/driver-bank-info/update-status",{id:n,status:l});const S=p.value.findIndex(U=>U.id===n);S!==-1&&(p.value[S].active=l),v.fire(e("changed"),e("status_updated_successfully"),"success")}catch(S){console.error(e("error_updating_status"),S),v.fire(e("error"),e("failed_to_update_status"),"error")}})},O=async n=>{v.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await L(n)}catch(g){console.error(e("error_deleting_data"),g),v.fire(e("error"),e("failed_to_delete_the_data"),"error")}})};X(h,$.debounce(function(n){f(h.value)},300));const f=async(n=1)=>{try{const l=s.data();l.search=h.value,l.page=n;const g=await A.get("/driver-bank-info/list",{params:l});p.value=g.data.results,P.value=g.data.paginator,q(P.value.total),b.value=!1}catch(l){console.error(e("error_fetching_bank_infos"),l)}},z=async n=>{f(n)},R=async n=>{te.get(`/driver-bank-info/edit/${n.id}`)},j=async n=>{h.value=n,f()},q=()=>{k.value=[10,25,50,100,200,500]};return{results:p,modalShow:w,deleteItemId:y,successMessage:x,alertMessage:B,filterData:T,deleteModal:O,closeModal:E,deleteData:L,dismissMessage:H,searchTerm:h,paginator:P,modalFilter:b,clearFilter:N,fetchDatas:f,filter:s,handlePageChanged:z,editData:R,toggleActiveStatus:a,fetchSearch:j,paginatorOption:k,changeEntriesPerPage:()=>{f()}}},computed:{...ce,...ee(["permissions"])},mounted(){this.fetchDatas()}},me={class:"d-flex align-items-center mt-3"},_e={class:"me-2 text-muted"},ge=["value"],pe={class:"ms-2 text-muted"},ve={class:"d-flex align-items-center gap-2"},he={class:"table-responsive"},be={class:"table align-middle position-relative table-nowrap"},ye={class:"table-active"},ke={scope:"col"},Ce={scope:"col"},we={scope:"col"},Be={scope:"col"},Me={key:0},Pe={key:0},xe=["onClick","id","checked"],Le={class:"d-flex"},Se={key:1},De={colspan:"7",class:"text-center"},He={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Te={class:"alert-content"},Ne={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ee={class:"alert-content"};function Oe(o,e,h,s,p,P){const w=u("Head"),b=u("PageHeader"),y=u("BCol"),k=u("BButton"),x=u("Link"),B=u("BRow"),H=u("BCardHeader"),T=u("BCardBody"),N=u("BCard"),E=u("Pagination"),L=u("Layout");return r(),D(L,null,{default:i(()=>[d(w,{title:"Driver Needed Documents"}),d(b,{title:o.$t("bank_infos"),pageTitle:o.$t("bank_infos")},null,8,["title","pageTitle"]),d(B,null,{default:i(()=>[d(y,{lg:"12"},{default:i(()=>[d(N,{"no-body":"",id:"tasksList"},{default:i(()=>[d(H,{class:"border-0"},{default:i(()=>[d(B,{class:"g-2"},{default:i(()=>[d(y,{md:"3"},{default:i(()=>[t("div",me,[t("label",_e,c(o.$t("show")),1),se(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.filter.limit=a),onChange:e[1]||(e[1]=(...a)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(r(!0),_(I,null,F(s.paginatorOption,a=>(r(),_("option",{key:a,value:a},c(a),9,ge))),128))],544),[[ae,s.filter.limit]]),t("label",pe,c(o.$t("entries")),1)])]),_:1}),d(y,{md:"3"}),d(y,{md:"auto",class:"ms-auto"},{default:i(()=>[t("div",ve,[o.permissions.includes("add-driver-needed-document")?(r(),D(x,{key:0,href:"/driver-bank-info/create"},{default:i(()=>[d(k,{variant:"primary",class:"float-end"},{default:i(()=>[e[4]||(e[4]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),M(" "+c(o.$t("add_bank_infos")),1)]),_:1,__:[4]})]),_:1})):C("",!0)])]),_:1})]),_:1})]),_:1}),d(T,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[t("div",he,[t("table",be,[t("thead",ye,[t("tr",null,[t("th",ke,c(o.$t("method")),1),t("th",Ce,c(o.$t("fields")),1),t("th",we,c(o.$t("status")),1),t("th",Be,c(o.$t("action")),1)])]),s.results.length>0?(r(),_("tbody",Me,[(r(!0),_(I,null,F(s.results,(a,O)=>(r(),_("tr",{key:O},[t("td",null,c(a.method_name),1),t("td",null,c(a.field_names.join(", ")),1),o.permissions.includes("toggle-bank-info")?(r(),_("td",Pe,[t("div",{class:oe({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":a.active})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:V(f=>s.toggleActiveStatus(a.id,!a.active),["prevent"]),id:"status_"+a.id,checked:a.active},null,8,xe)],2)])):C("",!0),t("td",null,[t("div",Le,[o.permissions.includes("edit-driver-needed-document")?(r(),D(k,{key:0,onClick:V(f=>s.editData(a),["prevent"]),class:"btn btn-soft-warning btn-sm m-2"},{default:i(()=>e[5]||(e[5]=[t("i",{class:"bx bxs-edit-alt"},null,-1)])),_:2,__:[5]},1032,["onClick"])):C("",!0),o.permissions.includes("delete-driver-needed-document")?(r(),D(k,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",id:"sa-warning",onClick:V(f=>s.deleteModal(a.id),["prevent"])},{default:i(()=>e[6]||(e[6]=[t("i",{class:"bx bx-trash"},null,-1)])),_:2,__:[6]},1032,["onClick"])):C("",!0)])])]))),128))])):(r(),_("tbody",Se,[t("tr",null,[t("td",De,[e[7]||(e[7]=t("img",{src:ue,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,c(o.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[s.successMessage?(r(),_("div",He,[t("div",Te,[e[8]||(e[8]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[9]||(e[9]=M()),e[10]||(e[10]=t("strong",null,"Success",-1)),M(" - "+c(s.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[2]||(e[2]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):C("",!0),s.alertMessage?(r(),_("div",Ne,[t("div",Ee,[e[11]||(e[11]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[12]||(e[12]=M()),e[13]||(e[13]=t("strong",null,"Alert",-1)),M(" - "+c(s.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[3]||(e[3]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):C("",!0)]),d(E,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Ge=Y(fe,[["render",Oe]]);export{Ge as default};
