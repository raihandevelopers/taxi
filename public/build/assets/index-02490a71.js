import{_ as K,Z as W,O as Z,P as j,z as Q,C as X,r as m,T as ee,R as te,g as u,S as se,o as c,x as D,w as r,U as y,a as E,N as ae,k as i,l as t,J as l,q as k,K as $,i as f,L as z,F as Y,y as _,B as C,p as oe,n as R,W as q}from"./vendor-ddfbd976.js";import{L as le}from"./main-306a5ea6.js";import{P as ne}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import{s as ie}from"./search-2c17aadd.js";import{s as ce}from"./searchbar-3acbc236.js";import{l as de}from"./footer-e648049d.js";import{_ as ue}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const fe={data(){return{rightOffcanvas:!1}},components:{Layout:le,PageHeader:ne,Head:W,Pagination:re,Multiselect:Z,flatPickr:j,Link:Q,search:ie,searchbar:ce},props:{successMessage:String,alertMessage:String},setup(o){const{t:e}=X(),T=m(""),s=ee({transport_type:null,status:null,limit:10}),v=m([]),M=m({}),w=m(!1),B=m(!1),b=m(null),g=m({}),x=m(o.successMessage||""),h=m(o.alertMessage||""),H=()=>{x.value="",h.value=""},I=async(d,n)=>{y.fire({title:e("are_you_sure"),text:e("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:e("yes"),cancelButtonText:e("cancel")}).then(async p=>{if(p.isConfirmed)try{await E.post("/rental-package-types/update-status",{id:d,status:n});const V=v.value.findIndex(J=>J.id===d);V!==-1&&(v.value[V].active=n),y.fire(e("changed"),e("status_updated_successfully"),"success")}catch(V){console.error(e("error_updating_status"),V),y.fire(e("error"),e("failed_to_update_status"),"error")}})},P=m(!1),A=()=>{a(),B.value=!0,P.value=!1},F=()=>{s.reset(),a(),P.value=!1},N=()=>{w.value=!1},S=async d=>{try{await E.delete(`/rental-package-types/delete/${d}`);const n=v.value.findIndex(p=>p.id===d);n!==-1&&v.value.splice(n,1),w.value=!1,y.fire(e("success"),e("rental_package_deleted_successfully"),"success")}catch(n){n.response&&n.response.status==403&&(h.value=n.response.data.alertMessage,setTimeout(()=>{h.value=""},5e3)),console.error(e("error_deleting_rental_package"),n),y.fire(e("error"),e("failed_to_delete_rental_package"),"error")}},L=async d=>{y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async n=>{if(n.isConfirmed)try{await S(d)}catch(p){console.error(e("error_deleting_data"),p),y.fire(e("error"),e("failed_to_delete_the_data"),"error")}})},a=async(d=1)=>{try{const n={...s.data(),search:T.value,page:d};s.status!==""&&(n.status=s.status),console.log("Params sent:",n);const p=await E.get("/rental-package-types/list",{params:n});v.value=p.data.results,M.value=p.data.paginator,G(M.value.total),B.value=!1}catch(n){console.error(e("error_fetching_rental_package_types"),n)}},U=async d=>{localStorage.setItem("rental-package-types/list",d),a(d)},O=async d=>{ae.get(`/rental-package-types/edit/${d.id}`)},G=()=>{g.value=[10,25,50,100,200,500]};return{results:v,modalShow:w,deleteItemId:b,successMessage:x,alertMessage:h,filterData:A,deleteModal:L,closeModal:N,deleteData:S,dismissMessage:H,searchTerm:T,paginator:M,modalFilter:B,clearFilter:F,fetchDatas:a,filter:s,handlePageChanged:U,editData:O,toggleActiveStatus:I,rightOffcanvas:P,paginatorOption:g,changeEntriesPerPage:()=>{a()}}},computed:{...de,...te(["permissions"])},mounted(){this.fetchDatas();const o=localStorage.getItem("rental-package-types/list");o?this.handlePageChanged(Number(o)):this.handlePageChanged(1)}},me={class:"d-flex align-items-center mt-3"},ge={class:"me-2 text-muted"},pe=["value"],_e={class:"ms-2 text-muted"},ve={class:"d-flex align-items-center gap-2"},he={class:"table-responsive"},ye={class:"table align-middle position-relative table-nowrap"},be={class:"table-active"},ke={scope:"col"},Ce={scope:"col"},we={scope:"col"},Be={scope:"col"},Pe={key:0},Me={class:"d-flex"},xe={class:"flex-grow-1"},Se={key:0},Le={key:1},Oe={key:2},Ve={key:0},De=["onClick","id","checked"],Te={class:"d-flex"},He={key:1},Ie={colspan:"7",class:"text-center"},Ae={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Fe={class:"alert-content"},Ne={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ue={class:"alert-content"},Ee={class:"offcanvas-body"},Re={class:"mb-4"},$e={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},ze={value:"all"},Ye={value:"taxi"},qe={value:"delivery"},Ge={class:"mb-4"},Je={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ke={class:"form-check form-check-inline"},We={class:"form-check-label",for:"statusActive"},Ze={class:"form-check form-check-inline"},je={class:"form-check-label",for:"statusInactive"},Qe={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function Xe(o,e,T,s,v,M){const w=u("Head"),B=u("PageHeader"),b=u("BCol"),g=u("BButton"),x=u("Link"),h=u("BRow"),H=u("BCardHeader"),I=u("BCardBody"),P=u("BCard"),A=u("BForm"),F=u("BOffcanvas"),N=u("Pagination"),S=u("Layout"),L=se("b-tooltip");return c(),D(S,null,{default:r(()=>[i(w,{title:"Rental Package Types"}),i(B,{title:o.$t("rental_package_types"),pageTitle:o.$t("rental_package_types")},null,8,["title","pageTitle"]),i(h,null,{default:r(()=>[i(b,{lg:"12"},{default:r(()=>[i(P,{"no-body":"",id:"tasksList"},{default:r(()=>[i(H,{class:"border-0"},{default:r(()=>[i(h,{class:"g-2"},{default:r(()=>[i(b,{md:"3"},{default:r(()=>[t("div",me,[t("label",ge,l(o.$t("show")),1),k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.filter.limit=a),onChange:e[1]||(e[1]=(...a)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(c(!0),f(Y,null,z(s.paginatorOption,a=>(c(),f("option",{key:a,value:a},l(a),9,pe))),128))],544),[[$,s.filter.limit]]),t("label",_e,l(o.$t("entries")),1)])]),_:1}),i(b,{md:"3"}),i(b,{md:"auto",class:"ms-auto"},{default:r(()=>[t("div",ve,[i(g,{variant:"danger",onClick:e[2]||(e[2]=a=>s.rightOffcanvas=!0)},{default:r(()=>[e[9]||(e[9]=t("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),_(" "+l(o.$t("filters")),1)]),_:1,__:[9]}),o.permissions.includes("add-rental-package")?(c(),D(x,{key:0,href:"/rental-package-types/create"},{default:r(()=>[i(g,{variant:"primary",class:"float-end"},{default:r(()=>[e[10]||(e[10]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),_(l(o.$t("add_rental_package_types")),1)]),_:1,__:[10]})]),_:1})):C("",!0)])]),_:1})]),_:1})]),_:1}),i(I,{class:"border border-dashed border-end-0 border-start-0"},{default:r(()=>[t("div",he,[t("table",ye,[t("thead",be,[t("tr",null,[t("th",ke,l(o.$t("name")),1),t("th",Ce,l(o.$t("transport_type")),1),t("th",we,l(o.$t("status")),1),t("th",Be,l(o.$t("action")),1)])]),s.results.length>0?(c(),f("tbody",Pe,[(c(!0),f(Y,null,z(s.results,(a,U)=>(c(),f("tr",{key:U},[t("td",null,[t("div",Me,[t("div",xe,l(a.name),1)])]),t("td",null,[a.transport_type==="taxi"?(c(),f("span",Se,l(o.$t("taxi")),1)):a.transport_type==="delivery"?(c(),f("span",Le,l(o.$t("delivery")),1)):(c(),f("span",Oe,l(o.$t("all")),1))]),o.permissions.includes("toggle-rental-package")?(c(),f("td",Ve,[t("div",{class:oe({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":a.active})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:R(O=>s.toggleActiveStatus(a.id,!a.active),["prevent"]),id:"status_"+a.id,checked:a.active},null,8,De)],2)])):C("",!0),t("td",null,[t("div",Te,[o.permissions.includes("edit-rental-package")?k((c(),D(g,{key:0,onClick:R(O=>s.editData(a),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:o.$t("edit")},{default:r(()=>e[11]||(e[11]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[11]},1032,["onClick","title"])),[[L,void 0,void 0,{hover:!0}]]):C("",!0),o.permissions.includes("delete-rental-package")?k((c(),D(g,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:R(O=>s.deleteModal(a.id),["prevent"]),"data-bs-toggle":"tooltip",title:o.$t("delete")},{default:r(()=>e[12]||(e[12]=[t("i",{class:"bx bx-trash bx-xs"},null,-1)])),_:2,__:[12]},1032,["onClick","title"])),[[L,void 0,void 0,{hover:!0}]]):C("",!0)])])]))),128))])):(c(),f("tbody",He,[t("tr",null,[t("td",Ie,[e[13]||(e[13]=t("img",{src:ue,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,l(o.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[s.successMessage?(c(),f("div",Ae,[t("div",Fe,[e[14]||(e[14]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[15]||(e[15]=_()),e[16]||(e[16]=t("strong",null,"Success",-1)),_(" - "+l(s.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[3]||(e[3]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):C("",!0),s.alertMessage?(c(),f("div",Ne,[t("div",Ue,[e[17]||(e[17]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[18]||(e[18]=_()),e[19]||(e[19]=t("strong",null,"Alert",-1)),_(" - "+l(s.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[4]||(e[4]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):C("",!0)]),i(F,{modelValue:s.rightOffcanvas,"onUpdate:modelValue":e[8]||(e[8]=a=>s.rightOffcanvas=a),placement:"end",title:o.$t("rental_package_types_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:r(()=>[i(A,null,{default:r(()=>[t("div",Ee,[t("div",Re,[t("label",$e,l(o.$t("transport_type")),1),k(t("select",{class:"form-control","data-choices":"","data-choices-search-false":"",name:"choices-select-status",id:"choices-select-status","onUpdate:modelValue":e[5]||(e[5]=a=>s.filter.transport_type=a)},[t("option",ze,l(o.$t("all")),1),t("option",Ye,l(o.$t("taxi")),1),t("option",qe,l(o.$t("delivery")),1)],512),[[$,s.filter.transport_type]])]),t("div",Ge,[t("label",Je,l(o.$t("status")),1),t("div",null,[t("div",Ke,[k(t("input",{class:"form-check-input",type:"radio",name:"status",id:"statusActive","onUpdate:modelValue":e[6]||(e[6]=a=>s.filter.status=a),value:"1"},null,512),[[q,s.filter.status]]),t("label",We,l(o.$t("active")),1)]),t("div",Ze,[k(t("input",{class:"form-check-input",type:"radio",name:"status",id:"statusInactive","onUpdate:modelValue":e[7]||(e[7]=a=>s.filter.status=a),value:"0"},null,512),[[q,s.filter.status]]),t("label",je,l(o.$t("inactive")),1)])])])]),t("div",Qe,[i(g,{variant:"light",class:"w-100",onClick:s.clearFilter},{default:r(()=>[_(l(o.$t("clear_filter")),1)]),_:1},8,["onClick"]),i(g,{type:"submit",variant:"success",onClick:s.filterData,class:"w-100"},{default:r(()=>[_(l(o.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),i(N,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const dt=K(fe,[["render",Xe]]);export{dt as default};
