import{_ as J,Z as K,O as Q,P as W,z as Z,C as G,r as m,T as X,Q as ee,a2 as te,a as H,g as c,o as f,x as I,w as r,U as D,N as E,k as i,l as t,J as l,q as N,K as se,i as p,L as U,F as $,y as d,n as R,B as Y,W as j}from"./vendor-ddfbd976.js";import{L as ae}from"./main-306a5ea6.js";import{P as oe}from"./page-header-2dc95532.js";import{P as le}from"./Pagination-f095ae3c.js";import{s as ne}from"./search-2c17aadd.js";import{s as ie}from"./searchbar-3acbc236.js";import{_ as re}from"./search-file-ab3e1046.js";import"./footer-e648049d.js";import"./app-042fb454.js";const ce={data(){return{rightOffcanvas:!1}},components:{Layout:ae,PageHeader:oe,Head:K,Pagination:le,Multiselect:Q,flatPickr:W,Link:Z,search:ne,searchbar:ie},props:{successMessage:String,alertMessage:String,zoneTypePrice:Object},setup(a){const{t:e}=G(),k=m(""),s=X({all:"",locked:"",status:null,limit:10});console.log(a.zoneTypePrice.id);const v=m([]),x=m({}),y=m(!1),C=m(!1),b=m(null),h=m({}),w=m(a.successMessage||""),B=m(a.alertMessage||""),O=()=>{w.value="",B.value=""},S=async(n,u)=>{try{const g=await H.post("/set-prices/packages/update-status",{id:n,status:u}),z=v.value.findIndex(q=>q.id===n);z!==-1&&(v.value[z].active=u),w.value=g.data.successMessage}catch(g){console.error(e("error_updating_status"),g)}},T=n=>n.charAt(0).toUpperCase()+n.slice(1),P=m(!1),V=()=>{_(),C.value=!0,P.value=!1},A=()=>{s.reset(),_(),P.value=!1},F=()=>{y.value=!1},L=async n=>{try{await H.delete(`/set-prices/packages/delete/${n}`);const u=v.value.findIndex(g=>g.id===n);u!==-1&&v.value.splice(u,1),y.value=!1,D.fire(e("success"),e("package_price_deleted_successfully"),"success")}catch{D.fire(e("error"),e("failed_to_delete_package_price"),"error")}},o=async n=>{D.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async u=>{if(u.isConfirmed)try{await L(n)}catch(g){console.error(e("error_deleting_data"),g),D.fire(e("error"),e("failed_to_delete_the_data"),"error")}})};ee(k,te.debounce(function(n){_(k.value)},300));const _=async(n=1)=>{try{const u={...s.data(),search:k.value,page:n};s.status!==""&&(u.status=s.status);const g=await H.get(`/set-prices/packages/list/${a.zoneTypePrice.id}`,{params:u});v.value=g.data.results,x.value=g.data.paginator,M(x.value.total),C.value=!1}catch(u){console.error(e("error_fetching_set_prices"),u)}},M=()=>{h.value=[10,25,50,100,200,500]};return{results:v,modalShow:y,deleteItemId:b,successMessage:w,alertMessage:B,filterData:V,deleteModal:o,closeModal:F,deleteData:L,dismissMessage:O,searchTerm:k,paginator:x,modalFilter:C,clearFilter:A,fetchDatas:_,filter:s,handlePageChanged:async n=>{localStorage.setItem("set-prices/packages/list",n),_(n)},editData:async n=>{E.get(`/set-prices/packages/edit/${n.id}`)},packagesData:async n=>{E.get(`set-prices/packages/${n.id}`)},toggleActiveStatus:S,capitalizeFirstLetter:T,rightOffcanvas:P,paginatorOption:h,changeEntriesPerPage:()=>{_()}}},mounted(){this.fetchDatas();const a=localStorage.getItem("set-prices/packages/list");a?this.handlePageChanged(Number(a)):this.handlePageChanged(1)}},de={class:"d-flex align-items-center mt-3"},ue={class:"me-2 text-muted"},fe=["value"],ge={class:"ms-2 text-muted"},me={class:"d-flex align-items-center gap-2"},pe={class:"table-responsive"},_e={class:"table align-middle position-relative table-nowrap"},ve={class:"table-active"},he={scope:"col"},ke={scope:"col"},be={scope:"col"},ye={scope:"col"},Ce={key:0},we={class:"dropdown"},Be={class:"dropdown-menu dropdown-menu-end"},Pe=["onClick"],Me=["onClick"],xe=["onClick"],Se=["onClick"],Le={key:1},De={colspan:"7",class:"text-center"},Oe={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Te={class:"alert-content"},Ve={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ae={class:"alert-content"},Fe={class:"offcanvas-body"},He={class:"mb-4"},Ie={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ne={class:"form-check form-check-inline"},ze={class:"form-check-label",for:"statusActive"},Ee={class:"form-check form-check-inline"},Ue={class:"form-check-label",for:"statusInactive"},$e={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function Re(a,e,k,s,v,x){const y=c("Head"),C=c("PageHeader"),b=c("BCol"),h=c("BButton"),w=c("Link"),B=c("BRow"),O=c("BCardHeader"),S=c("BBadge"),T=c("BCardBody"),P=c("BCard"),V=c("BForm"),A=c("BOffcanvas"),F=c("Pagination"),L=c("Layout");return f(),I(L,null,{default:r(()=>[i(y,{title:"Set Package Prices"}),i(C,{title:a.$t("set_package_prices"),pageTitle:a.$t("set_package_prices"),pageLink:"/set-prices"},null,8,["title","pageTitle"]),i(B,null,{default:r(()=>[i(b,{lg:"12"},{default:r(()=>[i(P,{"no-body":"",id:"tasksList"},{default:r(()=>[i(O,{class:"border-0"},{default:r(()=>[i(B,{class:"g-2"},{default:r(()=>[i(b,{md:"3"},{default:r(()=>[t("div",de,[t("label",ue,l(a.$t("show")),1),N(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.filter.limit=o),onChange:e[1]||(e[1]=(...o)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(f(!0),p($,null,U(s.paginatorOption,o=>(f(),p("option",{key:o,value:o},l(o),9,fe))),128))],544),[[se,s.filter.limit]]),t("label",ge,l(a.$t("entries")),1)])]),_:1}),i(b,{md:"3"}),i(b,{md:"auto",class:"ms-auto"},{default:r(()=>[t("div",me,[i(h,{variant:"danger",onClick:e[2]||(e[2]=o=>s.rightOffcanvas=!0)},{default:r(()=>[e[8]||(e[8]=t("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),d(" "+l(a.$t("filters")),1)]),_:1,__:[8]}),i(w,{href:`/set-prices/packages/create/${k.zoneTypePrice.id}`},{default:r(()=>[i(h,{variant:"primary",class:"float-end"},{default:r(()=>[e[9]||(e[9]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),d(" "+l(a.$t("add_package_price")),1)]),_:1,__:[9]})]),_:1},8,["href"])])]),_:1})]),_:1})]),_:1}),i(T,{class:"border border-dashed border-end-0 border-start-0"},{default:r(()=>[t("div",pe,[t("table",_e,[t("thead",ve,[t("tr",null,[t("th",he,l(a.$t("s_no")),1),t("th",ke,l(a.$t("packages")),1),t("th",be,l(a.$t("status")),1),t("th",ye,l(a.$t("action")),1)])]),s.results.length>0?(f(),p("tbody",Ce,[(f(!0),p($,null,U(s.results,(o,_)=>(f(),p("tr",{key:_},[t("td",null,l(_+1),1),t("td",null,l(o.package_name),1),t("td",null,[o.active==1?(f(),I(S,{key:0,variant:"success",class:"text-uppercase"},{default:r(()=>[d(l(a.$t("active")),1)]),_:1})):(f(),I(S,{key:1,variant:"danger",class:"text-uppercase"},{default:r(()=>[d(l(a.$t("inactive")),1)]),_:1}))]),t("td",null,[t("div",we,[e[14]||(e[14]=t("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[t("span",{class:"text-muted fs-18"},[t("i",{class:"mdi mdi-dots-vertical"})])],-1)),t("div",Be,[o.active===1?(f(),p("a",{key:0,class:"dropdown-item",href:"#",onClick:M=>s.toggleActiveStatus(o.id,0)},[e[10]||(e[10]=t("i",{class:"bx bx-show-alt align-center text-muted me-2"},null,-1)),d(" "+l(a.$t("inactive")),1)],8,Pe)):(f(),p("a",{key:1,class:"dropdown-item",href:"#",onClick:M=>s.toggleActiveStatus(o.id,1)},[e[11]||(e[11]=t("i",{class:"bx bxs-low-vision align-center text-muted me-2"},null,-1)),d(" "+l(a.$t("active")),1)],8,Me)),t("a",{class:"dropdown-item",href:"#",onClick:R(M=>s.editData(o),["prevent"])},[e[12]||(e[12]=t("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),d(" "+l(a.$t("edit")),1)],8,xe),t("a",{class:"dropdown-item",href:"#",onClick:R(M=>s.deleteModal(o.id),["prevent"])},[e[13]||(e[13]=t("i",{class:"bx bxs-trash align-center text-muted me-2"},null,-1)),d(" "+l(a.$t("delete")),1)],8,Se)])])])]))),128))])):(f(),p("tbody",Le,[t("tr",null,[t("td",De,[e[15]||(e[15]=t("img",{src:re,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,l(a.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[s.successMessage?(f(),p("div",Oe,[t("div",Te,[e[16]||(e[16]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[17]||(e[17]=d()),e[18]||(e[18]=t("strong",null,"Success",-1)),d(" - "+l(s.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[3]||(e[3]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):Y("",!0),s.alertMessage?(f(),p("div",Ve,[t("div",Ae,[e[19]||(e[19]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[20]||(e[20]=d()),e[21]||(e[21]=t("strong",null,"Alert",-1)),d(" - "+l(s.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[4]||(e[4]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):Y("",!0)]),i(A,{modelValue:s.rightOffcanvas,"onUpdate:modelValue":e[7]||(e[7]=o=>s.rightOffcanvas=o),placement:"end",title:a.$t("filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:r(()=>[i(V,null,{default:r(()=>[t("div",Fe,[t("div",He,[t("label",Ie,l(a.$t("status")),1),t("div",null,[t("div",Ne,[N(t("input",{class:"form-check-input",type:"radio",name:"status",id:"statusActive","onUpdate:modelValue":e[5]||(e[5]=o=>s.filter.status=o),value:"1"},null,512),[[j,s.filter.status]]),t("label",ze,l(a.$t("active")),1)]),t("div",Ee,[N(t("input",{class:"form-check-input",type:"radio",name:"status",id:"statusInactive","onUpdate:modelValue":e[6]||(e[6]=o=>s.filter.status=o),value:"0"},null,512),[[j,s.filter.status]]),t("label",Ue,l(a.$t("inactive")),1)])])])]),t("div",$e,[i(h,{variant:"light",class:"w-100",onClick:s.clearFilter},{default:r(()=>[d(l(a.$t("clear_filter")),1)]),_:1},8,["onClick"]),i(h,{type:"submit",variant:"success",class:"w-100",onClick:s.filterData},{default:r(()=>[d(l(a.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),i(F,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const at=J(ce,[["render",Re]]);export{at as default};
