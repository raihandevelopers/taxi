import{_ as N,Z as j,O,C as Q,r as p,T as E,G as D,g as v,o as i,x as G,w as k,a as S,N as J,k as h,l as e,y as m,J as l,q as _,K as R,i as n,L as C,F as M,M as f,B as c,n as K}from"./vendor-ddfbd976.js";import{L as Z}from"./main-306a5ea6.js";import{P as z}from"./page-header-2dc95532.js";import{P as W}from"./Pagination-f095ae3c.js";import{i as X}from"./imageUpload-4f5efd67.js";import{F as Y}from"./FormValidation-a9047131.js";import{I as $}from"./ImageUpload-6f09ff26.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const ee={components:{Layout:Z,PageHeader:z,Head:j,Pagination:W,Multiselect:O,FormValidation:Y,imageUpload:X,ImageUpload:$},props:{successMessage:String,alertMessage:String,driver:Object,serviceLocations:Array,vehicleTypes:Array,app_for:String,selected_vehicle_type:Array,validate:Function,countries:Array,default_dial_code:String,default_flag:String,user:Array,default_country_id:Number},setup(o){const{t:s}=Q(),g=p({dial_code:o.default_dial_code||"",flag:o.default_flag||""}),r=E({name:o.driver&&o.driver.name||"",service_location_id:o.driver&&o.driver.service_location_id||"",mobile:o.driver&&o.driver.mobile||"",email:o.driver&&o.driver.email||"",gender:o.driver&&o.driver.gender||"",vehicle_type:o.selected_vehicle_type[0]&&o.selected_vehicle_type[0]||"",transport_type:o.driver&&o.driver.transport_type||"",vehicle_make:o.driver&&o.driver.custom_make||"",vehicle_model:o.driver&&o.driver.custom_model||"",car_color:o.driver&&o.driver.car_color||"",car_number:o.driver&&o.driver.car_number||"",profilePictureFile:null,profile_picture:o.driver&&o.driver.profile_picture||"",country:o.driver?o.driver.country.id||"":null,password:o.driver&&o.driver.password||"",confirm_password:o.driver&&o.driver.password||""}),U={name:{required:!0},service_location_id:{required:!0},mobile:{required:!0,regex:/^\d+$/},gender:{required:!0},vehicle_type:{required:!0},vehicle_make:{required:!0},vehicle_model:{required:!0},car_color:{required:!0},car_number:{required:!0},transport_type:{required:!0},profile_picture:{required:!0}},A=p(null),b=p({}),w=p(o.successMessage||""),V=p(o.alertMessage||""),x=p(!1),F=()=>{w.value="",V.value=""},B=p(""),I=D(()=>o.countries.filter(a=>a.name.toLowerCase().includes(B.value.toLowerCase()))),q=()=>{const a={};for(const d in U)U[d].required&&!r[d]&&(a[d]=s("this_field_is_required"));return a};o.app_for=="demo"&&(r.mobile="**********",r.email="**********");const L=async()=>{if(b.value=q(),Object.keys(b.value).length===0)try{if(r.mobile&&(!o.driver||r.mobile!==o.driver.mobile)&&(await S.get(`/approved-drivers/check-mobile/${r.mobile}${o.driver?`/${o.driver.id}`:""}`)).data.exists){b.value.mobile=s("mobile_number_already_exists");return}if(r.email&&(!o.driver||r.email!==o.driver.email)&&(await S.get(`/approved-drivers/check-email/${r.email}${o.driver?`/${o.driver.id}`:""}`)).data.exists){b.value.email=s("email_already_exists");return}const a=new FormData;for(const u in r)u==="iconFile"&&r[u]?a.append("profile_picture",r[u]):a.append(u,r[u]);let d;a.append("country",r.country),x.value=!0,o.driver?d=await S.post(`/approved-drivers/update/${o.driver.id}`,a):d=await S.post("store",a),d.status===200||d.status===201?(w.value=d.data.successMessage,r.reset(),J.get("/approved-drivers")):console.error(s("unexpected_response_status"),d.status)}catch(a){console.error(s("error_handling_form_submission"),a),a.response&&a.response.status===422?b.value=a.response.data.errors:console.error(s("an_unexpected_error_occurred"),a)}};r.country=o.default_country_id;const P=a=>{a&&(g.value=a,r.country=a.id)},t=a=>{const d=a.target.files[0];if(r.profilePictureFile=d,d){const u=new FileReader;u.onload=T=>{y.value=T.target.result},u.readAsDataURL(d)}},y=p(""),H=D(()=>{var a;return r.profilePictureFile?y.value:(a=o.driver)!=null&&a.profile_picture?o.driver.profile_picture:"/default-profile.jpeg"});return{form:r,successMessage:w,alertMessage:V,handleSubmit:L,dismissMessage:F,validationRules:U,validationRef:A,errors:b,selectCountry:P,selectedCountry:g,searchQuery:B,filteredCountries:I,onFileChange:t,imageSrc:H,driverProfilePictureUrl:y,handleImageSelected:(a,d)=>{r[d]=a},handleImageRemoved:a=>{r[a]=null},isButtonDisabled:x}}},re={class:"row"},oe={class:"col-12"},se={class:"mb-3"},te={for:"service_location_id",class:"form-label"},le={disabled:"",value:""},ae=["value"],ie={class:"col-sm-6"},ne={class:"mb-3"},de={for:"name",class:"form-label"},ce=["placeholder"],me={class:"col-sm-6"},_e={class:"form-label"},ue={class:"input-group","data-input-flag":""},ve={class:"btn btn-light border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},fe=["src"],ge={class:"ms-2 country-codeno"},he=["placeholder"],be={class:"dropdown-menu w-100"},ye={class:"p-2 px-3 pt-1 searchlist-input"},pe=["placeholder"],ke={class:"list-unstyled dropdown-menu-list mb-0"},we=["onClick"],Ce=["src"],Me={class:"align-middle"},Ue={key:0,class:"text-danger"},Ve={class:"col-sm-6"},xe={class:"mb-3"},Be={for:"select_gender",class:"form-label"},Se={selected:"",disabled:"",value:""},Re={value:"male"},Fe={value:"female"},Ie={value:"others"},qe={key:0,class:"text-danger"},Le={class:"col-sm-6"},Pe={class:"mb-3"},Ae={for:"email",class:"form-label"},De=["placeholder"],He={key:0,class:"text-danger"},Te={key:0,class:"col-sm-6"},Ne={class:"mb-3"},je={for:"password",class:"form-label"},Oe=["placeholder"],Qe={key:0,class:"text-danger"},Ee={key:1,class:"col-sm-6"},Ge={class:"mb-3"},Je={for:"confirm_password",class:"form-label"},Ke=["placeholder"],Ze={key:0,class:"text-danger"},ze={class:"col-sm-6"},We={class:"mb-3"},Xe={for:"transport_type",class:"form-label"},Ye={disabled:"",value:""},$e={value:"taxi"},er={value:"delivery"},rr={value:"both"},or={key:0,class:"text-danger"},sr={class:"col-sm-6"},tr={class:"mb-3"},lr={for:"vehicle_type",class:"form-label"},ar={disabled:"",value:""},ir=["value"],nr={key:0,class:"text-danger"},dr={class:"col-sm-6"},cr={class:"mb-3"},mr={for:"vehicle_make",class:"form-label"},_r=["placeholder"],ur={key:0,class:"text-danger"},vr={class:"col-sm-6"},fr={class:"mb-3"},gr={for:"vehicle_model",class:"form-label"},hr=["placeholder"],br={key:0,class:"text-danger"},yr={class:"col-sm-6"},pr={class:"mb-3"},kr={for:"car_color",class:"form-label"},wr=["placeholder"],Cr={key:0,class:"text-danger"},Mr={class:"col-sm-6"},Ur={class:"mb-3"},Vr={for:"car_number",class:"form-label"},xr=["placeholder"],Br={key:0,class:"text-danger"},Sr={class:"col-sm-6 mb-3"},Rr={key:0,class:"text-danger"},Fr={class:"col-lg-12"},Ir={class:"text-end"},qr=["disabled"],Lr={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Pr={class:"alert-content"},Ar={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Dr={class:"alert-content"};function Hr(o,s,g,r,U,A){const b=v("Head"),w=v("PageHeader"),V=v("BCardHeader"),x=v("ImageUpload"),F=v("FormValidation"),B=v("BCardBody"),I=v("BCard"),q=v("BCol"),L=v("BRow"),P=v("Layout");return i(),G(P,null,{default:k(()=>[h(b,{title:"Approved Drivers"}),h(w,{title:g.driver?o.$t("edit"):o.$t("create"),pageTitle:o.$t("approved_drivers"),pageLink:"/approved-drivers"},null,8,["title","pageTitle"]),h(L,null,{default:k(()=>[h(q,{lg:"12"},{default:k(()=>[h(I,{"no-body":"",id:"tasksList"},{default:k(()=>[h(V,{class:"border-0"}),h(B,{class:"border border-dashed border-end-0 border-start-0"},{default:k(()=>[e("form",{onSubmit:s[16]||(s[16]=K((...t)=>r.handleSubmit&&r.handleSubmit(...t),["prevent"]))},[h(F,{form:r.form,rules:r.validationRules,ref:"validationRef"},{default:k(()=>[e("div",re,[e("div",oe,[e("div",se,[e("label",te,[m(l(o.$t("select_area"))+" ",1),s[19]||(s[19]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"service_location_id",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=t=>r.form.service_location_id=t)},[e("option",le,l(o.$t("select")),1),(i(!0),n(M,null,C(g.serviceLocations,t=>(i(),n("option",{key:t.id,value:t.id},l(t.name),9,ae))),128))],512),[[R,r.form.service_location_id]]),(i(!0),n(M,null,C(r.errors.service_location_id,(t,y)=>(i(),n("span",{key:y,class:"text-danger"},l(t),1))),128))])]),e("div",ie,[e("div",ne,[e("label",de,[m(l(o.$t("name")),1),s[20]||(s[20]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_name"),id:"name","onUpdate:modelValue":s[1]||(s[1]=t=>r.form.name=t)},null,8,ce),[[f,r.form.name]]),(i(!0),n(M,null,C(r.errors.name,(t,y)=>(i(),n("span",{key:y,class:"text-danger"},l(t),1))),128))])]),e("div",me,[e("div",null,[e("label",_e,[m(l(o.$t("mobile"))+" ",1),s[21]||(s[21]=e("span",{class:"text-danger"},"*",-1))]),e("div",ue,[e("button",ve,[e("img",{src:r.selectedCountry.flag,alt:"flag",height:"20",class:"country-flagimg rounded"},null,8,fe),e("span",ge,l(r.selectedCountry.dial_code),1)]),_(e("input",{type:"text",class:"form-control rounded-end flag-input","onUpdate:modelValue":s[2]||(s[2]=t=>r.form.mobile=t),placeholder:o.$t("enter_number")},null,8,he),[[f,r.form.mobile]]),e("div",be,[e("div",ye,[_(e("input",{type:"text",class:"form-control form-control-sm border search-countryList",placeholder:o.$t("search_country_name_or_country_code"),"onUpdate:modelValue":s[3]||(s[3]=t=>r.searchQuery=t)},null,8,pe),[[f,r.searchQuery]])]),e("ul",ke,[(i(!0),n(M,null,C(r.filteredCountries,t=>(i(),n("li",{key:t.id},[e("a",{href:"javascript:void(0);",class:"dropdown-item notify-item language py-2",onClick:y=>r.selectCountry(t)},[e("img",{src:t.flag,alt:"flag",class:"me-2 rounded",height:"18"},null,8,Ce),e("span",Me,l(t.name)+" "+l(t.dial_code),1)],8,we)]))),128))])])]),r.errors.mobile?(i(),n("span",Ue,l(r.errors.mobile),1)):c("",!0)])]),e("div",Ve,[e("div",xe,[e("label",Be,[m(l(o.$t("select_gender"))+" ",1),s[22]||(s[22]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"gender",class:"form-select","onUpdate:modelValue":s[4]||(s[4]=t=>r.form.gender=t)},[e("option",Se,l(o.$t("choose_gender")),1),e("option",Re,l(o.$t("male")),1),e("option",Fe,l(o.$t("female")),1),e("option",Ie,l(o.$t("others")),1)],512),[[R,r.form.gender]]),r.errors.gender?(i(),n("span",qe,l(r.errors.gender),1)):c("",!0)])]),e("div",Le,[e("div",Pe,[e("label",Ae,[m(l(o.$t("email"))+" ",1),s[23]||(s[23]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"email",class:"form-control",placeholder:o.$t("enter_email"),id:"email","onUpdate:modelValue":s[5]||(s[5]=t=>r.form.email=t)},null,8,De),[[f,r.form.email]]),r.errors.email?(i(),n("span",He,l(r.errors.email),1)):c("",!0)])]),g.driver?c("",!0):(i(),n("div",Te,[e("div",Ne,[e("label",je,[m(l(o.$t("password"))+" ",1),s[24]||(s[24]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[6]||(s[6]=t=>r.form.password=t),placeholder:o.$t("enter_password")},null,8,Oe),[[f,r.form.password]]),r.errors.password?(i(),n("span",Qe,l(r.errors.password),1)):c("",!0)])])),g.driver?c("",!0):(i(),n("div",Ee,[e("div",Ge,[e("label",Je,[m(l(o.$t("confirm_password"))+" ",1),s[25]||(s[25]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"password",class:"form-control",id:"confirm_password","onUpdate:modelValue":s[7]||(s[7]=t=>r.form.confirm_password=t),placeholder:o.$t("confirm_password")},null,8,Ke),[[f,r.form.confirm_password]]),r.errors.confirm_password?(i(),n("span",Ze,l(r.errors.confirm_password),1)):c("",!0)])])),e("div",ze,[e("div",We,[e("label",Xe,[m(l(o.$t("transport_type"))+" ",1),s[26]||(s[26]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"transport_type",class:"form-select","onUpdate:modelValue":s[8]||(s[8]=t=>r.form.transport_type=t)},[e("option",Ye,l(o.$t("select")),1),e("option",$e,l(o.$t("taxi")),1),e("option",er,l(o.$t("delivery")),1),e("option",rr,l(o.$t("both")),1)],512),[[R,r.form.transport_type]]),r.errors.transport_type?(i(),n("span",or,l(r.errors.transport_type),1)):c("",!0)])]),e("div",sr,[e("div",tr,[e("label",lr,[m(l(o.$t("vehicle_type"))+" ",1),s[27]||(s[27]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"vehicle_type",class:"form-select","onUpdate:modelValue":s[9]||(s[9]=t=>r.form.vehicle_type=t)},[e("option",ar,l(o.$t("select")),1),(i(!0),n(M,null,C(g.vehicleTypes,t=>(i(),n("option",{key:t.id,value:t.id},l(t.name),9,ir))),128))],512),[[R,r.form.vehicle_type]]),r.errors.vehicle_type?(i(),n("span",nr,l(r.errors.vehicle_type),1)):c("",!0)])]),e("div",dr,[e("div",cr,[e("label",mr,[m(l(o.$t("vehicle_make"))+" ",1),s[28]||(s[28]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_vehicle_make"),id:"vehicle_make","onUpdate:modelValue":s[10]||(s[10]=t=>r.form.vehicle_make=t)},null,8,_r),[[f,r.form.vehicle_make]]),r.errors.vehicle_make?(i(),n("span",ur,l(r.errors.vehicle_make),1)):c("",!0)])]),e("div",vr,[e("div",fr,[e("label",gr,[m(l(o.$t("vehicle_model"))+" ",1),s[29]||(s[29]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_vehicle_model"),id:"vehicle_model","onUpdate:modelValue":s[11]||(s[11]=t=>r.form.vehicle_model=t)},null,8,hr),[[f,r.form.vehicle_model]]),r.errors.vehicle_make?(i(),n("span",br,l(r.errors.vehicle_make),1)):c("",!0)])]),e("div",yr,[e("div",pr,[e("label",kr,[m(l(o.$t("vehicle_color"))+" ",1),s[30]||(s[30]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_vehicle_color"),id:"car_color","onUpdate:modelValue":s[12]||(s[12]=t=>r.form.car_color=t)},null,8,wr),[[f,r.form.car_color]]),r.errors.car_color?(i(),n("span",Cr,l(r.errors.car_color),1)):c("",!0)])]),e("div",Mr,[e("div",Ur,[e("label",Vr,[m(l(o.$t("vehicle_number"))+" ",1),s[31]||(s[31]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_vehicle_number"),id:"car_number","onUpdate:modelValue":s[13]||(s[13]=t=>r.form.car_number=t)},null,8,xr),[[f,r.form.car_number]]),r.errors.car_number?(i(),n("span",Br,l(r.errors.car_number),1)):c("",!0)])]),e("div",Sr,[h(x,{imageType:"driver",initialImageUrl:r.form.profile_picture,flexStyle:"0 0 calc(50% - 20px)",aspectRatio:"5 / 5",onImageSelected:s[14]||(s[14]=t=>r.handleImageSelected(t,"profile_picture")),onImageRemoved:s[15]||(s[15]=()=>r.handleImageRemoved("profile_picture")),id:"profilePictureInput",onChange:r.onFileChange},null,8,["initialImageUrl","onChange"]),r.errors.profile_picture?(i(),n("span",Rr,l(r.errors.profile_picture),1)):c("",!0)]),e("div",Fr,[e("div",Ir,[e("button",{type:"submit",class:"btn btn-primary",disabled:r.isButtonDisabled},l(g.driver?o.$t("update"):o.$t("save")),9,qr)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[r.successMessage?(i(),n("div",Lr,[e("div",Pr,[s[32]||(s[32]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[33]||(s[33]=e("strong",null,"Success",-1)),m(" - "+l(r.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[17]||(s[17]=(...t)=>r.dismissMessage&&r.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):c("",!0),r.alertMessage?(i(),n("div",Ar,[e("div",Dr,[s[34]||(s[34]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[35]||(s[35]=e("strong",null,"Alert",-1)),m(" - "+l(r.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[18]||(s[18]=(...t)=>r.dismissMessage&&r.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):c("",!0)])]),_:1})}const Xr=N(ee,[["render",Hr]]);export{Xr as default};
