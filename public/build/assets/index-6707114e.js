import{_ as $,Z as X,O as ee,P as te,z as se,C as ae,r as f,T as oe,Q as le,R as ne,g as d,S as ie,o as u,x as A,w as n,U as y,a as R,N as q,k as i,l as t,J as c,q as w,K as re,i as p,L as Y,F as j,y as v,B as k,p as ce,n as I,W as G}from"./vendor-ddfbd976.js";import{L as de}from"./main-306a5ea6.js";import{P as ue}from"./page-header-2dc95532.js";import{P as fe}from"./Pagination-f095ae3c.js";import{s as me}from"./searchbar-3acbc236.js";import{u as ge,l as pe}from"./footer-e648049d.js";import{_ as _e}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const ve={data(){return{rightOffcanvas:!1}},components:{Layout:de,PageHeader:ue,Head:X,Pagination:fe,Multiselect:ee,flatPickr:te,Link:se,searchbar:me},props:{successMessage:String,alertMessage:String,app_for:String,airport:{type:Object,required:!0}},setup(a){const{t:e}=ae(),B=f(""),s=oe({status:null,service_location_id:null,limit:10}),h=f([]),L=f({}),O=f(a.successMessage||""),C=f(a.alertMessage||""),b=f(!1),M=f(!1),m=f(null),T=f({}),{selectedLocation:P}=ge(),F=()=>{O.value="",C.value=""},N=async(l,r)=>{y.fire({title:e("are_you_sure"),text:e("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:e("yes"),cancelButtonText:e("cancel")}).then(async _=>{if(_.isConfirmed)try{await R.post(`/airport/update-status/${l}`,{id:l,status:r});const H=h.value.findIndex(Z=>Z.id===l);H!==-1&&(h.value[H].active=r),y.fire(e("changed"),e("status_updated_successfully"),"success")}catch(H){console.error(e("error_updating_status"),H),y.fire(e("error"),e("failed_to_update_status"),"error")}})},S=f(!1),E=()=>{g(),M.value=!0,S.value=!1},U=()=>{s.reset(),g(),S.value=!1},z=()=>{b.value=!1},V=async l=>{try{await R.delete(`/airport/delete/${l}`);const r=h.value.findIndex(_=>_.id===l);r!==-1&&h.value.splice(r,1),b.value=!1,y.fire(e("success"),e("airport_deleted_successfully"),"success")}catch(r){r.response&&r.response.status==403&&(C.value=r.response.data.alertMessage,setTimeout(()=>{C.value=""},5e3)),y.fire(e("error"),e("failed_to_delete_airport"),"error")}},x=async l=>{y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed)try{await V(l)}catch(_){console.error(e("error_deleting_data"),_),y.fire(e("error"),e("failed_to_delete_the_data"),"error")}})},o=async l=>{B.value=l,g()},g=async(l=1)=>{try{const r=s.data();r.search=B.value,r.page=l;const _=await R.get("/airport/fetch",{params:r});h.value=_.data.results,L.value=_.data.paginator,W(L.value.total),M.value=!1,s.status!==""&&(r.status=s.status)}catch(r){console.error(e("error_fetching_airport"),r)}},D=async l=>{localStorage.setItem("airport/fetch",l),g(l)};le(P,l=>{s.service_location_id=l,g()});const J=async l=>{q.get(`/airport/edit/${l.id}`)},K=async l=>{q.get(`/airport/surge/${l.id}`)},Q=async l=>{q.get(`/airport/map/${l.id}`)},W=()=>{T.value=[10,25,50,100,200,500]};return{results:h,deleteItemId:m,successMessage:O,alertMessage:C,filterData:E,deleteModal:x,closeModal:z,deleteData:V,dismissMessage:F,searchTerm:B,paginator:L,modalFilter:M,fetchSearch:o,clearFilter:U,fetchDatas:g,filter:s,selectedLocation:P,handlePageChanged:D,editData:J,mapData:Q,toggleActiveStatus:N,surgeData:K,rightOffcanvas:S,paginatorOption:T,changeEntriesPerPage:()=>{g()}}},computed:{...pe,...ne(["permissions"])},mounted(){this.filter.service_location_id=this.selectedLocation,this.fetchDatas();const a=localStorage.getItem("airport/fetch");a?this.handlePageChanged(Number(a)):this.handlePageChanged(1)}},he={class:"d-flex align-items-center mt-3"},be={class:"me-2 text-muted"},ye=["value"],ke={class:"ms-2 text-muted"},Ce={class:"d-flex align-items-center gap-2"},we={class:"table"},Be={class:"table align-middle position-relative table-nowrap"},Me={class:"table-active"},Pe={scope:"col"},Se={scope:"col"},xe={scope:"col"},De={key:0},Ae={class:"d-flex"},Le={class:"flex-grow-1"},Oe={key:0},Te=["onClick","id","checked"],Ve={key:1},He={colspan:"4",class:"text-center"},Ie={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Fe={class:"alert-content"},Ne={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ee={class:"alert-content"},Ue={class:"offcanvas-body"},ze={class:"mb-4"},Re={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},qe={class:"form-check form-check-inline"},Ye={class:"form-check-label",for:"statusActive"},je={class:"form-check form-check-inline"},Ge={class:"form-check-label",for:"statusInactive"},Je={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function Ke(a,e,B,s,h,L){const O=d("Head"),C=d("PageHeader"),b=d("BCol"),M=d("searchbar"),m=d("BButton"),T=d("Link"),P=d("BRow"),F=d("BCardHeader"),N=d("BCardBody"),S=d("BCard"),E=d("BForm"),U=d("BOffcanvas"),z=d("Pagination"),V=d("Layout"),x=ie("b-tooltip");return u(),A(V,null,{default:n(()=>[i(O,{title:"Airport"}),i(C,{title:a.$t("airport"),pageTitle:a.$t("airport")},null,8,["title","pageTitle"]),i(P,null,{default:n(()=>[i(b,{lg:"12"},{default:n(()=>[i(S,{"no-body":"",id:"tasksList"},{default:n(()=>[i(F,{class:"border-0"},{default:n(()=>[i(P,{class:"g-2"},{default:n(()=>[i(b,{md:"3"},{default:n(()=>[t("div",he,[t("label",be,c(a.$t("show")),1),w(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.filter.limit=o),onChange:e[1]||(e[1]=(...o)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(u(!0),p(j,null,Y(s.paginatorOption,o=>(u(),p("option",{key:o,value:o},c(o),9,ye))),128))],544),[[re,s.filter.limit]]),t("label",ke,c(a.$t("entries")),1)])]),_:1}),i(b,{md:"3"}),i(b,{md:"auto",class:"ms-auto"},{default:n(()=>[t("div",Ce,[i(M,{onSearch:s.fetchSearch},null,8,["onSearch"]),i(m,{variant:"danger",onClick:e[2]||(e[2]=o=>s.rightOffcanvas=!0)},{default:n(()=>[e[8]||(e[8]=t("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),v(" "+c(a.$t("filters")),1)]),_:1,__:[8]}),a.permissions.includes("Add-Airport")?(u(),A(T,{key:0,href:"/airport/create"},{default:n(()=>[i(m,{variant:"primary",class:"float-end",disabled:B.app_for==="demo"},{default:n(()=>[e[9]||(e[9]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),v(" "+c(a.$t("add_airport")),1)]),_:1,__:[9]},8,["disabled"])]),_:1})):k("",!0)])]),_:1})]),_:1})]),_:1}),i(N,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[t("div",we,[t("table",Be,[t("thead",Me,[t("tr",null,[t("th",Pe,c(a.$t("name")),1),t("th",Se,c(a.$t("status")),1),t("th",xe,c(a.$t("action")),1)])]),s.results.length>0?(u(),p("tbody",De,[(u(!0),p(j,null,Y(s.results,(o,g)=>(u(),p("tr",{key:g},[t("td",null,[t("div",Ae,[t("div",Le,c(o.name),1)])]),a.permissions.includes("Toggle-Airport")?(u(),p("td",Oe,[t("div",{class:ce({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.active})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:I(D=>s.toggleActiveStatus(o.id,!o.active),["prevent"]),id:"status_"+o.id,checked:o.active},null,8,Te)],2)])):k("",!0),t("td",null,[a.permissions.includes("Edit-airport")?w((u(),A(m,{key:0,class:"btn btn-soft-warning btn-sm m-2",onClick:I(D=>s.editData(o),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("edit")},{default:n(()=>e[10]||(e[10]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[10]},1032,["onClick","title"])),[[x,void 0,void 0,{hover:!0}]]):k("",!0),a.permissions.includes("Map-view-Airport")?w((u(),A(m,{key:1,class:"btn btn-soft-info btn-sm m-2",size:"sm",type:"button",onClick:I(D=>s.mapData(o),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("airport_map_view")},{default:n(()=>e[11]||(e[11]=[t("i",{class:"ri-earth-line bx-xs"},null,-1)])),_:2,__:[11]},1032,["onClick","title"])),[[x,void 0,void 0,{hover:!0}]]):k("",!0),a.permissions.includes("Delete-Airport")?w((u(),A(m,{key:2,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:I(D=>s.deleteModal(o.id),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("delete")},{default:n(()=>e[12]||(e[12]=[t("i",{class:"bx bx-trash bx-xs"},null,-1)])),_:2,__:[12]},1032,["onClick","title"])),[[x,void 0,void 0,{hover:!0}]]):k("",!0)])]))),128))])):(u(),p("tbody",Ve,[t("tr",null,[t("td",He,[e[13]||(e[13]=t("img",{src:_e,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,c(a.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[s.successMessage?(u(),p("div",Ie,[t("div",Fe,[e[14]||(e[14]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[15]||(e[15]=v()),e[16]||(e[16]=t("strong",null,"Success",-1)),v(" - "+c(s.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[3]||(e[3]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):k("",!0),s.alertMessage?(u(),p("div",Ne,[t("div",Ee,[e[17]||(e[17]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[18]||(e[18]=v()),e[19]||(e[19]=t("strong",null,"Alert",-1)),v(" - "+c(s.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[4]||(e[4]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):k("",!0)]),i(U,{modelValue:s.rightOffcanvas,"onUpdate:modelValue":e[7]||(e[7]=o=>s.rightOffcanvas=o),placement:"end",title:a.$t("airport_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:n(()=>[i(E,null,{default:n(()=>[t("div",Ue,[t("div",ze,[t("label",Re,c(a.$t("status")),1),t("div",null,[t("div",qe,[w(t("input",{class:"form-check-input",type:"radio",name:"status",id:"statusActive","onUpdate:modelValue":e[5]||(e[5]=o=>s.filter.status=o),value:"1"},null,512),[[G,s.filter.status]]),t("label",Ye,c(a.$t("active")),1)]),t("div",je,[w(t("input",{class:"form-check-input",type:"radio",name:"status",id:"statusInactive","onUpdate:modelValue":e[6]||(e[6]=o=>s.filter.status=o),value:"0"},null,512),[[G,s.filter.status]]),t("label",Ge,c(a.$t("inactive")),1)])])])]),t("div",Je,[i(m,{variant:"light",class:"w-100",onClick:s.clearFilter},{default:n(()=>[v(c(a.$t("clear_filter")),1)]),_:1},8,["onClick"]),i(m,{type:"submit",variant:"success",class:"w-100",onClick:s.filterData},{default:n(()=>[v(c(a.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),i(z,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const ot=$(ve,[["render",Ke]]);export{ot as default};
