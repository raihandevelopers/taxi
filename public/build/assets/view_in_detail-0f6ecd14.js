import{_ as R,Z as Y,O as z,P as J,z as K,r as g,T as Q,Q as Z,a2 as j,a as T,g as u,o as r,x as S,w as m,U as L,k as p,l as e,J as l,i,L as q,F as E,B as D,y as _,q as G,K as W,n as V}from"./vendor-ddfbd976.js";import{L as X}from"./main-306a5ea6.js";import{P as ee}from"./page-header-2dc95532.js";import{P as te}from"./Pagination-f095ae3c.js";import{s as se}from"./search-2c17aadd.js";import{s as ae}from"./searchbar-3acbc236.js";import{_ as oe}from"./search-file-ab3e1046.js";import"./footer-e648049d.js";import"./app-042fb454.js";const ne={data(){return{rightOffcanvas:!1}},components:{Layout:X,PageHeader:ee,Head:Y,Pagination:te,Multiselect:z,flatPickr:J,Link:K,search:se,searchbar:ae},props:{successMessage:String,alertMessage:String,app_for:String,walletBalance:Number,bankDetails:Array,bank_infos:Array,owner_id:Number,formattedBankInfos:Array},setup(o){const s=o.formattedBankInfos,y=g(""),n=Q({all:"",locked:"",limit:10}),k=g([]),M=g({}),B=g(!1),b=g(!1),F=g(null),C=g({}),w=g(o.successMessage||""),x=g(o.alertMessage||""),H=()=>{w.value="",x.value=""},N=()=>{b.value=!0},A=()=>{n.reset(),v(),b.value=!1},I=()=>{B.value=!1},a=async d=>{try{await T.delete(`/withdrawal-request-owners/delete/${d}`);const c=k.value.findIndex(f=>f.id===d);c!==-1&&k.value.splice(c,1),B.value=!1,L.fire(t("success"),"Service Location deleted successfully","success")}catch{L.fire(t("error"),"Failed to delete Service Location","error")}},P=async d=>{L.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async c=>{if(c.isConfirmed)try{await a(d)}catch(f){console.error("Error deleting data:",f),L.fire("Error","Failed to delete the data","error")}})},h=d=>o.app_for&&o.app_for=="demo"?"***********":d.mobile_number;Z(y,j.debounce(function(d){v(y.value)},300));const v=async(d=1)=>{try{const c=n.data();c.search=y.value,c.page=d;const f=await T.get(`/withdrawal-request-owners/amounts/${o.owner_id}`,{params:c});k.value=f.data.results,M.value=f.data.paginator,U(M.value.total),b.value=!1}catch(c){console.error("Error fetching withdrawal-request-owners:",c)}},$=async d=>{v(d)},O=async(d,c)=>{try{(await T.post("/withdrawal-request-owners/update-status",{id:d.id,status:c})).data.successMessage,v()}catch(f){console.error("Error updating payment status:",f),alert("Failed to update payment status. Please try again.")}},U=()=>{C.value=[10,25,50,100,200,500]};return{results:k,modalShow:B,deleteItemId:F,successMessage:w,alertMessage:x,filterData:N,deleteModal:P,closeModal:I,deleteData:a,mobileFromUser:h,dismissMessage:H,searchTerm:y,paginator:M,modalFilter:b,clearFilter:A,fetchDatas:v,filter:n,handlePageChanged:$,updatePaymentStatus:O,formattedBankInfos:s,paginatorOption:C,changeEntriesPerPage:()=>{v()}}},mounted(){this.fetchDatas()}},le={class:"row"},re={class:"col-sm-3"},ie={class:"card border card-border-primary"},de={class:"card-body"},ce={class:"row mt-5"},ue={class:"col-12"},me={style:{"text-align":"end"}},_e={class:"card border card-border-primary"},fe={class:"card-body"},ge={class:"mb-3"},pe={key:0},ve={key:0,class:"ri-checkbox-circle-fill text-success"},he={class:"ms-2"},ye={key:1},be={class:"d-flex align-items-center mt-3"},we={class:"me-2 text-muted"},ke=["value"],Be={class:"ms-2 text-muted"},Ce={class:"table-responsive mt-4"},Pe={class:"table align-middle position-relative table-nowrap"},Me={class:"table-active"},xe={scope:"col"},Se={scope:"col"},Le={scope:"col"},qe={scope:"col"},Ee={scope:"col"},De={key:0},Fe={class:"dropdown"},He={key:0,class:"dropdown-menu dropdown-menu-end"},Ne=["onClick"],Ae=["onClick"],Ie={key:1},Te={colspan:"7",class:"text-center"},Ve={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},$e={class:"alert-content"},Oe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ue={class:"alert-content"};function Re(o,s,y,n,k,M){const B=u("Head"),b=u("PageHeader"),F=u("BCardHeader"),C=u("BCol"),w=u("BBadge"),x=u("BCardBody"),H=u("BCard"),N=u("BRow"),A=u("Pagination"),I=u("Layout");return r(),S(I,null,{default:m(()=>[p(B,{title:"View Details"}),p(b,{title:o.$t("view_details"),pageTitle:o.$t("view_details"),pageLink:"/withdrawal-balance-drivers"},null,8,["title","pageTitle"]),p(N,null,{default:m(()=>[p(C,{lg:"12"},{default:m(()=>[p(H,{"no-body":"",id:"tasksList"},{default:m(()=>[p(F,{class:"border-0"},{default:m(()=>[e("div",le,[e("div",re,[e("div",ie,[e("div",de,[e("h5",null,l(o.$t("balance_amount")),1),e("div",ce,[s[4]||(s[4]=e("div",{class:"col-6"},[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-success-subtle rounded-circle fs-2"},[e("i",{class:"bx bx-money text-success icon-lg"})])])],-1)),e("div",ue,[e("h5",me,l(y.walletBalance),1)])])])])]),(r(!0),i(E,null,q(n.formattedBankInfos,(a,P)=>(r(),i("div",{key:P,class:"col-sm-12"},[e("div",_e,[e("div",fe,[e("h5",ge,l(o.$t(a.method_name)),1),a.fields.length>0?(r(),i("div",pe,[(r(!0),i(E,null,q(a.fields,(h,v)=>(r(),i("div",{class:"d-flex",key:v},[h.value?(r(),i("i",ve)):D("",!0),e("h6",he,[_(l(o.$t(h.field_name))+": ",1),e("span",null,l(h.value||o.$t("No data available")),1)])]))),128))])):(r(),i("div",ye,[e("p",null,l(o.$t("No fields available for this method")),1)]))])])]))),128))])]),_:1}),p(x,{class:"border border-dashed border-end-0 border-start-0"},{default:m(()=>[e("h5",null,l(o.$t("withdrawal_request_history")),1),p(C,{md:"3",class:"mb-3"},{default:m(()=>[e("div",be,[e("label",we,l(o.$t("show")),1),G(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>n.filter.limit=a),onChange:s[1]||(s[1]=(...a)=>n.changeEntriesPerPage&&n.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(r(!0),i(E,null,q(n.paginatorOption,a=>(r(),i("option",{key:a,value:a},l(a),9,ke))),128))],544),[[W,n.filter.limit]]),e("label",Be,l(o.$t("entries")),1)])]),_:1}),e("div",Ce,[e("table",Pe,[e("thead",Me,[e("tr",null,[e("th",xe,l(o.$t("date")),1),e("th",Se,l(o.$t("name")),1),e("th",Le,l(o.$t("amount")),1),e("th",qe,l(o.$t("status")),1),e("th",Ee,l(o.$t("action")),1)])]),n.results.length>0?(r(),i("tbody",De,[(r(!0),i(E,null,q(n.results,(a,P)=>(r(),i("tr",{key:P},[e("td",null,l(a.created_at),1),e("td",null,l(a.owner_name),1),e("td",null,l(a.requested_amount),1),e("td",null,[a.payment_status=="approved"?(r(),S(w,{key:0,variant:"success",class:"text-uppercase"},{default:m(()=>[_(l(o.$t("approved")),1)]),_:1})):a.payment_status=="requested"?(r(),S(w,{key:1,variant:"warning",class:"text-uppercase"},{default:m(()=>[_(l(o.$t("requested")),1)]),_:1})):(r(),S(w,{key:2,variant:"danger",class:"text-uppercase"},{default:m(()=>[_(l(o.$t("declined")),1)]),_:1}))]),e("td",null,[e("div",Fe,[s[7]||(s[7]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),a.payment_status==="requested"?(r(),i("div",He,[e("a",{class:"dropdown-item",href:"#",onClick:V(h=>n.updatePaymentStatus(a,"approved"),["prevent"])},s[5]||(s[5]=[e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1),_("Approve ")]),8,Ne),e("a",{class:"dropdown-item",href:"#",onClick:V(h=>n.updatePaymentStatus(a,"declined"),["prevent"])},s[6]||(s[6]=[e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1),_("Decline ")]),8,Ae)])):D("",!0)])])]))),128))])):(r(),i("tbody",Ie,[e("tr",null,[e("td",Te,[s[8]||(s[8]=e("img",{src:oe,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,l(o.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[n.successMessage?(r(),i("div",Ve,[e("div",$e,[s[9]||(s[9]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[10]||(s[10]=_()),s[11]||(s[11]=e("strong",null,"Success",-1)),_(" - "+l(n.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[2]||(s[2]=(...a)=>n.dismissMessage&&n.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):D("",!0),n.alertMessage?(r(),i("div",Oe,[e("div",Ue,[s[12]||(s[12]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[13]||(s[13]=_()),s[14]||(s[14]=e("strong",null,"Alert",-1)),_(" - "+l(n.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[3]||(s[3]=(...a)=>n.dismissMessage&&n.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):D("",!0)]),p(A,{paginator:n.paginator,onPageChanged:n.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const et=R(ne,[["render",Re]]);export{et as default};
