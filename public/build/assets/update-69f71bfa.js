import{_ as W,Z as X,O as h,r as u,T as j,Q as $,a2 as ee,a as P,g as m,o as a,x as se,w as v,U as H,k as c,l as s,i as n,L as S,J as f,F as R,y,B as w,q as D,M as q,p as O,n as te,K as Y}from"./vendor-ddfbd976.js";import{L as oe}from"./main-306a5ea6.js";import{P as le}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import"./footer-e648049d.js";import"./app-042fb454.js";const ae={components:{Layout:oe,PageHeader:le,Head:X,Pagination:re,Multiselect:h},props:{successMessage:String,alertMessage:String},setup(g){const e=u(""),p=u(null),t=j({name:"",description:""}),E=j({all:"",locked:""}),b=u([]),F=u({}),M=u(!1),_=u(!1),C=u(!1),L=u(null),B=u(g.successMessage||""),U=u(g.alertMessage||""),V=()=>{B.value="",U.value=""},T=()=>{t.reset(),p.value=null,_.value=!0},I=()=>{C.value=!0},o=r=>{p.value=r,t.name=r.name,t.description=r.description,t.clearErrors(),_.value=!0},d=()=>{t.reset(),_.value=!1,p.value=null},z=()=>{E.reset(),A(),C.value=!1},K=()=>{const{name:r,description:l}=t,i={},x={name:{test:()=>!r,message:"Role name is required"},description:{test:()=>!l,message:"Role description is required"}};return Object.keys(x).forEach(k=>{x[k].test()&&(i[k]=x[k].message)}),i},J=async()=>{const r=K();if(Object.keys(r).length===0)try{let l;if(p.value?l=await P.put(`/roles/update/${p.value.id}`,t.data()):l=await P.post("/roles",t.data()),l.status===200||l.status===201){B.value=l.data.successMessage;const i=l.data.roles;if(p.value){const x=b.value.findIndex(k=>k.id===p.value.id);x!==-1&&(b.value[x]=i)}else b.value.push(i);_.value=!1,t.reset()}else console.error("Unexpected response status:",l.status)}catch(l){if(console.error("Error handling form submission:",l),l.response&&l.response.status===422){const i=l.response.data.errors;t.errors=i}else console.error("An unexpected error occurred:",l)}else t.errors=r},Q=r=>{t.errors[r]=""},Z=()=>{M.value=!1},N=async r=>{try{await P.delete(`/roles/delete/${r}`);const l=b.value.findIndex(i=>i.id===r);l!==-1&&b.value.splice(l,1),M.value=!1,H.fire("Success","Role deleted successfully","success")}catch(l){console.error("Error deleting role:",l),H.fire("Error","Failed to delete role","error")}},G=async r=>{H.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await N(r)}catch(i){console.error("Error deleting role:",i),H.fire("Error","Failed to delete the role","error")}})};$(e,ee.debounce(function(r){A(e.value)},300));const A=async(r=1)=>{try{const l=E.data();l.search=e.value,l.page=r;const i=await P.get("/roles1/list",{params:l});b.value=i.data.roles,F.value=i.data.paginator,C.value=!1}catch(l){console.error("Error fetching roles:",l)}};return{form:t,roles:b,modalShow:M,modalForm:_,deleteItemId:L,selectedRole:p,successMessage:B,alertMessage:U,createRole:T,filterRole:I,editRole:o,cancelEdit:d,handleSubmit:J,deleteModal:G,closeModal:Z,deleteRole:N,dismissMessage:V,hideError:Q,searchTerm:e,paginator:F,modalFilter:C,clearFilter:z,fetchRoles:A,filter:E,handlePageChanged:async r=>{A(r)}}},mounted(){this.fetchRoles()}},ne={action:"javascript:void(0);"},ie={class:"row"},de={class:"col-sm-6"},ce={class:"mb-3"},ue={class:"col-sm-6"},me={class:"mb-3"},fe={class:"col-sm-6"},pe={class:"mb-3"},ve={class:"col-sm-6"},ge={class:"mb-3"},be={class:"col-sm-6"},ye={class:"mb-3"},_e={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Ce={class:"alert-content"},xe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Me={class:"alert-content"},Be={class:"form-group mt-3"},ke={key:0,class:"text-danger"},Se={class:"form-group mt-3"},Re={key:0,class:"text-danger"},we={type:"submit",class:"btn btn-success m-2 float-end"},Ee={class:"input-group"};function Fe(g,e,p,t,E,b){const F=m("Head"),M=m("PageHeader"),_=m("BCardHeader"),C=m("BCardBody"),L=m("BCard"),B=m("BCol"),U=m("BRow"),V=m("BModal"),T=m("BButton"),I=m("Layout");return a(),se(I,null,{default:v(()=>[c(F,{title:"Cancellation"}),c(M,{title:"Update",pageTitle:"Cancellation"}),c(U,null,{default:v(()=>[c(B,{lg:"12"},{default:v(()=>[c(L,{"no-body":"",id:"tasksList"},{default:v(()=>[c(_,{class:"border-0"}),c(C,{class:"border border-dashed border-end-0 border-start-0"},{default:v(()=>[s("form",ne,[s("div",ie,[s("div",de,[s("div",ce,[e[13]||(e[13]=s("label",{for:"select_user_type",class:"form-label"},"User Type",-1)),e[14]||(e[14]=s("select",{id:"select_user_type",class:"form-select"},[s("option",{disabled:"",value:""},"Select"),s("option",{value:"user"},"User"),s("option",{value:"driver"},"Driver")],-1)),(a(!0),n(R,null,S(g.errors.country,(o,d)=>(a(),n("span",{key:d,class:"text-danger"},f(o),1))),128))])]),s("div",ue,[s("div",me,[e[15]||(e[15]=s("label",{for:"select_payment_type",class:"form-label"},"Payment Type",-1)),e[16]||(e[16]=s("select",{id:"select_payment_type",class:"form-select"},[s("option",{disabled:"",value:""},"Select"),s("option",{value:"free"},"Free"),s("option",{value:"compensate"},"Compensate")],-1)),(a(!0),n(R,null,S(g.errors.country,(o,d)=>(a(),n("span",{key:d,class:"text-danger"},f(o),1))),128))])]),s("div",fe,[s("div",pe,[e[17]||(e[17]=s("label",{for:"select_arrival_status",class:"form-label"},"arrival Status",-1)),e[18]||(e[18]=s("select",{id:"select_arrival_status",class:"form-select"},[s("option",{disabled:"",value:""},"Select"),s("option",{value:"before_arrival"},"Before Arrival"),s("option",{value:"after_arrival"},"After Arrival")],-1)),(a(!0),n(R,null,S(g.errors.country,(o,d)=>(a(),n("span",{key:d,class:"text-danger"},f(o),1))),128))])]),s("div",ve,[s("div",ge,[e[19]||(e[19]=s("label",{for:"select_transport_type",class:"form-label"},"Transport Type",-1)),e[20]||(e[20]=s("select",{id:"select_transport_type",class:"form-select"},[s("option",{disabled:"",value:""},"Select"),s("option",{value:"taxi"},"Taxi"),s("option",{value:"delivery"},"Delivery"),s("option",{value:"all"},"All")],-1)),(a(!0),n(R,null,S(g.errors.country,(o,d)=>(a(),n("span",{key:d,class:"text-danger"},f(o),1))),128))])]),s("div",be,[s("div",ye,[e[21]||(e[21]=s("label",{for:"reason",class:"form-label"},"Reason",-1)),e[22]||(e[22]=s("input",{type:"text",class:"form-control",placeholder:"Enter Reason",id:"reason"},null,-1)),(a(!0),n(R,null,S(g.errors.name,(o,d)=>(a(),n("span",{key:d,class:"text-danger"},f(o),1))),128))])]),e[23]||(e[23]=s("div",{class:"col-lg-12"},[s("div",{class:"text-end"},[s("button",{type:"submit",class:"btn btn-primary"},"Update")])],-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",null,[t.successMessage?(a(),n("div",_e,[s("div",Ce,[e[24]||(e[24]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[25]||(e[25]=y()),e[26]||(e[26]=s("strong",null,"Success",-1)),y(" - "+f(t.successMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-success",onClick:e[0]||(e[0]=(...o)=>t.dismissMessage&&t.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):w("",!0),t.alertMessage?(a(),n("div",xe,[s("div",Me,[e[27]||(e[27]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[28]||(e[28]=y()),e[29]||(e[29]=s("strong",null,"Alert",-1)),y(" - "+f(t.alertMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[1]||(e[1]=(...o)=>t.dismissMessage&&t.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):w("",!0)]),c(V,{modelValue:t.modalForm,"onUpdate:modelValue":e[9]||(e[9]=o=>t.modalForm=o),"hide-footer":"",title:t.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:v(()=>[s("form",{onSubmit:e[7]||(e[7]=te((...o)=>t.handleSubmit&&t.handleSubmit(...o),["prevent"])),onKeydown:e[8]||(e[8]=(...o)=>t.hideError&&t.hideError(...o))},[s("div",Be,[e[30]||(e[30]=s("label",{for:"name",class:"form-label"},[y("Role Name"),s("span",{class:"text-danger"},"*")],-1)),D(s("input",{type:"text",id:"name","onUpdate:modelValue":e[2]||(e[2]=o=>t.form.name=o),class:O(["form-control",{"is-invalid":t.form.errors.name}]),onFocus:e[3]||(e[3]=o=>t.hideError("name"))},null,34),[[q,t.form.name]]),t.form.errors.name?(a(),n("div",ke,f(t.form.errors.name),1)):w("",!0)]),s("div",Se,[e[31]||(e[31]=s("label",{for:"description",class:"form-label"},[y("description"),s("span",{class:"text-danger"},"*")],-1)),D(s("input",{type:"text",id:"description","onUpdate:modelValue":e[4]||(e[4]=o=>t.form.description=o),class:O(["form-control",{"is-invalid":t.form.errors.description}]),onFocus:e[5]||(e[5]=o=>t.hideError("description"))},null,34),[[q,t.form.description]]),t.form.errors.description?(a(),n("div",Re,f(t.form.errors.description),1)):w("",!0)]),s("button",we,f(t.selectedRole?"Update":"Save"),1),t.selectedRole?(a(),n("button",{key:0,type:"button",onClick:e[6]||(e[6]=(...o)=>t.cancelEdit&&t.cancelEdit(...o)),class:"btn btn-secondary m-2 float-end"},"Cancel")):w("",!0)],32)]),_:1},8,["modelValue","title"]),c(V,{modelValue:t.modalFilter,"onUpdate:modelValue":e[12]||(e[12]=o=>t.modalFilter=o),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:v(()=>[s("form",null,[s("div",Ee,[D(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[10]||(e[10]=o=>t.filter.all=o)},e[32]||(e[32]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"1"},"Yes",-1),s("option",{value:"0"},"No",-1)]),512),[[Y,t.filter.all]]),D(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[11]||(e[11]=o=>t.filter.locked=o)},e[33]||(e[33]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"0"},"Inactive",-1),s("option",{value:"1"},"Active",-1)]),512),[[Y,t.filter.locked]])]),c(T,{variant:"primary",class:"float-end",onClick:t.fetchRoles},{default:v(()=>e[34]||(e[34]=[y(" Apply")])),_:1,__:[34]},8,["onClick"]),c(T,{variant:"outline-primary",class:"float-end mx-2",onClick:t.clearFilter},{default:v(()=>e[35]||(e[35]=[y("Clear")])),_:1,__:[35]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const Le=W(ae,[["render",Fe]]);export{Le as default};
