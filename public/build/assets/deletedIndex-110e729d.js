import{_ as X,Z as ee,O as te,P as se,z as oe,C as le,r as w,T as ne,R as ie,g as p,S as ae,o as a,x as z,w as _,U as v,a as D,N as j,k as g,l as e,q as R,i as r,p as M,J as n,K as re,L as H,F as A,n as y,B as b,y as h}from"./vendor-ddfbd976.js";import{L as de}from"./main-306a5ea6.js";import{P as ce}from"./page-header-2dc95532.js";import{P as ue}from"./Pagination-f095ae3c.js";import{s as me}from"./searchbar-3acbc236.js";import{l as fe}from"./footer-e648049d.js";import{_ as q}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const ge={data(){return{rightOffcanvas:!1,SearchQuery:"",isListView:!0,copiedIndex:null}},created(){const s=localStorage.getItem("deletedUserViewMode");s&&(this.isListView=s==="list")},methods:{toggleView(s){this.isListView=s==="list",localStorage.setItem("deletedUserViewMode",s)},getStarIcons(s){let t=[],x=Math.floor(s),l=s%1>=.5,d=5-x-(l?1:0);for(let m=0;m<x;m++)t.push("ri-star-s-fill text-warning fs-16");l&&t.push("ri-star-half-s-fill text-warning fs-16");for(let m=0;m<d;m++)t.push("ri-star-line text-muted");return t},copyText(s,t){navigator.clipboard.writeText(s).then(()=>{this.copiedIndex=t,setTimeout(()=>{this.copiedIndex=null},2e3)})}},components:{Layout:de,PageHeader:ce,Head:ee,Pagination:ue,Multiselect:te,flatPickr:se,Link:oe,searchbar:me},props:{successMessage:String,alertMessage:String,vehicleTypes:{type:Object,required:!0},results:{type:Array,required:!0}},setup(s){const{t}=le(),x=w(""),l=ne({transport_type:null,dispatch_type:null,status:null,limit:10}),d=w([]),m=w({}),P=w(!1),S=w(!1),C=w(null),L=w({}),I=w(s.successMessage||""),T=w(s.alertMessage||""),E=()=>{I.value="",T.value=""},U=async(i,c)=>{v.fire({title:t("are_you_sure"),text:t("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:t("yes"),cancelButtonText:t("cancel")}).then(async f=>{if(f.isConfirmed)try{await D.post("/users/update-status",{id:i,status:c});const B=d.value.findIndex(W=>W.id===i);B!==-1&&(d.value[B].active=c),v.fire(t("changed"),t("status_updated_successfully"),"success")}catch(B){console.error(t("error_updating_status"),B),v.fire(t("error"),t("failed_to_update_status"),"error")}})},N=()=>{S.value=!0},O=()=>{l.reset(),V()},F=()=>{P.value=!1},o=async i=>{try{await D.delete(`/users/delete/${i}`);const c=d.value.findIndex(f=>f.id===i);c!==-1&&d.value.splice(c,1),P.value=!1,v.fire(t("success"),t("users_deleted_successfully"),"success")}catch{v.fire(t("error"),t("failed_to_delete_users"),"error")}},k=async i=>{v.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async c=>{if(c.isConfirmed)try{await o(i)}catch(f){console.error(t("error_deleting_data"),f),v.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},u=i=>s.app_for&&s.app_for=="demo"?"***********":i.mobile_number,Y=i=>s.app_for&&s.app_for=="demo"?"***********":i.email,$=async i=>{x.value=i,V()},V=async(i=1)=>{try{const c=l.data();c.search=x.value,c.page=i;const f=await D.get("/users/deletedList",{params:c});d.value=f.data.results,m.value=f.data.paginator,Z(m.value.total),S.value=!1}catch(c){console.error(t("error_fetching_users"),c)}},G=async i=>{localStorage.setItem("deletedusers/list",i),V(i)},J=async i=>{j.get(`/users/edit/${i.id}`)},K=async i=>{j.get(`/users/view-profile/${i.id}`)},Q=async i=>{if(!i){console.error("Invalid user data:",i);return}v.fire({title:"Are you sure?",text:"Do you want to restore this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, restore it!"}).then(async c=>{if(c.isConfirmed)try{const f=await D.patch(`/users/restore/${i}`);d.value=d.value.filter(B=>B.id!==i),v.fire("Restored!",f.data.message,"success")}catch(f){console.error("Error restoring user:",f),v.fire("Error!","Failed to restore user.","error")}})},Z=()=>{L.value=[10,25,50,100,200,500]};return{results:d,modalShow:P,deleteItemId:C,successMessage:I,alertMessage:T,filterData:N,deleteModal:k,closeModal:F,deleteData:o,dismissMessage:E,searchTerm:x,fetchSearch:$,paginator:m,modalFilter:S,mobileFromUser:u,emailFromUser:Y,clearFilter:O,fetchDatas:V,filter:l,handlePageChanged:G,toggleActiveStatus:U,editData:J,viewProfile:K,restoreUser:Q,paginatorOption:L,changeEntriesPerPage:()=>{V()}}},computed:{...fe,...ie(["permissions"])},mounted(){this.fetchDatas();const s=localStorage.getItem("deletedusers/list");s?this.handlePageChanged(Number(s)):this.handlePageChanged(1)}},_e={class:"d-flex align-items-center"},he={class:"toggle-buttons mt-3 me-4"},pe=["title"],ve=["title"],be={class:"d-flex align-items-center mt-3"},we={class:"me-2 text-muted"},ye=["value"],xe={class:"ms-2 text-muted"},ke={class:"table-responsive"},Ce={class:"table align-middle position-relative table-nowrap"},Be={class:"table-active"},Me={scope:"col"},Pe={scope:"col"},Se={scope:"col"},Le={scope:"col"},Ve={scope:"col"},Ie={scope:"col"},Te={key:0},Ue={key:0},Fe=["onClick","id","checked"],De={class:"dropdown"},He={class:"dropdown-menu dropdown-menu-end"},Ae=["onClick"],Ee=["onClick"],Ne=["onClick"],Oe={key:1},ze={colspan:"12",class:"text-center"},Re={key:0,class:"row"},je={class:"card card-height-100"},qe={class:"card-body"},Ye={class:"d-flex flex-column h-100"},$e={class:"d-flex"},Ge={class:"flex-grow-1"},Je={class:"text-muted mb-4"},Ke=["onClick"],Qe={class:"flex-shrink-0"},Ze={class:"d-flex gap-1 align-items-center"},We={class:"dropdown"},Xe={class:"dropdown-menu dropdown-menu-end"},et=["onClick"],tt=["onClick"],st=["onClick"],ot={class:"d-flex mb-2 card-footer bg-transparent border-top-dashed"},lt={class:"flex-shrink-0 me-3"},nt={class:"avatar-sm"},it={class:"avatar-title bg-warning-subtle rounded p-2"},at=["src"],rt={class:"flex-grow-1"},dt={class:"mb-1 fs-15"},ct={class:"text-body"},ut={class:"mb-0"},mt={class:"table-responsive table-card mt-2 ms-2"},ft={class:"table table-borderless mb-0"},gt={class:"card-footer bg-transparent border-top-dashed py-2"},_t={class:"d-flex align-items-center"},ht={class:"flex-grow-1"},pt={scope:"col"},vt={class:"flex-end"},bt={key:0},wt=["onClick","id","checked"],yt={class:"table-responsive table-card mt-2 ms-2"},xt={class:"table table-borderless mb-0"},kt={colspan:"12",class:"text-center m-auto"},Ct={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Bt={class:"alert-content"},Mt={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Pt={class:"alert-content"};function St(s,t,x,l,d,m){const P=p("Head"),S=p("PageHeader"),C=p("BCol"),L=p("BRow"),I=p("BCardHeader"),T=p("BButton"),E=p("BCardBody"),U=p("BCard"),N=p("Pagination"),O=p("Layout"),F=ae("b-tooltip");return a(),z(O,null,{default:_(()=>[g(P,{title:"Users"}),g(S,{title:s.$t("users"),pageTitle:s.$t("users")},null,8,["title","pageTitle"]),g(L,null,{default:_(()=>[g(C,{lg:"12"},{default:_(()=>[g(U,{"no-body":"",id:"tasksList"},{default:_(()=>[g(I,{class:"border-0"},{default:_(()=>[g(L,{class:"g-2"},{default:_(()=>[g(C,{md:"4"},{default:_(()=>[e("div",_e,[e("div",he,[R((a(),r("a",{"data-bs-toggle":"tooltip",title:s.$t("list_view"),class:M(["list-btn",{active:d.isListView}]),onClick:t[0]||(t[0]=o=>m.toggleView("list"))},t[6]||(t[6]=[e("i",{class:"ri-list-check"},null,-1)]),10,pe)),[[F,void 0,void 0,{hover:!0}]]),R((a(),r("a",{"data-bs-toggle":"tooltip",title:s.$t("grid_view"),class:M(["list-btn",{active:!d.isListView}]),onClick:t[1]||(t[1]=o=>m.toggleView("grid"))},t[7]||(t[7]=[e("i",{class:"ri-grid-fill"},null,-1)]),10,ve)),[[F,void 0,void 0,{hover:!0}]])]),e("div",be,[e("label",we,n(s.$t("show")),1),R(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.filter.limit=o),onChange:t[3]||(t[3]=(...o)=>l.changeEntriesPerPage&&l.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(a(!0),r(A,null,H(l.paginatorOption,o=>(a(),r("option",{key:o,value:o},n(o),9,ye))),128))],544),[[re,l.filter.limit]]),e("label",xe,n(s.$t("entries")),1)])])]),_:1}),g(C,{md:"2"}),g(C,{md:"auto",class:"ms-auto"},{default:_(()=>t[8]||(t[8]=[e("div",{class:"d-flex align-items-center gap-2"},null,-1)])),_:1,__:[8]})]),_:1})]),_:1}),d.isListView?(a(),z(E,{key:0,class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[e("div",ke,[e("table",Ce,[e("thead",Be,[e("tr",null,[e("th",Me,n(s.$t("name")),1),e("th",Pe,n(s.$t("gender")),1),e("th",Se,n(s.$t("mobile")),1),e("th",Le,n(s.$t("email")),1),e("th",Ve,n(s.$t("status")),1),e("th",Ie,n(s.$t("action")),1)])]),l.results.length>0?(a(),r("tbody",Te,[(a(!0),r(A,null,H(l.results,(o,k)=>(a(),r("tr",{key:k},[e("td",null,n(o.name),1),e("td",null,n(o.gender),1),e("td",null,n(l.mobileFromUser(o)),1),e("td",null,n(l.emailFromUser(o)),1),s.permissions.includes("toggle-user")?(a(),r("td",Ue,[e("div",{class:M({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:y(u=>l.toggleActiveStatus(o.id,!o.active),["prevent"]),id:"status_"+o.id,checked:o.active},null,8,Fe)],2)])):b("",!0),e("td",null,[g(T,{class:"btn btn-soft-info btn-sm m-2",size:"sm",type:"button"},{default:_(()=>[e("div",De,[t[12]||(t[12]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",He,[s.permissions.includes("view-user-profile")?(a(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:y(u=>l.viewProfile(o),["prevent"])},[t[9]||(t[9]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),h(n(s.$t("view_profile")),1)],8,Ae)):b("",!0),s.permissions.includes("delete-user")?(a(),r("a",{key:1,class:"dropdown-item",href:"#",onClick:y(u=>l.deleteModal(o.id),["prevent"])},[t[10]||(t[10]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),h(n(s.$t("delete")),1)],8,Ee)):b("",!0),e("a",{class:"dropdown-item",href:"#",onClick:y(u=>l.restoreUser(o.id),["prevent"])},[t[11]||(t[11]=e("i",{class:"bx bx-undo align-center text-muted me-2"},null,-1)),h(" "+n(s.$t("restore")),1)],8,Ne)])])]),_:2},1024)])]))),128))])):(a(),r("tbody",Oe,[e("tr",null,[e("td",ze,[t[13]||(t[13]=e("img",{src:q,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,n(s.$t("no_data_found")),1)])])]))])])]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1}),d.isListView?b("",!0):(a(),r("div",Re,[l.results.length>0?(a(!0),r(A,{key:0},H(l.results,(o,k)=>(a(),r("div",{class:"col-xxl-3 col-sm-6 project-card",key:k},[e("div",je,[e("div",qe,[e("div",Ye,[e("div",$e,[e("div",Ge,[e("h6",null,[h(n(s.$t("refferal_code"))+" : ",1),e("span",Je,n(o.refferal_code??"----"),1),e("button",{onClick:u=>m.copyText(o.refferal_code,k),class:"btn btn-light btn-sm ms-2"},[e("i",{class:M(d.copiedIndex===k?"bx bxs-check-circle text-success":"bx bx-copy")},null,2)],8,Ke)])]),e("div",Qe,[e("div",Ze,[e("div",We,[t[17]||(t[17]=e("button",{class:"btn btn-link text-muted p-1 mt-n2 py-0 text-decoration-none fs-15","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-more-horizontal icon-sm"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})])],-1)),e("div",Xe,[s.permissions.includes("view-user-profile")?(a(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:y(u=>l.viewProfile(o),["prevent"])},[t[14]||(t[14]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),h(n(s.$t("view_profile")),1)],8,et)):b("",!0),s.permissions.includes("delete-user")?(a(),r("a",{key:1,class:"dropdown-item",href:"#",onClick:y(u=>l.deleteModal(o.id),["prevent"])},[t[15]||(t[15]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),h(n(s.$t("delete")),1)],8,tt)):b("",!0),e("a",{class:"dropdown-item",href:"#",onClick:y(u=>l.restoreUser(o.id),["prevent"])},[t[16]||(t[16]=e("i",{class:"bx bx-undo align-center text-muted me-2"},null,-1)),h(" "+n(s.$t("restore")),1)],8,st)])])])])]),e("div",ot,[e("div",lt,[e("div",nt,[e("span",it,[e("img",{class:"avatar-xs rounded-circle p-1",alt:"profile picture",src:o.profile_picture},null,8,at)])])]),e("div",rt,[e("h5",dt,[e("a",ct,n(o.name??"----"),1)]),e("p",ut,[(a(),r(A,null,H(5,u=>e("i",{key:u,class:M([{"bx bxs-star text-warning":u<=Math.floor(o.rating),"bx bxs-star-half text-warning":u===Math.ceil(o.rating)&&o.rating%1!==0,"bx bx-star text-muted":u>o.rating},"align-center me-2"])},null,2)),64))])])]),e("div",mt,[e("table",ft,[e("tbody",null,[e("tr",null,[t[18]||(t[18]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-transgender fs-24"})],-1)),e("td",null,n(o.gender??"----"),1)]),e("tr",null,[t[19]||(t[19]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-phone fs-24"})],-1)),e("td",null,n(l.mobileFromUser(o)??"----"),1)]),e("tr",null,[t[20]||(t[20]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-envelope-open-text fs-24"})],-1)),e("td",null,n(l.emailFromUser(o)??"----"),1)])])])])])]),e("div",gt,[e("div",_t,[e("div",ht,[e("th",pt,n(s.$t("status")),1)]),e("div",vt,[s.permissions.includes("toggle-user")?(a(),r("td",bt,[e("div",{class:M({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:y(u=>l.toggleActiveStatus(o.id,!o.active),["prevent"]),id:"status_"+o.id,checked:o.active},null,8,wt)],2)])):b("",!0)])])])])]))),128)):(a(),z(U,{key:1},{default:_(()=>[e("div",yt,[e("table",xt,[e("tbody",null,[e("tr",null,[e("td",kt,[t[21]||(t[21]=e("img",{src:q,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,n(s.$t("no_data_found")),1)])])])])])]),_:1}))])),e("div",null,[l.successMessage?(a(),r("div",Ct,[e("div",Bt,[t[22]||(t[22]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[23]||(t[23]=h()),t[24]||(t[24]=e("strong",null,"Success",-1)),h(" - "+n(l.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[4]||(t[4]=(...o)=>l.dismissMessage&&l.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):b("",!0),l.alertMessage?(a(),r("div",Mt,[e("div",Pt,[t[25]||(t[25]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[26]||(t[26]=h()),t[27]||(t[27]=e("strong",null,"Alert",-1)),h(" - "+n(l.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[5]||(t[5]=(...o)=>l.dismissMessage&&l.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):b("",!0)]),g(N,{paginator:l.paginator,onPageChanged:l.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Et=X(ge,[["render",St],["__scopeId","data-v-16a12ee4"]]);export{Et as default};
