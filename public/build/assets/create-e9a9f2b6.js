import{_ as H,Z as F,O as N,C as T,r as k,T as z,g as u,o as n,x as O,w as d,a as j,U as q,N as D,k as i,l as e,J as r,q as m,M as p,y as M,i as a,L as f,F as b,K as P,B as g,H as x,n as E}from"./vendor-ddfbd976.js";import{L as A}from"./main-306a5ea6.js";import{P as J}from"./page-header-2dc95532.js";import{I as K}from"./ImageUpload-6f09ff26.js";import{F as Z}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";const G={components:{Layout:A,PageHeader:J,Head:F,FormValidation:Z,Multiselect:N,ImageUpload:K},props:{successMessage:String,alertMessage:String,lastLevel:Number,level:Object,zone_type:Object},setup(l){const{t:o}=T(),R=l.level?l.level.level:l.lastLevel?l.lastLevel+1:1,t=k(l.level),c=z({name:l.level?l.level.name:null,is_min_ride_complete:l.level?l.level.is_min_ride_complete==1:!1,is_min_ride_amount_complete:l.level?l.level.is_min_ride_amount_complete==1:!1,level:R,reward_type:l.level?l.level.reward_type:"",reward:l.level?l.level.reward:0,min_ride_amount:l.level?l.level.min_ride_amount:0,min_ride_count:l.level?l.level.min_ride_count:0,ride_points:l.level?l.level.ride_points:0,amount_points:l.level?l.level.amount_points:0,zone_type_id:l.zone_type?l.zone_type.id:null,image:l.level?l.level.image:null});console.log(l.zone_type);const L=k(l.successMessage||""),C=k(l.alertMessage||""),I=()=>{L.value="",C.value=""},w={name:{required:!0},level:{required:!0},reward_type:{required:!0},reward:{required:!0},min_ride_amount:{required:c.is_min_ride_amount_complete},amount_points:{required:c.is_min_ride_amount_complete},min_ride_count:{required:c.is_min_ride_complete},ride_points:{required:c.is_min_ride_complete},image:{required:!l.level}},V=k(null),y=k({});return{form:c,successMessage:L,alertMessage:C,handleSubmit:async()=>{if(y.value=V.value.validate(),!(Object.keys(y.value).length>0))try{const v=new FormData;Object.entries(c.data()).forEach(([s,_])=>{typeof _=="boolean"?v.append(s,_==!0?1:0):v.append(s,_)});var h="/drivers-levelup/store";l.level&&l.level.id&&(h=`/drivers-levelup/update/${l.level.id}`),await j.post(h,v,{headers:{"Content-Type":"multipart/form-data"}}),q.fire(o("success"),o("form_submitted_successfully"),"success"),c.reset(),D.get(`/drivers-levelup/${l.zone_type.id}`)}catch(v){console.error(o("error_submitting_form"),v),q.fire(o("error"),o("an_error_occurred_while_submitting_the_form"),"error")}},validationRules:w,validationRef:V,dismissMessage:I,errors:y,level:t,handleImageSelected:(h,v)=>{c[v]=h},handleImageRemoved:h=>{c[h]=null}}},mounted(){}},Q={class:"row"},W={class:"col-6"},X={class:"row"},Y={class:"col-sm-12"},$={class:"mb-3"},ee={for:"level",class:"form-label"},le={class:"col-sm-12"},te={class:"mb-3"},oe={for:"name",class:"form-label"},se=["placeholder"],re={class:"text-danger"},ne={class:"col-sm-4"},ae={class:"mb-3"},ie={for:"icon",class:"form-label d-flex"},de={class:"text-danger"},_e={class:"row"},me={class:"col-6"},ce={class:"mb-3"},ue={for:"reward_type",class:"form-label"},ve={disabled:"",value:""},fe={value:"no-reward"},be={value:"reward-cash"},he={value:"reward-point"},pe={class:"text-danger"},ge={key:0,class:"col-sm-6"},ye={class:"mb-3"},we={for:"reward_cash",class:"form-label"},ke=["placeholder"],Me={class:"text-danger"},Ce={key:1,class:"col-sm-6"},Ve={class:"mb-3"},Be={for:"reward_point",class:"form-label"},Se=["placeholder"],Ue={class:"text-danger"},Le={class:"row"},Ie={class:"col-4"},Re={class:"mb-3"},qe={for:"is_min_ride_complete",class:"form-label"},xe={class:"form-check mb-2"},He=["checked"],Fe={class:"form-check-label",for:"is_min_ride_complete"},Ne={key:0,class:"col-sm-4"},Te={class:"mb-3"},ze={for:"min_ride_amount",class:"form-label"},Oe=["placeholder"],je={class:"text-danger"},De={key:1,class:"col-sm-4"},Pe={class:"mb-3"},Ee={for:"ride_points",class:"form-label"},Ae=["placeholder"],Je={class:"text-danger"},Ke={class:"row mt-5"},Ze={class:"col-4"},Ge={class:"mb-3"},Qe={for:"reward_type",class:"form-label"},We={class:"form-check mb-2"},Xe={class:"form-check-label",for:"is_min_ride_amount_complete"},Ye={key:0,class:"col-sm-4"},$e={class:"mb-3"},el={for:"min_ride_amount",class:"form-label"},ll=["placeholder"],tl={class:"text-danger"},ol={key:1,class:"col-sm-4"},sl={class:"mb-3"},rl={for:"amount_points",class:"form-label"},nl=["placeholder"],al={class:"text-danger"},il={class:"col-lg-12"},dl={class:"text-end"},_l={type:"submit",class:"btn btn-primary"},ml={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},cl={class:"alert-content"},ul={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},vl={class:"alert-content"};function fl(l,o,R,t,c,L){const C=u("Head"),I=u("PageHeader"),w=u("BCardHeader"),V=u("ImageUpload"),y=u("BCardBody"),B=u("BCard"),S=u("BCol"),U=u("BRow"),h=u("FormValidation"),v=u("Layout");return n(),O(v,null,{default:d(()=>[i(C,{title:t.level?"Level Edit":"Level Create"},null,8,["title"]),i(I,{title:t.level?l.$t("edit"):l.$t("create"),pageTitle:l.$t("level"),pageLink:"/set-prices"},null,8,["title","pageTitle"]),e("form",{onSubmit:o[13]||(o[13]=E((...s)=>t.handleSubmit&&t.handleSubmit(...s),["prevent"]))},[i(h,{form:t.form,rules:t.validationRules,ref:"validationRef"},{default:d(()=>[i(U,null,{default:d(()=>[i(S,{lg:"12"},{default:d(()=>[i(B,{"no-body":"",id:"tasksList"},{default:d(()=>[i(w,{class:"border-0"},{default:d(()=>[e("h4",null,r(l.$t("current_level_info")),1)]),_:1}),i(y,{class:"border border-dashed border-end-0 border-start-0"},{default:d(()=>[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",$,[e("label",ee,r(l.$t("level")),1),m(e("input",{disabled:"",id:"level",name:"level",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=s=>t.form.level=s)},null,512),[[p,t.form.level]])])]),e("div",le,[e("div",te,[e("label",oe,[M(r(l.$t("level_name"))+" ",1),o[16]||(o[16]=e("span",{class:"text-danger"},"*",-1))]),m(e("input",{type:"text",class:"form-control",placeholder:l.$t("ex_silver_gold_platinum"),id:"name","onUpdate:modelValue":o[1]||(o[1]=s=>t.form.name=s)},null,8,se),[[p,t.form.name]]),(n(!0),a(b,null,f(t.errors.name,(s,_)=>(n(),a("span",re,r(s),1))),256))])])])]),o[19]||(o[19]=e("div",{class:"col-sm-2"},null,-1)),e("div",ne,[e("div",ae,[e("label",ie,[M(r(l.$t("level_icon"))+" ",1),o[17]||(o[17]=e("span",null,[e("h5",{class:"text-muted mt-1 mb-0 fs-13"},"(320px x 320px)")],-1)),o[18]||(o[18]=e("span",{class:"text-danger"},"*",-1))]),i(V,{imageType:"drivers-levelup",initialImageUrl:t.form.image,flexStyle:"0 0 calc(50% - 20px)",aspectRatio:"1 / 1",onImageSelected:o[2]||(o[2]=s=>t.handleImageSelected(s,"image")),onImageRemoved:o[3]||(o[3]=()=>t.handleImageRemoved("image")),id:"levelupicon"},null,8,["initialImageUrl"]),(n(!0),a(b,null,f(t.errors.image,(s,_)=>(n(),a("span",de,r(s),1))),256))])])])]),_:1})]),_:1})]),_:1})]),_:1}),i(U,null,{default:d(()=>[i(S,{lg:"12"},{default:d(()=>[i(B,{"no-body":"",id:"tasksList"},{default:d(()=>[i(w,{class:"border-0"},{default:d(()=>[e("h4",null,r(l.$t("reward_type")),1)]),_:1}),i(y,{class:"border border-dashed border-end-0 border-start-0"},{default:d(()=>[e("div",_e,[e("div",me,[e("div",ce,[e("label",ue,[M(r(l.$t("select_level"))+" ",1),o[20]||(o[20]=e("span",{class:"text-danger"},"*",-1))]),m(e("select",{id:"reward_type",class:"form-select","onUpdate:modelValue":o[4]||(o[4]=s=>t.form.reward_type=s)},[e("option",ve,r(l.$t("choose_level")),1),e("option",fe,r(l.$t("no_reward")),1),e("option",be,r(l.$t("reward_credit")),1),e("option",he,r(l.$t("reward-point")),1)],512),[[P,t.form.reward_type]]),(n(!0),a(b,null,f(t.errors.reward_type,(s,_)=>(n(),a("span",pe,r(s),1))),256))])]),t.form.reward_type==="reward-cash"?(n(),a("div",ge,[e("div",ye,[e("label",we,r(l.$t("reward_credit")),1),m(e("input",{type:"number",step:"any",oninput:"this.value = this.value.replace(/[^0-9.]/g, '')",class:"form-control",placeholder:l.$t("enter_reward_cash"),id:"reward_cash","onUpdate:modelValue":o[5]||(o[5]=s=>t.form.reward=s)},null,8,ke),[[p,t.form.reward]]),(n(!0),a(b,null,f(t.errors.reward,(s,_)=>(n(),a("span",Me,r(s),1))),256))])])):g("",!0),t.form.reward_type==="reward-point"?(n(),a("div",Ce,[e("div",Ve,[e("label",Be,r(l.$t("reward_point")),1),m(e("input",{type:"number",step:"any",oninput:"this.value = this.value.replace(/[^0-9.]/g, '')",class:"form-control",placeholder:l.$t("enter_reward_point"),id:"reward_point","onUpdate:modelValue":o[6]||(o[6]=s=>t.form.reward=s)},null,8,Se),[[p,t.form.reward]]),(n(!0),a(b,null,f(t.errors.reward,(s,_)=>(n(),a("span",Ue,r(s),1))),256))])])):g("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),i(U,null,{default:d(()=>[i(S,{lg:"12"},{default:d(()=>[i(B,{"no-body":"",id:"tasksList"},{default:d(()=>[i(w,{class:"border-0"},{default:d(()=>[e("h4",null,r(l.$t("set_target_to_promote_from_this_level")),1)]),_:1}),i(y,{class:"border border-dashed border-end-0 border-start-0"},{default:d(()=>[e("div",Le,[e("div",Ie,[e("div",Re,[e("label",qe,r(l.$t("check_to_set")),1),e("div",xe,[m(e("input",{class:"form-check-input",type:"checkbox",id:"is_min_ride_complete","onUpdate:modelValue":o[7]||(o[7]=s=>t.form.is_min_ride_complete=s),checked:t.form.is_min_ride_complete},null,8,He),[[x,t.form.is_min_ride_complete]]),e("label",Fe,r(l.$t("minimum_ride_complete")),1)])])]),t.form.is_min_ride_complete?(n(),a("div",Ne,[e("div",Te,[e("label",ze,r(l.$t("min_ride_count")),1),m(e("input",{type:"number",class:"form-control",placeholder:l.$t("enter_min_ride_count"),id:"min_ride_amount","onUpdate:modelValue":o[8]||(o[8]=s=>t.form.min_ride_count=s)},null,8,Oe),[[p,t.form.min_ride_count]]),(n(!0),a(b,null,f(t.errors.min_ride_count,(s,_)=>(n(),a("span",je,r(s),1))),256))])])):g("",!0),t.form.is_min_ride_complete?(n(),a("div",De,[e("div",Pe,[e("label",Ee,r(l.$t("reward_point")),1),m(e("input",{type:"number",step:"any",oninput:"this.value = this.value.replace(/[^0-9.]/g, '')",class:"form-control",placeholder:l.$t("enter_ride_points"),id:"ride_points","onUpdate:modelValue":o[9]||(o[9]=s=>t.form.ride_points=s)},null,8,Ae),[[p,t.form.ride_points]]),(n(!0),a(b,null,f(t.errors.ride_points,(s,_)=>(n(),a("span",Je,r(s),1))),256))])])):g("",!0)]),e("div",Ke,[e("div",Ze,[e("div",Ge,[e("label",Qe,r(l.$t("check_to_set")),1),e("div",We,[m(e("input",{class:"form-check-input",type:"checkbox",id:"is_min_ride_amount_complete",name:"is_min_ride_amount_complete","onUpdate:modelValue":o[10]||(o[10]=s=>t.form.is_min_ride_amount_complete=s)},null,512),[[x,t.form.is_min_ride_amount_complete]]),e("label",Xe,r(l.$t("minimum_earn_amount")),1)])])]),t.form.is_min_ride_amount_complete?(n(),a("div",Ye,[e("div",$e,[e("label",el,r(l.$t("min_ride_amount")),1),m(e("input",{type:"number",step:"any",oninput:"this.value = this.value.replace(/[^0-9.]/g, '')",class:"form-control",placeholder:l.$t("enter_min_ride_amount"),id:"min_ride_amount","onUpdate:modelValue":o[11]||(o[11]=s=>t.form.min_ride_amount=s)},null,8,ll),[[p,t.form.min_ride_amount]]),(n(!0),a(b,null,f(t.errors.min_ride_amount,(s,_)=>(n(),a("span",tl,r(s),1))),256))])])):g("",!0),t.form.is_min_ride_amount_complete?(n(),a("div",ol,[e("div",sl,[e("label",rl,r(l.$t("reward_point")),1),m(e("input",{type:"number",step:"any",oninput:"this.value = this.value.replace(/[^0-9.]/g, '')",class:"form-control",placeholder:l.$t("enter_amount_points"),id:"amount_points","onUpdate:modelValue":o[12]||(o[12]=s=>t.form.amount_points=s)},null,8,nl),[[p,t.form.amount_points]]),(n(!0),a(b,null,f(t.errors.amount_points,(s,_)=>(n(),a("span",al,r(s),1))),256))])])):g("",!0),e("div",il,[e("div",dl,[e("button",_l,r(t.level?l.$t("update"):l.$t("save")),1)])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["form","rules"])],32),e("div",null,[t.successMessage?(n(),a("div",ml,[e("div",cl,[o[21]||(o[21]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[22]||(o[22]=e("strong",null,"Success",-1)),M(" - "+r(t.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:o[14]||(o[14]=(...s)=>t.dismissMessage&&t.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):g("",!0),t.alertMessage?(n(),a("div",ul,[e("div",vl,[o[23]||(o[23]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[24]||(o[24]=e("strong",null,"Alert",-1)),M(" - "+r(t.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:o[15]||(o[15]=(...s)=>t.dismissMessage&&t.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):g("",!0)])]),_:1})}const Ml=H(G,[["render",fl]]);export{Ml as default};
