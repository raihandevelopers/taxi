import{_ as He,Z as Ne,z as Oe,Y as je,P as Ge,R as We,U as D,C as Ye,r as C,T as we,$ as Qe,D as Ke,G as Ze,a0 as Se,a as ce,g as A,o as r,x as Je,w as te,Q as F,N as Xe,k as H,l as e,J as n,q as S,M as N,i as d,L as V,F as B,K as _e,a1 as $e,B as I,H as et,W as oe,y as Me,n as tt}from"./vendor-ddfbd976.js";import{L as ot}from"./main-306a5ea6.js";import{P as st}from"./page-header-2dc95532.js";import{F as at}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";const lt={data(){return{rightOffcanvas:!1,isPocSame:!1,form:{is_later:"",name:"",mobile:"",drop_poc_name:"",drop_poc_mobile:""},dateTimeConfig:{enableTime:!0,dateFormat:"Y-m-d H:i:ss",minDate:this.getMinTime()}}},watch:{isPocSame(s){s?(this.form.drop_poc_name=this.form.name,this.form.drop_poc_mobile=this.form.mobile):(this.form.drop_poc_name="",this.form.drop_poc_mobile="")},"form.name"(s){this.isPocSame&&(this.form.drop_poc_name=s)},"form.mobile"(s){this.isPocSame&&(this.form.drop_poc_mobile=s)}},components:{Layout:ot,PageHeader:st,Head:Ne,Link:Oe,Scrollbar:je,FormValidation:at,flatPickr:Ge},computed:{...We(["permissions"])},props:{countries:Array,default_flag:String,default_dial_code:String,default_lat:String,default_lng:String,successMessage:String,alertMessage:String,validate:Function,transport_type_for_ride:Array,ride_type_for_ride:Array,is_rental:Boolean,goodsTypes:Array,firebaseSettings:Array,map_key:String,transport_type_outstation:Array,transport_type_regular:Array,transport_type_rental:Array,settings:Object,schedule_a_ride:Number},methods:{timer(){let s;D.fire({title:"Booking alert!",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,onBeforeOpen:()=>{D.showLoading(),s=setInterval(()=>{D.getContent().querySelector("b").textContent=D.getTimerLeft()},100)},onClose:()=>{clearInterval(s)}}).then(l=>{l.dismiss===D.DismissReason.timer&&console.log("I was closed by the timer")})},getMinTime(){const s=new Date,l=this.schedule_a_ride?parseInt(this.schedule_a_ride):0;s.setMinutes(s.getMinutes()+l),s.setSeconds(0);const Q=s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0")+" "+String(s.getHours()).padStart(2,"0")+":"+String(s.getMinutes()).padStart(2,"0")+":00";return console.log("Formatted Time:",Q),Q}},computed:{transport_options(){let s=[];return this.form.ride_type==="regular"?(s=this.transport_type_regular,this.form.transport_type=s[0]):this.form.ride_type==="rental"?this.transport_type_rental.length===0?(this.form.transport_type="",s=[]):s=this.transport_type_rental:this.form.ride_type==="outstation"&&(this.transport_type_outstation.length===0?(this.form.transport_type="",s=[]):s=this.transport_type_outstation),s.length===1&&(this.form.transport_type=s[0]),s},dateTimeConfigReturnTime(){return{enableTime:!0,dateFormat:"Y-m-d H:i:ss",minDate:this.getMinReturnTime()}}},setup(s){const{t:l}=Ye(),Q=C({dial_code:s.default_dial_code||"",flag:s.default_flag||""}),o=C(null),M=C(null),T=C(!1),i=we({mobile:"",name:null,user_id:null,pick_address:"",drop_address:"",terminal:null,enterance:null,pick_lat:"",pick_lng:"",drop_lat:null,drop_lng:null,vehicle_type:null,distance:0,duration:0,payment_opt:1,goods_type_id:null,transport_type:"",pickup_poc_name:null,drop_poc_name:null,goods_type_quantity:null,is_later:0,assign_method:0,return_time:null,is_round_trip:0,is_out_station:0,is_rental:0,rental_package_id:null,ride_type:"regular",stops:null,trip_start_time:null,country:s.default_dial_code,drop_poc_mobile:null}),pe=p=>{p=="outstation"?(i.is_out_station=1,i.is_rental=0):p=="rental"?(i.is_out_station=0,i.is_rental=1):(i.is_out_station=0,i.is_rental=0),i.ride_type=p},se=C(!1),J=C(!1),X=p=>{const y=new google.maps.places.Autocomplete(document.getElementById(`stop-${p}`));y.addListener("place_changed",()=>{const v=y.getPlace();if(!v.geometry){console.error(l("place_details_not_found_for_the_input"),y);return}m[p]&&m[p].setMap(null);const R=new google.maps.Marker({map:M.value,position:v.geometry.location,draggable:!0,icon:{url:"/image/map/"+p+".png",scaledSize:new google.maps.Size(30,30)}});google.maps.event.addListener(R,"dragend",()=>{const G=R.getPosition();reverseGeocodeAndUpdateInput(G,`stop-${p}`),P[p].latitude=G.lat(),P[p].longitude=G.lng(),z(),drawRoute()}),m[p]=R,P[p].address=v.formatted_address,P[p].latitude=v.geometry.location.lat(),P[p].longitude=v.geometry.location.lng(),M.value.setCenter(v.geometry.location),M.value.setZoom(15),k.pick_lat&&k.drop_lat&&drawRoute()})},me={name:{required:!0},pick_address:{required:!0},transport_type:{required:!0},mobile:{required:!0},vehicle_type:{required:!0}},h=C({}),ie=C(null),E=C([]),ae=C([]),t=C([]),m=C([]),k=we({pick_lat:"",pick_lng:"",drop_lat:"",drop_lng:"",distance:0,duration:0}),z=async()=>(h.value=ie.value.validate(),i.is_later&&(i.trip_start_time?delete h.value.trip_start_time:h.value.trip_start_time=[l("required")]),i.is_rental?i.rental_package_id?delete h.value.rental_package_id:h.value.rental_package_id=[l("required")]:i.drop_address?delete h.value.drop_address:h.value.drop_address=[l("required")],i.is_out_station&&(i.trip_start_time?delete h.value.trip_start_time:h.value.trip_start_time=[l("required")]),i.is_out_station&&i.is_round_trip&&(i.return_time?delete h.value.return_time:h.value.return_time=[l("required")]),i.transport_type=="delivery"&&(i.goods_type_id?delete h.value.goods_type_id:h.value.goods_type_id=[l("required")],i.drop_poc_name?delete h.value.drop_poc_name:h.value.drop_poc_name=[l("required")],i.drop_poc_mobile?delete h.value.drop_poc_mobile:h.value.drop_poc_mobile=[l("required")]),P.length>0&&P.forEach((p,y)=>{h.value.stop||(h.value.stop={}),p.latitude?h.value.stop[y]&&delete h.value.stop[y]:h.value.stop[y]=[l("required")],console.log(h.value.stop)}),Object.keys(h.value).length>0?(T.value=!1,o.value&&(o.value.scrollTop=0),!1):(T.value=!0,o.value.scrollTop=o.value.scrollHeight,!0));C(null),C(null);const Pe=C(!1),fe=C(s.successMessage||""),ne=C(s.alertMessage||""),Ce=()=>{fe.value="",ne.value=""},P=Qe([]),ge=2,Ve=()=>{P.length<ge?(P.push({address:"",latitude:null,longitude:null}),P.length==0&&X(0),P.forEach((p,y)=>{X(y)})):D.fire(l("maximum_stopovers_reached"),l("you_can_add_up_to_5_stopovers_only"),"warning")},Be=p=>{m[p]&&m[p].setMap(null),P.splice(p,1),P.forEach((y,v)=>{X(v)}),p>0&&drawRoute()},he=()=>{M.value=new google.maps.Map(document.getElementById("map"),{center:{lat:parseFloat(s.default_lat),lng:parseFloat(s.default_lng)},zoom:15});const p="/image/map/pickup.png",y="/image/map/drop.png",v=new google.maps.Marker({map:M.value,draggable:!0,icon:{url:p,scaledSize:new google.maps.Size(30,30)}}),R=new google.maps.Marker({map:M.value,draggable:!0,icon:{url:y,scaledSize:new google.maps.Size(30,30)}});let G=[],$,b={};const ee=new google.maps.places.Autocomplete(document.getElementById("pickup")),le=new google.maps.places.Autocomplete(document.getElementById("drop"));ee.addListener("place_changed",()=>{const a=ee.getPlace();if(!a.geometry){console.error(l("place_details_not_found_for_the_input"),ee);return}v.setPosition(a.geometry.location),i.pick_address=a.formatted_address,M.value.setCenter(a.geometry.location),M.value.setZoom(15);const f=a.types;f.includes("airport")?se.value=!0:f.includes("train_station")&&(J.value=!0);let c=a.geometry.location;k.pick_lat=c.lat(),k.pick_lng=c.lng(),R.getPosition()&&re()}),le.addListener("place_changed",()=>{const a=le.getPlace();if(!a.geometry){console.error(l("place_details_not_found_for_the_input"),le);return}R.setPosition(a.geometry.location),i.drop_address=a.formatted_address,M.value.setCenter(a.geometry.location),M.value.setZoom(15);const f=a.types;f.includes("airport")?se.value=!0:f.includes("train_station")&&(J.value=!0);let c=a.geometry.location;k.drop_lat=c.lat(),k.drop_lng=c.lng(),v.getPosition()&&re()}),google.maps.event.addListener(v,"dragend",()=>{ke(v.getPosition(),"pickup"),de();let a=v.getPosition();k.pick_lat=a.lat(),k.pick_lng=a.lng(),R.getPosition()&&re()}),google.maps.event.addListener(R,"dragend",()=>{ke(R.getPosition(),"drop");let a=v.getPosition();k.drop_lat=a.lat(),k.drop_lng=a.lng(),v.getPosition()&&re()});const re=()=>{if(K(),!v.getPosition()||!R.getPosition())return;const a=new google.maps.DirectionsService,f=P.map(c=>({location:new google.maps.LatLng(c.latitude,c.longitude),stopover:!0}));a.route({origin:v.getPosition(),destination:R.getPosition(),waypoints:f,travelMode:google.maps.TravelMode.DRIVING},(c,_)=>{if(_==="OK"){let u=0;c.routes[0].legs.forEach(q=>{u+=q.distance.value});let w=0;c.routes[0].legs.forEach(q=>{w+=q.duration.value}),k.distance=u,k.duration=Math.round(w/60);const g=c.routes[0];$&&$.setMap(null),$=new google.maps.Polyline({path:g.overview_path,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:4,map:M.value});const L=new google.maps.LatLngBounds;g.overview_path.forEach(q=>L.extend(q)),M.value.fitBounds(L)}else console.error(l("directions_request_failed_due_to")+_)})};F(P,a=>{a.forEach((f,c)=>{G[c]||X(c)})},{deep:!0});const K=async()=>{if(z()){if(i.is_rental)return T.value=!1,Re(),!1;T.value=!0}else return T.value=!1,!1;t.value=[];const{pick_lat:a,pick_lng:f,drop_lat:c,drop_lng:_,distance:u,duration:w}=k.data(),g={pick_lat:a,pick_lng:f,distance:u,duration:w};g.transport_type=i.transport_type,c&&(g.drop_lat=c),_&&(g.drop_lng=_),i.is_out_station&&(g.is_out_station=1,i.trip_start_time&&(g.trip_start_time=i.trip_start_time),i.return_time&&(g.return_time=i.return_time)),g.dispatch=1,P.length>0&&(g.stops=JSON.stringify(P));const L=await ce.post("/dispatch/request/eta",g);E.value=L.data.data,de()},Re=async()=>{E.value=[];const{pick_lat:a,pick_lng:f}=k.data(),c={pick_lat:a,pick_lng:f,transport_type:i.transport_type},_=await ce.post("/dispatch/request/list_packages",c);ae.value=_.data.data},de=()=>{let a=v.getPosition();E.value.forEach(c=>{c.driver_time=null});const f=firebase.database().ref("drivers");f.on("value",c=>{c.forEach(_=>{var W,O;const u=_.val(),w=u.g,g=be(w);if(g){const x=Ae(a.lat(),a.lng(),g.lat,g.lon);x<=10&&u.is_available&&u.is_active&&ze(u,x);var L=!0;if(i.vehicle_type){L=!1;var q=(O=(W=E.value)==null?void 0:W.find(U=>U.zone_type_id===i.vehicle_type))==null?void 0:O.type_id;q&&u.vehicle_types&&u.vehicle_types.includes(q)&&(L=!0)}if(x<=10&&u.is_available&&u.is_active&&L){const U=new google.maps.LatLng(g.lat,g.lon),Y=`/image/map/${u.vehicle_type_icon}.png`;if(b[u.id])ue(b[u.id],b[u.id].getPosition(),U,u.bearing),b[u.id].setIcon({url:Y,scaledSize:new google.maps.Size(30,30)});else{const j=new google.maps.Marker({position:U,map:M.value,icon:{url:Y,scaledSize:new google.maps.Size(30,30)}});b[u.id]=j,ue(j,j.getPosition(),U,u.bearing)}}else b[u.id]&&(b[u.id].setMap(null),delete b[u.id])}})}),f.on("child_changed",c=>{const _=c.val();_.is_active?Ee(_):(E.value.forEach(u=>{_.vehicle_types.some(w=>w===u.type_id)&&de()}),ye(_.id))}),f.on("child_removed",c=>{const _=c.val();ye(_.id)})};F(()=>i.vehicle_type,async a=>{a&&(de(),z()?T.value=!0:T.value=!1)}),F(()=>i.transport_type,async a=>{a&&(a=="taxi"?i.goods_type_quantity=null:i.goods_type_quantity=i.goods_type_quantity??0,i.pick_address&&z()&&K())}),F(()=>i.rental_package_id,async a=>{if(a){const c=ae.value.find(_=>_.id===a).typesWithPrice.data;t.value=c}}),F(()=>i.is_later,async a=>{i.pick_address&&(z(),K())}),F(()=>i.ride_type,async a=>{i.pick_address&&z()&&K()});const Ue=Se(a=>{a&&i.vehicle_type?(o.value.scrollTop=o.value.scrollHeight,T.value=!0):T.value=!1},300);F(()=>i.name,async a=>{Ue(a),i.pick_address&&z()}),F(()=>i.return_time,async a=>{a&&K()}),F(()=>k.pick_lat,async a=>{a&&(K(),z())}),F(()=>k.distance,async a=>{a&&(await K(),await z())});const ze=(a,f)=>{const c=De(f);return E.value.forEach(_=>{a.vehicle_types&&a.vehicle_types.includes(_.type_id)&&(!_.driver_distance||_.driver_distance>f)&&(_.driver_time=c)}),!0},De=a=>a<2?"3 Mins":a>2&&a<5?"5 Mins":a>5&&a<7?"10 Mins":"15 mins",ue=(a,f,c,_)=>{let w=f.lat(),g=f.lng(),L=c.lat(),q=c.lng();if(w===L&&g===q){_!==void 0&&a.setIcon({...a.getIcon(),rotation:_}),a.setPosition(c),a.prevBearing=_;return}const W=x=>x<.5?2*x*x:-1+(4-2*x)*x,O=x=>{let U=W(x/60),Y=new google.maps.LatLng(w+(L-w)*U,g+(q-g)*U);if(a.setPosition(Y),_!==void 0){const j=a.prevBearing||_,Z=_-j,Fe=j+Z*U;a.setIcon({...a.getIcon(),rotation:Fe})}x<60?requestAnimationFrame(()=>O(x+1)):a.prevBearing=_};O(0)},Ee=a=>{const f=a.g,c=be(f);if(c){const _=new google.maps.LatLng(c.lat,c.lon),u=`/image/map/${a.vehicle_type_icon}.png`;if(b[a.id])ue(b[a.id],b[a.id].getPosition(),_,a.bearing),b[a.id].setIcon({url:u,scaledSize:new google.maps.Size(30,30)});else{const w=new google.maps.Marker({position:_,map:M.value,icon:{url:u,scaledSize:new google.maps.Size(30,30)}});b[a.id]=w}}else console.error(`Failed to decode geohash for driver ID: ${a.id}`)},ye=a=>{b[a]&&(b[a].setMap(null),delete b[a])},be=a=>{const f="0123456789bcdefghjkmnpqrstuvwxyz",c=[16,8,4,2,1];let _=!0,u=-90,w=90,g=-180,L=180,q,W;if(a){for(let O=0;O<a.length;O++){let x=a.charAt(O),U=f.indexOf(x);for(let Y=0;Y<5;Y++){let j=c[Y];if(_){let Z=(g+L)/2;U&j?g=Z:L=Z}else{let Z=(u+w)/2;U&j?u=Z:w=Z}_=!_}}return q=(u+w)/2,W=(g+L)/2,{lat:q,lon:W}}},Ae=(a,f,c,_)=>{const w=(c-a)*Math.PI/180,g=(_-f)*Math.PI/180,L=Math.sin(w/2)*Math.sin(w/2)+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(g/2)*Math.sin(g/2);return 6371*(2*Math.atan2(Math.sqrt(L),Math.sqrt(1-L)))},ke=(a,f)=>{new google.maps.Geocoder().geocode({location:a},(_,u)=>{u==="OK"?_[0]?document.getElementById(f).value=_[0].formatted_address:console.error(l("no_reverse_geocode_results_found")):console.error(l("geocoder_failed_due_to")+u)})}},Ie=async()=>{if(!z())return!1;T.value=!1;const{pick_lat:p,pick_lng:y,drop_lat:v,drop_lng:R,distance:G,duration:$}=k.data();p&&(i.pick_lat=p),y&&(i.pick_lng=y),v&&(i.drop_lat=v),R&&(i.drop_lng=R),G&&(i.distance=G),$&&(i.duration=$),P.length>0&&(i.stops=JSON.stringify(P)),console.log("booking-info"),console.log(i.data());try{let b;if(b=await ce.post("/dispatch/create-request",i.data()),b.data.success===!0){let ee;D.fire({title:"Booking Successfull",html:"Your Ride has been Booked Successfully.",timer:2e3,timerProgressBar:!0,onBeforeOpen:()=>{D.showLoading(),ee=setInterval(()=>{D.getContent().querySelector("b").textContent=D.getTimerLeft()},100)},onClose:()=>{clearInterval(ee)}}).then(le=>{le.dismiss===D.DismissReason.timer&&console.log("I was closed by the timer"),T.value=!0}),i.assign_method==1&&Xe.get("ongoing-rides/assign/"+b.data.data.id),i.reset(),k.reset(),he(),E.value=[],t.value=[]}else ne.value=l("failed_to_make_booking_contact_admin")}catch(b){b.response&&b.response.status===422?h.value=b.response.data.errors:(console.error(l("error_creating_vehicle_price"),b),ne.value=l("failed_to_make_booking_contact_admin"))}};Ke(()=>{const p=s.map_key,y=document.createElement("script");y.src=`https://maps.googleapis.com/maps/api/js?key=${p}&libraries=places`,y.async=!0,y.defer=!0,y.onload=he,document.head.appendChild(y);var v={apiKey:s.firebaseSettings.firebase_api_key,authDomain:s.firebaseSettings.firebase_auth_domain,databaseURL:s.firebaseSettings.firebase_database_url,projectId:s.firebaseSettings.firebase_project_id,storageBucket:s.firebaseSettings.firebase_storage_bucket,messagingSenderId:s.firebaseSettings.firebase_messaging_sender_id,appId:s.firebaseSettings.firebase_app_id};firebase.apps.length==0&&firebase.initializeApp(v),s.transport_type_for_ride.length>0&&(i.transport_type=s.transport_type_for_ride[0]),s.ride_type_for_ride.length>0&&(i.ride_type=s.ride_type_for_ride[0])});const Le=C(""),ve=C(""),Te=Ze(()=>s.countries.filter(p=>p.name.toLowerCase().includes(ve.value.toLowerCase()))),qe=p=>{Q.value=p,i.country=p.dial_code},xe=Se(async p=>{p.target.value=p.target.value.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1");const y=await ce.get("/dispatch/fetch-user-detail",{params:{mobile:i.mobile}});y.data.data?(i.pick_address&&z(),i.name=y.data.data.name,i.user_id=y.data.data.id):(i.user_id=null,i.name=null)},300);return{form:i,modalShow:Pe,successMessage:fe,alertMessage:ne,dismissMessage:Ce,scrollContainer:o,validationRef:ie,validationRules:me,errors:h,mobile:Le,selectedCountry:Q,searchQuery:ve,changelater:pe,filteredCountries:Te,maxStopovers:ge,selectCountry:qe,validateNumber:xe,showAiportTerminal:se,showTrainStationEnterance:J,etaParam:k,vehicleTypes:E,makeBooking:Ie,enableBooking:T,stopovers:P,packageTypes:ae,rentalVehicleTypes:t,addStopover:Ve,removeStopover:Be,getMinReturnTime:()=>{const p=k.duration,y=i.trip_start_time,v=new Date(y);return v.setMinutes(v.getMinutes()+p),v}}}},it={class:"row"},nt={class:"col-12 col-lg-6",ref:"scrollContainer",style:{"max-height":"500px","overflow-y":"auto"}},rt={class:"row"},dt={class:"card-title mb-3 flex-grow-1"},ct={class:"col-6"},_t={class:"form-label"},pt={class:"input-group","data-input-flag":""},mt={class:"btn btn-light border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ut=["src"],ft={class:"ms-2 country-codeno"},gt=["placeholder"],ht={class:"dropdown-menu w-100"},vt={class:"p-2 px-3 pt-1 searchlist-input"},yt=["placeholder"],bt={class:"list-unstyled dropdown-menu-list mb-0"},kt=["onClick"],wt=["src"],St={class:"align-middle"},Mt={class:"col-6"},Pt={class:"mb-3"},Ct={for:"name",class:"form-label"},Vt=["placeholder"],Bt={class:"d-flex align-items-center mt-4"},It={class:"card-title mb-3 flex-grow-1"},Lt={class:"col-6"},Tt={class:"mb-3"},qt={for:"type",class:"form-label"},xt={disabled:"",value:""},Rt={value:"0"},Ut={value:"1"},zt={class:"col-12"},Dt={class:"mb-3"},Et={for:"type",class:"form-label"},At={disabled:"",value:""},Ft=["value"],Ht={class:"mt-4 mb-4"},Nt={class:"card-title mb-3 flex-grow-1"},Ot={class:"form-check form-check-inline"},jt=["checked"],Gt={class:"form-check-label",for:"later_ride"},Wt={class:"form-check form-check-inline"},Yt=["checked"],Qt={class:"form-check-label",for:"rental"},Kt={class:"col-12"},Zt={class:"mb-3"},Jt={class:"d-flex align-items-center justify-content-between"},Xt={for:"pickup",class:"form-label"},$t=["placeholder"],eo={key:0,class:"col-12"},to={class:"mb-3"},oo={for:"terminal",class:"form-label"},so={key:1,class:"col-12"},ao={class:"mb-3"},lo={for:"enterance",class:"form-label"},io={key:2,class:"col-12"},no={class:"mb-3"},ro={for:"drop",class:"form-label"},co=["placeholder"],_o={key:3,class:"card-title mb-2 flex-grow-1 mt-4"},po={key:4,class:"px-2 mb-2"},mo={class:"badge bg-dark-subtle text-dark p-1 fs-12 text-center"},uo={class:"form-check m-2 mx-3"},fo={class:"form-check-label mt-1",for:"poc"},go={key:5,class:"col-6"},ho={class:"mb-3"},vo={for:"poc_name",class:"form-label"},yo=["placeholder","disabled"],bo={key:6,class:"col-6"},ko={class:"mb-3"},wo={for:"poc_mobile",class:"form-label"},So=["placeholder","disabled"],Mo={key:7,class:"card-title mb-2 flex-grow-1 mt-4"},Po={key:8,class:"col-6"},Co={class:"mb-3"},Vo={for:"goods_type",class:"form-label"},Bo={disabled:"",value:""},Io=["value"],Lo={key:9,class:"col-6"},To={class:"mb-3"},qo={for:"goods_type_quantity",class:"form-label"},xo=["placeholder"],Ro={key:10,class:"card-title mb-3 flex-grow-1 mt-4"},Uo={key:11,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},zo={class:"mb-3"},Do={for:"rental_package_id",class:"form-label"},Eo={disabled:"",value:""},Ao=["value"],Fo={key:12,class:"col-12"},Ho={class:"mb-3"},No={for:"dispatch-datepicker",class:"form-label"},Oo={key:13,class:"mt-4 mb-4"},jo={class:"card-title mb-3 flex-grow-1"},Go={class:"form-check form-check-inline"},Wo={class:"form-check-label",for:"oneway"},Yo={class:"form-check form-check-inline"},Qo={class:"form-check-label",for:"roundtrip"},Ko={key:14,class:"col-12"},Zo={class:"mb-3"},Jo={for:"dispatch-datepicker",class:"form-label"},Xo={key:15,class:"card-title mb-3 flex-grow-1 mt-4"},$o={key:16,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},es={class:"mb-3"},ts={class:"d-flex mt-5"},os=["for"],ss=["id","value"],as={class:"select-checkbox-btn-content"},ls={class:"w-32 me-4 cursor-pointer"},is={class:"text-center mt-2 ms-4"},ns={class:"w-32 h-32 flex-none image-fit rounded-circle"},rs=["src"],ds={class:"text-center mt-2 amount"},cs={class:"text-center mt-2"},_s={key:17,class:"card-title mb-3 flex-grow-1 mt-4"},ps={key:18,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},ms={class:"mb-3"},us={class:"d-flex mt-5"},fs=["for"],gs=["id","value"],hs={class:"select-checkbox-btn-content"},vs={class:"w-32 me-4 cursor-pointer"},ys={class:"text-center mt-2 ms-4"},bs={class:"w-32 h-32 flex-none image-fit rounded-circle"},ks=["src"],ws={class:"text-center mt-2 amount"},Ss={class:"text-center mt-2"},Ms={class:"mt-4 mb-4"},Ps={class:"card-title mb-3 flex-grow-1"},Cs={class:"form-check form-check-inline"},Vs=["checked"],Bs={class:"form-check-label",for:"WithoutinlineRadio1"},Is={class:"form-check form-check-inline"},Ls=["checked"],Ts={class:"form-check-label",for:"WithoutinlineRadio2"},qs={class:"col-lg-12"},xs={class:"text-center"},Rs=["disabled"],Us={class:"col-12 col-lg-6"},zs={class:"mb-3 text-center m-auto"},Ds={id:"map",style:{height:"500px"}};function Es(s,l,Q,o,M,T){const i=A("Head"),pe=A("PageHeader"),se=A("BCardHeader"),J=A("flat-pickr"),X=A("FormValidation"),me=A("BCardBody"),h=A("BCard"),ie=A("BCol"),E=A("BRow"),ae=A("Layout");return r(),Je(ae,null,{default:te(()=>[H(i,{title:"Taxi Ride"}),H(pe,{title:s.$t("book"),pageTitle:s.$t("dispatch")},null,8,["title","pageTitle"]),H(E,null,{default:te(()=>[H(ie,{lg:"12"},{default:te(()=>[H(h,{"no-body":"",id:"tasksList"},{default:te(()=>[H(se,{class:"border-0"}),H(me,{class:"border border-dashed border-end-0 border-start-0"},{default:te(()=>[e("form",{onSubmit:l[27]||(l[27]=tt((...t)=>s.handleSubmit&&s.handleSubmit(...t),["prevent"]))},[H(X,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:te(()=>[e("div",it,[e("div",nt,[e("div",rt,[e("h4",dt,n(s.$t("personal_info")),1),e("div",ct,[e("div",null,[e("label",_t,n(s.$t("mobile")),1),e("div",pt,[e("button",mt,[e("img",{src:o.selectedCountry.flag,alt:"flag",height:"20",class:"country-flagimg rounded"},null,8,ut),e("span",ft,n(o.selectedCountry.dial_code),1)]),S(e("input",{type:"text",class:"form-control rounded-end flag-input","onUpdate:modelValue":l[0]||(l[0]=t=>o.form.mobile=t),placeholder:s.$t("enter_number"),onInput:l[1]||(l[1]=(...t)=>o.validateNumber&&o.validateNumber(...t))},null,40,gt),[[N,o.form.mobile]]),e("div",ht,[e("div",vt,[S(e("input",{type:"text",class:"form-control form-control-sm border search-countryList",placeholder:s.$t("search_country_name_or_country_code"),"onUpdate:modelValue":l[2]||(l[2]=t=>o.searchQuery=t)},null,8,yt),[[N,o.searchQuery]])]),e("ul",bt,[(r(!0),d(B,null,V(o.filteredCountries,t=>(r(),d("li",{key:t.id},[e("a",{href:"javascript:void(0);",class:"dropdown-item notify-item language py-2",onClick:m=>o.selectCountry(t)},[e("img",{src:t.flag,alt:"flag",class:"me-2 rounded",height:"18"},null,8,wt),e("span",St,n(t.name)+" "+n(t.dial_code),1)],8,kt)]))),128))])])]),(r(!0),d(B,null,V(o.errors.mobile,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])]),e("div",Mt,[e("div",Pt,[e("label",Ct,n(s.$t("name")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[3]||(l[3]=t=>o.form.name=t),placeholder:s.$t("enter_name"),id:"name"},null,8,Vt),[[N,o.form.name]]),(r(!0),d(B,null,V(o.errors.name,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])]),e("div",Bt,[e("h4",It,n(s.$t("ride_info")),1)]),e("div",Lt,[e("div",Tt,[e("label",qt,n(s.$t("booking_type")),1),S(e("select",{id:"type",class:"form-select","onUpdate:modelValue":l[4]||(l[4]=t=>o.form.is_later=t)},[e("option",xt,n(s.$t("choose_type")),1),e("option",Rt,n(s.$t("instant_booking")),1),e("option",Ut,n(s.$t("book_later")),1)],512),[[_e,o.form.is_later]]),(r(!0),d(B,null,V(o.errors.is_later,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])]),e("div",{class:"col-6",style:$e({display:T.transport_options.length===0?"none":"block"})},[e("div",zt,[e("div",Dt,[e("label",Et,n(s.$t("transport_type")),1),S(e("select",{id:"type",class:"form-select","onUpdate:modelValue":l[5]||(l[5]=t=>o.form.transport_type=t)},[e("option",At,n(s.$t("choose_transport_type")),1),(r(!0),d(B,null,V(T.transport_options,(t,m)=>(r(),d("option",{key:m,value:t},n(t.charAt(0).toUpperCase()+t.slice(1)),9,Ft))),128))],512),[[_e,o.form.transport_type]]),(r(!0),d(B,null,V(o.errors.transport_type,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])])],4),e("div",Ht,[e("h4",Nt,n(s.$t("schedule_type")),1),e("div",null,[e("div",Ot,[e("input",{class:"form-check-input",type:"radio",name:"ScheduleType",checked:o.form.ride_type=="regular",onClick:l[6]||(l[6]=t=>o.changelater("regular")),id:"later_ride",value:"later"},null,8,jt),e("label",Gt,n(s.$t("normal")),1)]),e("div",Wt,[e("input",{class:"form-check-input",onClick:l[7]||(l[7]=t=>o.changelater("rental")),type:"radio",name:"ScheduleType",checked:o.form.ride_type=="rental",id:"rental",value:"rental"},null,8,Yt),e("label",Qt,n(s.$t("rental_pack")),1)])])]),e("div",Kt,[e("div",Zt,[e("div",Jt,[e("label",Xt,n(s.$t("pickup_location")),1)]),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[8]||(l[8]=t=>o.form.pick_address=t),placeholder:s.$t("enter_pickup"),id:"pickup"},null,8,$t),[[N,o.form.pick_address]]),(r(!0),d(B,null,V(o.errors.pick_address,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])]),o.showAiportTerminal?(r(),d("div",eo,[e("div",to,[e("label",oo,n(s.$t("aiport_terminal_info")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[9]||(l[9]=t=>o.form.terminal=t),placeholder:"$t('enter_terminal_info')",id:"terminal"},null,512),[[N,o.form.terminal]])])])):I("",!0),o.showTrainStationEnterance?(r(),d("div",so,[e("div",ao,[e("label",lo,n(s.$t("station_enterance_info")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[10]||(l[10]=t=>o.form.enterance=t),placeholder:"$t('enter_enterance_info')",id:"enterance"},null,512),[[N,o.form.enterance]])])])):I("",!0),o.form.ride_type!=="rental"?(r(),d("div",io,[e("div",no,[e("label",ro,n(s.$t("drop_location")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[11]||(l[11]=t=>o.form.drop_address=t),placeholder:s.$t("enter_drop"),id:"drop"},null,8,co),[[N,o.form.drop_address]]),(r(!0),d(B,null,V(o.errors.drop_address,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])])):I("",!0),o.form.transport_type=="delivery"?(r(),d("h4",_o,n(s.$t("poc_info")),1)):I("",!0),o.form.transport_type=="delivery"?(r(),d("div",po,[e("span",mo,[e("div",uo,[S(e("input",{class:"form-check-input",type:"checkbox",id:"poc","onUpdate:modelValue":l[12]||(l[12]=t=>M.isPocSame=t)},null,512),[[et,M.isPocSame]]),e("label",fo,n(s.$t("check_if_poc_info_as_same_as_personal_info")),1)])])])):I("",!0),o.form.transport_type=="delivery"?(r(),d("div",go,[e("div",ho,[e("label",vo,n(s.$t("drop_poc_name")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[13]||(l[13]=t=>o.form.drop_poc_name=t),placeholder:s.$t("enter_poc_name"),id:"poc_name",disabled:M.isPocSame},null,8,yo),[[N,o.form.drop_poc_name]]),(r(!0),d(B,null,V(o.errors.drop_poc_name,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])])):I("",!0),o.form.transport_type=="delivery"?(r(),d("div",bo,[e("div",ko,[e("label",wo,n(s.$t("drop_poc_mobile")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[14]||(l[14]=t=>o.form.drop_poc_mobile=t),placeholder:s.$t("enter_poc_mobile"),id:"poc_mobile",disabled:M.isPocSame},null,8,So),[[N,o.form.drop_poc_mobile]]),(r(!0),d(B,null,V(o.errors.drop_poc_mobile,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])])):I("",!0),o.form.transport_type=="delivery"?(r(),d("h4",Mo,n(s.$t("select_goods")),1)):I("",!0),o.form.transport_type=="delivery"?(r(),d("div",Po,[e("div",Co,[e("label",Vo,n(s.$t("goods_type")),1),S(e("select",{id:"goods_type",class:"form-select","onUpdate:modelValue":l[15]||(l[15]=t=>o.form.goods_type_id=t)},[e("option",Bo,n(s.$t("choose_type")),1),(r(!0),d(B,null,V(Q.goodsTypes,t=>(r(),d("option",{key:t.id,value:t.id},n(t.goods_type_name),9,Io))),128))],512),[[_e,o.form.goods_type_id]]),(r(!0),d(B,null,V(o.errors.goods_type_id,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])])):I("",!0),o.form.transport_type=="delivery"?(r(),d("div",Lo,[e("div",To,[e("label",qo,n(s.$t("goods_quantity")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[16]||(l[16]=t=>o.form.goods_type_quantity=t),placeholder:s.$t("enter_quantity"),id:"goods_type_quantity"},null,8,xo),[[N,o.form.goods_type_quantity]]),(r(!0),d(B,null,V(o.errors.goods_type_quantity,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])])):I("",!0),o.form.is_rental==1?(r(),d("h4",Ro,n(s.$t("select_pack")),1)):I("",!0),o.form.is_rental==1?(r(),d("div",Uo,[e("div",zo,[e("label",Do,n(s.$t("rental_package_id")),1),S(e("select",{id:"rental_package_id",class:"form-select","onUpdate:modelValue":l[17]||(l[17]=t=>o.form.rental_package_id=t)},[e("option",Eo,n(s.$t("choose_type")),1),(r(!0),d(B,null,V(o.packageTypes,t=>(r(),d("option",{key:t.id,value:t.id},n(t.package_name),9,Ao))),128))],512),[[_e,o.form.rental_package_id]]),(r(!0),d(B,null,V(o.errors.rental_package_id,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])])):I("",!0),o.form.is_later==="1"?(r(),d("div",Fo,[e("div",Ho,[e("label",No,n(s.$t("date")),1),H(J,{placeholder:s.$t("select_date"),modelValue:o.form.trip_start_time,"onUpdate:modelValue":l[18]||(l[18]=t=>o.form.trip_start_time=t),config:M.dateTimeConfig,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"]),(r(!0),d(B,null,V(o.errors.trip_start_time,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])])):I("",!0),o.form.is_out_station==1?(r(),d("div",Oo,[e("h4",jo,n(s.$t("outstation")),1),e("div",null,[e("div",Go,[S(e("input",{class:"form-check-input",type:"radio",name:"is_round_trip",id:"oneway",value:0,"onUpdate:modelValue":l[19]||(l[19]=t=>o.form.is_round_trip=t)},null,512),[[oe,o.form.is_round_trip]]),e("label",Wo,n(s.$t("one_way_outstation_trip")),1)]),e("div",Yo,[S(e("input",{class:"form-check-input",type:"radio",name:"is_round_trip",id:"roundtrip",value:1,"onUpdate:modelValue":l[20]||(l[20]=t=>o.form.is_round_trip=t)},null,512),[[oe,o.form.is_round_trip]]),e("label",Qo,n(s.$t("round_trip_outstation_trip")),1)])])])):I("",!0),o.form.is_round_trip==1&&o.form.is_out_station==1?(r(),d("div",Ko,[e("div",Zo,[e("label",Jo,n(s.$t("return_time")),1),H(J,{placeholder:s.$t("return_time"),modelValue:o.form.return_time,"onUpdate:modelValue":l[21]||(l[21]=t=>o.form.return_time=t),config:T.dateTimeConfigReturnTime,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"])]),(r(!0),d(B,null,V(o.errors.return_time,(t,m)=>(r(),d("span",{key:m,class:"text-danger"},n(t),1))),128))])):I("",!0),o.vehicleTypes.length>0?(r(),d("h4",Xo,n(s.$t("select_vehicle")),1)):I("",!0),o.vehicleTypes.length>0?(r(),d("div",$o,[e("div",es,[e("div",ts,[(r(!0),d(B,null,V(o.vehicleTypes,(t,m)=>(r(),d("div",{key:m,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+t.zone_type_id,class:"select-checkbox-btn-wrapper"},[S(e("input",{id:"vehicle_"+t.zone_type_id,name:"types",type:"radio",value:t.zone_type_id,"onUpdate:modelValue":l[22]||(l[22]=k=>o.form.vehicle_type=k),class:"select-checkbox-btn-input"},null,8,ss),[[oe,o.form.vehicle_type]]),e("span",as,[e("a",ls,[e("div",is,[l[28]||(l[28]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),Me(n(t.driver_time||"--"),1)]),e("div",ns,[e("img",{alt:"",class:"rounded-circle img-fluid",src:t.vehicle_icon},null,8,rs)]),e("div",ds,n(t.total),1),e("div",cs,n(t.name),1)])])],8,os)]))),128))])])])):I("",!0),o.rentalVehicleTypes.length>0?(r(),d("h4",_s,n(s.$t("select_vehicle")),1)):I("",!0),o.rentalVehicleTypes.length>0?(r(),d("div",ps,[e("div",ms,[e("div",us,[(r(!0),d(B,null,V(o.rentalVehicleTypes,(t,m)=>(r(),d("div",{key:m,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+t.zone_type_id,class:"select-checkbox-btn-wrapper"},[S(e("input",{id:"vehicle_"+t.zone_type_id,name:"types",type:"radio",value:t.zone_type_id,"onUpdate:modelValue":l[23]||(l[23]=k=>o.form.vehicle_type=k),class:"select-checkbox-btn-input"},null,8,gs),[[oe,o.form.vehicle_type]]),e("span",hs,[e("a",vs,[e("div",ys,[l[29]||(l[29]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),Me(n(t.driver_time||"--"),1)]),e("div",bs,[e("img",{alt:"",class:"rounded-circle img-fluid",src:t.icon},null,8,ks)]),e("div",ws,n(t.fare_amount),1),e("div",Ss,n(t.name),1)])])],8,fs)]))),128))])])])):I("",!0),e("div",Ms,[e("h4",Ps,n(s.$t("assign")),1),e("div",null,[e("div",Cs,[S(e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",checked:o.form.assign_method==1,id:"WithoutinlineRadio1",value:1,"onUpdate:modelValue":l[24]||(l[24]=t=>o.form.assign_method=t)},null,8,Vs),[[oe,o.form.assign_method]]),e("label",Bs,n(s.$t("manual_assign")),1)]),e("div",Is,[S(e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio2",value:"0","onUpdate:modelValue":l[25]||(l[25]=t=>o.form.assign_method=t),checked:o.form.assign_method==0},null,8,Ls),[[oe,o.form.assign_method]]),e("label",Ts,n(s.$t("automatic_assign")),1)])])]),e("div",qs,[e("div",xs,[e("button",{type:"submit",disabled:!o.enableBooking,onClick:l[26]||(l[26]=(...t)=>o.makeBooking&&o.makeBooking(...t)),class:"btn btn-primary"},n(s.$t("make_booking")),9,Rs)])])])],512),e("div",Us,[e("div",zs,[e("div",Ds,n(s.$t("map_loading")),1)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Ws=He(lt,[["render",Es]]);export{Ws as default};
