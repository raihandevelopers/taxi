import{_ as E,Z as P,O as T,C as A,T as Q,r as v,G,g as u,o as r,x as I,w as C,a as L,N as J,k as y,l as e,J as l,y as m,q as _,M as p,i as n,L as f,F as b,B as h,K as F,n as K}from"./vendor-ddfbd976.js";import{L as Z}from"./main-306a5ea6.js";import{P as z}from"./page-header-2dc95532.js";import{i as W}from"./imageUpload-4f5efd67.js";import{L as X}from"./lottie-c31b5f00.js";import{F as Y}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const $={components:{Layout:Z,PageHeader:z,Head:P,Multiselect:T,FormValidation:Y,imageUpload:W,lottie:X},props:{successMessage:String,alertMessage:String,app_for:String,countries:Array,default_dial_code:String,default_flag:String,default_country_id:Number,owner:Object,serviceLocation:Object,validate:Function},setup(s){const{t}=A(),g=s.serviceLocation,o=Q({company_name:s.owner?s.owner.company_name:null,name:s.owner?s.owner.name:null,email:s.owner?s.owner.email:null,mobile:s.owner?s.owner.mobile:null,password:null,confirm_password:null,transport_type:s.owner?s.owner.transport_type:"",service_location_id:s.owner?s.owner.service_location_id:g.id,country:s.owner&&s.owner.user.country||s.default_country_id}),V=v(""),S=v({dial_code:s.default_dial_code||"",flag:s.default_flag||""}),R=G(()=>s.countries.filter(i=>i.name.toLowerCase().includes(V.value.toLowerCase()))),U=i=>{i&&(S.value=i,o.country=i.id)},D={company_name:{required:!0},name:{required:!0},mobile:{required:!0,regex:/^\d+$/},transport_type:{required:!0},service_location_id:{required:!0}},B=v(null),d=v({}),M=v(s.successMessage||""),k=v(s.alertMessage||""),x=v(!1),H=()=>{M.value="",k.value=""};s.app_for=="demo"&&(o.mobile="**********",o.email="**********");const a=new Date;new Date(a).setDate(a.getDate()+1);const N=async()=>{try{return o.email&&(!s.owner||o.email!==s.owner.email)?!!(await L.get(`/manage-owners/check-email/${o.email}${s.owner?`/${s.owner.id}`:""}`)).data.exists:!1}catch(i){return console.error(t("error_handling_form_submission"),i),i.response&&i.response.status===422?d.value=i.response.data.errors:console.error(t("an_unexpected_error_occurred"),i),!0}},q=async()=>{try{return o.mobile&&(!s.owner||o.mobile!==s.owner.mobile)?!!(await L.get(`/manage-owners/check-mobile/${o.mobile}${s.owner?`/${s.owner.id}`:""}`)).data.exists:!1}catch(i){return console.error(t("error_handling_form_submission"),i),i.response&&i.response.status===422?d.value=i.response.data.errors:console.error(t("an_unexpected_error_occurred"),i),!0}};return{form:o,successMessage:M,alertMessage:k,handleSubmit:async()=>{const[i,O]=await Promise.all([q(),N()]);d.value={},i?d.value.mobile=t("mobile_number_already_exists"):delete d.value.mobile,O?d.value.email=t("email_already_exists"):delete d.value.email,o.password&&o.password!==o.confirm_password?Object.assign(d,{password:[t("password_mismatch")]}):delete d.value.password;const j=B.value.validate();if(d.value={...d.value,...j},!(d.value&&Object.keys(d.value).length>0))try{let w;x.value=!0,s.owner&&s.owner.id?w=await L.post(`/manage-owners/update/${s.owner.id}`,o.data()):w=await L.post("/manage-owners/store",o.data()),w.status===201?(M.value=t("owner_created_successfully"),o.reset(),J.get("/manage-owners")):k.value=t("failed_to_create_owner")}catch(w){w.response&&w.response.status===422?d.value=w.response.data.errors:(console.error(t("error_creating_owner"),w),k.value=t("failed_to_create_owner_catch"))}},selectCountry:U,filteredCountries:R,selectedCountry:S,searchQuery:V,dismissMessage:H,validationRules:D,validationRef:B,errors:d,isButtonDisabled:x}}},ee={class:"mb-4"},se={class:"mb-1"},oe={class:"text-muted"},te={class:"row"},ae={class:"col-sm-6"},le={class:"mb-3"},re={for:"company_name",class:"form-label"},ne=["placeholder"],ie={class:"col-sm-6"},de={class:"mb-3"},ce={for:"name",class:"form-label"},me=["placeholder"],ue={class:"col-sm-6"},_e={class:"form-label"},fe={class:"input-group","data-input-flag":""},be={class:"btn btn-light border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ge=["src"],we={class:"ms-2 country-codeno"},ye=["placeholder"],ve={class:"dropdown-menu w-100"},pe={class:"p-2 px-3 pt-1 searchlist-input"},he=["placeholder"],ke={class:"list-unstyled dropdown-menu-list mb-0"},Ce=["onClick"],Me=["src"],Be={class:"align-middle"},xe={key:0,class:"text-danger"},Le={class:"col-sm-6"},Ve={class:"mb-3"},Se={for:"email",class:"form-label"},Re=["placeholder"],Ue={key:0,class:"col-sm-6"},De={class:"mb-3"},He={for:"password",class:"form-label"},Fe={key:0,class:"text-danger"},Ne=["placeholder"],qe={key:1,class:"col-sm-6"},Oe={class:"mb-3"},je={for:"confirm_password",class:"form-label"},Ee={key:0,class:"text-danger"},Pe=["placeholder"],Te={class:"col-sm-6"},Ae={class:"mb-3"},Qe={for:"select_area",class:"form-label"},Ge={value:"",disabled:""},Ie=["value"],Je={class:"col-sm-6"},Ke={class:"mb-3"},Ze={for:"select_transport_type",class:"form-label"},ze={disabled:"",value:""},We={value:"taxi"},Xe={value:"delivery"},Ye={value:"both"},$e={class:"d-flex align-items-end gap-3 mt-4"},es=["disabled"],ss={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},os={class:"alert-content"},ts={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},as={class:"alert-content"};function ls(s,t,g,o,V,S){const R=u("Head"),U=u("PageHeader"),D=u("BCardHeader"),B=u("FormValidation"),d=u("BCardBody"),M=u("BCard"),k=u("BCol"),x=u("BRow"),H=u("Layout");return r(),I(H,null,{default:C(()=>[y(R,{title:"Manage Owners"}),y(U,{title:g.owner?s.$t("edit"):s.$t("create"),pageTitle:s.$t("manage_owners"),pageLink:"/manage-owners"},null,8,["title","pageTitle"]),y(x,null,{default:C(()=>[y(k,{lg:"12"},{default:C(()=>[y(M,{"no-body":"",id:"tasksList"},{default:C(()=>[y(D,{class:"border-0"}),y(d,{class:"border border-dashed border-end-0 border-start-0 form-steps"},{default:C(()=>[e("form",{onSubmit:t[9]||(t[9]=K((...a)=>o.handleSubmit&&o.handleSubmit(...a),["prevent"])),class:"form-steps"},[t[18]||(t[18]=e("input",{type:"text",name:"fakeusernameremembered",style:{display:"none"}},null,-1)),t[19]||(t[19]=e("input",{type:"password",name:"fakepasswordremembered",style:{display:"none"}},null,-1)),y(B,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:C(()=>[e("div",null,[e("div",ee,[e("div",null,[e("h5",se,l(s.$t("basic_information")),1),e("p",oe,l(s.$t("fill_all_information_as_below")),1)])]),e("div",te,[e("div",ae,[e("div",le,[e("label",re,[m(l(s.$t("company_name"))+" ",1),t[12]||(t[12]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:s.$t("enter_company_name"),id:"company_name","onUpdate:modelValue":t[0]||(t[0]=a=>o.form.company_name=a)},null,8,ne),[[p,o.form.company_name]]),(r(!0),n(b,null,f(o.errors.company_name,(a,c)=>(r(),n("span",{key:c,class:"text-danger"},l(a),1))),128))])]),e("div",ie,[e("div",de,[e("label",ce,[m(l(s.$t("name"))+" ",1),t[13]||(t[13]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:s.$t("enter_name"),id:"name","onUpdate:modelValue":t[1]||(t[1]=a=>o.form.name=a)},null,8,me),[[p,o.form.name]]),(r(!0),n(b,null,f(o.errors.name,(a,c)=>(r(),n("span",{key:c,class:"text-danger"},l(a),1))),128))])]),e("div",ue,[e("div",null,[e("label",_e,[m(l(s.$t("mobile"))+" ",1),t[14]||(t[14]=e("span",{class:"text-danger"},"*",-1))]),e("div",fe,[e("button",be,[e("img",{src:o.selectedCountry.flag,alt:"flag",height:"20",class:"country-flagimg rounded"},null,8,ge),e("span",we,l(o.selectedCountry.dial_code),1)]),_(e("input",{type:"text",class:"form-control rounded-end flag-input","onUpdate:modelValue":t[2]||(t[2]=a=>o.form.mobile=a),placeholder:s.$t("enter_number")},null,8,ye),[[p,o.form.mobile]]),e("div",ve,[e("div",pe,[_(e("input",{type:"text",class:"form-control form-control-sm border search-countryList",placeholder:s.$t("search_country_name_or_country_code"),"onUpdate:modelValue":t[3]||(t[3]=a=>o.searchQuery=a)},null,8,he),[[p,o.searchQuery]])]),e("ul",ke,[(r(!0),n(b,null,f(o.filteredCountries,a=>(r(),n("li",{key:a.id},[e("a",{href:"javascript:void(0);",class:"dropdown-item notify-item language py-2",onClick:c=>o.selectCountry(a)},[e("img",{src:a.flag,alt:"flag",class:"me-2 rounded",height:"18"},null,8,Me),e("span",Be,l(a.name)+" "+l(a.dial_code),1)],8,Ce)]))),128))])])]),o.errors.mobile?(r(),n("span",xe,l(o.errors.mobile),1)):h("",!0)])]),e("div",Le,[e("div",Ve,[e("label",Se,[m(l(s.$t("email"))+" ",1),t[15]||(t[15]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"email",class:"form-control",placeholder:s.$t("enter_email"),id:"email","onUpdate:modelValue":t[4]||(t[4]=a=>o.form.email=a)},null,8,Re),[[p,o.form.email]]),(r(!0),n(b,null,f(o.errors.email,(a,c)=>(r(),n("span",{key:c,class:"text-danger"},l(a),1))),128))])]),g.owner?h("",!0):(r(),n("div",Ue,[e("div",De,[e("label",He,[m(l(s.$t("password"))+" ",1),g.owner?h("",!0):(r(),n("span",Fe,"*"))]),_(e("input",{type:"password",class:"form-control",placeholder:s.$t("enter_password"),id:"password","onUpdate:modelValue":t[5]||(t[5]=a=>o.form.password=a)},null,8,Ne),[[p,o.form.password]]),(r(!0),n(b,null,f(o.errors.password,(a,c)=>(r(),n("span",{key:c,class:"text-danger"},l(a),1))),128))])])),g.owner?h("",!0):(r(),n("div",qe,[e("div",Oe,[e("label",je,[m(l(s.$t("confirm_password"))+" ",1),g.owner?h("",!0):(r(),n("span",Ee,"*"))]),_(e("input",{type:"password",class:"form-control",placeholder:s.$t("enter_confirm_password"),id:"confirm_password","onUpdate:modelValue":t[6]||(t[6]=a=>o.form.confirm_password=a)},null,8,Pe),[[p,o.form.confirm_password]]),(r(!0),n(b,null,f(o.errors.confirm_password,(a,c)=>(r(),n("span",{key:c,class:"text-danger"},l(a),1))),128))])])),e("div",Te,[e("div",Ae,[e("label",Qe,l(s.$t("select_area")),1),_(e("select",{class:"form-control",id:"select_area","onUpdate:modelValue":t[7]||(t[7]=a=>o.form.service_location_id=a)},[e("option",Ge,l(s.$t("select_area")),1),(r(!0),n(b,null,f(g.serviceLocation,a=>(r(),n("option",{key:a.id,value:a.id},l(a.name),9,Ie))),128))],512),[[F,o.form.service_location_id]]),(r(!0),n(b,null,f(o.errors.service_location_id,(a,c)=>(r(),n("span",{key:c,class:"text-danger"},l(a),1))),128))])]),e("div",Je,[e("div",Ke,[e("label",Ze,[m(l(s.$t("select_transport_type"))+" ",1),t[16]||(t[16]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"select_transport_type",class:"form-select","onUpdate:modelValue":t[8]||(t[8]=a=>o.form.transport_type=a)},[e("option",ze,l(s.$t("select_transport_type")),1),e("option",We,l(s.$t("taxi")),1),e("option",Xe,l(s.$t("delivery")),1),e("option",Ye,l(s.$t("both")),1)],512),[[F,o.form.transport_type]]),(r(!0),n(b,null,f(o.errors.transport_type,(a,c)=>(r(),n("span",{key:c,class:"text-danger"},l(a),1))),128))])]),e("div",$e,[e("button",{type:"submit",class:"btn btn-success btn-label right ms-auto",disabled:o.isButtonDisabled},[m(l(s.$t("submit"))+" ",1),t[17]||(t[17]=e("i",{class:"ri-check-fill label-icon align-middle fs-16 ms-2"},null,-1))],8,es)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[o.successMessage?(r(),n("div",ss,[e("div",os,[t[20]||(t[20]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[21]||(t[21]=e("strong",null,"Success",-1)),m(" - "+l(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[10]||(t[10]=(...a)=>o.dismissMessage&&o.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):h("",!0),o.alertMessage?(r(),n("div",ts,[e("div",as,[t[22]||(t[22]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[23]||(t[23]=e("strong",null,"Alert",-1)),m(" - "+l(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[11]||(t[11]=(...a)=>o.dismissMessage&&o.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):h("",!0)])]),_:1})}const gs=E($,[["render",ls]]);export{gs as default};
