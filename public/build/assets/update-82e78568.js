import{_ as W,Z as X,O as $,r as m,T as O,Q as ee,a2 as se,a as H,g as f,o as d,x as oe,w as _,U as P,k as u,l as o,J as n,i as c,L,F as T,q as C,K as I,I as te,y as g,B as R,M as j,p as q,n as le}from"./vendor-ddfbd976.js";import{L as re}from"./main-306a5ea6.js";import{P as ae}from"./page-header-2dc95532.js";import{P as ne}from"./Pagination-f095ae3c.js";import"./footer-e648049d.js";import"./app-042fb454.js";const ie={components:{Layout:re,PageHeader:ae,Head:X,Pagination:ne,Multiselect:$},props:{successMessage:String,alertMessage:String},setup(r){const e=m(""),p=m(null),s=O({name:"",description:""}),S=O({all:"",locked:""}),b=m([]),E=m({}),M=m(!1),y=m(!1),h=m(!1),A=m(null),B=m(r.successMessage||""),x=m(r.alertMessage||""),F=m(),V=()=>{B.value="",x.value=""},D=()=>{s.reset(),p.value=null,y.value=!0},t=()=>{h.value=!0},v=a=>{p.value=a,s.name=a.name,s.description=a.description,s.clearErrors(),y.value=!0},Y=()=>{s.reset(),y.value=!1,p.value=null},z=()=>{S.reset(),U(),h.value=!1},K=()=>{const{name:a,description:l}=s,i={},k={name:{test:()=>!a,message:"Role name is required"},description:{test:()=>!l,message:"Role description is required"}};return Object.keys(k).forEach(w=>{k[w].test()&&(i[w]=k[w].message)}),i},J=async()=>{const a=K();if(Object.keys(a).length===0)try{let l;if(p.value?l=await H.put(`/roles/update/${p.value.id}`,s.data()):l=await H.post("/roles",s.data()),l.status===200||l.status===201){B.value=l.data.successMessage;const i=l.data.roles;if(p.value){const k=b.value.findIndex(w=>w.id===p.value.id);k!==-1&&(b.value[k]=i)}else b.value.push(i);y.value=!1,s.reset()}else console.error("Unexpected response status:",l.status)}catch(l){if(console.error("Error handling form submission:",l),l.response&&l.response.status===422){const i=l.response.data.errors;s.errors=i}else console.error("An unexpected error occurred:",l)}else s.errors=a},Q=a=>{s.errors[a]=""},Z=()=>{M.value=!1},N=async a=>{try{await H.delete(`/roles/delete/${a}`);const l=b.value.findIndex(i=>i.id===a);l!==-1&&b.value.splice(l,1),M.value=!1,P.fire("Success","Role deleted successfully","success")}catch(l){console.error("Error deleting role:",l),P.fire("Error","Failed to delete role","error")}},G=async a=>{P.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await N(a)}catch(i){console.error("Error deleting role:",i),P.fire("Error","Failed to delete the role","error")}})};ee(e,se.debounce(function(a){U(e.value)},300));const U=async(a=1)=>{try{const l=S.data();l.search=e.value,l.page=a;const i=await H.get("/roles1/list",{params:l});b.value=i.data.roles,E.value=i.data.paginator,h.value=!1}catch(l){console.error("Error fetching roles:",l)}};return{form:s,roles:b,modalShow:M,modalForm:y,deleteItemId:A,selectedRole:p,successMessage:B,alertMessage:x,createRole:D,filterRole:t,editRole:v,cancelEdit:Y,handleSubmit:J,deleteModal:G,closeModal:Z,deleteRole:N,dismissMessage:V,hideError:Q,searchTerm:e,paginator:E,modalFilter:h,clearFilter:z,fetchRoles:U,filter:S,handlePageChanged:async a=>{U(a)},has_identify_number:F}},mounted(){this.fetchRoles()}},de={action:"javascript:void(0);"},ce={class:"row"},me={class:"col-sm-6"},ue={class:"mb-3"},fe={for:"name",class:"form-label"},pe=["placeholder"],ve={class:"col-sm-6"},_e={class:"mb-3"},be={for:"has_expiry_date",class:"form-label"},ge={id:"has_expiry_date",class:"form-select"},ye={disabled:"",value:""},he={value:"1"},ke={value:"0"},Ce={class:"col-sm-6"},Me={class:"mb-3"},Be={for:"has_identify_number",class:"form-label"},we={disabled:"",value:""},Re={value:"1"},Se={value:"0"},Ee={class:"col-sm-6"},xe={class:"mb-3"},Fe={for:"identify_number_key",class:"form-label"},Ve=["placeholder"],Ue={class:"col-lg-12"},He={class:"text-end"},Pe={type:"submit",class:"btn btn-primary"},Le={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Te={class:"alert-content"},Ae={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},De={class:"alert-content"},Ie={class:"form-group mt-3"},Ne={key:0,class:"text-danger"},Oe={class:"form-group mt-3"},je={key:0,class:"text-danger"},qe={type:"submit",class:"btn btn-success m-2 float-end"},Ye={class:"input-group"};function ze(r,e,p,s,S,b){const E=f("Head"),M=f("PageHeader"),y=f("BCardHeader"),h=f("BCardBody"),A=f("BCard"),B=f("BCol"),x=f("BRow"),F=f("BModal"),V=f("BButton"),D=f("Layout");return d(),oe(D,null,{default:_(()=>[u(E,{title:"Owner Needed Documents"}),u(M,{title:r.$t("update"),pageTitle:r.$t(r.owner_needed_documents)},null,8,["title","pageTitle"]),u(x,null,{default:_(()=>[u(B,{lg:"12"},{default:_(()=>[u(A,{"no-body":"",id:"tasksList"},{default:_(()=>[u(y,{class:"border-0"}),u(h,{class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[o("form",de,[o("div",ce,[o("div",me,[o("div",ue,[o("label",fe,n(r.$t("name")),1),o("input",{type:"text",class:"form-control",placeholder:r.$t("enter_name"),id:"name"},null,8,pe),(d(!0),c(T,null,L(r.errors.name,(t,v)=>(d(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),o("div",ve,[o("div",_e,[o("label",be,n(r.$t("has_expiry_date")),1),o("select",ge,[o("option",ye,n(r.$t("select")),1),o("option",he,n(r.$t("yes")),1),o("option",ke,n(r.$t("no")),1)]),(d(!0),c(T,null,L(r.errors.country,(t,v)=>(d(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),o("div",Ce,[o("div",Me,[o("label",Be,n(r.$t("has_identify_number")),1),C(o("select",{id:"has_identify_number",class:"form-select","onUpdate:modelValue":e[0]||(e[0]=t=>s.has_identify_number=t)},[o("option",we,n(r.$t("select")),1),o("option",Re,n(r.$t("yes")),1),o("option",Se,n(r.$t("no")),1)],512),[[I,s.has_identify_number]]),(d(!0),c(T,null,L(r.errors.country,(t,v)=>(d(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),C(o("div",Ee,[o("div",xe,[o("label",Fe,n(r.$t("identify_number_key")),1),o("input",{type:"text",class:"form-control",placeholder:r.$t("enter_identify_number_key"),id:"identify_number_key"},null,8,Ve),(d(!0),c(T,null,L(r.errors.name,(t,v)=>(d(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])],512),[[te,s.has_identify_number==="1"]]),o("div",Ue,[o("div",He,[o("button",Pe,n(r.$t("update")),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),o("div",null,[s.successMessage?(d(),c("div",Le,[o("div",Te,[e[14]||(e[14]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[15]||(e[15]=g()),e[16]||(e[16]=o("strong",null,"Success",-1)),g(" - "+n(s.successMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-success",onClick:e[1]||(e[1]=(...t)=>s.dismissMessage&&s.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):R("",!0),s.alertMessage?(d(),c("div",Ae,[o("div",De,[e[17]||(e[17]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[18]||(e[18]=g()),e[19]||(e[19]=o("strong",null,"Alert",-1)),g(" - "+n(s.alertMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[2]||(e[2]=(...t)=>s.dismissMessage&&s.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):R("",!0)]),u(F,{modelValue:s.modalForm,"onUpdate:modelValue":e[10]||(e[10]=t=>s.modalForm=t),"hide-footer":"",title:s.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:_(()=>[o("form",{onSubmit:e[8]||(e[8]=le((...t)=>s.handleSubmit&&s.handleSubmit(...t),["prevent"])),onKeydown:e[9]||(e[9]=(...t)=>s.hideError&&s.hideError(...t))},[o("div",Ie,[e[20]||(e[20]=o("label",{for:"name",class:"form-label"},[g("Role Name"),o("span",{class:"text-danger"},"*")],-1)),C(o("input",{type:"text",id:"name","onUpdate:modelValue":e[3]||(e[3]=t=>s.form.name=t),class:q(["form-control",{"is-invalid":s.form.errors.name}]),onFocus:e[4]||(e[4]=t=>s.hideError("name"))},null,34),[[j,s.form.name]]),s.form.errors.name?(d(),c("div",Ne,n(s.form.errors.name),1)):R("",!0)]),o("div",Oe,[e[21]||(e[21]=o("label",{for:"description",class:"form-label"},[g("description"),o("span",{class:"text-danger"},"*")],-1)),C(o("input",{type:"text",id:"description","onUpdate:modelValue":e[5]||(e[5]=t=>s.form.description=t),class:q(["form-control",{"is-invalid":s.form.errors.description}]),onFocus:e[6]||(e[6]=t=>s.hideError("description"))},null,34),[[j,s.form.description]]),s.form.errors.description?(d(),c("div",je,n(s.form.errors.description),1)):R("",!0)]),o("button",qe,n(s.selectedRole?"Update":"Save"),1),s.selectedRole?(d(),c("button",{key:0,type:"button",onClick:e[7]||(e[7]=(...t)=>s.cancelEdit&&s.cancelEdit(...t)),class:"btn btn-secondary m-2 float-end"},"Cancel")):R("",!0)],32)]),_:1},8,["modelValue","title"]),u(F,{modelValue:s.modalFilter,"onUpdate:modelValue":e[13]||(e[13]=t=>s.modalFilter=t),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:_(()=>[o("form",null,[o("div",Ye,[C(o("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[11]||(e[11]=t=>s.filter.all=t)},e[22]||(e[22]=[o("option",{selected:""},"Select Status",-1),o("option",{value:"1"},"Yes",-1),o("option",{value:"0"},"No",-1)]),512),[[I,s.filter.all]]),C(o("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[12]||(e[12]=t=>s.filter.locked=t)},e[23]||(e[23]=[o("option",{selected:""},"Select Status",-1),o("option",{value:"0"},"Inactive",-1),o("option",{value:"1"},"Active",-1)]),512),[[I,s.filter.locked]])]),u(V,{variant:"primary",class:"float-end",onClick:s.fetchRoles},{default:_(()=>e[24]||(e[24]=[g(" Apply")])),_:1,__:[24]},8,["onClick"]),u(V,{variant:"outline-primary",class:"float-end mx-2",onClick:s.clearFilter},{default:_(()=>e[25]||(e[25]=[g("Clear")])),_:1,__:[25]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const $e=W(ie,[["render",ze]]);export{$e as default};
