import{_ as R,Z as x,O as L,C as N,T as F,r as p,g as _,o as b,x as B,w as l,U as P,a as T,N as U,k as n,l as e,y as v,J as i,B as w,q as M,W as C,M as D,n as O,i as S}from"./vendor-ddfbd976.js";import{L as E}from"./main-306a5ea6.js";import{P as j}from"./page-header-2dc95532.js";import{P as q}from"./Pagination-f095ae3c.js";import{i as A}from"./imageUpload-4f5efd67.js";import{F as I}from"./FormValidation-a9047131.js";import{_ as J}from"./google-map-ba92cb17.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const W=""+new URL("open-street-map-8e53db0a.png",import.meta.url).href;const Z={components:{Layout:E,PageHeader:j,Head:x,Pagination:q,Multiselect:L,FormValidation:I,imageUpload:A},props:{successMessage:String,alertMessage:String,app_for:String,settings:Object,validate:Function},setup(t){console.log(t.settings);const{t:s}=N(),a=F({map_type:t.settings&&t.settings.map_type||"",google_map_key:t.settings&&t.settings.google_map_key||""}),o={map_type:{required:!0}},h=p(null),g=p({}),u=p(t.successMessage||""),m=p(t.alertMessage||""),f=p();return{form:a,successMessage:u,alertMessage:m,handleSubmit:async()=>{if(t.app_for=="demo"){P.fire(s("error"),s("you_are_not_authorised"),"error");return}if(g.value=h.value.validate(),!(Object.keys(g.value).length>0))try{let d,c=new FormData;c.append("map_type",a.map_type),c.append("enable_vase_map",a.enable_vase_map),c.append("google_map_key",a.google_map_key),d=await T.post("/map-setting/update",c),d.status===201?(u.value=s("map_settings_created_successfully"),a.reset(),U.get("/map-setting")):m.value=s("failed_to_create_map_settings")}catch(d){d.response&&d.response.status===422?g.value=d.response.data.errors:(console.error(s("error_creating_map_settings"),d),m.value=s("failed_to_create_map_settings_catch"))}},dismissMessage:()=>{u.value="",m.value=""},selectedMapType:p(null),validationRules:o,validationRef:h,errors:g,map_type:f}},mounted(){const t=document.getElementById("google_map_key");new MutationObserver(a=>{a.forEach(o=>{o.attributeName==="type"&&t.type!=="password"&&(t.type="password")})}).observe(t,{attributes:!0})}},z={class:"alert bg-warning border-warning fs-18",role:"alert"},G={class:"border-0"},K={class:"row"},Q={class:"col-lg-6"},X={class:"mb-5"},Y={class:"card rounded border border-2 shadow-lg",style:{width:"19rem"}},$={class:"google_map"},ee={class:"text-center mt-3"},se={class:"form-check form-check-success",style:{"margin-left":"140px"}},te=["disabled"],oe={class:"col-lg-6"},ae={class:"mb-5"},le={class:"card rounded border border-2 shadow-lg",style:{width:"19rem"}},ne={class:"open-street-map"},re={class:"text-center mt-3"},ie={class:"form-check form-check-success",style:{"margin-left":"140px"}},de=["disabled"],_e={class:"border-0"},me={class:"row"},ce={class:"col-sm-6"},pe={class:"mb-3"},ge={for:"google_map_key",class:"form-label"},ue=["readonly","placeholder"],fe={class:"col-lg-12"},ye={class:"text-end"},be={type:"submit",class:"btn btn-primary"},ve={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},he={class:"alert-content"},ke={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},we={class:"alert-content"};function Me(t,s,a,o,h,g){const u=_("Head"),m=_("PageHeader"),f=_("BCardHeader"),y=_("BCard"),k=_("BCardBody"),d=_("FormValidation"),c=_("BCol"),V=_("BRow"),H=_("Layout");return b(),B(H,null,{default:l(()=>[n(u,{title:"Map Settings"}),n(m,{title:t.$t("map_settings"),pageTitle:t.$t("map_settings")},null,8,["title","pageTitle"]),n(V,null,{default:l(()=>[a.app_for==="demo"?(b(),B(y,{key:0,"no-body":"",id:"tasksList"},{default:l(()=>[n(f,{class:"border-0"},{default:l(()=>[e("div",z,[e("strong",null,[v(i(t.$t("note"))+" : ",1),e("em",null,i(t.$t("actions_restricted_due_to_demo_mode")),1)])])]),_:1})]),_:1})):w("",!0),n(c,{lg:"12"},{default:l(()=>[e("form",{onSubmit:s[3]||(s[3]=O((...r)=>o.handleSubmit&&o.handleSubmit(...r),["prevent"]))},[n(d,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:l(()=>[n(y,{"no-body":"",id:"tasksList"},{default:l(()=>[n(f,null,{default:l(()=>[e("h4",G,i(t.$t("choose_map_type")),1)]),_:1}),n(k,null,{default:l(()=>[e("div",K,[e("div",Q,[e("div",X,[e("div",Y,[e("label",$,[s[6]||(s[6]=e("img",{class:"rounded p-2",alt:"google_map",src:J,width:"100%",height:"250px"},null,-1)),e("h5",ee,i(t.$t("google_map")),1),e("div",se,[M(e("input",{type:"radio",disabled:a.app_for==="demo",name:"map_type",value:"google_map",class:"form-check-input","onUpdate:modelValue":s[0]||(s[0]=r=>o.form.map_type=r)},null,8,te),[[C,o.form.map_type]])])])])])]),e("div",oe,[e("div",ae,[e("div",le,[e("label",ne,[s[7]||(s[7]=e("img",{class:"rounded p-2",alt:"open-street-map",src:W,width:"100%",height:"250px"},null,-1)),e("h5",re,i(t.$t("open_Street")),1),e("div",ie,[M(e("input",{type:"radio",disabled:a.app_for==="demo",name:"map_type",value:"open_street_map",class:"form-check-input","onUpdate:modelValue":s[1]||(s[1]=r=>o.form.map_type=r)},null,8,de),[[C,o.form.map_type]])])])])])])])]),_:1})]),_:1}),n(y,null,{default:l(()=>[n(f,null,{default:l(()=>[e("h4",_e,i(t.$t("google_map_apis")),1)]),_:1}),n(k,null,{default:l(()=>[e("div",me,[e("div",ce,[e("div",pe,[e("label",ge,[v(i(t.$t("google_map_key_for_web_apps"))+" ",1),s[8]||(s[8]=e("span",{class:"text-danger"},"*",-1))]),M(e("input",{type:"password",readonly:a.app_for==="demo",class:"form-control",placeholder:t.$t("enter_google_map_key_for_web_apps"),id:"google_map_key","onUpdate:modelValue":s[2]||(s[2]=r=>o.form.google_map_key=r)},null,8,ue),[[D,o.form.google_map_key]])])]),e("div",fe,[e("div",ye,[e("button",be,i(a.settings?t.$t("update"):t.$t("save")),1)])])])]),_:1})]),_:1})]),_:1},8,["form","rules"])],32)]),_:1})]),_:1}),e("div",null,[o.successMessage?(b(),S("div",ve,[e("div",he,[s[9]||(s[9]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[10]||(s[10]=e("strong",null,"Success",-1)),v(" - "+i(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[4]||(s[4]=(...r)=>o.dismissMessage&&o.dismissMessage(...r)),"aria-label":"Close Success Message"})])])):w("",!0),o.alertMessage?(b(),S("div",ke,[e("div",we,[s[11]||(s[11]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[12]||(s[12]=e("strong",null,"Alert",-1)),v(" - "+i(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[5]||(s[5]=(...r)=>o.dismissMessage&&o.dismissMessage(...r)),"aria-label":"Close Alert Message"})])])):w("",!0)])]),_:1})}const Pe=R(Z,[["render",Me]]);export{Pe as default};
