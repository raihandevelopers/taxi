import{_ as K,Z as W,O as Z,P as Q,z as X,C as $,r as f,T as ee,R as te,g as c,S as se,o as u,x as T,w as n,a as E,U as v,N as ae,k as i,l as t,J as l,q as M,K as oe,i as m,L as z,F as Y,y as h,B as y,p as le,n as U,W as j}from"./vendor-ddfbd976.js";import{L as ne}from"./main-306a5ea6.js";import{P as ie}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import{s as de}from"./searchbar-3acbc236.js";import{l as ce}from"./footer-e648049d.js";import{_ as ue}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const fe={data(){return{rightOffcanvas:!1}},components:{Layout:ne,PageHeader:ie,Head:W,Pagination:re,Multiselect:Z,flatPickr:Q,Link:X,searchbar:de},props:{successMessage:String,alertMessage:String,app_for:String},setup(o){const{t:e}=$(),P=f(""),a=ee({transport_type:null,dispatch_type:null,status:null,limit:10}),p=f([]),x=f({}),k=f(!1),C=f(!1),b=f(null),g=f({}),S=f(o.successMessage||""),B=f(o.alertMessage||""),H=()=>{S.value="",B.value=""},w=f(!1),F=()=>{s(),C.value=!0,w.value=!1},N=()=>{a.reset(),s(),w.value=!1},I=()=>{k.value=!1},O=async r=>{try{await E.delete(`/title/delete/${r}`);const d=p.value.findIndex(_=>_.id===r);d!==-1&&p.value.splice(d,1),k.value=!1,v.fire(e("success"),e("title_deleted_successfully"),"success")}catch{v.fire(e("error"),e("failed_to_delete_title"),"error")}},R=async r=>{v.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async d=>{if(d.isConfirmed)try{await O(r)}catch(_){console.error(e("error_deleting_data"),_),v.fire(e("error"),e("failed_to_delete_the_data"),"error")}})},L=async r=>{P.value=r,s()},s=async(r=1)=>{try{const d=a.data();d.search=P.value,d.page=r;const _=await E.get("/title/list",{params:d});p.value=_.data.results,x.value=_.data.paginator,G(x.value.total),C.value=!1}catch(d){console.error(e("error_fetching_title"),d)}},A=async(r,d)=>{v.fire({title:e("are_you_sure"),text:e("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:e("yes"),cancelButtonText:e("cancel")}).then(async _=>{if(_.isConfirmed)try{await E.post("/title/update-status",{id:r,status:d});const V=p.value.findIndex(J=>J.id===r);V!==-1&&(p.value[V].active=d),v.fire(e("changed"),e("status_updated_successfully"),"success")}catch(V){console.error(e("error_updating_status"),V),v.fire(e("error"),e("failed_to_update_status"),"error")}})},D=async r=>{localStorage.setItem("/title/list",r),s(r)},q=async r=>{ae.get(`/title/edit/${r.id}`)},G=()=>{g.value=[10,25,50,100,200,500]};return{results:p,modalShow:k,deleteItemId:b,successMessage:S,alertMessage:B,filterData:F,deleteModal:R,closeModal:I,deleteData:O,dismissMessage:H,searchTerm:P,fetchSearch:L,paginator:x,modalFilter:C,clearFilter:N,fetchDatas:s,filter:a,handlePageChanged:D,editData:q,rightOffcanvas:w,toggleActiveStatus:A,paginatorOption:g,changeEntriesPerPage:()=>{s()}}},computed:{...ce,...te(["permissions"])},mounted(){this.fetchDatas();const o=localStorage.getItem("/title/list");o?this.handlePageChanged(Number(o)):this.handlePageChanged(1)}},me={class:"d-flex align-items-center mt-3"},ge={class:"me-2 text-muted"},_e=["value"],pe={class:"ms-2 text-muted"},ve={class:"d-flex align-items-center gap-2"},he={class:"table-responsive"},be={class:"table align-middle position-relative table-nowrap"},ye={class:"table-active"},ke={scope:"col"},Ce={scope:"col"},Be={scope:"col"},we={scope:"col"},Me={key:0},Pe={key:0},xe=["onClick","id","checked"],Se={class:"d-flex"},Oe={key:1},Le={colspan:"12",class:"text-center"},De={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ve={class:"alert-content"},Te={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},He={class:"alert-content"},Fe={class:"offcanvas-body"},Ne={class:"mb-4"},Ie={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Re={class:"form-check form-check-inline"},Ae={class:"form-check-label",for:"active"},Ee={class:"form-check form-check-inline"},Ue={class:"form-check-label",for:"inactive"},ze={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function Ye(o,e,P,a,p,x){const k=c("Head"),C=c("PageHeader"),b=c("BCol"),g=c("BButton"),S=c("Link"),B=c("BRow"),H=c("BCardHeader"),w=c("BCardBody"),F=c("BCard"),N=c("BFrom"),I=c("BOffcanvas"),O=c("Pagination"),R=c("Layout"),L=se("b-tooltip");return u(),T(R,null,{default:n(()=>[i(k,{title:"Title"}),i(C,{title:o.$t("title"),pageTitle:o.$t("support_management")},null,8,["title","pageTitle"]),i(B,null,{default:n(()=>[i(b,{lg:"12"},{default:n(()=>[i(F,{"no-body":"",id:"tasksList"},{default:n(()=>[i(H,{class:"border-0"},{default:n(()=>[i(B,{class:"g-2"},{default:n(()=>[i(b,{md:"3"},{default:n(()=>[t("div",me,[t("label",ge,l(o.$t("show")),1),M(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.filter.limit=s),onChange:e[1]||(e[1]=(...s)=>a.changeEntriesPerPage&&a.changeEntriesPerPage(...s)),class:"form-select form-select-sm w-auto"},[(u(!0),m(Y,null,z(a.paginatorOption,s=>(u(),m("option",{key:s,value:s},l(s),9,_e))),128))],544),[[oe,a.filter.limit]]),t("label",pe,l(o.$t("entries")),1)])]),_:1}),i(b,{md:"3"}),i(b,{md:"auto",class:"ms-auto"},{default:n(()=>[t("div",ve,[o.permissions.includes("add-ticket-title")?(u(),T(S,{key:0,href:"/title/create"},{default:n(()=>[i(g,{variant:"primary",class:"float-end"},{default:n(()=>[e[7]||(e[7]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),h(l(o.$t("add_title")),1)]),_:1,__:[7]})]),_:1})):y("",!0)])]),_:1})]),_:1})]),_:1}),i(w,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[t("div",he,[t("table",be,[t("thead",ye,[t("tr",null,[e[8]||(e[8]=t("th",null,null,-1)),t("th",ke,l(o.$t("title")),1),t("th",Ce,l(o.$t("user_type")),1),t("th",Be,l(o.$t("status")),1),t("th",we,l(o.$t("action")),1)])]),a.results.length>0?(u(),m("tbody",Me,[(u(!0),m(Y,null,z(a.results,(s,A)=>(u(),m("tr",{key:A},[e[11]||(e[11]=t("td",null,null,-1)),t("td",null,l(s.title),1),t("td",null,l(s.user_type),1),o.permissions.includes("toggle-ticket-title")?(u(),m("td",Pe,[t("div",{class:le({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":s.active})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:U(D=>a.toggleActiveStatus(s.id,!s.active),["prevent"]),id:"status_"+s.id,checked:s.active},null,8,xe)],2)])):y("",!0),t("td",null,[t("div",Se,[o.permissions.includes("edit-ticket-title")?M((u(),T(g,{key:0,onClick:U(D=>a.editData(s),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:o.$t("edit")},{default:n(()=>e[9]||(e[9]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[9]},1032,["onClick","title"])),[[L,void 0,void 0,{hover:!0}]]):y("",!0),o.permissions.includes("delete-ticket-title")?M((u(),T(g,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:U(D=>a.deleteModal(s.id),["prevent"]),"data-bs-toggle":"tooltip",title:o.$t("delete")},{default:n(()=>e[10]||(e[10]=[t("i",{class:"bx bx-trash bx-xs"},null,-1)])),_:2,__:[10]},1032,["onClick","title"])),[[L,void 0,void 0,{hover:!0}]]):y("",!0)])])]))),128))])):(u(),m("tbody",Oe,[t("tr",null,[t("td",Le,[e[12]||(e[12]=t("img",{src:ue,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,l(o.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[a.successMessage?(u(),m("div",De,[t("div",Ve,[e[13]||(e[13]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[14]||(e[14]=h()),e[15]||(e[15]=t("strong",null,"Success",-1)),h(" - "+l(a.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[2]||(e[2]=(...s)=>a.dismissMessage&&a.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):y("",!0),a.alertMessage?(u(),m("div",Te,[t("div",He,[e[16]||(e[16]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[17]||(e[17]=h()),e[18]||(e[18]=t("strong",null,"Alert",-1)),h(" - "+l(a.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[3]||(e[3]=(...s)=>a.dismissMessage&&a.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):y("",!0)]),i(I,{modelValue:a.rightOffcanvas,"onUpdate:modelValue":e[6]||(e[6]=s=>a.rightOffcanvas=s),placement:"end",title:o.$t("users_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:n(()=>[i(N,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:n(()=>[t("div",Fe,[t("div",Ne,[t("label",Ie,l(o.$t("status")),1),t("div",null,[t("div",Re,[M(t("input",{class:"form-check-input","onUpdate:modelValue":e[4]||(e[4]=s=>a.filter.status=s),type:"radio",name:"inlineRadioOptions",id:"active",value:"1"},null,512),[[j,a.filter.status]]),t("label",Ae,l(o.$t("active")),1)]),t("div",Ee,[M(t("input",{class:"form-check-input","onUpdate:modelValue":e[5]||(e[5]=s=>a.filter.status=s),type:"radio",name:"inlineRadioOptions",id:"inactive",value:"0"},null,512),[[j,a.filter.status]]),t("label",Ue,l(o.$t("inactive")),1)])])])]),t("div",ze,[i(g,{variant:"light",onClick:a.clearFilter,class:"w-100"},{default:n(()=>[h(l(o.$t("clear_filter")),1)]),_:1},8,["onClick"]),i(g,{type:"submit",onClick:a.filterData,variant:"success",class:"w-100"},{default:n(()=>[h(l(o.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),i(O,{paginator:a.paginator,onPageChanged:a.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const $e=K(fe,[["render",Ye]]);export{$e as default};
