import{_ as P,O as L,P as M,Z as T,z as q,T as k,N as D,C as F,r as g,G as R,D as U,g as i,o as m,x as A,w as d,a as H,k as l,l as e,J as s,q as N,K as O,i as y,F as x,L as V,p as W,y as j,n as z}from"./vendor-ddfbd976.js";import{L as I}from"./main-306a5ea6.js";import{s as $}from"./searchbar-3acbc236.js";import{_ as E}from"./UserWebMenu-2e0e812c.js";import{P as G}from"./Pagination-f095ae3c.js";import{i as J}from"./app-042fb454.js";import{_ as K}from"./search-file-ab3e1046.js";import"./footer-e648049d.js";const Z={props:{user:Object,requestmodel:{type:Object,required:!0},currency:Array},data(){return{searchTerm:""}},components:{Layout:I,Multiselect:L,flatPickr:M,Head:T,searchbar:$,UserWebMenu:E,Pagination:G,Link:q,useForm:k,router:D},setup(n){const{t:r}=F(),u=g(""),o=g(""),b=k({transport_type:null,dispatch_type:null,status:null}),c=g([]),h=g({}),C=async a=>{u.value=a,p()},p=async(a=1)=>{try{const _=b.data();_.search=u.value,_.page=a;const t=await H.get("/webuser/list",{params:_});c.value=t.data.results,h.value=t.data.paginator}catch(_){console.error(r("error_fetching_users"),_)}},v=async a=>{p(a)},f=a=>a.is_cancelled?"Cancelled":a.is_completed?"Completed":a.is_trip_start?"On Trip":a.is_driver_arrived?"Driver Arrived":a.is_later&&a.is_driver_started?"Driver Started":a.is_driver_started?"Accepted":a.is_later?"Upcoming":"Searching",B=R(()=>o.value?c.value.filter(a=>o.value==="_completed"?a.is_completed:o.value==="_cancelled"?a.is_cancelled:o.value==="_upcoming"?!a.is_completed&&!a.is_cancelled:!0):c.value),S=async a=>{D.get(`/history/view/${a.id}`)};return U(async()=>{await J("en")}),{results:c,searchTerm:u,rideStatus:f,fetchSearch:C,paginator:h,fetchDatas:p,filter:b,handlePageChanged:v,filteredResults:B,selectedStatus:o,viewData:S}},computed:{},mounted(){this.fetchDatas()},methods:{applyFilter(){}}},Q={class:"tab-content text-muted"},X={class:"tab-pane active border p-4"},Y={class:"d-flex float-end gap-3 mb-3"},ee={value:""},te={value:"_completed"},se={value:"_cancelled"},ae={value:"_upcoming"},oe={class:"table-responsive px-3 mx-n3"},ne={class:"table align-middle position-relative table-nowrap"},re={class:"table-active"},le={scope:"col"},de={scope:"col"},ie={scope:"col"},ce={scope:"col"},_e={scope:"col"},ue={scope:"col"},pe={scope:"col"},me={scope:"col"},he={key:0},ve={class:"address"},fe={class:"address"},ge={class:"d-flex"},ye=["src"],be=["onClick","disabled"],Ce={key:1},Be={colspan:"7",class:"text-center"};function Se(n,r,u,o,b,c){const h=i("Head"),C=i("UserWebMenu"),p=i("BCardHeader"),v=i("BCol"),f=i("BRow"),B=i("BBadge"),S=i("BCardBody"),a=i("BCard"),_=i("Pagination");return m(),A(a,null,{default:d(()=>[l(h,{title:"Taxi Ride"}),l(p,{class:"border-0"},{default:d(()=>[l(C,{user:u.user},null,8,["user"])]),_:1}),l(f,null,{default:d(()=>[l(v,{lg:"12"},{default:d(()=>[l(a,{"no-body":"",id:"tasksList"},{default:d(()=>[l(p,{class:"border-0"},{default:d(()=>[e("h3",null,s(n.$t("history")),1)]),_:1}),l(S,{class:"border border-dashed border-end-0 border-start-0"},{default:d(()=>[r[4]||(r[4]=e("div",null,null,-1)),e("div",Q,[e("div",X,[l(f,null,{default:d(()=>[l(v,{lg:"12"},{default:d(()=>[e("div",Y,[r[2]||(r[2]=e("div",{class:""},null,-1)),N(e("select",{class:"form-select","onUpdate:modelValue":r[0]||(r[0]=t=>o.selectedStatus=t),id:"trip-status",onChange:r[1]||(r[1]=(...t)=>c.applyFilter&&c.applyFilter(...t))},[e("option",ee,s(n.$t("all")),1),e("option",te,s(n.$t("completed")),1),e("option",se,s(n.$t("cancelled")),1),e("option",ae,s(n.$t("upcoming")),1)],544),[[O,o.selectedStatus]])])]),_:1})]),_:1}),e("div",oe,[e("table",ne,[e("thead",re,[e("tr",null,[e("th",le,s(n.$t("s_no")),1),e("th",de,s(n.$t("request_id")),1),e("th",ie,s(n.$t("pickup_location")),1),e("th",ce,s(n.$t("drop_location")),1),e("th",_e,s(n.$t("transport_type")),1),e("th",ue,s(n.$t("trip_status")),1),e("th",pe,s(n.$t("amount")),1),e("th",me,s(n.$t("action")),1)])]),o.filteredResults.length>0?(m(),y("tbody",he,[(m(!0),y(x,null,V(o.filteredResults,(t,w)=>(m(),y("tr",{key:w},[e("td",null,s(w+1),1),e("td",null,s(t.request_number),1),e("td",null,[e("div",ve,s(t.pick_address),1),e("div",null,s(t.converted_created_at),1)]),e("td",null,[e("div",fe,s(t.drop_address),1),e("div",null,s(t.converted_completed_at),1)]),e("td",null,[e("div",ge,[e("img",{src:t.vehicle_type_image,alt:"",class:"avatar-sm rounded-circle me-2"},null,8,ye),e("div",null,[e("span",null,s(t.transport_type),1),e("p",null,s(t.converted_created_at),1)])])]),e("td",null,[l(B,{class:W({"text-uppercase":!0,"text-bg-success":o.rideStatus(t)==="Completed"||o.rideStatus(t)==="Accepted"||o.rideStatus(t)==="Driver Started","text-bg-danger":o.rideStatus(t)==="Cancelled","text-bg-info":o.rideStatus(t)==="On Trip","text-bg-warning":o.rideStatus(t)==="Upcoming"||o.rideStatus(t)==="Driver Arrived"||o.rideStatus(t)==="Searching"})},{default:d(()=>[j(s(o.rideStatus(t)),1)]),_:2},1032,["class"])]),e("td",null,s(u.currency)+" "+s(t.request_eta_amount),1),e("td",null,[e("button",{onClick:z(we=>o.viewData(t),["prevent"]),disabled:!n.permissions.includes("view-web-history-detail"),type:"button",class:"btn btn-primary btn-sm"},s(n.$t("view")),9,be)])]))),128))])):(m(),y("tbody",Ce,[e("tr",null,[e("td",Be,[r[3]||(r[3]=e("img",{src:K,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,s(n.$t("no_data_found")),1)])])]))])])])])]),_:1,__:[4]})]),_:1})]),_:1})]),_:1}),l(_,{paginator:o.paginator,onPageChanged:o.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Re=P(Z,[["render",Se]]);export{Re as default};
