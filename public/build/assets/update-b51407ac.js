import{_ as G,Z as W,O as X,r as u,T as q,Q as $,a2 as ee,a as T,g as f,o as d,x as oe,w as g,U as H,k as m,l as t,J as n,q as b,K as N,i as c,L,F as A,M as R,y as _,B as x,p as O,n as te}from"./vendor-ddfbd976.js";import{L as se}from"./main-306a5ea6.js";import{P as le}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import"./footer-e648049d.js";import"./app-042fb454.js";const ae={components:{Layout:se,PageHeader:le,Head:W,Pagination:re,Multiselect:X},props:{successMessage:String,alertMessage:String},setup(r){const e=u(""),p=u(null),o=q({name:"",description:""}),E=q({all:"",locked:""}),y=u([]),S=u({}),k=u(!1),C=u(!1),h=u(!1),D=u(null),B=u(r.successMessage||""),V=u(r.alertMessage||""),F=()=>{B.value="",V.value=""},U=()=>{o.reset(),p.value=null,C.value=!0},I=()=>{h.value=!0},s=a=>{p.value=a,o.name=a.name,o.description=a.description,o.clearErrors(),C.value=!0},v=()=>{o.reset(),C.value=!1,p.value=null},Y=()=>{E.reset(),P(),h.value=!1},z=()=>{const{name:a,description:l}=o,i={},M={name:{test:()=>!a,message:"Role name is required"},description:{test:()=>!l,message:"Role description is required"}};return Object.keys(M).forEach(w=>{M[w].test()&&(i[w]=M[w].message)}),i},K=async()=>{const a=z();if(Object.keys(a).length===0)try{let l;if(p.value?l=await T.put(`/roles/update/${p.value.id}`,o.data()):l=await T.post("/roles",o.data()),l.status===200||l.status===201){B.value=l.data.successMessage;const i=l.data.roles;if(p.value){const M=y.value.findIndex(w=>w.id===p.value.id);M!==-1&&(y.value[M]=i)}else y.value.push(i);C.value=!1,o.reset()}else console.error("Unexpected response status:",l.status)}catch(l){if(console.error("Error handling form submission:",l),l.response&&l.response.status===422){const i=l.response.data.errors;o.errors=i}else console.error("An unexpected error occurred:",l)}else o.errors=a},J=a=>{o.errors[a]=""},Q=()=>{k.value=!1},j=async a=>{try{await T.delete(`/roles/delete/${a}`);const l=y.value.findIndex(i=>i.id===a);l!==-1&&y.value.splice(l,1),k.value=!1,H.fire("Success","Role deleted successfully","success")}catch(l){console.error("Error deleting role:",l),H.fire("Error","Failed to delete role","error")}},Z=async a=>{H.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await j(a)}catch(i){console.error("Error deleting role:",i),H.fire("Error","Failed to delete the role","error")}})};$(e,ee.debounce(function(a){P(e.value)},300));const P=async(a=1)=>{try{const l=E.data();l.search=e.value,l.page=a;const i=await T.get("/roles1/list",{params:l});y.value=i.data.roles,S.value=i.data.paginator,h.value=!1}catch(l){console.error("Error fetching roles:",l)}};return{form:o,roles:y,modalShow:k,modalForm:C,deleteItemId:D,selectedRole:p,successMessage:B,alertMessage:V,createRole:U,filterRole:I,editRole:s,cancelEdit:v,handleSubmit:K,deleteModal:Z,closeModal:Q,deleteRole:j,dismissMessage:F,hideError:J,searchTerm:e,paginator:S,modalFilter:h,clearFilter:Y,fetchRoles:P,filter:E,handlePageChanged:async a=>{P(a)}}},mounted(){this.fetchRoles()}},ne={action:"javascript:void(0);"},ie={class:"row"},de={class:"col-sm-6"},ce={class:"mb-3"},me={for:"select_transport_type",class:"form-label"},ue={disabled:"",value:""},fe={value:"Taxi"},pe={value:"Delivery"},ve={value:"all"},ge={class:"col-sm-6"},ye={class:"mb-3"},be={for:"name",class:"form-label"},_e=["placeholder"],Ce={class:"col-sm-6"},he={class:"mb-3"},Me={for:"short_description",class:"form-label"},ke=["placeholder"],Be={class:"col-sm-6"},we={class:"mb-3"},Re={for:"description",class:"form-label"},xe={class:"col-lg-12"},Ee={class:"text-end"},Se={type:"submit",class:"btn btn-primary"},Ve={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Fe={class:"alert-content"},Ue={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Pe={class:"alert-content"},Te={class:"form-group mt-3"},He={key:0,class:"text-danger"},Le={class:"form-group mt-3"},Ae={key:0,class:"text-danger"},De={type:"submit",class:"btn btn-success m-2 float-end"},Ie={class:"input-group"};function Ne(r,e,p,o,E,y){const S=f("Head"),k=f("PageHeader"),C=f("BCardHeader"),h=f("BCardBody"),D=f("BCard"),B=f("BCol"),V=f("BRow"),F=f("BModal"),U=f("BButton"),I=f("Layout");return d(),oe(I,null,{default:g(()=>[m(S,{title:"Rental Package Type"}),m(k,{title:r.$t("update"),pageTitle:r.$t("rental_package_types")},null,8,["title","pageTitle"]),m(V,null,{default:g(()=>[m(B,{lg:"12"},{default:g(()=>[m(D,{"no-body":"",id:"tasksList"},{default:g(()=>[m(C,{class:"border-0"}),m(h,{class:"border border-dashed border-end-0 border-start-0"},{default:g(()=>[t("form",ne,[t("div",ie,[t("div",de,[t("div",ce,[t("label",me,n(r.$t("transport_type")),1),b(t("select",{id:"select_transport_type",class:"form-select","onUpdate:modelValue":e[0]||(e[0]=s=>o.form.country=s)},[t("option",ue,n(r.$t("select_transport_type")),1),t("option",fe,n(r.$t("taxi")),1),t("option",pe,n(r.$t("delivery")),1),t("option",ve,n(r.$t("all")),1)],512),[[N,o.form.country]]),(d(!0),c(A,null,L(r.errors.country,(s,v)=>(d(),c("span",{key:v,class:"text-danger"},n(s),1))),128))])]),t("div",ge,[t("div",ye,[t("label",be,n(r.$t("name")),1),b(t("input",{type:"text",class:"form-control",placeholder:r.$t("enter_name"),id:"name","onUpdate:modelValue":e[1]||(e[1]=s=>o.form.name=s)},null,8,_e),[[R,o.form.name]]),(d(!0),c(A,null,L(r.errors.name,(s,v)=>(d(),c("span",{key:v,class:"text-danger"},n(s),1))),128))])]),t("div",Ce,[t("div",he,[t("label",Me,n(r.$t("short_description")),1),b(t("input",{type:"text",class:"form-control",placeholder:r.$t("enter_short_description"),id:"short_description","onUpdate:modelValue":e[2]||(e[2]=s=>o.form.currencycode=s)},null,8,ke),[[R,o.form.currencycode]]),(d(!0),c(A,null,L(r.errors.currencycode,(s,v)=>(d(),c("span",{key:v,class:"text-danger"},n(s),1))),128))])]),t("div",Be,[t("div",we,[t("label",Re,n(r.$t("description")),1),b(t("textarea",{type:"text",class:"form-control",placeholder:"$t('enter_description')",id:"short_description","onUpdate:modelValue":e[3]||(e[3]=s=>o.form.currencycode=s)},null,512),[[R,o.form.currencycode]]),(d(!0),c(A,null,L(r.errors.currencycode,(s,v)=>(d(),c("span",{key:v,class:"text-danger"},n(s),1))),128))])]),t("div",xe,[t("div",Ee,[t("button",Se,n(r.serviceLocation?r.$t("update"):r.$t("save")),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[o.successMessage?(d(),c("div",Ve,[t("div",Fe,[e[17]||(e[17]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[18]||(e[18]=_()),e[19]||(e[19]=t("strong",null,"Success",-1)),_(" - "+n(o.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[4]||(e[4]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):x("",!0),o.alertMessage?(d(),c("div",Ue,[t("div",Pe,[e[20]||(e[20]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[21]||(e[21]=_()),e[22]||(e[22]=t("strong",null,"Alert",-1)),_(" - "+n(o.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[5]||(e[5]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):x("",!0)]),m(F,{modelValue:o.modalForm,"onUpdate:modelValue":e[13]||(e[13]=s=>o.modalForm=s),"hide-footer":"",title:o.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:g(()=>[t("form",{onSubmit:e[11]||(e[11]=te((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"])),onKeydown:e[12]||(e[12]=(...s)=>o.hideError&&o.hideError(...s))},[t("div",Te,[e[23]||(e[23]=t("label",{for:"name",class:"form-label"},[_("Role Name"),t("span",{class:"text-danger"},"*")],-1)),b(t("input",{type:"text",id:"name","onUpdate:modelValue":e[6]||(e[6]=s=>o.form.name=s),class:O(["form-control",{"is-invalid":o.form.errors.name}]),onFocus:e[7]||(e[7]=s=>o.hideError("name"))},null,34),[[R,o.form.name]]),o.form.errors.name?(d(),c("div",He,n(o.form.errors.name),1)):x("",!0)]),t("div",Le,[e[24]||(e[24]=t("label",{for:"description",class:"form-label"},[_("description"),t("span",{class:"text-danger"},"*")],-1)),b(t("input",{type:"text",id:"description","onUpdate:modelValue":e[8]||(e[8]=s=>o.form.description=s),class:O(["form-control",{"is-invalid":o.form.errors.description}]),onFocus:e[9]||(e[9]=s=>o.hideError("description"))},null,34),[[R,o.form.description]]),o.form.errors.description?(d(),c("div",Ae,n(o.form.errors.description),1)):x("",!0)]),t("button",De,n(o.selectedRole?"Update":"Save"),1),o.selectedRole?(d(),c("button",{key:0,type:"button",onClick:e[10]||(e[10]=(...s)=>o.cancelEdit&&o.cancelEdit(...s)),class:"btn btn-secondary m-2 float-end"},"Cancel")):x("",!0)],32)]),_:1},8,["modelValue","title"]),m(F,{modelValue:o.modalFilter,"onUpdate:modelValue":e[16]||(e[16]=s=>o.modalFilter=s),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:g(()=>[t("form",null,[t("div",Ie,[b(t("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[14]||(e[14]=s=>o.filter.all=s)},e[25]||(e[25]=[t("option",{selected:""},"Select Status",-1),t("option",{value:"1"},"Yes",-1),t("option",{value:"0"},"No",-1)]),512),[[N,o.filter.all]]),b(t("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[15]||(e[15]=s=>o.filter.locked=s)},e[26]||(e[26]=[t("option",{selected:""},"Select Status",-1),t("option",{value:"0"},"Inactive",-1),t("option",{value:"1"},"Active",-1)]),512),[[N,o.filter.locked]])]),m(U,{variant:"primary",class:"float-end",onClick:o.fetchRoles},{default:g(()=>e[27]||(e[27]=[_(" Apply")])),_:1,__:[27]},8,["onClick"]),m(U,{variant:"outline-primary",class:"float-end mx-2",onClick:o.clearFilter},{default:g(()=>e[28]||(e[28]=[_("Clear")])),_:1,__:[28]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const Qe=G(ae,[["render",Ne]]);export{Qe as default};
