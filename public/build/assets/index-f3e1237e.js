import{_ as P,R,Z as W,z as j,C as O,r as w,g as v,o as u,x as F,w as l,a as G,k as i,l as e,y as z,J as r,B as y,i as g,L as q,F as A,q as E,M as N}from"./vendor-ddfbd976.js";import{L as J}from"./main-306a5ea6.js";import{P as Z}from"./page-header-2dc95532.js";import{l as K}from"./footer-e648049d.js";import"./app-042fb454.js";const Q={data(){return{rightOffcanvas:!1}},computed:{...K,...R(["permissions"])},components:{Layout:J,PageHeader:Z,Head:W,Link:j},props:{successMessage:String,alertMessage:String,app_for:String,dailyIncentives:Array,weeklyIncentives:Array,zone_type:Object},setup(s){var V,D;const{t:a}=O(),b=w(s.successMessage||""),o=w(s.alertMessage||""),_=w({}),S=w("Daily"),f=w({Daily:(V=s.dailyIncentives)!=null&&V.length?s.dailyIncentives:[],Weekly:(D=s.weeklyIncentives)!=null&&D.length?s.weeklyIncentives:[]}),x=["Daily","Weekly"],h=(n,d,t=-1)=>!f.value[n].some((m,c)=>m.ride_count===d&&c!==t);return{successMessage:b,alertMessage:o,fields:f,modes:x,addField:n=>{const d={index:f.value[n].length+1,ride_count:0,amount:0,zone_type_id:s.zone_type?s.zone_type.id:null};f.value[n].push(d)},removeField:(n,d)=>{f.value[n].splice(d,1)},submitForm:async()=>{let n=!1;if(_.value={},x.forEach(t=>{const m=f.value[t].map(c=>c.ride_count).reduce((c,L,B,H)=>(H.indexOf(L)!==B&&c.push(B),c),[]);m.length>0&&(n=!0,m.forEach(c=>{_.value[t]||(_.value[t]={}),_.value[t][c]=a("ride_count_must_be_unique")}))}),n){o.value=a("ride_count_must_be_unique");return}const d={Daily:f.value.Daily,Weekly:f.value.Weekly,zone_type_id:s.zone_type?s.zone_type.id:null};try{const t=await G.post("/incentives/update",d);b.value=a("form_submitted"),o.value=""}catch(t){t.response&&t.response.data&&t.response.data.errors&&(_.value=t.response.data.errors),o.value=a("form_submission_failed")}},validateField:(n,d,t)=>{var p;h(n,t,d)?(p=_.value[n])!=null&&p[d]&&delete _.value[n][d]:(_.value[n]||(_.value[n]={}),_.value[n][d]=a("ride_count_must_be_unique"))},activemode:S,errors:_}}},X={class:"alert bg-warning border-warning fs-18",role:"alert"},Y={class:"row"},$={class:"col-sm-3"},ee={class:"card border border-dashed border-primary"},te={class:"card-body text-center"},se={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},ae={class:"col-sm-3"},oe={class:"card border border-dashed border-primary"},le={class:"card-body text-center"},ne={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},ie={class:"text-muted"},de={class:"d-flex"},re={class:"flex-grow-1 ms-2"},ce={class:"d-flex align-items-center gap-2"},ue={key:0,class:"d-flex flex-column align-items-center justify-content-center",style:{"min-height":"200px"}},_e={class:"text-muted mt-2"},me={class:"col-sm-5"},ve={class:"mb-3"},fe={for:"ride-count",class:"form-label"},be=["onUpdate:modelValue","onInput","placeholder"],ge={class:"col-sm-5"},ye={class:"mb-3"},pe={for:"amount",class:"form-label"},he=["onUpdate:modelValue","placeholder"],ke={class:"col-sm-2"},Ce={class:"mt-3"},Be={key:0,class:"form-check form-check-inline"},Me=["onClick"],we={class:"col-sm-12"},Fe={key:0,class:"text-danger"},ze={class:"d-flex align-items-center gap-2"},xe={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ie={class:"alert-content"},Ve={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},De={class:"alert-content"};function Le(s,a,b,o,_,S){const f=v("Head"),x=v("PageHeader"),h=v("BCardHeader"),I=v("BCard"),k=v("BCol"),C=v("BRow"),T=v("BButton"),V=v("BCardBody"),D=v("BTab"),n=v("BTabs"),d=v("Layout");return u(),F(d,null,{default:l(()=>[i(f,{title:"Incentive"}),i(x,{title:s.$t("incentive"),pageTitle:s.$t("incentive"),pageLink:"/set-prices"},null,8,["title","pageTitle"]),i(C,null,{default:l(()=>[i(k,{lg:"12"},{default:l(()=>[b.app_for==="demo"?(u(),F(I,{key:0,"no-body":"",id:"tasksList"},{default:l(()=>[i(h,{class:"border-0"},{default:l(()=>[e("div",X,[e("strong",null,[z(r(s.$t("note"))+" : ",1),e("em",null,r(s.$t("actions_restricted_due_to_demo_mode")),1)])])]),_:1})]),_:1})):y("",!0),i(I,{"no-body":"",id:""},{default:l(()=>[i(h,{class:"border-0"},{default:l(()=>[i(C,null,{default:l(()=>[i(k,{lg:"12"},{default:l(()=>[e("div",Y,[e("div",$,[e("div",ee,[e("div",te,[e("h4",se,r(s.$t("zone")),1),e("h5",null,r(b.zone_type.zone_name),1)])])]),e("div",ae,[e("div",oe,[e("div",le,[e("h4",ne,r(s.$t("vehicle_type")),1),e("h5",null,r(b.zone_type.vehicle_type_name),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),i(I,{"no-body":"",id:"tasksList"},{default:l(()=>[i(n,{"nav-class":"nav-tabs-custom nav-success mb-3 pt-3",justified:"",modelValue:o.activemode,"onUpdate:modelValue":a[0]||(a[0]=t=>o.activemode=t)},{default:l(()=>[(u(!0),g(A,null,q(o.modes,(t,p)=>(u(),F(D,{key:p,title:t,active:o.activemode===t},{default:l(()=>[e("div",ie,[e("div",de,[e("div",re,[i(h,{class:"border-0"},{default:l(()=>[i(C,{class:"g-2"},{default:l(()=>[i(k,{md:"auto",class:"ms-auto"},{default:l(()=>[e("div",ce,[b.app_for!=="demo"?(u(),F(T,{key:0,variant:"primary",onClick:m=>o.addField(t)},{default:l(()=>[a[3]||(a[3]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),z(" "+r(s.$t("add")),1)]),_:2,__:[3]},1032,["onClick"])):y("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),i(V,{class:"border border-dashed border-end-0 border-start-0"},{default:l(()=>[o.fields[t].length===0?(u(),g("div",ue,[a[4]||(a[4]=e("i",{class:"ri-file-add-line text-muted display-4"},null,-1)),e("p",_e,r(s.$t("add_mode")),1)])):(u(!0),g(A,{key:1},q(o.fields[t],(m,c)=>{var L,B,H,U;return u(),g("div",{key:m.index,class:"row d-flex align-items-center"},[e("div",me,[e("div",ve,[e("label",fe,r(s.$t("ride_count")),1),E(e("input",{type:"number",class:"form-control","onUpdate:modelValue":M=>m.ride_count=M,onInput:M=>o.validateField(t,c,m.ride_count),placeholder:s.$t("ride_count")},null,40,be),[[N,m.ride_count]])])]),e("div",ge,[e("div",ye,[e("label",pe,r(s.$t("incentive_amount")),1),E(e("input",{type:"number",class:"form-control","onUpdate:modelValue":M=>m.amount=M,placeholder:s.$t("amount")},null,8,he),[[N,m.amount]])])]),e("div",ke,[e("div",Ce,[b.app_for!=="demo"?(u(),g("div",Be,[e("i",{class:"bx bx-trash text-danger fs-22 btn",onClick:M=>o.removeField(t,c)},null,8,Me)])):y("",!0)])]),e("div",we,[(B=(L=o.errors)==null?void 0:L[t])!=null&&B[c]?(u(),g("span",Fe,r((U=(H=o.errors)==null?void 0:H[t])==null?void 0:U[c]),1)):y("",!0)])])}),128)),i(C,{class:"g-2"},{default:l(()=>[i(k,{md:"auto",class:"ms-auto"},{default:l(()=>[e("div",ze,[b.app_for!=="demo"?(u(),F(T,{key:0,variant:"primary",onClick:o.submitForm},{default:l(()=>[z(r(s.$t("submit")),1)]),_:1},8,["onClick"])):y("",!0)])]),_:1})]),_:1})]),_:2},1024)])])])]),_:2},1032,["title","active"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e("div",null,[o.successMessage?(u(),g("div",xe,[e("div",Ie,[a[5]||(a[5]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),a[6]||(a[6]=e("strong",null,"Success",-1)),z(" - "+r(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:a[1]||(a[1]=(...t)=>s.dismissMessage&&s.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):y("",!0),o.alertMessage?(u(),g("div",Ve,[e("div",De,[a[7]||(a[7]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),a[8]||(a[8]=e("strong",null,"Alert",-1)),z(" - "+r(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:a[2]||(a[2]=(...t)=>s.dismissMessage&&s.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):y("",!0)])]),_:1})}const Ae=P(Q,[["render",Le]]);export{Ae as default};
