import{_ as Q,Z,O as G,r as i,T as D,Q as W,a2 as X,a as U,g as d,o as m,x as $,w as u,U as T,k as n,l as s,i as v,J as p,B as g,q as B,M as z,y as b,p as L,n as ee,K as N}from"./vendor-ddfbd976.js";import{L as oe}from"./main-306a5ea6.js";import{P as se}from"./page-header-2dc95532.js";import{P as te}from"./Pagination-f095ae3c.js";import"./footer-e648049d.js";import"./app-042fb454.js";const le={components:{Layout:oe,PageHeader:se,Head:Z,Pagination:te,Multiselect:G,Link},props:{successMessage:String,alertMessage:String},setup(h){const e=i(""),c=i(null),o=D({name:"",description:""}),w=D({all:"",locked:""}),f=i([]),R=i({}),k=i(!1),y=i(!1),x=i(!1),H=i(null),C=i(h.successMessage||""),E=i(h.alertMessage||""),V=()=>{C.value="",E.value=""},S=()=>{o.reset(),c.value=null,y.value=!0},P=()=>{x.value=!0},l=r=>{c.value=r,o.name=r.name,o.description=r.description,o.clearErrors(),y.value=!0},I=()=>{o.reset(),y.value=!1,c.value=null},j=()=>{w.reset(),F(),x.value=!1},q=()=>{const{name:r,description:t}=o,a={},M={name:{test:()=>!r,message:"Role name is required"},description:{test:()=>!t,message:"Role description is required"}};return Object.keys(M).forEach(_=>{M[_].test()&&(a[_]=M[_].message)}),a},O=async()=>{const r=q();if(Object.keys(r).length===0)try{let t;if(c.value?t=await U.put(`/roles/update/${c.value.id}`,o.data()):t=await U.post("/roles",o.data()),t.status===200||t.status===201){C.value=t.data.successMessage;const a=t.data.roles;if(c.value){const M=f.value.findIndex(_=>_.id===c.value.id);M!==-1&&(f.value[M]=a)}else f.value.push(a);y.value=!1,o.reset()}else console.error("Unexpected response status:",t.status)}catch(t){if(console.error("Error handling form submission:",t),t.response&&t.response.status===422){const a=t.response.data.errors;o.errors=a}else console.error("An unexpected error occurred:",t)}else o.errors=r},Y=r=>{o.errors[r]=""},K=()=>{k.value=!1},A=async r=>{try{await U.delete(`/roles/delete/${r}`);const t=f.value.findIndex(a=>a.id===r);t!==-1&&f.value.splice(t,1),k.value=!1,T.fire("Success","Role deleted successfully","success")}catch(t){console.error("Error deleting role:",t),T.fire("Error","Failed to delete role","error")}},J=async r=>{T.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async t=>{if(t.isConfirmed)try{await A(r)}catch(a){console.error("Error deleting role:",a),T.fire("Error","Failed to delete the role","error")}})};W(e,X.debounce(function(r){F(e.value)},300));const F=async(r=1)=>{try{const t=w.data();t.search=e.value,t.page=r;const a=await U.get("/roles1/list",{params:t});f.value=a.data.roles,R.value=a.data.paginator,x.value=!1}catch(t){console.error("Error fetching roles:",t)}};return{form:o,roles:f,modalShow:k,modalForm:y,deleteItemId:H,selectedRole:c,successMessage:C,alertMessage:E,createRole:S,filterRole:P,editRole:l,cancelEdit:I,handleSubmit:O,deleteModal:J,closeModal:K,deleteRole:A,dismissMessage:V,hideError:Y,searchTerm:e,paginator:R,modalFilter:x,clearFilter:j,fetchRoles:F,filter:w,handlePageChanged:async r=>{F(r)}}},mounted(){this.fetchRoles()}},re={action:"javascript:void(0);"},ae={class:"row"},ne={class:"col-6"},ie={class:"mb-3"},de={key:0,class:"text-danger"},ce={class:"col-6"},me={class:"mb-3"},ue={key:0,class:"text-danger"},fe={class:"col-6"},ve={class:"mb-3"},pe={key:0,class:"text-danger"},ge={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},be={class:"alert-content"},ye={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},xe={class:"alert-content"},Me={class:"form-group mt-3"},ke={key:0,class:"text-danger"},Ce={class:"form-group mt-3"},_e={key:0,class:"text-danger"},Be={type:"submit",class:"btn btn-success m-2 float-end"},we={class:"input-group"};function Re(h,e,c,o,w,f){const R=d("Head"),k=d("PageHeader"),y=d("BCardHeader"),x=d("BCardBody"),H=d("BCard"),C=d("BCol"),E=d("BRow"),V=d("BModal"),S=d("BButton"),P=d("Layout");return m(),$(P,null,{default:u(()=>[n(R,{title:"Vehicle Make"}),n(k,{title:"Update",pageTitle:"Vehicle Make"}),n(E,null,{default:u(()=>[n(C,{lg:"12"},{default:u(()=>[n(H,{"no-body":"",id:"tasksList"},{default:u(()=>[n(y,{class:"border-0"}),n(x,{class:"border border-dashed border-end-0 border-start-0"},{default:u(()=>[s("form",re,[s("div",ae,[s("div",ne,[s("div",ie,[e[14]||(e[14]=s("label",{for:"select_country",class:"form-label"},"Transport Type",-1)),e[15]||(e[15]=s("select",{id:"select_country",class:"form-select"},[s("option",{disabled:"",value:""},"Choose Type..."),s("option",{value:""},"Taxi"),s("option",{value:""},"Delivery"),s("option",{value:""},"Both")],-1)),o.form.errors.country?(m(),v("span",de,p(o.form.errors.country),1)):g("",!0)])]),s("div",ce,[s("div",me,[e[16]||(e[16]=s("label",{for:"name",class:"form-label"},"Vehicle Make Name",-1)),B(s("input",{type:"text",class:"form-control",placeholder:"Enter Name",id:"name","onUpdate:modelValue":e[0]||(e[0]=l=>o.form.name=l)},null,512),[[z,o.form.name]]),o.form.errors.name?(m(),v("span",ue,p(o.form.errors.name),1)):g("",!0)])]),s("div",fe,[s("div",ve,[e[17]||(e[17]=s("label",{for:"select_timezone",class:"form-label"},"Vehicle Make For",-1)),e[18]||(e[18]=s("select",{id:"select_timezone",class:"form-select"},[s("option",{disabled:"",value:""},"Choose Make..."),s("option",{value:""},"Taxi"),s("option",{value:""},"Bike"),s("option",{value:""},"Truck")],-1)),o.form.errors.timezone?(m(),v("span",pe,p(o.form.errors.timezone),1)):g("",!0)])]),e[19]||(e[19]=s("div",{class:"col-lg-12"},[s("div",{class:"text-end"},[s("button",{type:"submit",class:"btn btn-primary"},"Update")])],-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",null,[o.successMessage?(m(),v("div",ge,[s("div",be,[e[20]||(e[20]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[21]||(e[21]=b()),e[22]||(e[22]=s("strong",null,"Success",-1)),b(" - "+p(o.successMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-success",onClick:e[1]||(e[1]=(...l)=>o.dismissMessage&&o.dismissMessage(...l)),"aria-label":"Close Success Message"})])])):g("",!0),o.alertMessage?(m(),v("div",ye,[s("div",xe,[e[23]||(e[23]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[24]||(e[24]=b()),e[25]||(e[25]=s("strong",null,"Alert",-1)),b(" - "+p(o.alertMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[2]||(e[2]=(...l)=>o.dismissMessage&&o.dismissMessage(...l)),"aria-label":"Close Alert Message"})])])):g("",!0)]),n(V,{modelValue:o.modalForm,"onUpdate:modelValue":e[10]||(e[10]=l=>o.modalForm=l),"hide-footer":"",title:o.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:u(()=>[s("form",{onSubmit:e[8]||(e[8]=ee((...l)=>o.handleSubmit&&o.handleSubmit(...l),["prevent"])),onKeydown:e[9]||(e[9]=(...l)=>o.hideError&&o.hideError(...l))},[s("div",Me,[e[26]||(e[26]=s("label",{for:"name",class:"form-label"},[b("Role Name"),s("span",{class:"text-danger"},"*")],-1)),B(s("input",{type:"text",id:"name","onUpdate:modelValue":e[3]||(e[3]=l=>o.form.name=l),class:L(["form-control",{"is-invalid":o.form.errors.name}]),onFocus:e[4]||(e[4]=l=>o.hideError("name"))},null,34),[[z,o.form.name]]),o.form.errors.name?(m(),v("div",ke,p(o.form.errors.name),1)):g("",!0)]),s("div",Ce,[e[27]||(e[27]=s("label",{for:"description",class:"form-label"},[b("description"),s("span",{class:"text-danger"},"*")],-1)),B(s("input",{type:"text",id:"description","onUpdate:modelValue":e[5]||(e[5]=l=>o.form.description=l),class:L(["form-control",{"is-invalid":o.form.errors.description}]),onFocus:e[6]||(e[6]=l=>o.hideError("description"))},null,34),[[z,o.form.description]]),o.form.errors.description?(m(),v("div",_e,p(o.form.errors.description),1)):g("",!0)]),s("button",Be,p(o.selectedRole?"Update":"Save"),1),o.selectedRole?(m(),v("button",{key:0,type:"button",onClick:e[7]||(e[7]=(...l)=>o.cancelEdit&&o.cancelEdit(...l)),class:"btn btn-secondary m-2 float-end"},"Cancel")):g("",!0)],32)]),_:1},8,["modelValue","title"]),n(V,{modelValue:o.modalFilter,"onUpdate:modelValue":e[13]||(e[13]=l=>o.modalFilter=l),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:u(()=>[s("form",null,[s("div",we,[B(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[11]||(e[11]=l=>o.filter.all=l)},e[28]||(e[28]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"1"},"Yes",-1),s("option",{value:"0"},"No",-1)]),512),[[N,o.filter.all]]),B(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[12]||(e[12]=l=>o.filter.locked=l)},e[29]||(e[29]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"0"},"Inactive",-1),s("option",{value:"1"},"Active",-1)]),512),[[N,o.filter.locked]])]),n(S,{variant:"primary",class:"float-end",onClick:o.fetchRoles},{default:u(()=>e[30]||(e[30]=[b(" Apply")])),_:1,__:[30]},8,["onClick"]),n(S,{variant:"outline-primary",class:"float-end mx-2",onClick:o.clearFilter},{default:u(()=>e[31]||(e[31]=[b("Clear")])),_:1,__:[31]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const He=Q(le,[["render",Re]]);export{He as default};
