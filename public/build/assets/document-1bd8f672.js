import{_ as A,Z as L,z as S,C as E,r as c,R as P,g as h,S as $,o as n,x as M,w as C,a as D,N as g,k as N,l as e,J as l,i,B as d,L as H,p as z,q as I,F as x,y as B}from"./vendor-ddfbd976.js";import{L as V}from"./main-306a5ea6.js";import{P as T}from"./page-header-2dc95532.js";import{P as j}from"./Pagination-f095ae3c.js";import{l as q}from"./footer-e648049d.js";import"./app-042fb454.js";const G={data(){return{rightOffcanvas:!1}},components:{Layout:V,PageHeader:T,Head:L,Pagination:j,Link:S},props:{successMessage:String,alertMessage:String,driverId:Number,documents:Array},setup(o){const{t}=E(),u=c(o.successMessage||""),a=c(o.alertMessage||""),v=c(!1),b=c(null),m=c(null),y=()=>{u.value="",a.value=""},f=async r=>{(await D.get(`/fleet-drivers/document-toggle/${r}/${o.driverId}/1`)).data.allDocumentsApproved==!0?(u.value=t("document_approved"),g.get("/fleet-drivers")):g.get(`/fleet-drivers/document/${o.driverId}`)},k=async r=>{(await D.get(`/fleet-drivers/document-toggle/${r}/${o.driverId}/5`)).data.allDocumentsDisapproved==!0?(a.value=t("document_declined"),g.get("/fleet-drivers/pending")):g.get(`/fleet-drivers/document/${o.driverId}`)},p=async()=>{await D.get(`/fleet-drivers/update/${o.driverId}`),g.get("/fleet-drivers")},s=c(null),w=c(null);return{successMessage:u,alertMessage:a,dismissMessage:y,approveDocument:f,declineDocument:k,updateDocuments:p,viewDocument:r=>{b.value=r.image,m.value=r.back_image,v.value=!0,s.value=r.document_name_front??t("document"),w.value=r.document_name_back??t("document")},closeModal:()=>{v.value=!1,b.value=null,m.value=null},showModal:v,imageUrl:b,backImageUrl:m,documentNameFront:s,documentNameBack:w}},computed:{...q,...P(["permissions"])}},J={class:"row"},O={class:"col-lg-12"},R={class:"card",id:"tasksList"},W={class:"card-body border border-dashed border-end-0 border-start-0"},Z={class:"table-responsive"},K={class:"table align-middle position-relative table-nowrap"},Q={class:"table-active"},X={scope:"col"},Y={scope:"col"},ee={scope:"col"},se={scope:"col"},te={scope:"col"},ae={scope:"col"},oe={key:0,scope:"col"},le={key:0},ne=["onClick"],ie=["onClick"],de=["onClick"],re=["onClick"],ce={key:0,class:"modal fade show",tabindex:"-1",role:"dialog",style:{display:"block"}},ue={class:"modal-dialog",role:"document"},me={class:"modal-content"},_e={class:"modal-header d-flex align-items-center justify-content-between"},ge={class:"modal-title"},ve={class:"modal-body"},be={id:"carouselExampleFade",class:"carousel slide carousel-fade py-5","data-ride":"carousel"},fe={class:"carousel-inner"},pe={class:"carousel-item active"},he={key:0,class:"car-img"},ye=["src","alt"],ke={class:"text-center"},we={key:1,class:"d-grid"},Me={class:"text-center m-auto"},Ce={class:"carousel-item"},De={key:0,class:"car-img"},Ne=["src","alt"],Ie={class:"text-center"},xe={key:1,class:"d-grid"},Be={class:"text-center m-auto"},Ue={class:"modal-footer"},Fe=["href"],Ae=["href"],Le={key:1,class:"custom-alert alert alert-success alert-border-left fade show"},Se={class:"alert-content"},Ee={key:2,class:"custom-alert alert alert-danger alert-border-left fade show"},Pe={class:"alert-content"};function $e(o,t,u,a,v,b){const m=h("Head"),y=h("PageHeader"),f=h("BButton"),k=h("Layout"),p=$("b-tooltip");return n(),M(k,null,{default:C(()=>[N(m,{title:"Documents"}),N(y,{title:o.$t("documents"),pageTitle:o.$t("documents"),pageLink:"/fleet-drivers"},null,8,["title","pageTitle"]),e("div",J,[e("div",O,[e("div",R,[t[6]||(t[6]=e("div",{class:"card-header border-0"},null,-1)),e("div",W,[e("div",Z,[e("table",K,[e("thead",Q,[e("tr",null,[e("th",X,l(o.$t("document_name")),1),e("th",Y,l(o.$t("identify_number")),1),e("th",ee,l(o.$t("expiry_date")),1),e("th",se,l(o.$t("status")),1),e("th",te,l(o.$t("comment")),1),e("th",ae,l(o.$t("document")),1),o.permissions.includes("drivers-management")?(n(),i("th",oe,l(o.$t("action")),1)):d("",!0)])]),e("tbody",null,[(n(!0),i(x,null,H(u.documents,(s,w)=>(n(),i("tr",{key:s.id},[e("td",null,l(s.name),1),e("td",null,l(s.identify_number||"N/A"),1),e("td",null,l(s.expiry_date||"N/A"),1),e("td",null,[e("span",{class:z({badge:!0,"bg-success":s.document_status===1,"bg-secondary":s.document_status===2||s.document_status==null,"bg-warning":s.document_status===3||s.document_status===4,"bg-danger":s.document_status===5,"bg-dark":s.document_status===6})},l(s.document_status===1?"Approved":s.document_status===2||s.document_status==null?"Not Uploaded":s.document_status===3||s.document_status===4?"Waiting for Approval":s.document_status===5?"Declined":s.document_status===6?"Expired":"Unknown"),3)]),e("td",null,l(s.comment||"N/A"),1),e("td",null,[I((n(),M(f,{class:"btn btn-soft-info btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"view",onClick:_=>a.viewDocument(s)},{default:C(()=>t[4]||(t[4]=[e("i",{class:"bx bx-show-alt align-center"},null,-1)])),_:2,__:[4]},1032,["onClick"])),[[p,void 0,void 0,{hover:!0}]]),I((n(),M(f,{class:"btn btn-soft-success btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"upload",href:`/fleet-drivers/document-upload/${s.id}/${u.driverId}`},{default:C(()=>t[5]||(t[5]=[e("i",{class:"bx bx-upload align-center"},null,-1)])),_:2,__:[5]},1032,["href"])),[[p,void 0,void 0,{hover:!0}]])]),o.permissions.includes("drivers-management")?(n(),i("td",le,[s.document_status===1?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:_=>a.declineDocument(s.id)},l(o.$t("decline")),9,ne)):d("",!0),s.document_status===5?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:_=>a.approveDocument(s.id)},l(o.$t("approve")),9,ie)):d("",!0),s.document_status===2||s.document_status==null?d("",!0):(n(),i(x,{key:2},[s.document_status===3||s.document_status===4||s.document_status===6?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:_=>a.approveDocument(s.id)},l(o.$t("approve")),9,de)):d("",!0),s.document_status===3||s.document_status===4||s.document_status===6?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:_=>a.declineDocument(s.id)},l(o.$t("decline")),9,re)):d("",!0)],64))])):d("",!0)]))),128))])])])])])])]),a.showModal?(n(),i("div",ce,[e("div",ue,[e("div",me,[e("div",_e,[e("h5",ge,l(o.$t("view_document")),1),e("a",{href:"#",class:"close fs-18",onClick:t[0]||(t[0]=(...s)=>a.closeModal&&a.closeModal(...s)),"aria-label":"Close"},t[7]||(t[7]=[e("span",{class:"fs-22","aria-hidden":"true"},"Ã—",-1)]))]),e("div",ve,[e("div",be,[t[10]||(t[10]=e("div",{class:"carousel-indicators"},[e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":"Slide 1"}),e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"1","aria-label":"Slide 2"})],-1)),e("div",fe,[e("div",pe,[a.imageUrl?(n(),i("div",he,[e("img",{src:a.imageUrl,alt:a.documentNameFront,class:"img-fluid mb-2"},null,8,ye),e("h5",ke,l(a.documentNameFront),1)])):(n(),i("div",we,[t[8]||(t[8]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Me,l(o.$t("no_front_image_available")),1)]))]),e("div",Ce,[a.backImageUrl?(n(),i("div",De,[e("img",{src:a.backImageUrl,alt:a.documentNameBack,class:"img-fluid mb-2"},null,8,Ne),e("h5",Ie,l(a.documentNameBack),1)])):(n(),i("div",xe,[t[9]||(t[9]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Be,l(o.$t("no_back_image_available")),1)]))])]),t[11]||(t[11]=e("a",{class:"carousel-control-prev bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"prev"},[e("span",{class:"carousel-control-prev-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Previous")],-1)),t[12]||(t[12]=e("a",{class:"carousel-control-next bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"next"},[e("span",{class:"carousel-control-next-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Next")],-1))])]),e("div",Ue,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...s)=>a.closeModal&&a.closeModal(...s))},l(o.$t("close")),1),a.imageUrl?(n(),i("a",{key:0,href:a.imageUrl,download:"",class:"btn btn-primary"},l(o.$t("download_front_image")),9,Fe)):d("",!0),a.backImageUrl?(n(),i("a",{key:1,href:a.backImageUrl,download:"",class:"btn btn-primary"},l(o.$t("download_back_image")),9,Ae)):d("",!0)])])])])):d("",!0),a.successMessage?(n(),i("div",Le,[e("div",Se,[t[13]||(t[13]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[14]||(t[14]=e("strong",null,"Success",-1)),B(" - "+l(a.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...s)=>a.dismissMessage&&a.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):d("",!0),a.alertMessage?(n(),i("div",Ee,[e("div",Pe,[t[15]||(t[15]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[16]||(t[16]=e("strong",null,"Alert",-1)),B(" - "+l(a.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...s)=>a.dismissMessage&&a.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):d("",!0)]),_:1})}const Je=A(G,[["render",$e],["__scopeId","data-v-27648451"]]);export{Je as default};
