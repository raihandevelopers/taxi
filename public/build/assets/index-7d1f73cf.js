import{_ as P,Z as N,O,P as A,C as q,T as W,r as v,Q as j,G as E,g as _,o as r,x as $,w as h,a as F,N as G,k as m,l as e,J as l,q as M,K as D,i,L as y,F as g,W as H,y as V,B as T,n as I}from"./vendor-ddfbd976.js";import{L as J}from"./main-306a5ea6.js";import{P as K}from"./page-header-2dc95532.js";import{P as Q}from"./Pagination-f095ae3c.js";import{i as Y}from"./imageUpload-4f5efd67.js";import{F as Z}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const z={components:{Layout:J,PageHeader:K,Head:N,Pagination:Q,Multiselect:O,FormValidation:Z,imageUpload:Y,flatPickr:A},props:{successMessage:String,alertMessage:String,validate:Function,vehicleTypes:Array},setup(a){const{t:s}=q(),d=W({date:"",select_payment_type:"",select_date_option:"",select_transport_type:"",file_format:"",trip_status:"",select_payment_type:[],vehicle_types:[]}),o=v([]),S={select_date_option:{required:!0},file_format:{required:!0}},C=v(null),p=v({}),b=v(a.successMessage||""),f=v(a.alertMessage||""),w=()=>{b.value="",f.value=""},k=v(!1);j(()=>d.select_transport_type,async()=>{if(!d.select_transport_type){o.value=[];return}try{const n=await F.get("/report/getVehicleTypes",{params:{transport_type:d.select_transport_type}});console.log("Vehicle Types Response:",n.data),o.value=n.data}catch(n){console.error(s("error_fetching_vehicle_types"),n),f.value=s("failed_to_fetch_vehicle_types")}});const B=async()=>{if(console.log("Validating form..."),p.value=C.value.validate(),Object.keys(p.value).length>0){console.log("Validation errors:",p.value);return}k.value=!0;try{console.log("Form Data:",d.data());const n=await F.post("/report/finance-report-download",d.data(),{responseType:"blob"}),u=window.URL.createObjectURL(new Blob([n.data])),t=document.createElement("a");t.href=u,t.setAttribute("download",`finance_report.${d.file_format}`),document.body.appendChild(t),t.click(),t.remove(),b.value=s("report_downloaded_successfully"),d.reset(),G.get("/report/finance-report")}catch(n){n.response&&n.response.status===422?p.value=n.response.data.errors:(console.error(s("error_downloading_report"),n),f.value=s("failed_to_download_report"))}finally{k.value=!1}},R=E(()=>{if(d.date&&d.date.length===2){const n=new Date(d.date[0]),u=new Date(d.date[1]),t=n.toLocaleString("default",{month:"short"}),c=u.toLocaleString("default",{month:"short"});return`${n.getDate()} ${t} - ${u.getDate()} ${c}`}return""});return{form:d,vehicleTypes:o,successMessage:b,alertMessage:f,handleSubmit:B,dismissMessage:w,validationRules:S,validationRef:C,errors:p,formattedDate:R,rangeDateconfig:{mode:"range",dateFormat:"d M, Y",maxDate:"today"},loading:k}}},X={class:"row"},x={class:"col-sm-6"},ee={class:"mb-3"},te={for:"select_transport_type",class:"form-label"},oe={selected:"",disabled:"",value:""},se={value:"taxi"},ae={value:"delivery"},le={value:"both"},ne={class:"col-sm-6"},re={class:"mb-3"},ie={for:"select_vehicle_type",class:"form-label"},de={class:"col-sm-6"},ce={class:"mb-3"},_e={for:"trip_status",class:"form-label"},me={class:"mt-3"},pe={class:"form-check form-check-inline"},fe={class:"form-check-label",for:"inlineRadio1"},ue={class:"form-check form-check-inline"},ve={class:"form-check-label",for:"inlineRadio1"},he={class:"col-sm-6"},ye={class:"mb-3"},ge={for:"select_payment_type",class:"form-label"},be={class:"col-sm-6"},ke={class:"mb-3"},Me={for:"select_date_option",class:"form-label"},we={disabled:"",value:""},Ve={value:"today"},Ce={value:"this_week"},Be={value:"this_month"},Re={value:"this_year"},De={value:"date"},Te={key:0,class:"col-sm-6"},Se={class:"mb-4"},Le={for:"datepicker-range",class:"form-label"},Ue={class:"col-sm-6"},Fe={class:"mb-3"},He={for:"file_format",class:"form-label"},Pe={disabled:"",selected:"",value:""},Ne={value:"xlsx"},Oe={value:"csv"},Ae={class:"col-lg-12"},qe={class:"text-end"},We=["disabled"],je={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Ee={class:"alert-content"},$e={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Ge={class:"alert-content"};function Ie(a,s,d,o,S,C){const p=_("Head"),b=_("PageHeader"),f=_("BCardHeader"),w=_("Multiselect"),k=_("flat-pickr"),L=_("FormValidation"),B=_("BCardBody"),R=_("BCard"),U=_("BCol"),n=_("BRow"),u=_("Layout");return r(),$(u,null,{default:h(()=>[m(p,{title:"Finance Report"}),m(b,{title:a.$t("finance_report"),pageTitle:a.$t("finance_report")},null,8,["title","pageTitle"]),m(n,null,{default:h(()=>[m(U,{lg:"12"},{default:h(()=>[m(R,{"no-body":"",id:"tasksList"},{default:h(()=>[m(f,{class:"border-0"}),m(B,{class:"border border-dashed border-end-0 border-start-0"},{default:h(()=>[e("form",{onSubmit:s[8]||(s[8]=I((...t)=>o.handleSubmit&&o.handleSubmit(...t),["prevent"]))},[m(L,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:h(()=>[e("div",X,[e("div",x,[e("div",ee,[e("label",te,l(a.$t("select_transport_type")),1),M(e("select",{id:"select_transport_type",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=t=>o.form.select_transport_type=t)},[e("option",oe,l(a.$t("select")),1),e("option",se,l(a.$t("taxi")),1),e("option",ae,l(a.$t("delivery")),1),e("option",le,l(a.$t("both")),1)],512),[[D,o.form.select_transport_type]]),(r(!0),i(g,null,y(o.errors.select_transport_type,(t,c)=>(r(),i("span",{key:c,class:"text-danger"},l(t),1))),128))])]),e("div",ne,[e("div",re,[e("label",ie,l(a.$t("select_vehicle_type")),1),m(w,{id:"select_vehicle_type",mode:"tags",modelValue:o.form.vehicle_types,"onUpdate:modelValue":s[1]||(s[1]=t=>o.form.vehicle_types=t),"close-on-select":!1,searchable:!0,"create-option":!1,options:o.vehicleTypes.map(t=>({value:t.id,label:t.name})),placeholder:a.$t("select_vehicle_type"),multiple:!0},null,8,["modelValue","options","placeholder"]),(r(!0),i(g,null,y(o.errors.vehicle_types,(t,c)=>(r(),i("span",{key:c,class:"text-danger"},l(t),1))),128))])]),e("div",de,[e("div",ce,[e("label",_e,l(a.$t("trip_status")),1),e("div",me,[e("div",pe,[M(e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio1",value:0,"onUpdate:modelValue":s[2]||(s[2]=t=>o.form.trip_status=t)},null,512),[[H,o.form.trip_status]]),e("label",fe,l(a.$t("completed")),1)]),e("div",ue,[M(e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio2",value:1,"onUpdate:modelValue":s[3]||(s[3]=t=>o.form.trip_status=t),checked:""},null,512),[[H,o.form.trip_status]]),e("label",ve,l(a.$t("cancelled")),1)])])])]),e("div",he,[e("div",ye,[e("label",ge,l(a.$t("payment_type")),1),m(w,{id:"select_payment_type",mode:"tags",modelValue:o.form.select_payment_type,"onUpdate:modelValue":s[4]||(s[4]=t=>o.form.select_payment_type=t),"close-on-select":!1,searchable:!0,"create-option":!0,options:[{value:"1",label:a.$t("cash")},{value:"0",label:a.$t("online")},{value:"2",label:a.$t("wallet")}],placeholder:a.$t("select_payment_type")},null,8,["modelValue","options","placeholder"]),(r(!0),i(g,null,y(o.errors.select_payment_type,(t,c)=>(r(),i("span",{key:c,class:"text-danger"},l(t),1))),128))])]),e("div",be,[e("div",ke,[e("label",Me,[V(l(a.$t("date_option"))+" ",1),s[11]||(s[11]=e("span",{class:"text-danger"},"*",-1))]),M(e("select",{id:"select_date_option",class:"form-select","onUpdate:modelValue":s[5]||(s[5]=t=>o.form.select_date_option=t)},[e("option",we,l(a.$t("select")),1),e("option",Ve,l(a.$t("today")),1),e("option",Ce,l(a.$t("this_week")),1),e("option",Be,l(a.$t("this_month")),1),e("option",Re,l(a.$t("this_year")),1),e("option",De,l(a.$t("date")),1)],512),[[D,o.form.select_date_option]]),(r(!0),i(g,null,y(o.errors.select_date_option,(t,c)=>(r(),i("span",{key:c,class:"text-danger"},l(t),1))),128))])]),o.form.select_date_option==="date"?(r(),i("div",Te,[e("div",Se,[e("label",Le,l(a.$t("from_to_date")),1),m(k,{placeholder:a.$t("select_date"),modelValue:o.form.date,"onUpdate:modelValue":s[6]||(s[6]=t=>o.form.date=t),config:o.rangeDateconfig,class:"form-control flatpickr-input",id:"datepicker-range"},null,8,["placeholder","modelValue","config"]),(r(!0),i(g,null,y(o.errors.date,(t,c)=>(r(),i("span",{key:c,class:"text-danger"},l(t),1))),128))])])):T("",!0),e("div",Ue,[e("div",Fe,[e("label",He,[V(l(a.$t("file_format"))+" ",1),s[12]||(s[12]=e("span",{class:"text-danger"},"*",-1))]),M(e("select",{id:"file_format",class:"form-select","onUpdate:modelValue":s[7]||(s[7]=t=>o.form.file_format=t)},[e("option",Pe,l(a.$t("select_file_format")),1),e("option",Ne,l(a.$t("excel")),1),e("option",Oe,l(a.$t("csv")),1)],512),[[D,o.form.file_format]]),(r(!0),i(g,null,y(o.errors.file_format,(t,c)=>(r(),i("span",{key:c,class:"text-danger"},l(t),1))),128))])]),e("div",Ae,[e("div",qe,[e("button",{type:"submit",class:"btn btn-primary",disabled:o.loading},l(a.$t("download")),9,We)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[o.successMessage?(r(),i("div",je,[e("div",Ee,[s[13]||(s[13]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[14]||(s[14]=e("strong",null,"Success",-1)),V(" - "+l(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[9]||(s[9]=(...t)=>o.dismissMessage&&o.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):T("",!0),o.alertMessage?(r(),i("div",$e,[e("div",Ge,[s[15]||(s[15]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[16]||(s[16]=e("strong",null,"Alert",-1)),V(" - "+l(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[10]||(s[10]=(...t)=>o.dismissMessage&&o.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):T("",!0)])]),_:1})}const tt=P(z,[["render",Ie]]);export{tt as default};
