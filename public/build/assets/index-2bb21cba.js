import{_ as W,Z,O as Q,P as X,z as $,C as ee,r as f,T as te,R as se,g as c,S as oe,o as u,x as H,w as n,U as y,a as G,N as ae,k as i,l as t,J as l,q as k,K as z,i as m,L as j,F as q,y as p,B as C,p as le,n as R,W as Y}from"./vendor-ddfbd976.js";import{L as ne}from"./main-306a5ea6.js";import{P as ie}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import{s as de}from"./search-2c17aadd.js";import{s as ce}from"./searchbar-3acbc236.js";import{l as ue}from"./footer-e648049d.js";import{_ as fe}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const ge={data(){return{rightOffcanvas:!1}},components:{Layout:ne,PageHeader:ie,Head:Z,Pagination:re,Multiselect:Q,flatPickr:X,Link:$,search:de,searchbar:ce},props:{successMessage:String,alertMessage:String,serviceLocations:{type:Object,required:!0}},setup(a){const{t:e}=ee(),S=f(""),o=te({goods_types_for:null,status:null,limit:10}),v=f([]),w=f({}),B=f(!1),M=f(!1),h=f(null),T=f({}),g=f(a.successMessage||""),b=f(a.alertMessage||""),P=()=>{g.value="",b.value=""},F=async(d,r)=>{y.fire({title:e("are_you_sure"),text:e("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:e("yes"),cancelButtonText:e("cancel")}).then(async _=>{if(_.isConfirmed)try{await G.post("/goods-type/update-status",{id:d,status:r});const D=v.value.findIndex(K=>K.id===d);D!==-1&&(v.value[D].active=r),y.fire(e("changed"),e("status_updated_successfully"),"success")}catch(D){console.error(e("error_updating_status"),D),y.fire(e("error"),e("failed_to_update_status"),"error")}})},x=f(!1),N=()=>{s(),M.value=!0,x.value=!1},U=()=>{o.reset(),s(),x.value=!1},A=()=>{B.value=!1},L=async d=>{try{await G.delete(`/goods-type/delete/${d}`);const r=v.value.findIndex(_=>_.id===d);r!==-1&&v.value.splice(r,1),B.value=!1,y.fire(e("success"),e("goods_type_deleted_successfully"),"success")}catch(r){r.response&&r.response.status==403&&(b.value=r.response.data.alertMessage,setTimeout(()=>{b.value=""},5e3)),y.fire(e("error"),e("failed_to_delete_goods_type"),"error")}},I=async d=>{y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed)try{await L(d)}catch(_){console.error(e("error_deleting_data"),_),y.fire(e("error"),e("failed_to_delete_the_data"),"error")}})},O=async d=>{S.value=d,s()},s=async(d=1)=>{try{const r=o.data();r.search=S.value,r.page=d;const _=await G.get("/goods-type/list",{params:r});v.value=_.data.results,w.value=_.data.paginator,J(w.value.total),M.value=!1}catch(r){console.error(e("error_fetching_goods_type"),r)}},E=async d=>{localStorage.setItem("goods-type/list",d),s(d)},V=async d=>{ae.get(`/goods-type/edit/${d.id}`)},J=()=>{T.value=[10,25,50,100,200,500]};return{results:v,modalShow:B,deleteItemId:h,successMessage:g,alertMessage:b,filterData:N,deleteModal:I,closeModal:A,deleteData:L,dismissMessage:P,searchTerm:S,paginator:w,modalFilter:M,fetchSearch:O,clearFilter:U,fetchDatas:s,filter:o,handlePageChanged:E,toggleActiveStatus:F,editData:V,rightOffcanvas:x,paginatorOption:T,changeEntriesPerPage:()=>{s()}}},computed:{...ue,...se(["permissions"])},mounted(){this.fetchDatas();const a=localStorage.getItem("goods-type/list");a?this.handlePageChanged(Number(a)):this.handlePageChanged(1)},methods:{formatGoodsType(a){return{truck:"Truck",motor_bike:"Bike",both:"All"}[a]||"Unknown"}}},me={class:"d-flex align-items-center mt-3"},_e={class:"me-2 text-muted"},pe=["value"],ve={class:"ms-2 text-muted"},he={class:"d-flex align-items-center gap-2"},ye={class:"table-responsive"},be={class:"table align-middle position-relative table-nowrap"},ke={class:"table-active"},Ce={scope:"col"},we={scope:"col"},Be={scope:"col"},Me={scope:"col"},Pe={key:0},xe={class:"d-flex"},Se={class:"flex-grow-1"},Te={key:0},Le=["onClick","id","checked"],Oe={key:1},Ve={colspan:"7",class:"text-center"},De={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},He={class:"alert-content"},Fe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ne={class:"alert-content"},Ue={class:"offcanvas-body"},Ae={class:"mb-4"},Ie={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ee={value:"truck"},Ge={value:"motor_bike"},Re={value:"both"},ze={class:"mb-4"},je={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},qe={class:"form-check"},Ye={class:"form-check-label",for:"active"},Je={class:"form-check"},Ke={class:"form-check-label",for:"inactive"},We={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function Ze(a,e,S,o,v,w){const B=c("Head"),M=c("PageHeader"),h=c("BCol"),T=c("searchbar"),g=c("BButton"),b=c("Link"),P=c("BRow"),F=c("BCardHeader"),x=c("BCardBody"),N=c("BCard"),U=c("BFrom"),A=c("BOffcanvas"),L=c("Pagination"),I=c("Layout"),O=oe("b-tooltip");return u(),H(I,null,{default:n(()=>[i(B,{title:"Goods Type"}),i(M,{title:a.$t("goods_type"),pageTitle:a.$t("goods_type")},null,8,["title","pageTitle"]),i(P,null,{default:n(()=>[i(h,{lg:"12"},{default:n(()=>[i(N,{"no-body":"",id:"tasksList"},{default:n(()=>[i(F,{class:"border-0"},{default:n(()=>[i(P,{class:"g-2"},{default:n(()=>[i(h,{md:"3"},{default:n(()=>[t("div",me,[t("label",_e,l(a.$t("show")),1),k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.filter.limit=s),onChange:e[1]||(e[1]=(...s)=>o.changeEntriesPerPage&&o.changeEntriesPerPage(...s)),class:"form-select form-select-sm w-auto"},[(u(!0),m(q,null,j(o.paginatorOption,s=>(u(),m("option",{key:s,value:s},l(s),9,pe))),128))],544),[[z,o.filter.limit]]),t("label",ve,l(a.$t("entries")),1)])]),_:1}),i(h,{md:"auto",class:"ms-auto"},{default:n(()=>[t("div",he,[i(T,{onSearch:o.fetchSearch},null,8,["onSearch"]),i(g,{variant:"danger",onClick:e[2]||(e[2]=s=>o.rightOffcanvas=!0)},{default:n(()=>[e[9]||(e[9]=t("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),p(" "+l(a.$t("filters")),1)]),_:1,__:[9]}),a.permissions.includes("add-goods-types")?(u(),H(b,{key:0,href:"/goods-type/create"},{default:n(()=>[i(g,{variant:"primary",class:"float-end"},{default:n(()=>[e[10]||(e[10]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),p(l(a.$t("add_goods_type")),1)]),_:1,__:[10]})]),_:1})):C("",!0)])]),_:1})]),_:1})]),_:1}),i(x,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[t("div",ye,[t("table",be,[t("thead",ke,[t("tr",null,[t("th",Ce,l(a.$t("name")),1),t("th",we,l(a.$t("goods_type_for")),1),t("th",Be,l(a.$t("status")),1),t("th",Me,l(a.$t("action")),1)])]),o.results.length>0?(u(),m("tbody",Pe,[(u(!0),m(q,null,j(o.results,(s,E)=>(u(),m("tr",{key:E},[t("td",null,[t("div",xe,[t("div",Se,l(s.goods_type_name),1)])]),t("td",null,l(w.formatGoodsType(s.goods_types_for)),1),a.permissions.includes("toggle-goods-types")?(u(),m("td",Te,[t("div",{class:le({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":s.active})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:R(V=>o.toggleActiveStatus(s.id,!s.active),["prevent"]),id:"status_"+s.id,checked:s.active},null,8,Le)],2)])):C("",!0),t("td",null,[a.permissions.includes("edit-goods-types")?k((u(),H(g,{key:0,onClick:R(V=>o.editData(s),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:a.$t("edit")},{default:n(()=>e[11]||(e[11]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[11]},1032,["onClick","title"])),[[O,void 0,void 0,{hover:!0}]]):C("",!0),a.permissions.includes("delete-goods-types")?k((u(),H(g,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:R(V=>o.deleteModal(s.id),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("delete")},{default:n(()=>e[12]||(e[12]=[t("i",{class:"bx bx-trash bx-xs"},null,-1)])),_:2,__:[12]},1032,["onClick","title"])),[[O,void 0,void 0,{hover:!0}]]):C("",!0)])]))),128))])):(u(),m("tbody",Oe,[t("tr",null,[t("td",Ve,[e[13]||(e[13]=t("img",{src:fe,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,l(a.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[o.successMessage?(u(),m("div",De,[t("div",He,[e[14]||(e[14]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[15]||(e[15]=p()),e[16]||(e[16]=t("strong",null,"Success",-1)),p(" - "+l(o.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[3]||(e[3]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):C("",!0),o.alertMessage?(u(),m("div",Fe,[t("div",Ne,[e[17]||(e[17]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[18]||(e[18]=p()),e[19]||(e[19]=t("strong",null,"Alert",-1)),p(" - "+l(o.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[4]||(e[4]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):C("",!0)]),i(A,{modelValue:o.rightOffcanvas,"onUpdate:modelValue":e[8]||(e[8]=s=>o.rightOffcanvas=s),placement:"end",title:a.$t("goods_type"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:n(()=>[i(U,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:n(()=>[t("div",Ue,[t("div",Ae,[t("label",Ie,l(a.$t("goods_type_for")),1),k(t("select",{class:"form-control","data-choices":"","data-choices-search-false":"",goods_type_name:"choices-select-status",id:"choices-select-status","onUpdate:modelValue":e[5]||(e[5]=s=>o.filter.goods_types_for=s)},[t("option",Ee,l(a.$t("truck")),1),t("option",Ge,l(a.$t("motor_bike")),1),t("option",Re,l(a.$t("all")),1)],512),[[z,o.filter.goods_types_for]])]),t("div",ze,[t("label",je,l(a.$t("status")),1),i(P,{class:"g-2"},{default:n(()=>[i(h,{lg:"6"},{default:n(()=>[t("div",qe,[k(t("input",{class:"form-check-input",type:"radio",id:"active","onUpdate:modelValue":e[6]||(e[6]=s=>o.filter.status=s),value:"1"},null,512),[[Y,o.filter.status]]),t("label",Ye,l(a.$t("active")),1)])]),_:1}),i(h,{lg:"6"},{default:n(()=>[t("div",Je,[k(t("input",{class:"form-check-input",type:"radio",id:"inactive","onUpdate:modelValue":e[7]||(e[7]=s=>o.filter.status=s),value:"0"},null,512),[[Y,o.filter.status]]),t("label",Ke,l(a.$t("inactive")),1)])]),_:1})]),_:1})])]),t("div",We,[i(g,{variant:"light",onClick:o.clearFilter,class:"w-100"},{default:n(()=>[p(l(a.$t("clear_filter")),1)]),_:1},8,["onClick"]),i(g,{type:"submit",onClick:o.filterData,variant:"success",class:"w-100"},{default:n(()=>[p(l(a.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),i(L,{paginator:o.paginator,onPageChanged:o.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const it=W(ge,[["render",Ze]]);export{it as default};
