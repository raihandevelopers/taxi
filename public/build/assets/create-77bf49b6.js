import{_ as V,Z as H,O as N,C as P,T,r as f,g as c,o as l,x as q,w as g,a as D,N as O,k as m,l as e,y as _,J as i,q as k,K as L,i as r,L as p,F as y,M as U,B as h,n as j}from"./vendor-ddfbd976.js";import{L as A}from"./main-306a5ea6.js";import{P as z}from"./page-header-2dc95532.js";import{P as E}from"./Pagination-f095ae3c.js";import{i as J}from"./imageUpload-4f5efd67.js";import{F as K}from"./FormValidation-a9047131.js";import{I as Z}from"./ImageUpload-6f09ff26.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const G={components:{Layout:A,PageHeader:z,Head:H,Pagination:E,Multiselect:N,FormValidation:K,imageUpload:J,ImageUpload:Z},props:{successMessage:String,alertMessage:String,serviceLocations:Object,notification:Object,validate:Function},setup(a){const{t}=P(),d=T({service_location_id:a.notification&&a.notification.service_location_id||"",send_to:a.notification&&a.notification.send_to||"",title:a.notification&&a.notification.title||"",message:a.notification&&a.notification.body||"",image:a.notification&&a.notification.image||""}),o={service_location_id:{required:!0},send_to:{required:!0},title:{required:!0},message:{required:!0}},C=f(null),v=f({}),b=f(a.successMessage||""),u=f(a.alertMessage||""),B=f(a.notification),M=f(!1),S=()=>{b.value="",u.value=""},I=s=>{const n=s.target.files[0];d.image=n,n&&new FileReader().readAsDataURL(n)},w=f(a.notification?a.notification.image:null);return{form:d,successMessage:b,alertMessage:u,handleSubmit:async()=>{if(v.value=C.value.validate(),Object.keys(v.value).length>0)return;const s=new FormData;for(const n in d)n==="iconFile"&&d[n]?s.append("image",d[n]):s.append(n,d[n]);try{let n;M.value=!0,n=await D.post("send-push",s,{headers:{"Content-Type":"multipart/form-data"}}),n.status===201?(b.value=t("push_notifictions_send_successfully"),d.reset(),O.get("/push-notifications")):u.value=t("failed_to_send_push_notifications")}catch(n){n.response&&n.response.status===422?v.value=n.response.data.errors:(console.error(t("error_creating_service_location"),n),u.value=t("failed_to_send_push_notifications_catch"))}},dismissMessage:S,validationRules:o,validationRef:C,onFileChange:I,imageSrc:w,notification:B,errors:v,handleImageSelected:(s,n)=>{d[n]=s},handleImageRemoved:s=>{d[s]=null},loading:M}}},Q={class:"row"},W={class:"col-sm-6"},X={class:"mb-3"},Y={for:"service_location",class:"form-label"},$={value:"",disabled:""},ee=["value"],te={class:"col-sm-6"},se={class:"mb-3"},oe={for:"send_to",class:"form-label"},ae={disabled:"",value:""},ne={value:"driver"},ie={value:"user"},le={value:"owner"},re={class:"col-sm-6"},de={class:"mb-3"},ce={for:"push_title",class:"form-label"},me=["placeholder"],_e={class:"col-12"},fe={class:"mb-3"},ue={for:"message",class:"form-label"},ge=["placeholder"],ve={class:"col-sm-6"},be={class:"mb-3"},pe={for:"select_timezone",class:"form-label d-flex"},ye={key:0,class:"text-danger"},he={class:"col-lg-12"},Me={class:"text-end me-5"},ke={type:"submit",class:"btn btn-primary"},Ce={key:0},Be={key:1},Se={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Ie={class:"alert-content"},we={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Re={class:"alert-content"};function xe(a,t,d,o,C,v){const b=c("Head"),u=c("PageHeader"),B=c("BCardHeader"),M=c("ImageUpload"),S=c("FormValidation"),I=c("BCardBody"),w=c("BCard"),R=c("BCol"),x=c("BRow"),F=c("Layout");return l(),q(F,null,{default:g(()=>[m(b,{title:"Push Notifications"}),m(u,{title:a.$t("create"),pageTitle:a.$t("send_notifications"),pageLink:"/push-notifications"},null,8,["title","pageTitle"]),m(x,null,{default:g(()=>[m(R,{lg:"12"},{default:g(()=>[m(w,{"no-body":"",id:"tasksList"},{default:g(()=>[m(B,{class:"border-0"}),m(I,{class:"border border-dashed border-end-0 border-start-0"},{default:g(()=>[e("form",{onSubmit:t[6]||(t[6]=j((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"])),enctype:"multipart/form-data"},[m(S,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:g(()=>[e("div",Q,[e("div",W,[e("div",X,[e("label",Y,[_(i(a.$t("service_location"))+" ",1),t[9]||(t[9]=e("span",{class:"text-danger"},"*",-1))]),k(e("select",{class:"form-select",id:"service_location","onUpdate:modelValue":t[0]||(t[0]=s=>o.form.service_location_id=s)},[e("option",$,i(a.$t("select_service_location")),1),(l(!0),r(y,null,p(d.serviceLocations,s=>(l(),r("option",{key:s.id,value:s.id},i(s.name),9,ee))),128))],512),[[L,o.form.service_location_id]]),(l(!0),r(y,null,p(o.errors.service_location_id,(s,n)=>(l(),r("span",{key:n,class:"text-danger"},i(s),1))),128))])]),e("div",te,[e("div",se,[e("label",oe,[_(i(a.$t("send_to"))+" ",1),t[10]||(t[10]=e("span",{class:"text-danger"},"*",-1))]),k(e("select",{id:"send_to",class:"form-select",name:"send_to","onUpdate:modelValue":t[1]||(t[1]=s=>o.form.send_to=s)},[e("option",ae,i(a.$t("select")),1),e("option",ne,i(a.$t("driver")),1),e("option",ie,i(a.$t("user")),1),e("option",le,i(a.$t("owner")),1)],512),[[L,o.form.send_to]]),(l(!0),r(y,null,p(o.errors.send_to,(s,n)=>(l(),r("span",{key:n,class:"text-danger"},i(s),1))),128))])]),e("div",re,[e("div",de,[e("label",ce,[_(i(a.$t("push_title"))+" ",1),t[11]||(t[11]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{type:"text",class:"form-control",placeholder:a.$t("enter_push_title"),id:"push_title","onUpdate:modelValue":t[2]||(t[2]=s=>o.form.title=s)},null,8,me),[[U,o.form.title]]),(l(!0),r(y,null,p(o.errors.title,(s,n)=>(l(),r("span",{key:n,class:"text-danger"},i(s),1))),128))])]),e("div",_e,[e("div",fe,[e("label",ue,[_(i(a.$t("message"))+" ",1),t[12]||(t[12]=e("span",{class:"text-danger"},"*",-1))]),k(e("textarea",{type:"text",class:"form-control",placeholder:a.$t("enter_message"),id:"message","onUpdate:modelValue":t[3]||(t[3]=s=>o.form.message=s)},null,8,ge),[[U,o.form.message]]),(l(!0),r(y,null,p(o.errors.message,(s,n)=>(l(),r("span",{key:n,class:"text-danger"},i(s),1))),128))])]),e("div",ve,[e("div",be,[e("label",pe,[_(i(a.$t("notification_banner")),1),t[13]||(t[13]=e("span",null,[e("h5",{class:"text-muted mt-1 mb-0 fs-13"},"(320px x 320px)")],-1))]),m(M,{imageType:"push-notification",initialImageUrl:o.form.image,flexStyle:"0 0 calc(50% - 20px)",aspectRatio:"5 / 5",onImageSelected:t[4]||(t[4]=s=>o.handleImageSelected(s,"image")),onImageRemoved:t[5]||(t[5]=()=>o.handleImageRemoved("image"))},null,8,["initialImageUrl"]),o.errors.image?(l(),r("span",ye,i(o.errors.image),1)):h("",!0)])]),e("div",he,[e("div",Me,[e("button",ke,[o.loading?h("",!0):(l(),r("span",Ce,i(o.notification?a.$t("update"):a.$t("save")),1)),o.loading?(l(),r("span",Be,[t[14]||(t[14]=e("i",{class:"ri-loader-4-line align-bottom me-1"},null,-1)),_(" "+i(a.$t("loading")),1)])):h("",!0)])])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[o.successMessage?(l(),r("div",Se,[e("div",Ie,[t[15]||(t[15]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[16]||(t[16]=e("strong",null,"Success",-1)),_(" - "+i(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[7]||(t[7]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):h("",!0),o.alertMessage?(l(),r("div",we,[e("div",Re,[t[17]||(t[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[18]||(t[18]=e("strong",null,"Alert",-1)),_(" - "+i(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[8]||(t[8]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):h("",!0)])]),_:1})}const je=V(G,[["render",xe]]);export{je as default};
