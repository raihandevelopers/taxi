import{_ as W,Z as X,O as $,r as u,T as q,Q as ee,a2 as oe,a as L,g as _,o as i,x as se,w as y,U as A,k as f,l as s,J as a,q as p,M as N,i as d,L as R,F as S,K as V,I as te,y as g,B as x,p as O,n as le}from"./vendor-ddfbd976.js";import{L as re}from"./main-306a5ea6.js";import{P as ae}from"./page-header-2dc95532.js";import{P as ne}from"./Pagination-f095ae3c.js";import"./footer-e648049d.js";import"./app-042fb454.js";const ie={components:{Layout:re,PageHeader:ae,Head:X,Pagination:ne,Multiselect:$},props:{successMessage:String,alertMessage:String},setup(r){const e=u(""),v=u(null),o=q({name:"",description:""}),E=q({all:"",locked:""}),b=u([]),F=u({}),M=u(!1),h=u(!1),k=u(!1),T=u(null),B=u(r.successMessage||""),U=u(r.alertMessage||""),D=u(),H=()=>{B.value="",U.value=""},I=()=>{o.reset(),v.value=null,h.value=!0},t=()=>{k.value=!0},m=n=>{v.value=n,o.name=n.name,o.description=n.description,o.clearErrors(),h.value=!0},Y=()=>{o.reset(),h.value=!1,v.value=null},z=()=>{E.reset(),P(),k.value=!1},K=()=>{const{name:n,description:l}=o,c={},C={name:{test:()=>!n,message:"Role name is required"},description:{test:()=>!l,message:"Role description is required"}};return Object.keys(C).forEach(w=>{C[w].test()&&(c[w]=C[w].message)}),c},J=async()=>{const n=K();if(Object.keys(n).length===0)try{let l;if(v.value?l=await L.put(`/roles/update/${v.value.id}`,o.data()):l=await L.post("/roles",o.data()),l.status===200||l.status===201){B.value=l.data.successMessage;const c=l.data.roles;if(v.value){const C=b.value.findIndex(w=>w.id===v.value.id);C!==-1&&(b.value[C]=c)}else b.value.push(c);h.value=!1,o.reset()}else console.error("Unexpected response status:",l.status)}catch(l){if(console.error("Error handling form submission:",l),l.response&&l.response.status===422){const c=l.response.data.errors;o.errors=c}else console.error("An unexpected error occurred:",l)}else o.errors=n},Q=n=>{o.errors[n]=""},Z=()=>{M.value=!1},j=async n=>{try{await L.delete(`/roles/delete/${n}`);const l=b.value.findIndex(c=>c.id===n);l!==-1&&b.value.splice(l,1),M.value=!1,A.fire("Success","Role deleted successfully","success")}catch(l){console.error("Error deleting role:",l),A.fire("Error","Failed to delete role","error")}},G=async n=>{A.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await j(n)}catch(c){console.error("Error deleting role:",c),A.fire("Error","Failed to delete the role","error")}})};ee(e,oe.debounce(function(n){P(e.value)},300));const P=async(n=1)=>{try{const l=E.data();l.search=e.value,l.page=n;const c=await L.get("/roles1/list",{params:l});b.value=c.data.roles,F.value=c.data.paginator,k.value=!1}catch(l){console.error("Error fetching roles:",l)}};return{form:o,roles:b,modalShow:M,modalForm:h,deleteItemId:T,selectedRole:v,successMessage:B,alertMessage:U,createRole:I,filterRole:t,editRole:m,cancelEdit:Y,handleSubmit:J,deleteModal:G,closeModal:Z,deleteRole:j,dismissMessage:H,hideError:Q,searchTerm:e,paginator:F,modalFilter:k,clearFilter:z,fetchRoles:P,filter:E,handlePageChanged:async n=>{P(n)},has_identify_number:D}},mounted(){this.fetchRoles()}},de={action:"javascript:void(0);"},ce={class:"row"},me={class:"col-sm-6"},ue={class:"mb-3"},fe={for:"name",class:"form-label"},_e=["placeholder"],pe={class:"col-sm-6"},ve={class:"mb-3"},ye={for:"account_type",class:"form-label"},be={disabled:"",value:""},ge={value:"individual"},he={value:"fleet_driver"},ke={value:"both"},Ce={class:"col-sm-6"},Me={class:"mb-3"},Be={for:"has_expiry_date",class:"form-label"},we={disabled:"",value:""},Re={value:"1"},Se={value:"0"},Ve={class:"col-sm-6"},xe={class:"mb-3"},Ee={for:"has_identify_number",class:"form-label"},Fe={disabled:"",value:""},Ue={value:"1"},De={value:"0"},He={class:"col-sm-6"},Pe={class:"mb-3"},Le={for:"identify_number_locale_key",class:"form-label"},Ae=["placeholder"],Ne={class:"col-lg-12"},Te={class:"text-end"},Ie={type:"submit",class:"btn btn-primary"},je={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},qe={class:"alert-content"},Oe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Ye={class:"alert-content"},ze={class:"form-group mt-3"},Ke={key:0,class:"text-danger"},Je={class:"form-group mt-3"},Qe={key:0,class:"text-danger"},Ze={type:"submit",class:"btn btn-success m-2 float-end"},Ge={class:"input-group"};function We(r,e,v,o,E,b){const F=_("Head"),M=_("PageHeader"),h=_("BCardHeader"),k=_("BCardBody"),T=_("BCard"),B=_("BCol"),U=_("BRow"),D=_("BModal"),H=_("BButton"),I=_("Layout");return i(),se(I,null,{default:y(()=>[f(F,{title:"Drivers Needed Documents"}),f(M,{title:"Update",pageTitle:"Drivers Needed Documents"}),f(U,null,{default:y(()=>[f(B,{lg:"12"},{default:y(()=>[f(T,{"no-body":"",id:"tasksList"},{default:y(()=>[f(h,{class:"border-0"}),f(k,{class:"border border-dashed border-end-0 border-start-0"},{default:y(()=>[s("form",de,[s("div",ce,[s("div",me,[s("div",ue,[s("label",fe,a(r.$t("name")),1),p(s("input",{type:"text",class:"form-control",placeholder:r.$t("enter_name"),id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.name=t)},null,8,_e),[[N,o.form.name]]),(i(!0),d(S,null,R(r.errors.name,(t,m)=>(i(),d("span",{key:m,class:"text-danger"},a(t),1))),128))])]),s("div",pe,[s("div",ve,[s("label",ye,a(r.$t("account_type")),1),p(s("select",{id:"account_type",class:"form-select","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.account_type=t)},[s("option",be,a(r.$t("select")),1),s("option",ge,a(r.$t("individual")),1),s("option",he,a(r.$t("fleet_drivers")),1),s("option",ke,a(r.$t("both")),1)],512),[[V,o.form.account_type]]),(i(!0),d(S,null,R(r.errors.account_type,(t,m)=>(i(),d("span",{key:m,class:"text-danger"},a(t),1))),128))])]),s("div",Ce,[s("div",Me,[s("label",Be,a(r.$t("has_expiry_date")),1),p(s("select",{id:"has_expiry_date",class:"form-select","onUpdate:modelValue":e[2]||(e[2]=t=>o.form.has_expiry_date=t)},[s("option",we,a(r.$t("select")),1),s("option",Re,a(r.$t("yes")),1),s("option",Se,a(r.$t("no")),1)],512),[[V,o.form.has_expiry_date]]),(i(!0),d(S,null,R(r.errors.has_expiry_date,(t,m)=>(i(),d("span",{key:m,class:"text-danger"},a(t),1))),128))])]),s("div",Ve,[s("div",xe,[s("label",Ee,a(r.$t("has_identify_number")),1),p(s("select",{id:"has_identify_number",class:"form-select","onUpdate:modelValue":e[3]||(e[3]=t=>o.form.has_identify_number=t)},[s("option",Fe,a(r.$t("select")),1),s("option",Ue,a(r.$t("yes")),1),s("option",De,a(r.$t("no")),1)],512),[[V,o.form.has_identify_number]]),(i(!0),d(S,null,R(r.errors.has_identify_number,(t,m)=>(i(),d("span",{key:m,class:"text-danger"},a(t),1))),128))])]),p(s("div",He,[s("div",Pe,[s("label",Le,a(r.$t("identify_number_key")),1),p(s("input",{type:"text",class:"form-control",placeholder:r.$t("enter_identify_number_key"),id:"identify_number_locale_key","onUpdate:modelValue":e[4]||(e[4]=t=>o.form.identify_number_locale_key=t)},null,8,Ae),[[N,o.form.identify_number_locale_key]]),(i(!0),d(S,null,R(r.errors.identify_number_locale_key,(t,m)=>(i(),d("span",{key:m,class:"text-danger"},a(t),1))),128))])],512),[[te,o.form.has_identify_number==="1"]]),s("div",Ne,[s("div",Te,[s("button",Ie,a(r.$t("update")),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",null,[o.successMessage?(i(),d("div",je,[s("div",qe,[e[18]||(e[18]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[19]||(e[19]=g()),e[20]||(e[20]=s("strong",null,"Success",-1)),g(" - "+a(o.successMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-success",onClick:e[5]||(e[5]=(...t)=>o.dismissMessage&&o.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):x("",!0),o.alertMessage?(i(),d("div",Oe,[s("div",Ye,[e[21]||(e[21]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[22]||(e[22]=g()),e[23]||(e[23]=s("strong",null,"Alert",-1)),g(" - "+a(o.alertMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[6]||(e[6]=(...t)=>o.dismissMessage&&o.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):x("",!0)]),f(D,{modelValue:o.modalForm,"onUpdate:modelValue":e[14]||(e[14]=t=>o.modalForm=t),"hide-footer":"",title:o.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:y(()=>[s("form",{onSubmit:e[12]||(e[12]=le((...t)=>o.handleSubmit&&o.handleSubmit(...t),["prevent"])),onKeydown:e[13]||(e[13]=(...t)=>o.hideError&&o.hideError(...t))},[s("div",ze,[e[24]||(e[24]=s("label",{for:"name",class:"form-label"},[g("Role Name"),s("span",{class:"text-danger"},"*")],-1)),p(s("input",{type:"text",id:"name","onUpdate:modelValue":e[7]||(e[7]=t=>o.form.name=t),class:O(["form-control",{"is-invalid":o.form.errors.name}]),onFocus:e[8]||(e[8]=t=>o.hideError("name"))},null,34),[[N,o.form.name]]),o.form.errors.name?(i(),d("div",Ke,a(o.form.errors.name),1)):x("",!0)]),s("div",Je,[e[25]||(e[25]=s("label",{for:"description",class:"form-label"},[g("description"),s("span",{class:"text-danger"},"*")],-1)),p(s("input",{type:"text",id:"description","onUpdate:modelValue":e[9]||(e[9]=t=>o.form.description=t),class:O(["form-control",{"is-invalid":o.form.errors.description}]),onFocus:e[10]||(e[10]=t=>o.hideError("description"))},null,34),[[N,o.form.description]]),o.form.errors.description?(i(),d("div",Qe,a(o.form.errors.description),1)):x("",!0)]),s("button",Ze,a(o.selectedRole?"Update":"Save"),1),o.selectedRole?(i(),d("button",{key:0,type:"button",onClick:e[11]||(e[11]=(...t)=>o.cancelEdit&&o.cancelEdit(...t)),class:"btn btn-secondary m-2 float-end"},"Cancel")):x("",!0)],32)]),_:1},8,["modelValue","title"]),f(D,{modelValue:o.modalFilter,"onUpdate:modelValue":e[17]||(e[17]=t=>o.modalFilter=t),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:y(()=>[s("form",null,[s("div",Ge,[p(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[15]||(e[15]=t=>o.filter.all=t)},e[26]||(e[26]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"1"},"Yes",-1),s("option",{value:"0"},"No",-1)]),512),[[V,o.filter.all]]),p(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[16]||(e[16]=t=>o.filter.locked=t)},e[27]||(e[27]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"0"},"Inactive",-1),s("option",{value:"1"},"Active",-1)]),512),[[V,o.filter.locked]])]),f(H,{variant:"primary",class:"float-end",onClick:o.fetchRoles},{default:y(()=>e[28]||(e[28]=[g(" Apply")])),_:1,__:[28]},8,["onClick"]),f(H,{variant:"outline-primary",class:"float-end mx-2",onClick:o.clearFilter},{default:y(()=>e[29]||(e[29]=[g("Clear")])),_:1,__:[29]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const ro=W(ie,[["render",We]]);export{ro as default};
