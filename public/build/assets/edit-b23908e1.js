import{_ as L,Z as N,O as R,C as q,r as g,T as D,g as n,o as _,x as T,w as i,a as C,N as x,k as l,i as w,l as e,y as u,J as c,B as v,q as k,M as S,n as P}from"./vendor-ddfbd976.js";import{L as U}from"./main-306a5ea6.js";import{P as A}from"./page-header-2dc95532.js";import{i as I}from"./vehicletypeIcon-aaf23b0d.js";import{I as O}from"./ImageUpload-6f09ff26.js";import{F as j}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";const E={components:{Layout:U,PageHeader:A,Head:N,Multiselect:R,imageUpload:I,ImageUpload:O,FormValidation:j},props:{driver:Object,successMessage:String,alertMessage:String,app_for:String},setup(o){const{t:s}=q(),m=g({}),r=g(null),p=D({password:o.driver&&o.driver.password||"",confirm_password:o.driver&&o.driver.password||""}),b=g(o.successMessage||""),y=g(o.alertMessage||""),f={password:{required:!0},confirm_password:{required:!0,sameAs:"password"}},M=()=>{const t={};for(const a in f)f[a].required&&!p[a]&&(t[a]=s("this_field_is_required"));return t};return{form:p,successMessage:b,alertMessage:y,errors:m,handleSubmit:async()=>{if(m.value=M(),Object.keys(m.value).length===0)try{const t=new FormData;t.append("password",p.password),t.append("confirm_password",p.confirm_password);let a;o.driver?a=await C.post(`/approved-drivers/password/update/${o.driver.id}`,t):a=await C.post("store",t),a.status===200||a.status===201?(b.value=a.data.successMessage,p.reset(),x.get("/approved-drivers")):console.error(s("unexpected_response_status"),a.status)}catch(t){console.error(s("error_handling_form_submission"),t),t.response&&t.response.status===422?m.value=t.response.data.errors:console.error(s("an_unexpected_error_occurred"),t)}},validationRef:r,validationRules:f}}},J={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Z={class:"alert-content"},z={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},G={class:"alert-content"},K={class:"row"},Q={class:"col-sm-6"},W={class:"mb-3"},X={for:"password",class:"form-label"},Y=["placeholder"],$={key:0,class:"text-danger"},ss={class:"col-sm-6"},es={class:"mb-3"},os={for:"confirm_password",class:"form-label"},rs=["placeholder"],ts={key:0,class:"text-danger"},as={class:"col-sm-12 text-end"},ns={type:"submit",class:"btn btn-primary"};function ds(o,s,m,r,p,b){const y=n("Head"),f=n("PageHeader"),M=n("tab"),B=n("BCardHeader"),t=n("FormValidation"),a=n("BCardBody"),h=n("BCard"),V=n("BCol"),H=n("BRow"),F=n("Layout");return _(),T(F,null,{default:i(()=>[l(y,{title:"Driver"}),l(f,{title:m.driver?o.$t("edit"):o.$t("create"),pageTitle:o.$t("driver"),pageLink:"/drivers"},null,8,["title","pageTitle"]),l(H,null,{default:i(()=>[l(V,{lg:"12"},{default:i(()=>[l(h,{"no-body":"",id:"tasksList"},{default:i(()=>[l(B,{class:"border-0"},{default:i(()=>[l(M),r.successMessage?(_(),w("div",J,[e("div",Z,[s[5]||(s[5]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[6]||(s[6]=u()),s[7]||(s[7]=e("strong",null,"Success",-1)),u(" - "+c(r.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[0]||(s[0]=(...d)=>o.dismissMessage&&o.dismissMessage(...d)),"aria-label":"Close Success Message"})])])):v("",!0),r.alertMessage?(_(),w("div",z,[e("div",G,[s[8]||(s[8]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[9]||(s[9]=u()),s[10]||(s[10]=e("strong",null,"Alert",-1)),u(" - "+c(r.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[1]||(s[1]=(...d)=>o.dismissMessage&&o.dismissMessage(...d)),"aria-label":"Close Alert Message"})])])):v("",!0)]),_:1}),l(a,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[e("form",{onSubmit:s[4]||(s[4]=P((...d)=>r.handleSubmit&&r.handleSubmit(...d),["prevent"])),enctype:"multipart/form-data"},[l(t,{form:r.form,rules:r.validationRules,ref:"validationRef"},{default:i(()=>[e("div",K,[e("div",Q,[e("div",W,[e("label",X,[u(c(o.$t("password"))+" ",1),s[11]||(s[11]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[2]||(s[2]=d=>r.form.password=d),placeholder:o.$t("enter_password")},null,8,Y),[[S,r.form.password]]),r.errors.password?(_(),w("span",$,c(r.errors.password),1)):v("",!0)])]),e("div",ss,[e("div",es,[e("label",os,[u(c(o.$t("confirm_password"))+" ",1),s[12]||(s[12]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{type:"password",class:"form-control",id:"confirm_password","onUpdate:modelValue":s[3]||(s[3]=d=>r.form.confirm_password=d),placeholder:o.$t("confirm_password")},null,8,rs),[[S,r.form.confirm_password]]),r.errors.confirm_password?(_(),w("span",ts,c(r.errors.confirm_password),1)):v("",!0)])]),e("div",as,[e("button",ns,c(o.$t("submit")),1)])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const gs=L(E,[["render",ds]]);export{gs as default};
