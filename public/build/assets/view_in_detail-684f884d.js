import{_ as V,Z as O,O as R,P as U,z as Y,r as p,T as z,Q as J,a2 as K,a as I,g as m,o as r,x,w as _,U as S,k as v,l as e,J as o,i,L as q,F as L,B as E,y as g,q as Q,K as Z,n as T}from"./vendor-ddfbd976.js";import{L as j}from"./main-306a5ea6.js";import{P as G}from"./page-header-2dc95532.js";import{P as W}from"./Pagination-f095ae3c.js";import{s as X}from"./search-2c17aadd.js";import{s as ee}from"./searchbar-3acbc236.js";import{_ as te}from"./search-file-ab3e1046.js";import"./footer-e648049d.js";import"./app-042fb454.js";const se={data(){return{rightOffcanvas:!1}},components:{Layout:j,PageHeader:G,Head:O,Pagination:W,Multiselect:R,flatPickr:U,Link:Y,search:X,searchbar:ee},props:{successMessage:String,alertMessage:String,app_for:String,walletBalance:Number,bankDetails:Array,bank_infos:Array,driver_id:Number,formattedBankInfos:Array},setup(n){const s=n.formattedBankInfos,h=p(""),l=z({all:"",locked:"",limit:10}),w=p([]),P=p({}),k=p(!1),y=p(!1),$=p(null),B=p({}),b=p(n.successMessage||""),M=p(n.alertMessage||""),D=()=>{b.value="",M.value=""},H=()=>{y.value=!0},N=()=>{l.reset(),c(),y.value=!1},F=()=>{k.value=!1},a=async u=>{try{await I.delete(`/withdrawal-request-drivers/delete/${u}`);const d=w.value.findIndex(f=>f.id===u);d!==-1&&w.value.splice(d,1),k.value=!1,S.fire(t("success"),"Service Location deleted successfully","success")}catch{S.fire(t("error"),"Failed to delete Service Location","error")}},C=async u=>{S.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async d=>{if(d.isConfirmed)try{await a(u)}catch(f){console.error("Error deleting data:",f),S.fire("Error","Failed to delete the data","error")}})};J(h,K.debounce(function(u){c(h.value)},300));const c=async(u=1)=>{try{const d=l.data();d.search=h.value,d.page=u;const f=await I.get(`/withdrawal-request-drivers/amounts/${n.driver_id}`,{params:d});w.value=f.data.results,P.value=f.data.paginator,A(P.value.total),y.value=!1}catch(d){console.error("Error fetching withdrawal-request-drivers:",d)}},A=()=>{B.value=[10,25,50,100,200,500]};return{results:w,modalShow:k,deleteItemId:$,successMessage:b,alertMessage:M,filterData:H,deleteModal:C,closeModal:F,deleteData:a,dismissMessage:D,searchTerm:h,paginator:P,modalFilter:y,clearFilter:N,fetchDatas:c,filter:l,handlePageChanged:async u=>{c(u)},updatePaymentStatus:async(u,d)=>{try{(await I.post("/withdrawal-request-drivers/update-status",{id:u.id,status:d})).data.successMessage,c()}catch(f){console.error("Error updating payment status:",f),alert("Failed to update payment status. Please try again.")}},formattedBankInfos:s,paginatorOption:B,changeEntriesPerPage:()=>{c()},filter:l}},mounted(){this.fetchDatas()}},ae={class:"row"},oe={class:"col-sm-3"},ne={class:"card border card-border-primary"},le={class:"card-body"},re={class:"row mt-5"},ie={class:"col-12"},de={style:{"text-align":"end"}},ce={class:"card border card-border-primary"},ue={class:"card-body"},me={class:"mb-3"},_e={key:0},ge={key:0,class:"ri-checkbox-circle-fill text-success"},fe={class:"ms-2"},pe={key:1},ve={class:"d-flex align-items-center mt-3"},he={class:"me-2 text-muted"},ye=["value"],be={class:"ms-2 text-muted"},we={class:"table-responsive mt-4"},ke={class:"table align-middle position-relative table-nowrap"},Be={class:"table-active"},Ce={scope:"col"},Pe={scope:"col"},Me={scope:"col"},xe={scope:"col"},Se={scope:"col"},qe={scope:"col"},Le={key:0},Ee={class:"dropdown"},$e={key:0,class:"dropdown-menu dropdown-menu-end"},De=["onClick"],He=["onClick"],Ne={key:1},Fe={colspan:"7",class:"text-center"},Ae={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ie={class:"alert-content"},Te={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ve={class:"alert-content"};function Oe(n,s,h,l,w,P){const k=m("Head"),y=m("PageHeader"),$=m("BCardHeader"),B=m("BCol"),b=m("BBadge"),M=m("BCardBody"),D=m("BCard"),H=m("BRow"),N=m("Pagination"),F=m("Layout");return r(),x(F,null,{default:_(()=>[v(k,{title:"View Details"}),v(y,{title:n.$t("view_details"),pageTitle:n.$t("view_details"),pageLink:"/withdrawal-request-drivers"},null,8,["title","pageTitle"]),v(H,null,{default:_(()=>[v(B,{lg:"12"},{default:_(()=>[v(D,{"no-body":"",id:"tasksList"},{default:_(()=>[v($,{class:"border-0"},{default:_(()=>[e("div",ae,[e("div",oe,[e("div",ne,[e("div",le,[e("h5",null,o(n.$t("balance_amount")),1),e("div",re,[s[4]||(s[4]=e("div",{class:"col-6"},[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-success-subtle rounded-circle fs-2"},[e("i",{class:"bx bx-money text-success icon-lg"})])])],-1)),e("div",ie,[e("h5",de,o(h.walletBalance),1)])])])])]),(r(!0),i(L,null,q(l.formattedBankInfos,(a,C)=>(r(),i("div",{key:C,class:"col-sm-12"},[e("div",ce,[e("div",ue,[e("h5",me,o(n.$t(a.method_name)),1),a.fields.length>0?(r(),i("div",_e,[(r(!0),i(L,null,q(a.fields,(c,A)=>(r(),i("div",{class:"d-flex",key:A},[c.value?(r(),i("i",ge)):E("",!0),e("h6",fe,[g(o(n.$t(c.field_name))+": ",1),e("span",null,o(c.value||n.$t("No data available")),1)])]))),128))])):(r(),i("div",pe,[e("p",null,o(n.$t("No fields available for this method")),1)]))])])]))),128))])]),_:1}),v(M,{class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[e("h5",null,o(n.$t("withdrawal_request_history")),1),v(B,{md:"3"},{default:_(()=>[e("div",ve,[e("label",he,o(n.$t("show")),1),Q(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>l.filter.limit=a),onChange:s[1]||(s[1]=(...a)=>l.changeEntriesPerPage&&l.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(r(!0),i(L,null,q(l.paginatorOption,a=>(r(),i("option",{key:a,value:a},o(a),9,ye))),128))],544),[[Z,l.filter.limit]]),e("label",be,o(n.$t("entries")),1)])]),_:1}),e("div",we,[e("table",ke,[e("thead",Be,[e("tr",null,[e("th",Ce,o(n.$t("date")),1),e("th",Pe,o(n.$t("name")),1),e("th",Me,o(n.$t("mobile_number")),1),e("th",xe,o(n.$t("amount")),1),e("th",Se,o(n.$t("status")),1),e("th",qe,o(n.$t("action")),1)])]),l.results.length>0?(r(),i("tbody",Le,[(r(!0),i(L,null,q(l.results,(a,C)=>(r(),i("tr",{key:C},[e("td",null,o(a.created_at),1),e("td",null,o(a.driver_name),1),e("td",null,o(a.driver_mobile),1),e("td",null,o(a.requested_currency)+o(a.requested_amount),1),e("td",null,[a.payment_status=="approved"?(r(),x(b,{key:0,variant:"success",class:"text-uppercase"},{default:_(()=>[g(o(n.$t("approved")),1)]),_:1})):a.payment_status=="requested"?(r(),x(b,{key:1,variant:"warning",class:"text-uppercase"},{default:_(()=>[g(o(n.$t("requested")),1)]),_:1})):(r(),x(b,{key:2,variant:"danger",class:"text-uppercase"},{default:_(()=>[g(o(n.$t("declined")),1)]),_:1}))]),e("td",null,[e("div",Ee,[s[7]||(s[7]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),a.payment_status==="requested"?(r(),i("div",$e,[e("a",{class:"dropdown-item",href:"#",onClick:T(c=>l.updatePaymentStatus(a,"approved"),["prevent"])},[s[5]||(s[5]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),g(o(n.$t("approve")),1)],8,De),e("a",{class:"dropdown-item",href:"#",onClick:T(c=>l.updatePaymentStatus(a,"declined"),["prevent"])},[s[6]||(s[6]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),g(o(n.$t("decline")),1)],8,He)])):E("",!0)])])]))),128))])):(r(),i("tbody",Ne,[e("tr",null,[e("td",Fe,[s[8]||(s[8]=e("img",{src:te,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,o(n.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[l.successMessage?(r(),i("div",Ae,[e("div",Ie,[s[9]||(s[9]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[10]||(s[10]=g()),s[11]||(s[11]=e("strong",null,"Success",-1)),g(" - "+o(l.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[2]||(s[2]=(...a)=>l.dismissMessage&&l.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):E("",!0),l.alertMessage?(r(),i("div",Te,[e("div",Ve,[s[12]||(s[12]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[13]||(s[13]=g()),s[14]||(s[14]=e("strong",null,"Alert",-1)),g(" - "+o(l.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[3]||(s[3]=(...a)=>l.dismissMessage&&l.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):E("",!0)]),v(N,{paginator:l.paginator,onPageChanged:l.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const et=V(se,[["render",Oe]]);export{et as default};
