import{_ as P,Z as R,O as j,P as O,C as D,T as A,r as M,G as z,D as E,g as c,o as a,x as G,w as p,a as H,N as I,k as u,l as e,J as n,q as w,K as J,i as r,L as y,F as g,y as b,M as B,n as K,B as T}from"./vendor-ddfbd976.js";import{L as W}from"./main-306a5ea6.js";import{P as Z}from"./page-header-2dc95532.js";import{F as Q}from"./FormValidation-a9047131.js";import{s as X}from"./searchbar-3acbc236.js";import"./footer-e648049d.js";import"./app-042fb454.js";const Y={data(){return{subscription_hint:!1}},components:{Layout:W,PageHeader:Z,Head:R,Multiselect:j,searchbar:X,FormValidation:Q,flatPickr:O},props:{successMessage:String,alertMessage:String,plan:Object,types:Object},setup(t){const{t:s}=D(),_=A({vehicle_type_id:t.plan?t.plan.vehicle_type_id:"",transport_type:t.plan?t.plan.transport_type:"",name:t.plan?t.plan.name:"",subscription_duration:t.plan?t.plan.subscription_duration:"",amount:t.plan?t.plan.amount:"",description:t.plan?t.plan.description:""}),o={vehicle_type_id:{required:!0},name:{required:!0},subscription_duration:{required:!0},amount:{required:!0},description:{required:!0}},f=M(null),h=M({}),k=M(t.successMessage||""),v=M(t.alertMessage||""),x=()=>{k.value="",v.value=""},C=M(t.types),V=z(()=>{var i;return(i=C.value)==null?void 0:i.filter(L=>L.is_taxi===_.transport_type)}),S=async()=>{if(h.value=f.value.validate(),!(Object.keys(h.value).length>0))try{let i;t.plan?i=await H.post(`/subscription/update/${t.plan.id}`,_.data()):i=await H.post("/subscription/store",_.data()),i.status===201||i.status===200?(k.value=s("subscription_saved_successfully"),_.reset(),I.get("/subscription")):v.value=s("failed_to_save_subscription")}catch(i){i.response&&i.response.status===422?h.value=i.response.data.errors:(console.error(s("error_saving_subscription"),i),v.value=s("failed_to_save_subscription"))}};return E(()=>{}),{form:_,successMessage:k,alertMessage:v,handleSubmit:S,dismissMessage:x,validationRules:o,validationRef:f,type_options:V,errors:h}}},$={class:"text-success text-decoration-underline text-decoration-underline-success float-end"},ee={class:"row"},se={class:"col-md-6"},te={class:"mb-3"},oe={for:"select_transport_type",class:"form-label"},le={disabled:"",value:""},ne={value:"taxi"},ae={value:"delivery"},ie={value:"both"},re={class:"col-md-6"},de={class:"mb-3"},ce={for:"select_types",class:"form-label"},ue={class:"col-sm-6"},me={class:"mb-3"},pe={for:"name",class:"form-label"},_e=["placeholder"],fe={class:"col-sm-6"},be={class:"mb-3"},ve={for:"subscription_duration",class:"form-label"},ye=["placeholder"],ge={class:"col-sm-6"},he={class:"mb-3"},ke={for:"amount",class:"form-label"},Me=["placeholder"],we={class:"col-sm-6"},xe={class:"mb-3"},Be={for:"description",class:"form-label"},Ce=["placeholder"],Ve={class:"col-lg-12"},Se={class:"text-end"},Le={type:"submit",class:"btn btn-primary"},He={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert"},Te={class:"alert-content"},Ue={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert"},qe={class:"alert-content"},Fe={class:"modal-footer v-modal-footer"};function Ne(t,s,_,o,f,h){const k=c("Head"),v=c("PageHeader"),x=c("BLink"),C=c("BCardHeader"),V=c("Multiselect"),S=c("FormValidation"),i=c("BCardBody"),L=c("BCard"),U=c("BCol"),q=c("BRow"),F=c("BModal"),N=c("Layout");return a(),G(N,null,{default:p(()=>[u(k,{title:"Subscription"}),u(v,{title:_.plan?t.$t("edit"):t.$t("create"),pageTitle:t.$t("subscription"),pageLink:"/subscription"},null,8,["title","pageTitle"]),u(q,null,{default:p(()=>[u(U,{lg:"12"},{default:p(()=>[u(L,{"no-body":"",id:"tasksList"},{default:p(()=>[u(C,{class:"border-0"},{default:p(()=>[u(x,{onClick:s[0]||(s[0]=d=>f.subscription_hint=!f.subscription_hint)},{default:p(()=>[e("h6",$,n(t.$t("how_it_works")),1)]),_:1})]),_:1}),u(i,{class:"border border-dashed border-end-0 border-start-0"},{default:p(()=>[e("form",{onSubmit:s[7]||(s[7]=K((...d)=>o.handleSubmit&&o.handleSubmit(...d),["prevent"]))},[u(S,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:p(()=>{var d;return[e("div",ee,[e("div",se,[e("div",te,[e("label",oe,n(t.$t("transport_type")),1),w(e("select",{id:"transport_type",class:"form-select","onUpdate:modelValue":s[1]||(s[1]=l=>o.form.transport_type=l)},[e("option",le,n(t.$t("select")),1),e("option",ne,n(t.$t("taxi")),1),e("option",ae,n(t.$t("delivery")),1),e("option",ie,n(t.$t("all")),1)],512),[[J,o.form.transport_type]]),(a(!0),r(g,null,y(o.errors.transport_type,(l,m)=>(a(),r("span",{key:m,class:"text-danger"},n(l),1))),128))])]),e("div",re,[e("div",de,[e("label",ce,n(t.$t("vehicle_type")),1),u(V,{id:"select_vehicle_type",modelValue:o.form.vehicle_type_id,"onUpdate:modelValue":s[2]||(s[2]=l=>o.form.vehicle_type_id=l),"close-on-select":"",searchable:!0,"create-option":!1,options:(d=o.type_options)==null?void 0:d.map(l=>({value:l.id,label:l.name})),placeholder:t.$t("select_vehicle_type")},null,8,["modelValue","options","placeholder"]),(a(!0),r(g,null,y(o.errors.user_ids,(l,m)=>(a(),r("span",{key:m,class:"text-danger"},n(l),1))),128))])]),e("div",ue,[e("div",me,[e("label",pe,[b(n(t.$t("name"))+" ",1),s[12]||(s[12]=e("span",{class:"text-danger"},"*",-1))]),w(e("input",{type:"text",class:"form-control",placeholder:t.$t("enter_name"),id:"name","onUpdate:modelValue":s[3]||(s[3]=l=>o.form.name=l)},null,8,_e),[[B,o.form.name]]),(a(!0),r(g,null,y(o.errors.name,(l,m)=>(a(),r("span",{key:m,class:"text-danger"},n(l),1))),128))])]),e("div",fe,[e("div",be,[e("label",ve,[b(n(t.$t("subscription_duration"))+" ",1),s[13]||(s[13]=e("span",{class:"text-danger"},"*",-1))]),w(e("input",{type:"number",class:"form-control",placeholder:t.$t("enter_subscription_duration"),id:"subscription_duration","onUpdate:modelValue":s[4]||(s[4]=l=>o.form.subscription_duration=l)},null,8,ye),[[B,o.form.subscription_duration]]),(a(!0),r(g,null,y(o.errors.subscription_duration,(l,m)=>(a(),r("span",{key:m,class:"text-danger"},n(l),1))),128))])]),e("div",ge,[e("div",he,[e("label",ke,[b(n(t.$t("amount"))+" ",1),s[14]||(s[14]=e("span",{class:"text-danger"},"*",-1))]),w(e("input",{type:"number",step:"any",class:"form-control",placeholder:t.$t("enter_amount"),id:"amount","onUpdate:modelValue":s[5]||(s[5]=l=>o.form.amount=l)},null,8,Me),[[B,o.form.amount]]),(a(!0),r(g,null,y(o.errors.amount,(l,m)=>(a(),r("span",{key:m,class:"text-danger"},n(l),1))),128))])]),e("div",we,[e("div",xe,[e("label",Be,[b(n(t.$t("description"))+" ",1),s[15]||(s[15]=e("span",{class:"text-danger"},"*",-1))]),w(e("textarea",{type:"text",class:"form-control",placeholder:t.$t("enter_description"),id:"description","onUpdate:modelValue":s[6]||(s[6]=l=>o.form.description=l)},null,8,Ce),[[B,o.form.description]]),(a(!0),r(g,null,y(o.errors.description,(l,m)=>(a(),r("span",{key:m,class:"text-danger"},n(l),1))),128))])]),e("div",Ve,[e("div",Se,[e("button",Le,n(_.plan?t.$t("update"):t.$t("save")),1)])])])]}),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[o.successMessage?(a(),r("div",He,[e("div",Te,[s[16]||(s[16]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[17]||(s[17]=e("strong",null,"Success",-1)),b(" - "+n(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[8]||(s[8]=(...d)=>o.dismissMessage&&o.dismissMessage(...d)),"aria-label":"Close Success Message"})])])):T("",!0),o.alertMessage?(a(),r("div",Ue,[e("div",qe,[s[18]||(s[18]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[19]||(s[19]=e("strong",null,"Alert",-1)),b(" - "+n(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[9]||(s[9]=(...d)=>o.dismissMessage&&o.dismissMessage(...d)),"aria-label":"Close Alert Message"})])])):T("",!0)]),u(F,{modelValue:f.subscription_hint,"onUpdate:modelValue":s[11]||(s[11]=d=>f.subscription_hint=d),"hide-footer":"",title:t.$t("subscription"),class:"v-modal-custom",size:"lg"},{default:p(()=>[s[21]||(s[21]=e("p",{class:"text-muted mb-0"},"How Coupon Works:",-1)),s[22]||(s[22]=e("div",{class:"d-flex mt-4"},[e("div",{class:"flex-shrink-0"},[e("i",{class:"ri-checkbox-circle-fill text-success"})]),e("div",{class:"flex-grow-1 ms-2"},[e("p",{class:"text-muted mb-0"}," The coupon name will work based on its settings, such as the date range, how many times each user can use it, the total number of uses, maximum discount, and minimum trip amount. ")])],-1)),s[23]||(s[23]=e("div",{class:"d-flex mt-4"},[e("div",{class:"flex-shrink-0"},[e("i",{class:"ri-checkbox-circle-fill text-success"})]),e("div",{class:"flex-grow-1 ms-2"},[e("p",{class:"text-muted mb-0"}," The driver will still receive the full payment, so they won't be affected by rides where a coupon is applied. ")])],-1)),s[24]||(s[24]=e("div",{class:"swiper-pagination dynamic-pagination"},null,-1)),e("div",Fe,[u(x,{href:"javascript:void(0);",class:"btn btn-link link-success fw-medium",onClick:s[10]||(s[10]=d=>f.subscription_hint=!1)},{default:p(()=>s[20]||(s[20]=[e("i",{class:"ri-close-line me-1 align-middle"},null,-1),b(" Close ")])),_:1,__:[20]})])]),_:1,__:[21,22,23,24]},8,["modelValue","title"])]),_:1})}const Ee=P(Y,[["render",Ne]]);export{Ee as default};
