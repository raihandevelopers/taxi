import{_ as H,Z as P,O as U,P as N,C as q,T,r as f,G as A,g as i,o as r,x as O,w as p,a as $,N as j,k as m,l as e,y as g,J as l,q as S,K as L,i as d,L as k,F as M,B as R,n as x}from"./vendor-ddfbd976.js";import{L as E}from"./main-306a5ea6.js";import{P as G}from"./page-header-2dc95532.js";import{P as I}from"./Pagination-f095ae3c.js";import{F as J}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";const K={components:{Layout:E,PageHeader:G,Head:P,Pagination:I,Multiselect:U,FormValidation:J,flatPickr:N},props:{successMessage:String,alertMessage:String,validate:Function},setup(a){const{t}=q(),c=T({date:"",select_status:"",select_date_option:"",file_format:""}),s={select_status:{required:!0},select_date_option:{required:!0},file_format:{required:!0}},w=f(null),v=f({}),b=f(a.successMessage||""),h=f(a.alertMessage||""),B=f(),C=()=>{b.value="",h.value=""},y=f(!1),D=async()=>{if(v.value=w.value.validate(),!(Object.keys(v.value).length>0)){y.value=!0;try{const n=await $.post("/report/user-report-download",c.data(),{responseType:"blob"}),u=window.URL.createObjectURL(new Blob([n.data])),o=document.createElement("a");o.href=u,o.setAttribute("download",`user_report.${c.file_format}`),document.body.appendChild(o),o.click(),o.remove(),b.value=t("report_downloaded_successfully"),c.reset(),j.get("/report/user-report")}catch(n){n.response&&n.response.status===422?v.value=n.response.data.errors:(console.error(t("error_downloading_report"),n),h.value=t("failed_to_download_report"))}finally{y.value=!1}}},V=A(()=>{if(c.date&&c.date.length===2){const n=new Date(c.date[0]),u=new Date(c.date[1]),o=n.toLocaleString("default",{month:"short"}),_=u.toLocaleString("default",{month:"short"});return`${n.getDate()} ${o} - ${u.getDate()} ${_}`}return""});return{form:c,successMessage:b,alertMessage:h,handleSubmit:D,dismissMessage:C,validationRules:s,validationRef:w,errors:v,select_date_option:B,formattedDate:V,rangeDateconfig:{mode:"range",dateFormat:"d M, Y",maxDate:"today"},loading:y}}},Y={class:"row"},Z={class:"col-sm-6"},z={class:"mb-3"},Q={for:"select_status",class:"form-label"},W={disabled:"",value:""},X={value:"1"},ee={value:"0"},te={value:"2"},se={class:"col-sm-6"},oe={class:"mb-3"},ae={for:"select_date_option",class:"form-label"},le={disabled:"",value:""},re={value:"today"},ne={value:"this_week"},de={value:"this_month"},ie={value:"this_year"},ce={value:"date"},_e={key:0,class:"col-sm-6"},me={class:"mb-4"},ue={for:"datepicker-range",class:"form-label"},fe={class:"col-sm-6"},pe={class:"mb-3"},ge={for:"file_format",class:"form-label"},ve={disabled:"",selected:"",value:""},be={value:"xlsx"},he={value:"csv"},ye={class:"col-lg-12"},ke={class:"text-end"},Me=["disabled"],we={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Be={class:"alert-content"},Ce={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},De={class:"alert-content"};function Ve(a,t,c,s,w,v){const b=i("Head"),h=i("PageHeader"),B=i("BCardHeader"),C=i("flat-pickr"),y=i("FormValidation"),D=i("BCardBody"),V=i("BCard"),F=i("BCol"),n=i("BRow"),u=i("Layout");return r(),O(u,null,{default:p(()=>[m(b,{title:"User Report"}),m(h,{title:a.$t("user_report"),pageTitle:a.$t("user_report")},null,8,["title","pageTitle"]),m(n,null,{default:p(()=>[m(F,{lg:"12"},{default:p(()=>[m(V,{"no-body":"",id:"tasksList"},{default:p(()=>[m(B,{class:"border-0"}),m(D,{class:"border border-dashed border-end-0 border-start-0"},{default:p(()=>[e("form",{onSubmit:t[4]||(t[4]=x((...o)=>s.handleSubmit&&s.handleSubmit(...o),["prevent"]))},[m(y,{form:s.form,rules:s.validationRules,ref:"validationRef"},{default:p(()=>[e("div",Y,[e("div",Z,[e("div",z,[e("label",Q,[g(l(a.$t("select_status"))+" ",1),t[7]||(t[7]=e("span",{class:"text-danger"},"*",-1))]),S(e("select",{id:"select_status",class:"form-select","onUpdate:modelValue":t[0]||(t[0]=o=>s.form.select_status=o)},[e("option",W,l(a.$t("select_user_status")),1),e("option",X,l(a.$t("active")),1),e("option",ee,l(a.$t("inactive")),1),e("option",te,l(a.$t("delete_requested")),1)],512),[[L,s.form.select_status]]),(r(!0),d(M,null,k(s.errors.select_status,(o,_)=>(r(),d("span",{key:_,class:"text-danger"},l(o),1))),128))])]),e("div",se,[e("div",oe,[e("label",ae,[g(l(a.$t("date_option"))+" ",1),t[8]||(t[8]=e("span",{class:"text-danger"},"*",-1))]),S(e("select",{id:"select_date_option",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=o=>s.form.select_date_option=o)},[e("option",le,l(a.$t("select")),1),e("option",re,l(a.$t("today")),1),e("option",ne,l(a.$t("this_week")),1),e("option",de,l(a.$t("this_month")),1),e("option",ie,l(a.$t("this_year")),1),e("option",ce,l(a.$t("date")),1)],512),[[L,s.form.select_date_option]]),(r(!0),d(M,null,k(s.errors.select_date_option,(o,_)=>(r(),d("span",{key:_,class:"text-danger"},l(o),1))),128))])]),s.form.select_date_option==="date"?(r(),d("div",_e,[e("div",me,[e("label",ue,[g(l(a.$t("from_to_date"))+" ",1),t[9]||(t[9]=e("span",{class:"text-danger"},"*",-1))]),m(C,{placeholder:a.$t("select_date"),modelValue:s.form.date,"onUpdate:modelValue":t[2]||(t[2]=o=>s.form.date=o),config:s.rangeDateconfig,class:"form-control flatpickr-input",id:"datepicker-range"},null,8,["placeholder","modelValue","config"]),(r(!0),d(M,null,k(s.errors.date,(o,_)=>(r(),d("span",{key:_,class:"text-danger"},l(o),1))),128))])])):R("",!0),e("div",fe,[e("div",pe,[e("label",ge,[g(l(a.$t("file_format"))+" ",1),t[10]||(t[10]=e("span",{class:"text-danger"},"*",-1))]),S(e("select",{id:"file_format",class:"form-select","onUpdate:modelValue":t[3]||(t[3]=o=>s.form.file_format=o)},[e("option",ve,l(a.$t("select_file_format")),1),e("option",be,l(a.$t("excel")),1),e("option",he,l(a.$t("csv")),1)],512),[[L,s.form.file_format]]),(r(!0),d(M,null,k(s.errors.file_format,(o,_)=>(r(),d("span",{key:_,class:"text-danger"},l(o),1))),128))])]),e("div",ye,[e("div",ke,[e("button",{type:"submit",class:"btn btn-primary",disabled:s.loading},l(a.$t("download")),9,Me)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[s.successMessage?(r(),d("div",we,[e("div",Be,[t[11]||(t[11]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[12]||(t[12]=e("strong",null,"Success",-1)),g(" - "+l(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[5]||(t[5]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):R("",!0),s.alertMessage?(r(),d("div",Ce,[e("div",De,[t[13]||(t[13]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[14]||(t[14]=e("strong",null,"Alert",-1)),g(" - "+l(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[6]||(t[6]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):R("",!0)])]),_:1})}const Ne=H(K,[["render",Ve]]);export{Ne as default};
