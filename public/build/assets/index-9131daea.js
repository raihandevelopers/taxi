import{_ as K,Z as Q,O as Z,P as j,z as W,r as f,T as X,C as ee,R as te,g as u,S as se,o as g,x as H,w as d,a as E,U as m,N as ae,k as c,l as e,J as r,q as z,K as oe,i as h,L as I,F as R,y as M,B as P,n as N,p as ne}from"./vendor-ddfbd976.js";import{L as le}from"./main-306a5ea6.js";import{P as re}from"./page-header-2dc95532.js";import{P as ie}from"./Pagination-f095ae3c.js";import{s as ce}from"./search-2c17aadd.js";import{s as de}from"./searchbar-3acbc236.js";import{l as ue}from"./footer-e648049d.js";import{_ as ge}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const fe={data(){return{rightOffcanvas:!1,SearchQuery:""}},components:{Layout:le,PageHeader:re,Head:Q,Pagination:ie,Multiselect:Z,flatPickr:j,Link:W,search:ce,searchbar:de},props:{successMessage:String,alertMessage:String,app_for:String},setup(o){const s=f(""),p=X({all:"",locked:"",limit:10}),{t}=ee(),k=f([]),S=f({}),w=f(!1),b=f(!1),v=f(null),L=f({}),y=f(o.successMessage||""),_=f(o.alertMessage||""),x=()=>{y.value="",_.value=""},A=()=>{b.value=!0},O=()=>{p.reset(),C(),b.value=!1},V=()=>{w.value=!1},D=async n=>{try{await E.delete(`/languages/delete/${n}`);const l=k.value.findIndex(i=>i.id===n);l!==-1&&k.value.splice(l,1),w.value=!1,m.fire(t("success"),t("language_deleted_successfully"),"success")}catch{m.fire(t("error"),t("failed_to_delete_language"),"error")}},F=async n=>{m.fire({title:"Are you sure want to change the Default Language?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, change it!"}).then(async l=>{if(l.value)try{(await E.post(`/languages/default-set/${n}`,{lang:n})).status==201&&(C(),m.fire({text:t("language_updated_successfully"),icon:"success",showConfirmButton:!1,timer:5e3}))}catch{_.value=t("failed_to_update_language"),setTimeout(()=>{_.value=""},5e3),m.fire(t("error"),t("failed_to_update_language"),"error")}})},T=async(n,l)=>{m.fire({title:"Are you sure want to change the "+l+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, change it!"}).then(async i=>{if(i.value){const G=await a(n,l),J=document.getElementById("statusCheck-"+n);J.checked=!!G.check_status,m.fire({title:"Status Changed!",text:"Language status has been changed.",icon:"success",showConfirmButton:!1,timer:1e3})}})},a=async(n,l)=>{try{return(await E.put(`/languages/status/${n}`,{status_type:l})).data}catch(i){throw _.value=t("error_changing_status"),setTimeout(()=>{_.value=""},5e3),console.error(t("error_changing_status"),i),i}},Y=async n=>{m.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await D(n)}catch(i){console.error(t("error_deleting_data"),i),m.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},B=async n=>{s.value=n,C()},C=async(n=1)=>{try{const l=p.data();l.search=s.value,l.page=n;const i=await E.get("/languages/list",{params:l});k.value=i.data.results,S.value=i.data.paginator,q(S.value.total),b.value=!1}catch(l){console.error(t("error_fetching_languages"),l)}},U=async n=>{C(n)},$=async n=>{ae.get(`/languages/browse/${n.id}`)},q=()=>{L.value=[10,25,50,100,200,500]};return{results:k,modalShow:w,deleteItemId:v,successMessage:y,alertMessage:_,filterData:A,deleteModal:Y,closeModal:V,deleteData:D,dismissMessage:x,searchTerm:s,paginator:S,modalFilter:b,clearFilter:O,fetchDatas:C,filter:p,handlePageChanged:U,editData:$,changeStatus:T,updateStatus:a,fetchSearch:B,changeLocale:F,paginatorOption:L,changeEntriesPerPage:()=>{C()}}},computed:{...ue,...te(["permissions"])},mounted(){this.fetchDatas()}},me={class:"d-flex align-items-center mt-3"},_e={class:"me-2 text-muted"},he=["value"],pe={class:"ms-2 text-muted"},be={class:"d-flex align-items-center gap-2"},ve={class:"table-responsive"},ye={class:"table align-middle position-relative table-nowrap"},Ce={class:"table-active"},ke={scope:"col"},we={scope:"col"},Be={scope:"col"},Me={scope:"col"},Pe={scope:"col"},Se={key:0},Le=["onClick"],xe={class:"form-check form-switch"},De=["id","checked","onClick","disabled"],Te={class:"d-flex"},He={key:1},Ee={colspan:"4",class:"text-center"},Ne={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ae={class:"alert-content"},Oe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ve={class:"alert-content"};function Fe(o,s,p,t,k,S){const w=u("Head"),b=u("PageHeader"),v=u("BCol"),L=u("searchbar"),y=u("BButton"),_=u("Link"),x=u("BRow"),A=u("BCardHeader"),O=u("BCardBody"),V=u("BCard"),D=u("Pagination"),F=u("Layout"),T=se("b-tooltip");return g(),H(F,null,{default:d(()=>[c(w,{title:"Languages"}),c(b,{title:o.$t("languages"),pageTitle:o.$t("languages")},null,8,["title","pageTitle"]),c(x,null,{default:d(()=>[c(v,{lg:"12"},{default:d(()=>[c(V,{"no-body":"",id:"tasksList"},{default:d(()=>[c(A,{class:"border-0"},{default:d(()=>[c(x,{class:"g-2"},{default:d(()=>[c(v,{md:"3"},{default:d(()=>[e("div",me,[e("label",_e,r(o.$t("show")),1),z(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.filter.limit=a),onChange:s[1]||(s[1]=(...a)=>t.changeEntriesPerPage&&t.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(g(!0),h(R,null,I(t.paginatorOption,a=>(g(),h("option",{key:a,value:a},r(a),9,he))),128))],544),[[oe,t.filter.limit]]),e("label",pe,r(o.$t("entries")),1)])]),_:1}),c(v,{md:"3"}),c(v,{md:"auto",class:"ms-auto"},{default:d(()=>[e("div",be,[c(L,{onSearch:t.fetchSearch},null,8,["onSearch"]),o.permissions.includes("add_languages")?(g(),H(_,{key:0,href:"/languages/create"},{default:d(()=>[c(y,{variant:"primary",disabled:p.app_for=="demo",class:"float-end"},{default:d(()=>[s[4]||(s[4]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),M(" "+r(o.$t("add_new_languages")),1)]),_:1,__:[4]},8,["disabled"])]),_:1})):P("",!0)])]),_:1})]),_:1})]),_:1}),c(O,{class:"border border-dashed border-end-0 border-start-0"},{default:d(()=>[e("div",ve,[e("table",ye,[e("thead",Ce,[e("tr",null,[e("th",ke,r(o.$t("name")),1),e("th",we,r(o.$t("default")),1),e("th",Be,r(o.$t("code")),1),e("th",Me,r(o.$t("status")),1),e("th",Pe,r(o.$t("action")),1)])]),t.results.length>0?(g(),h("tbody",Se,[(g(!0),h(R,null,I(t.results,(a,Y)=>(g(),h("tr",{key:Y},[e("td",null,r(a.name),1),e("td",null,[e("button",{type:"button",onClick:N(B=>t.changeLocale(a.id),["prevent"]),class:ne({btn:!0,"btn-outline-primary":!a.default_status,"btn-primary":a.default_status,"custom-toggle":!0,active:a.default_status}),"data-bs-toggle":"button"},[e("div",null,r(a.default_status?o.$t("default"):o.$t("set_as_default")),1)],10,Le)]),e("td",null,r(a.code),1),e("td",null,[e("div",xe,[e("input",{class:"form-check-input",type:"checkbox",language:"switch",id:"statusCheck-"+a.id,checked:a.active,onClick:N(B=>t.changeStatus(a.id,"status"),["prevent"]),disabled:a.code==="en"},null,8,De)])]),e("td",null,[e("div",Te,[o.permissions.includes("browse_languages")?z((g(),H(y,{key:0,onClick:N(B=>t.editData(a),["prevent"]),class:"btn btn-soft-info btn-sm m-2","data-bs-toggle":"tooltip",title:o.$t("translation")},{default:d(()=>s[5]||(s[5]=[e("i",{class:"bx bx-world bx-xs"},null,-1)])),_:2,__:[5]},1032,["onClick","title"])),[[T,void 0,void 0,{hover:!0}]]):P("",!0),o.permissions.includes("delete_languages")&&t.results.length>1&&p.app_for!=="demo"&&a.code!="en"?z((g(),H(y,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button","data-bs-toggle":"tooltip",title:o.$t("delete"),id:"sa-warning",onClick:N(B=>t.deleteModal(a.id),["prevent"])},{default:d(()=>s[6]||(s[6]=[e("i",{class:"bx bx-trash"},null,-1)])),_:2,__:[6]},1032,["title","onClick"])),[[T,void 0,void 0,{hover:!0}]]):P("",!0)])])]))),128))])):(g(),h("tbody",He,[e("tr",null,[e("td",Ee,[s[7]||(s[7]=e("img",{src:ge,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,r(o.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[t.successMessage?(g(),h("div",Ne,[e("div",Ae,[s[8]||(s[8]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[9]||(s[9]=M()),s[10]||(s[10]=e("strong",null,"Success",-1)),M(" - "+r(t.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[2]||(s[2]=(...a)=>t.dismissMessage&&t.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):P("",!0),t.alertMessage?(g(),h("div",Oe,[e("div",Ve,[s[11]||(s[11]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[12]||(s[12]=M()),s[13]||(s[13]=e("strong",null,"Alert",-1)),M(" - "+r(t.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[3]||(s[3]=(...a)=>t.dismissMessage&&t.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):P("",!0)]),c(D,{paginator:t.paginator,onPageChanged:t.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Qe=K(fe,[["render",Fe]]);export{Qe as default};
