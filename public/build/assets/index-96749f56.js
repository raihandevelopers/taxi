import{_ as Y,Z as j,O as q,P as J,z as Q,C as Z,r as p,T as X,Q as ee,a2 as te,a as U,R as se,g as d,S as oe,o as u,x as R,w as i,U as v,N as le,k as n,l as e,J as o,q as D,K as I,i as _,L as G,F as K,y as k,B,p as ae,n as E}from"./vendor-ddfbd976.js";import{L as ne}from"./main-306a5ea6.js";import{P as ie}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import{s as de}from"./search-2c17aadd.js";import{s as ce}from"./searchbar-3acbc236.js";import{l as ue}from"./footer-e648049d.js";import{_ as me}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const fe={data(){return{rightOffcanvas:!1}},components:{Layout:ne,PageHeader:ie,Head:j,Pagination:re,Multiselect:q,flatPickr:J,Link:Q,search:de,searchbar:ce},props:{successMessage:String,alertMessage:String,serviceLocations:{type:Object,required:!0}},setup(s){const{t}=Z(),w=p(""),a=X({all:"",locked:"",limit:10}),f=p([]),P=p({}),M=p(!1),y=p(!1),m=p(null),g=p({}),$=p(s.successMessage||""),C=p(s.alertMessage||""),O=()=>{$.value="",C.value=""},L=()=>{y.value=!0},F=()=>{a.reset(),h(),y.value=!1},T=async(r,c)=>{v.fire({title:t("are_you_sure"),text:t("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:t("yes"),cancelButtonText:t("cancel")}).then(async b=>{if(b.isConfirmed)try{await U.post("/fleet-needed-documents/toggle",{id:r,status:c});const V=f.value.findIndex(W=>W.id===r);V!==-1&&(f.value[V].active=c),v.fire(t("changed"),t("status_updated_successfully"),"success")}catch(V){console.error(t("error_updating_status"),V),v.fire(t("error"),t("failed_to_update_status"),"error")}})},A=()=>{M.value=!1},x=async r=>{try{await U.delete(`/fleet-needed-documents/delete/${r}`);const c=f.value.findIndex(b=>b.id===r);c!==-1&&f.value.splice(c,1),M.value=!1,v.fire(t("success"),t("fleet_needed_documents_deleted_successfully"),"success")}catch{v.fire(t("errorr"),t("failed_to_delete_fleet_needed_documents"),"error")}},H=async r=>{v.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async c=>{if(c.isConfirmed)try{await x(r)}catch(b){console.error(t("error_deleting_data"),b),v.fire(t("error"),t("failed_to_delete_the_data"),"error")}})};ee(w,te.debounce(function(r){h(w.value)},300));const h=async(r=1)=>{try{const c=a.data();c.search=w.value,c.page=r;const b=await U.get("/fleet-needed-documents/list",{params:c});f.value=b.data.results,P.value=b.data.paginator,l(P.value.total),y.value=!1}catch(c){console.error(t("error_fetching_fleet_needed_documents"),c)}},N=async r=>{h(r)},S=async r=>{le.get(`/fleet-needed-documents/edit/${r.id}`)},l=()=>{g.value=[10,25,50,100,200,500]};return{results:f,modalShow:M,deleteItemId:m,successMessage:$,alertMessage:C,filterData:L,deleteModal:H,closeModal:A,deleteData:x,dismissMessage:O,searchTerm:w,paginator:P,toggleActiveStatus:T,modalFilter:y,clearFilter:F,fetchDatas:h,filter:a,handlePageChanged:N,editData:S,paginatorOption:g,changeEntriesPerPage:()=>{h()}}},computed:{...ue,...se(["permissions"])},mounted(){this.fetchDatas()}},pe={class:"d-flex align-items-center mt-3"},_e={class:"me-2 text-muted"},ge=["value"],be={class:"ms-2 text-muted"},he={class:"d-flex align-items-center gap-2"},ve={class:"table-responsive"},ke={class:"table align-middle position-relative table-nowrap"},ye={class:"table-active"},Ce={scope:"col"},Be={scope:"col"},we={scope:"col"},Me={scope:"col"},Pe={scope:"col"},$e={key:0},xe={key:0},Se=["onClick","id","checked"],Ve={key:1},Re={colspan:"7",class:"text-center"},De={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Oe={class:"alert-content"},Le={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Fe={class:"alert-content"},Te={class:"offcanvas-body"},Ae={class:"mb-4"},He={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ne={value:"All Tasks"},Ue={value:"Completed"},Ee={value:"Inprogress"},ze={value:"Pending"},Ie={value:"Pending"},Ge={class:"mb-4"},Ke={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},We={class:"form-check form-check-inline"},Ye={class:"form-check-label",for:"inlineRadio1"},je={class:"form-check form-check-inline"},qe={class:"form-check-label",for:"inlineRadio1"},Je={class:"form-check form-check-inline"},Qe={class:"form-check-label",for:"inlineRadio1"},Ze={class:"mb-4"},Xe={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},et={class:"mb-4"},tt={for:"country-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},st={class:"mb-4"},ot={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},lt={class:"form-check"},at={class:"form-check-label",for:"inlineCheckbox1"},nt={class:"form-check"},it={class:"form-check-label",for:"inlineCheckbox2"},rt={class:"form-check"},dt={class:"form-check-label",for:"inlineCheckbox3"},ct={class:"form-check"},ut={class:"form-check-label",for:"inlineCheckbox4"},mt={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function ft(s,t,w,a,f,P){const M=d("Head"),y=d("PageHeader"),m=d("BCol"),g=d("BButton"),$=d("Link"),C=d("BRow"),O=d("BCardHeader"),L=d("BCardBody"),F=d("BCard"),T=d("flat-pickr"),A=d("Multiselect"),x=d("BFrom"),H=d("BOffcanvas"),h=d("Pagination"),N=d("Layout"),S=oe("b-tooltip");return u(),R(N,null,{default:i(()=>[n(M,{title:"Fleet Needed Documents"}),n(y,{title:s.$t("fleet_needed_documents"),pageTitle:s.$t("fleet_needed_documents")},null,8,["title","pageTitle"]),n(C,null,{default:i(()=>[n(m,{lg:"12"},{default:i(()=>[n(F,{"no-body":"",id:"tasksList"},{default:i(()=>[n(O,{class:"border-0"},{default:i(()=>[n(C,{class:"g-2"},{default:i(()=>[n(m,{md:"3"},{default:i(()=>[e("div",pe,[e("label",_e,o(s.$t("show")),1),D(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.filter.limit=l),onChange:t[1]||(t[1]=(...l)=>a.changeEntriesPerPage&&a.changeEntriesPerPage(...l)),class:"form-select form-select-sm w-auto"},[(u(!0),_(K,null,G(a.paginatorOption,l=>(u(),_("option",{key:l,value:l},o(l),9,ge))),128))],544),[[I,a.filter.limit]]),e("label",be,o(s.$t("entries")),1)])]),_:1}),n(m,{md:"3"}),n(m,{md:"auto",class:"ms-auto"},{default:i(()=>[e("div",he,[s.permissions.includes("add-fleet-driver-document")?(u(),R($,{key:0,href:"/fleet-needed-documents/create"},{default:i(()=>[n(g,{variant:"primary",class:"float-end"},{default:i(()=>[t[8]||(t[8]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),k(" "+o(s.$t("add_fleet_needed_documents")),1)]),_:1,__:[8]})]),_:1})):B("",!0)])]),_:1})]),_:1})]),_:1}),n(L,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[e("div",ve,[e("table",ke,[e("thead",ye,[e("tr",null,[e("th",Ce,o(s.$t("name")),1),e("th",Be,o(s.$t("document_type")),1),e("th",we,o(s.$t("has_expiry_date")),1),e("th",Me,o(s.$t("status")),1),e("th",Pe,o(s.$t("action")),1)])]),a.results.length>0?(u(),_("tbody",$e,[(u(!0),_(K,null,G(a.results,(l,z)=>(u(),_("tr",{key:z},[e("td",null,o(l.name),1),e("td",null,o(l.doc_type),1),e("td",null,o(l.has_expiry_date?"Yes":"No"),1),s.permissions.includes("toggle-fleet-driver-document")?(u(),_("td",xe,[e("div",{class:ae({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":l.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:E(r=>a.toggleActiveStatus(l.id,!l.active),["prevent"]),id:"status_"+l.id,checked:l.active},null,8,Se)],2)])):B("",!0),e("td",null,[s.permissions.includes("edit-fleet-driver-document")?D((u(),R(g,{key:0,onClick:E(r=>a.editData(l),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:s.$t("edit")},{default:i(()=>t[9]||(t[9]=[e("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[9]},1032,["onClick","title"])),[[S,void 0,void 0,{hover:!0}]]):B("",!0),s.permissions.includes("delete-fleet-driver-document")?D((u(),R(g,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:E(r=>a.deleteModal(l.id),["prevent"]),"data-bs-toggle":"tooltip",title:s.$t("delete")},{default:i(()=>t[10]||(t[10]=[e("i",{class:"bx bx-trash bx-xs"},null,-1)])),_:2,__:[10]},1032,["onClick","title"])),[[S,void 0,void 0,{hover:!0}]]):B("",!0)])]))),128))])):(u(),_("tbody",Ve,[e("tr",null,[e("td",Re,[t[11]||(t[11]=e("img",{src:me,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,o(s.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[a.successMessage?(u(),_("div",De,[e("div",Oe,[t[12]||(t[12]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[13]||(t[13]=k()),t[14]||(t[14]=e("strong",null,"Success",-1)),k(" - "+o(a.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...l)=>a.dismissMessage&&a.dismissMessage(...l)),"aria-label":"Close Success Message"})])])):B("",!0),a.alertMessage?(u(),_("div",Le,[e("div",Fe,[t[15]||(t[15]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[16]||(t[16]=k()),t[17]||(t[17]=e("strong",null,"Alert",-1)),k(" - "+o(a.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...l)=>a.dismissMessage&&a.dismissMessage(...l)),"aria-label":"Close Alert Message"})])])):B("",!0)]),n(H,{modelValue:f.rightOffcanvas,"onUpdate:modelValue":t[7]||(t[7]=l=>f.rightOffcanvas=l),placement:"end",title:s.$t("leads_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:i(()=>[n(x,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:i(()=>[e("div",Te,[e("div",Ae,[e("label",He,o(s.$t("process")),1),D(e("select",{class:"form-control","data-choices":"","data-choices-search-false":"",name:"choices-select-status",id:"choices-select-status","onUpdate:modelValue":t[4]||(t[4]=l=>s.status=l)},[e("option",Ne,o(s.$t("all")),1),e("option",Ue,o(s.$t("completed")),1),e("option",Ee,o(s.$t("inprogress")),1),e("option",ze,o(s.$t("pending")),1),e("option",Ie,o(s.$t("cancelled")),1)],512),[[I,s.status]])]),e("div",Ge,[e("label",Ke,o(s.$t("payment")),1),e("div",null,[e("div",We,[t[18]||(t[18]=e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio1",value:"option1"},null,-1)),e("label",Ye,o(s.$t("online")),1)]),e("div",je,[t[19]||(t[19]=e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio2",value:"option2"},null,-1)),e("label",qe,o(s.$t("card")),1)]),e("div",Je,[t[20]||(t[20]=e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio3",value:"option3"},null,-1)),e("label",Qe,o(s.$t("cash")),1)])])]),e("div",Ze,[e("label",Xe,o(s.$t("date")),1),n(T,{placeholder:s.$t("select_date"),modelValue:s.date,"onUpdate:modelValue":t[5]||(t[5]=l=>s.date=l),config:s.rangeDateconfig,class:"form-control flatpickr-input",id:"demo-datepicker"},null,8,["placeholder","modelValue","config"])]),e("div",et,[e("label",tt,o(s.$t("country")),1),n(A,{class:"form-control",modelValue:s.value,"onUpdate:modelValue":t[6]||(t[6]=l=>s.value=l),"close-on-select":!0,searchable:!0,"create-option":!0,options:[{value:"",label:"Select country"},{value:"Argentina",label:"Argentina"},{value:"Belgium",label:"Belgium"},{value:"Brazil",label:"Brazil"},{value:"Colombia",label:"Colombia"},{value:"Denmark",label:"Denmark"},{value:"France",label:"France"},{value:"Germany",label:"Germany"},{value:"Mexico",label:"Mexico"},{value:"Russia",label:"Russia"},{value:"Spain",label:"Spain"},{value:"Syria",label:"Syria"},{value:"United Kingdom",label:"United Kingdom"}]},null,8,["modelValue"])]),e("div",st,[e("label",ot,o(s.$t("status")),1),n(C,{class:"g-2"},{default:i(()=>[n(m,{lg:"6"},{default:i(()=>[e("div",lt,[t[21]||(t[21]=e("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox1",value:"option1"},null,-1)),e("label",at,o(s.$t("active")),1)])]),_:1}),n(m,{lg:"6"},{default:i(()=>[e("div",nt,[t[22]||(t[22]=e("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox2",value:"option2"},null,-1)),e("label",it,o(s.$t("inactive")),1)])]),_:1}),n(m,{lg:"6"},{default:i(()=>[e("div",rt,[t[23]||(t[23]=e("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox3",value:"option3"},null,-1)),e("label",dt,o(s.$t("cash")),1)])]),_:1}),n(m,{lg:"6"},{default:i(()=>[e("div",ct,[t[24]||(t[24]=e("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox4",value:"option4"},null,-1)),e("label",ut,o(s.$t("card")),1)])]),_:1})]),_:1})]),t[25]||(t[25]=e("div",null,null,-1))]),e("div",mt,[n(g,{variant:"light",class:"w-100"},{default:i(()=>[k(o(s.$t("clear_filter")),1)]),_:1}),n(g,{type:"submit",variant:"success",class:"w-100"},{default:i(()=>[k(o(s.$t("apply")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue","title"]),n(h,{paginator:a.paginator,onPageChanged:a.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Bt=Y(fe,[["render",ft]]);export{Bt as default};
