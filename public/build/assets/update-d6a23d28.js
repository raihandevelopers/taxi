import{_ as Z,Z as W,O as X,r as f,T as z,Q as $,a2 as ee,a as U,g as m,o as i,x as oe,w as g,U as P,k as u,l as o,J as n,i as c,L as H,F as N,y as b,B as M,q as T,M as K,p as Y,n as se,K as j}from"./vendor-ddfbd976.js";import{L as te}from"./main-306a5ea6.js";import{P as le}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import"./footer-e648049d.js";import"./app-042fb454.js";const ae={components:{Layout:te,PageHeader:le,Head:W,Pagination:re,Multiselect:X},props:{successMessage:String,alertMessage:String},setup(r){const e=f(""),p=f(null),s=z({name:"",description:""}),x=z({all:"",locked:""}),_=f([]),R=f({}),w=f(!1),y=f(!1),k=f(!1),L=f(null),B=f(r.successMessage||""),E=f(r.alertMessage||""),A=()=>{B.value="",E.value=""},S=()=>{s.reset(),p.value=null,y.value=!0},F=()=>{k.value=!0},D=a=>{p.value=a,s.name=a.name,s.description=a.description,s.clearErrors(),y.value=!0},t=()=>{s.reset(),y.value=!1,p.value=null},v=()=>{x.reset(),V(),k.value=!1},q=()=>{const{name:a,description:l}=s,d={},C={name:{test:()=>!a,message:"Role name is required"},description:{test:()=>!l,message:"Role description is required"}};return Object.keys(C).forEach(h=>{C[h].test()&&(d[h]=C[h].message)}),d},O=async()=>{const a=q();if(Object.keys(a).length===0)try{let l;if(p.value?l=await U.put(`/roles/update/${p.value.id}`,s.data()):l=await U.post("/roles",s.data()),l.status===200||l.status===201){B.value=l.data.successMessage;const d=l.data.roles;if(p.value){const C=_.value.findIndex(h=>h.id===p.value.id);C!==-1&&(_.value[C]=d)}else _.value.push(d);y.value=!1,s.reset()}else console.error("Unexpected response status:",l.status)}catch(l){if(console.error("Error handling form submission:",l),l.response&&l.response.status===422){const d=l.response.data.errors;s.errors=d}else console.error("An unexpected error occurred:",l)}else s.errors=a},G=a=>{s.errors[a]=""},J=()=>{w.value=!1},I=async a=>{try{await U.delete(`/roles/delete/${a}`);const l=_.value.findIndex(d=>d.id===a);l!==-1&&_.value.splice(l,1),w.value=!1,P.fire("Success","Role deleted successfully","success")}catch(l){console.error("Error deleting role:",l),P.fire("Error","Failed to delete role","error")}},Q=async a=>{P.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await I(a)}catch(d){console.error("Error deleting role:",d),P.fire("Error","Failed to delete the role","error")}})};$(e,ee.debounce(function(a){V(e.value)},300));const V=async(a=1)=>{try{const l=x.data();l.search=e.value,l.page=a;const d=await U.get("/roles1/list",{params:l});_.value=d.data.roles,R.value=d.data.paginator,k.value=!1}catch(l){console.error("Error fetching roles:",l)}};return{form:s,roles:_,modalShow:w,modalForm:y,deleteItemId:L,selectedRole:p,successMessage:B,alertMessage:E,createRole:S,filterRole:F,editRole:D,cancelEdit:t,handleSubmit:O,deleteModal:Q,closeModal:J,deleteRole:I,dismissMessage:A,hideError:G,searchTerm:e,paginator:R,modalFilter:k,clearFilter:v,fetchRoles:V,filter:x,handlePageChanged:async a=>{V(a)}}},mounted(){this.fetchRoles()}},ne={action:"javascript:void(0);"},ie={class:"row"},de={class:"col-sm-6"},ce={class:"mb-3"},ue={for:"select_area",class:"form-label"},me={id:"select_area",class:"form-select"},fe={disabled:"",value:""},pe={class:"col-sm-6"},ve={class:"mb-3"},ge={for:"select_send_to",class:"form-label"},be={id:"select_send_to",class:"form-select"},_e={disabled:"",value:""},ye={value:"driver"},ke={value:"user"},Ce={class:"col-sm-6"},Me={class:"mb-3"},we={for:"push_title",class:"form-label"},Be=["placeholder"],he={class:"col-12"},xe={class:"mb-3"},Re={for:"message",class:"form-label"},Ee=["placeholder"],Se={class:"col-12"},Fe={class:"mb-3"},Ve={for:"select_timezone",class:"form-label d-flex"},Ue={key:0,class:"text-danger"},Pe={class:"col-lg-12"},He={class:"text-end"},Ne={type:"submit",class:"btn btn-primary"},Te={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Le={class:"alert-content"},Ae={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},De={class:"alert-content"},Ie={class:"form-group mt-3"},ze={key:0,class:"text-danger"},Ke={class:"form-group mt-3"},Ye={key:0,class:"text-danger"},je={type:"submit",class:"btn btn-success m-2 float-end"},qe={class:"input-group"};function Oe(r,e,p,s,x,_){const R=m("Head"),w=m("PageHeader"),y=m("BCardHeader"),k=m("imageUpload"),L=m("BCardBody"),B=m("BCard"),E=m("BCol"),A=m("BRow"),S=m("BModal"),F=m("BButton"),D=m("Layout");return i(),oe(D,null,{default:g(()=>[u(R,{title:"Push Notification"}),u(w,{title:r.$t("update"),pageTitle:r.$t("push_notification")},null,8,["title","pageTitle"]),u(A,null,{default:g(()=>[u(E,{lg:"12"},{default:g(()=>[u(B,{"no-body":"",id:"tasksList"},{default:g(()=>[u(y,{class:"border-0"}),u(L,{class:"border border-dashed border-end-0 border-start-0"},{default:g(()=>[o("form",ne,[o("div",ie,[o("div",de,[o("div",ce,[o("label",ue,n(r.$t("service_location")),1),o("select",me,[o("option",fe,n(r.$t("select_service_location")),1),e[13]||(e[13]=o("option",{value:"chitwan"},"Chitwan",-1)),e[14]||(e[14]=o("option",{value:"katari"},"Katari",-1)),e[15]||(e[15]=o("option",{value:"trigger"},"trigger",-1)),e[16]||(e[16]=o("option",{value:"india"},"India",-1)),e[17]||(e[17]=o("option",{value:"nepal_delivery"},"Nepal Delivery",-1)),e[18]||(e[18]=o("option",{value:"new_york"},"New York",-1)),e[19]||(e[19]=o("option",{value:"nawalparasi"},"Nawalparasi",-1)),e[20]||(e[20]=o("option",{value:"trigger_2"},"TRIGGER 2",-1)),e[21]||(e[21]=o("option",{value:"kathmandu"},"Kathmandu",-1)),e[22]||(e[22]=o("option",{value:"uk_test"},"UK test",-1)),e[23]||(e[23]=o("option",{value:"pokhara"},"Pokhara",-1))]),(i(!0),c(N,null,H(r.errors.country,(t,v)=>(i(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),o("div",pe,[o("div",ve,[o("label",ge,n(r.$t("send_to")),1),o("select",be,[o("option",_e,n(r.$t("select")),1),o("option",ye,n(r.$t("driver")),1),o("option",ke,n(r.$t("user")),1)]),(i(!0),c(N,null,H(r.errors.country,(t,v)=>(i(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),o("div",Ce,[o("div",Me,[o("label",we,n(r.$t("push_title")),1),o("input",{type:"text",class:"form-control",placeholder:r.$t("enter_psuh_title"),id:"push_title"},null,8,Be),(i(!0),c(N,null,H(r.errors.name,(t,v)=>(i(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),o("div",he,[o("div",xe,[o("label",Re,n(r.$t("message")),1),o("textarea",{type:"text",class:"form-control",placeholder:r.$t("enter_message"),id:"message"},null,8,Ee),(i(!0),c(N,null,H(r.errors.name,(t,v)=>(i(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),o("div",Se,[o("div",Fe,[o("label",Ve,[b(n(r.$t("notification_banner")),1),e[24]||(e[24]=o("span",null,[o("h5",{class:"text-muted mt-1 mb-0 fs-13"},"(320px x 320px)")],-1))]),u(k),s.form.errors.timezone?(i(),c("span",Ue,n(s.form.errors.timezone),1)):M("",!0)])]),o("div",Pe,[o("div",He,[o("button",Ne,n(r.$t("update")),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),o("div",null,[s.successMessage?(i(),c("div",Te,[o("div",Le,[e[25]||(e[25]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[26]||(e[26]=b()),e[27]||(e[27]=o("strong",null,"Success",-1)),b(" - "+n(s.successMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-success",onClick:e[0]||(e[0]=(...t)=>s.dismissMessage&&s.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):M("",!0),s.alertMessage?(i(),c("div",Ae,[o("div",De,[e[28]||(e[28]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[29]||(e[29]=b()),e[30]||(e[30]=o("strong",null,"Alert",-1)),b(" - "+n(s.alertMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[1]||(e[1]=(...t)=>s.dismissMessage&&s.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):M("",!0)]),u(S,{modelValue:s.modalForm,"onUpdate:modelValue":e[9]||(e[9]=t=>s.modalForm=t),"hide-footer":"",title:s.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:g(()=>[o("form",{onSubmit:e[7]||(e[7]=se((...t)=>s.handleSubmit&&s.handleSubmit(...t),["prevent"])),onKeydown:e[8]||(e[8]=(...t)=>s.hideError&&s.hideError(...t))},[o("div",Ie,[e[31]||(e[31]=o("label",{for:"name",class:"form-label"},[b("Role Name"),o("span",{class:"text-danger"},"*")],-1)),T(o("input",{type:"text",id:"name","onUpdate:modelValue":e[2]||(e[2]=t=>s.form.name=t),class:Y(["form-control",{"is-invalid":s.form.errors.name}]),onFocus:e[3]||(e[3]=t=>s.hideError("name"))},null,34),[[K,s.form.name]]),s.form.errors.name?(i(),c("div",ze,n(s.form.errors.name),1)):M("",!0)]),o("div",Ke,[e[32]||(e[32]=o("label",{for:"description",class:"form-label"},[b("description"),o("span",{class:"text-danger"},"*")],-1)),T(o("input",{type:"text",id:"description","onUpdate:modelValue":e[4]||(e[4]=t=>s.form.description=t),class:Y(["form-control",{"is-invalid":s.form.errors.description}]),onFocus:e[5]||(e[5]=t=>s.hideError("description"))},null,34),[[K,s.form.description]]),s.form.errors.description?(i(),c("div",Ye,n(s.form.errors.description),1)):M("",!0)]),o("button",je,n(s.selectedRole?"Update":"Save"),1),s.selectedRole?(i(),c("button",{key:0,type:"button",onClick:e[6]||(e[6]=(...t)=>s.cancelEdit&&s.cancelEdit(...t)),class:"btn btn-secondary m-2 float-end"},"Cancel")):M("",!0)],32)]),_:1},8,["modelValue","title"]),u(S,{modelValue:s.modalFilter,"onUpdate:modelValue":e[12]||(e[12]=t=>s.modalFilter=t),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:g(()=>[o("form",null,[o("div",qe,[T(o("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[10]||(e[10]=t=>s.filter.all=t)},e[33]||(e[33]=[o("option",{selected:""},"Select Status",-1),o("option",{value:"1"},"Yes",-1),o("option",{value:"0"},"No",-1)]),512),[[j,s.filter.all]]),T(o("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[11]||(e[11]=t=>s.filter.locked=t)},e[34]||(e[34]=[o("option",{selected:""},"Select Status",-1),o("option",{value:"0"},"Inactive",-1),o("option",{value:"1"},"Active",-1)]),512),[[j,s.filter.locked]])]),u(F,{variant:"primary",class:"float-end",onClick:s.fetchRoles},{default:g(()=>e[35]||(e[35]=[b(" Apply")])),_:1,__:[35]},8,["onClick"]),u(F,{variant:"outline-primary",class:"float-end mx-2",onClick:s.clearFilter},{default:g(()=>e[36]||(e[36]=[b("Clear")])),_:1,__:[36]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const eo=Z(ae,[["render",Oe]]);export{eo as default};
