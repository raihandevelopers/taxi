import{_ as z,am as I,Z as L,O,an as j,C as D,r as x,T as E,D as U,g as _,o as r,x as S,w as d,a as H,N as P,k as c,l as t,i as u,L as M,p as N,J as h,F,y as q,q as A,M as J,B as K,n as Z}from"./vendor-ddfbd976.js";import{L as G}from"./main-306a5ea6.js";import{P as Q}from"./page-header-2dc95532.js";import{P as W}from"./Pagination-f095ae3c.js";import{u as X}from"./footer-e648049d.js";import{I as Y}from"./ImageUpload-6f09ff26.js";import{F as $}from"./FormValidation-a9047131.js";import"./app-042fb454.js";const tt={data(){return{editor:I,editorData:"",parsedFooter:[]}},components:{Layout:G,PageHeader:Q,Head:L,Pagination:W,Multiselect:O,FormValidation:$,ImageUpload:Y,ckeditor:j.component},props:{successMessage:String,alertMessage:String,notification:{type:Object,required:!0},validate:Function,languages:Array,app_for:String},setup(e){const{t:a}=D(),{languages:y,fetchData:o}=X(),k=x("English"),m=E({push_title:Object.keys(e.notification.languageFields).reduce((n,l)=>{var s;return n[l]=((s=e.notification.languageFields[l])==null?void 0:s.push_title)||"",n},{}),push_body:Object.keys(e.notification.languageFields).reduce((n,l)=>{var s;return n[l]=((s=e.notification.languageFields[l])==null?void 0:s.push_body)||"",n},{})}),B={},p=()=>{const n=document.getElementById("iconInput");if(n.files.length>0){const l=n.files[0],s=new Image;s.onload=function(){(s.width!==512||s.height!==512)&&(alert("Icon must be 512x512 pixels."),n.value="")},s.src=URL.createObjectURL(l)}},g=x(null),w=x({}),v=x(e.successMessage||""),b=x(e.alertMessage||""),C=()=>{v.value="",b.value=""},R=n=>{k.value=n},i=async()=>{if(e.app_for=="demo"){Swal.fire(a("error"),a("you_are_not_authorised"),"error");return}try{const n=new FormData;let l;Object.keys(m.push_title).forEach(s=>{n.append(`push_title[${s}]`,m.push_title[s])}),Object.keys(m.push_body).forEach(s=>{n.append(`push_body[${s}]`,m.push_body[s])}),console.log("formdata",m.data()),e.notification&&e.notification.id&&(l=await H.post(`/notification-channel/update-push-template/${e.notification.id}`,n,{headers:{"Content-Type":"multipart/form-data"}})),l.status===201?(v.value=a("mail_template_created_successfully"),m.reset(),P.get("/notification-channel")):b.value=a("failed_to_create_mail_template")}catch(n){console.error(a("error_creating_mail_template"),n),b.value=a("failed_to_create_mail_template_catch"),n.response&&n.response.data.errors&&(w.value=n.response.data.errors)}},f=e.vehicleType?e.vehicleType.icon:null,T=(n,l)=>{m[l]=n},V=n=>{m[n]=null};return U(async()=>{Object.keys(y).length==0&&await o()}),{form:m,successMessage:v,alertMessage:b,handleSubmit:i,dismissMessage:C,validationRules:B,validationRef:g,errors:w,validateIconSize:p,notification:e.notification,iconUrl:f,handleImageSelected:T,handleImageRemoved:V,languages:y,setActiveTab:R,activeTab:k}},methods:{stripHtmlTags(e){return new DOMParser().parseFromString(e,"text/html").body.textContent||""}}},et={class:"nav nav-tabs nav-tabs-custom nav-success nav-justified",role:"tablist"},ot={class:"nav-item",role:"presentation"},nt=["onClick"],it=["id"],at={class:"col-sm-6 mt-3"},st={class:"mb-3"},lt=["for"],rt=["placeholder","id","onUpdate:modelValue","required"],dt={class:"mb-3"},ct={class:"text-end mb-3"},mt=["disabled"],ut={class:"col-12"},ft={class:"body-wrap"},_t={class:"container",width:"600"},pt={class:"content"},bt={class:"main",width:"100%",cellpadding:"0",cellspacing:"0",itemprop:"action",itemscope:"",itemtype:"http://schema.org/ConfirmAction",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"14px","border-radius":"3px",margin:"0",border:"none"}},ht={class:"content-wrap"},yt={width:"100%",cellpadding:"0",cellspacing:"0",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"14px",margin:"0"}},gt={key:0},vt={class:"content-block",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"20px","line-height":"1.5","font-weight":"500","vertical-align":"top",margin:"0",padding:"0 0 10px"},valign:"top"},xt={key:1},kt={key:2},wt=["innerHTML"],Ct={key:3};function Bt(e,a,y,o,k,m){const B=_("PageHeader"),p=_("BCol"),g=_("BRow"),w=_("ckeditor"),v=_("FormValidation"),b=_("BCardBody"),C=_("BCard"),R=_("Layout");return r(),S(R,null,{default:d(()=>[c(B,{title:o.notification?e.$t("edit"):e.$t("create"),pageTitle:e.$t("template"),pageLink:"/notification-channel"},null,8,["title","pageTitle"]),c(g,null,{default:d(()=>[c(p,{lg:"6"},{default:d(()=>[c(C,{"no-body":""},{default:d(()=>[c(b,null,{default:d(()=>[t("form",{onSubmit:a[0]||(a[0]=Z((...i)=>o.handleSubmit&&o.handleSubmit(...i),["prevent"]))},[c(v,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:d(()=>[c(g,null,{default:d(()=>[c(p,{lg:"12"},{default:d(()=>[t("div",null,[t("ul",et,[(r(!0),u(F,null,M(o.languages,i=>(r(),S(g,{key:i.code},{default:d(()=>[c(p,{lg:"12"},{default:d(()=>[t("li",ot,[t("a",{class:N(["nav-link",{active:o.activeTab===i.label}]),onClick:f=>o.setActiveTab(i.label),role:"tab","aria-selected":"true"},h(i.label),11,nt)])]),_:2},1024)]),_:2},1024))),128))]),(r(!0),u(F,null,M(o.languages,i=>(r(),u("div",{class:"tab-content text-muted",key:i.code},[o.activeTab===i.label?(r(),u("div",{key:0,class:"tab-pane active show",id:`${i.label}`,role:"tabpanel"},[t("div",at,[t("div",st,[t("label",{for:`name-${i.code}`,class:"form-label"},[q(h(e.$t("push_title"))+" ",1),a[1]||(a[1]=t("span",{class:"text-danger"},"*",-1))],8,lt),A(t("input",{type:"text",class:"form-control",placeholder:e.$t("enter_push_title",{language:i.label}),id:`enter_push_title-${i.code}`,"onUpdate:modelValue":f=>o.form.push_title[i.code]=f,required:i.code==="en"},null,8,rt),[[J,o.form.push_title[i.code]]])])]),t("div",dt,[t("label",null,h(e.$t("push_body")),1),c(w,{modelValue:o.form.push_body[i.code],"onUpdate:modelValue":f=>o.form.push_body[i.code]=f,id:`name-${i.code}`,editor:k.editor},null,8,["modelValue","onUpdate:modelValue","id","editor"]),(r(!0),u(F,null,M(o.errors.push_body,(f,T)=>(r(),u("span",{key:T,class:"text-danger"},h(f),1))),128))]),t("div",ct,[t("button",{type:"submit",class:"btn btn-primary",disabled:y.app_for==="demo"},h(o.notification?e.$t("update"):e.$t("save")),9,mt)])],8,it)):K("",!0)]))),128))])]),_:1})]),_:1})]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1}),c(p,{lg:"6"},{default:d(()=>[c(C,null,{default:d(()=>[t("div",ut,[t("table",ft,[t("tbody",null,[t("tr",null,[a[5]||(a[5]=t("td",null,null,-1)),t("td",_t,[t("div",pt,[t("table",bt,[t("tbody",null,[t("tr",null,[t("td",ht,[a[4]||(a[4]=t("meta",{itemprop:"name",content:"Confirm Email",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"14px",margin:"0"}},null,-1)),t("table",yt,[t("tbody",null,[o.notification&&o.notification.push_title?(r(),u("tr",gt,[t("td",vt,h(o.notification.push_title),1)])):(r(),u("tr",xt,a[2]||(a[2]=[t("td",{class:"content-block",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"20px","line-height":"1.5","font-weight":"500","vertical-align":"top",margin:"0",padding:"0 0 10px"},valign:"top"}," Register successfully ",-1)]))),o.notification&&o.notification.push_body?(r(),u("tr",kt,[t("div",{innerHTML:o.notification.push_body},null,8,wt)])):(r(),u("tr",Ct,a[3]||(a[3]=[t("p",null,"Register successfully",-1)])))])])])])])])])])])])])])]),_:1})]),_:1})]),_:1})]),_:1})}const Lt=z(tt,[["render",Bt]]);export{Lt as default};
