import{_ as A,Z as B,z as L,C as x,r as _,R as S,g as f,S as F,o as n,x as y,w as k,a as w,N as g,k as D,l as e,J as l,i,B as r,L as P,p as H,q as $,F as I,y as N}from"./vendor-ddfbd976.js";import{L as z}from"./main-306a5ea6.js";import{P as V}from"./page-header-2dc95532.js";import{P as T}from"./Pagination-f095ae3c.js";import{l as j}from"./footer-e648049d.js";import"./app-042fb454.js";const q={components:{Layout:z,PageHeader:V,Head:B,Pagination:T,Link:L},props:{successMessage:String,alertMessage:String,fleetId:Number,documents:Array},setup(o){const{t:s}=x(),c=_(o.successMessage||""),a=_(o.alertMessage||""),b=_(!1),v=_(null),u=_(null);return{successMessage:c,alertMessage:a,dismissMessage:()=>{c.value="",a.value=""},approveDocument:async d=>{try{(await w.get(`/manage-fleet/document-toggle/${d}/${o.fleetId}/1`)).data.allDocumentsApproved==!0?(c.value=s("document_approved"),g.get("/manage-fleet")):g.get(`/manage-fleet/document/${o.fleetId}`)}catch(m){console.error("Error approving document:",m)}},declineDocument:async d=>{try{(await w.get(`/manage-fleet/document-toggle/${d}/${o.fleetId}/5`)).data.allDocumentsDisapproved==!0?(a.value=s("document_declined"),g.get("/manage-fleet")):g.get(`/manage-fleet/document/${o.fleetId}`)}catch(m){console.error("Error declining document:",m)}},updateDocuments:async()=>{try{await w.get(`/manage-fleet/update-document/${o.fleetId}`),g.get("/manage-fleet")}catch(d){console.error("Error updating documents:",d)}},viewDocument:d=>{v.value=d.image||null,u.value=d.back_image||null,b.value=!0},closeModal:()=>{b.value=!1,v.value=null,u.value=null},showModal:b,imageUrl:v,backImageUrl:u}},computed:{...j,...S(["permissions"])}},G={class:"row"},J={class:"col-lg-12"},R={class:"card",id:"tasksList"},W={class:"card-body border border-dashed border-end-0 border-start-0"},Z={class:"table-responsive"},K={class:"table align-middle position-relative table-nowrap"},O={class:"table-active"},Q={scope:"col"},X={scope:"col"},Y={scope:"col"},ee={scope:"col"},te={scope:"col"},se={scope:"col"},oe={key:0,scope:"col"},ae={key:0},le=["onClick"],ne=["onClick"],ie=["onClick"],de=["onClick"],re={key:0,class:"modal fade show",tabindex:"-1",role:"dialog",style:{display:"block"}},ce={class:"modal-dialog",role:"document"},ue={class:"modal-content"},me={class:"modal-header d-flex align-items-center justify-content-between"},_e={class:"modal-title"},ge={class:"modal-body"},be={id:"carouselExampleFade",class:"carousel slide carousel-fade py-5","data-ride":"carousel"},ve={class:"carousel-inner"},fe={class:"carousel-item active"},pe={key:0},he=["src","alt"],ye={class:"text-center"},ke={key:1,class:"d-grid"},we={class:"text-center m-auto"},Me={class:"carousel-item"},Ce={key:0},De=["src","alt"],$e={class:"text-center"},Ie={key:1,class:"d-grid"},Ne={class:"text-center m-auto"},Ue={class:"modal-footer"},Ee=["href"],Ae=["href"],Be={key:1,class:"custom-alert alert alert-success alert-border-left fade show"},Le={class:"alert-content"},xe={key:2,class:"custom-alert alert alert-danger alert-border-left fade show"},Se={class:"alert-content"};function Fe(o,s,c,a,b,v){const u=f("Head"),M=f("PageHeader"),p=f("BButton"),C=f("Layout"),h=F("b-tooltip");return n(),y(C,null,{default:k(()=>[D(u,{title:"Documents"}),D(M,{title:o.$t("documents"),pageTitle:o.$t("documents"),pageLink:"/manage-fleet"},null,8,["title","pageTitle"]),e("div",G,[e("div",J,[e("div",R,[s[6]||(s[6]=e("div",{class:"card-header border-0"},null,-1)),e("div",W,[e("div",Z,[e("table",K,[e("thead",O,[e("tr",null,[e("th",Q,l(o.$t("document_name")),1),e("th",X,l(o.$t("identify_number")),1),e("th",Y,l(o.$t("expiry_date")),1),e("th",ee,l(o.$t("status")),1),e("th",te,l(o.$t("comment")),1),e("th",se,l(o.$t("document")),1),o.permissions.includes("drivers-management")?(n(),i("th",oe,l(o.$t("action")),1)):r("",!0)])]),e("tbody",null,[(n(!0),i(I,null,P(c.documents,(t,U)=>(n(),i("tr",{key:t.id},[e("td",null,l(t.name),1),e("td",null,l(t.identify_number||"N/A"),1),e("td",null,l(t.expiry_date||"N/A"),1),e("td",null,[e("span",{class:H({badge:!0,"bg-success":t.document_status===1,"bg-secondary":t.document_status===2||t.document_status==null,"bg-warning":t.document_status===3||t.document_status===4,"bg-danger":t.document_status===5,"bg-dark":t.document_status===6})},l(t.document_status===1?"Approved":t.document_status===2||t.document_status==null?"Not Uploaded":t.document_status===3||t.document_status===4?"Waiting for Approval":t.document_status===5?"Declined":t.document_status===6?"Expired":"Unknown"),3)]),e("td",null,l(t.comment||"N/A"),1),e("td",null,[$((n(),y(p,{class:"btn btn-soft-info btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"view",onClick:d=>a.viewDocument(t)},{default:k(()=>s[4]||(s[4]=[e("i",{class:"bx bx-show-alt align-center"},null,-1)])),_:2,__:[4]},1032,["onClick"])),[[h,void 0,void 0,{hover:!0}]]),$((n(),y(p,{class:"btn btn-soft-success btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"upload",href:`/manage-fleet/document-upload/${t.id}/${c.fleetId}`},{default:k(()=>s[5]||(s[5]=[e("i",{class:"bx bx-upload align-center"},null,-1)])),_:2,__:[5]},1032,["href"])),[[h,void 0,void 0,{hover:!0}]])]),o.permissions.includes("drivers-management")?(n(),i("td",ae,[t.document_status===1?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:d=>a.declineDocument(t.id)},l(o.$t("decline")),9,le)):r("",!0),t.document_status===5?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:d=>a.approveDocument(t.id)},l(o.$t("approve")),9,ne)):r("",!0),t.document_status===2||t.document_status==null?r("",!0):(n(),i(I,{key:2},[t.document_status===3||t.document_status===4||t.document_status===6?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:d=>a.approveDocument(t.id)},l(o.$t("approve")),9,ie)):r("",!0),t.document_status===3||t.document_status===4||t.document_status===6?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:d=>a.declineDocument(t.id)},l(o.$t("decline")),9,de)):r("",!0)],64))])):r("",!0)]))),128))])])])])])])]),a.showModal?(n(),i("div",re,[e("div",ce,[e("div",ue,[e("div",me,[e("h5",_e,l(o.$t("view_document")),1),e("a",{href:"#",class:"close fs-18",onClick:s[0]||(s[0]=(...t)=>a.closeModal&&a.closeModal(...t)),"aria-label":"Close"},s[7]||(s[7]=[e("span",{class:"fs-22","aria-hidden":"true"},"Ã—",-1)]))]),e("div",ge,[e("div",be,[s[10]||(s[10]=e("div",{class:"carousel-indicators"},[e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":"Slide 1"}),e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"1","aria-label":"Slide 2"})],-1)),e("div",ve,[e("div",fe,[a.imageUrl?(n(),i("div",pe,[e("img",{src:a.imageUrl,alt:o.$t("front_side_document"),class:"img-fluid mb-2"},null,8,he),e("h5",ye,l(o.$t("front_side_document")),1)])):(n(),i("div",ke,[s[8]||(s[8]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",we,l(o.$t("no_front_image_available")),1)]))]),e("div",Me,[a.backImageUrl?(n(),i("div",Ce,[e("img",{src:a.backImageUrl,alt:o.$t("back_side_document"),class:"img-fluid mb-2"},null,8,De),e("h5",$e,l(o.$t("back_side_document")),1)])):(n(),i("div",Ie,[s[9]||(s[9]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Ne,l(o.$t("no_back_image_available")),1)]))])]),s[11]||(s[11]=e("a",{class:"carousel-control-prev bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"prev"},[e("span",{class:"carousel-control-prev-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Previous")],-1)),s[12]||(s[12]=e("a",{class:"carousel-control-next bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"next"},[e("span",{class:"carousel-control-next-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Next")],-1))])]),e("div",Ue,[e("button",{type:"button",class:"btn btn-danger",onClick:s[1]||(s[1]=(...t)=>a.closeModal&&a.closeModal(...t))},l(o.$t("close")),1),a.imageUrl?(n(),i("a",{key:0,href:a.imageUrl,download:"",class:"btn btn-primary"},l(o.$t("download_front_image")),9,Ee)):r("",!0),a.backImageUrl?(n(),i("a",{key:1,href:a.backImageUrl,download:"",class:"btn btn-primary"},l(o.$t("download_back_image")),9,Ae)):r("",!0)])])])])):r("",!0),a.successMessage?(n(),i("div",Be,[e("div",Le,[s[13]||(s[13]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[14]||(s[14]=e("strong",null,"Success",-1)),N(" - "+l(a.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[2]||(s[2]=(...t)=>a.dismissMessage&&a.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):r("",!0),a.alertMessage?(n(),i("div",xe,[e("div",Se,[s[15]||(s[15]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[16]||(s[16]=e("strong",null,"Alert",-1)),N(" - "+l(a.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[3]||(s[3]=(...t)=>a.dismissMessage&&a.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):r("",!0)]),_:1})}const qe=A(q,[["render",Fe],["__scopeId","data-v-68d34b6d"]]);export{qe as default};
