import{_ as He,Z as Ne,z as We,Y as Ze,P as Ge,R as Ye,U as V,C as Je,r as h,T as fe,Q as K,$ as Ke,X as L,D as ve,G as Qe,a0 as Xe,a as O,g as A,o as _,x as $e,w as P,k as C,l as t,y as de,J as u,q as U,K as ce,i as m,L as B,F as q,M as Q,B as w,H as et,W as tt,a8 as ot,n as at}from"./vendor-ddfbd976.js";import{L as st}from"./main-306a5ea6.js";import{P as lt}from"./page-header-2dc95532.js";import{F as rt}from"./FormValidation-a9047131.js";import{i as it}from"./app-042fb454.js";import{_ as nt}from"./UserWebMenu-2e0e812c.js";import"./footer-e648049d.js";const dt={data(){return{rightOffcanvas:!1,isPocSame:!1,form:{is_later:"",assign_method:1,name:"",mobile:"",drop_poc_name:"",drop_poc_mobile:""},dateTimeConfig:{enableTime:!0,dateFormat:"Y-m-d H:i:ss"}}},watch:{isPocSame(a){a?(this.form.drop_poc_name=this.form.name,this.form.drop_poc_mobile=this.form.mobile):(this.form.drop_poc_name="",this.form.drop_poc_mobile="")},"form.name"(a){this.isPocSame&&(this.form.drop_poc_name=a)},"form.mobile"(a){this.isPocSame&&(this.form.drop_poc_mobile=a)}},components:{Layout:st,PageHeader:lt,Head:Ne,Link:We,Scrollbar:Ze,FormValidation:rt,flatPickr:Ge,UserWebMenu:nt},computed:{...Ye(["permissions"]),transport_options(){let a=[];return this.form.ride_type==="regular"&&(a=this.transport_type_regular,this.form.transport_type=a[0]),a.length===1&&(this.form.transport_type=a[0]),a}},props:{countries:Array,default_flag:String,default_dial_code:String,default_lat:String,default_lng:String,successMessage:String,alertMessage:String,validate:Function,transport_type_for_ride:Array,ride_type_for_ride:Array,is_rental:Boolean,goodsTypes:Array,user:Object,firebaseSettings:Object,transport_type_regular:Array,enable_ride_without_destination:Boolean},methods:{timer(){let a;V.fire({title:"Booking alert!",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,onBeforeOpen:()=>{V.showLoading(),a=setInterval(()=>{V.getContent().querySelector("b").textContent=V.getTimerLeft()},100)},onClose:()=>{clearInterval(a)}}).then(i=>{i.dismiss===V.DismissReason.timer&&console.log("I was closed by the timer")})}},setup(a){const{t:i}=Je(),X=h({dial_code:a.default_dial_code||"",flag:a.default_flag||""}),s=h(!1),I=h(parseFloat(a.default_lat)),$=h(parseFloat(a.default_lng)),F=h(!1),l=fe({mobile:a.user.mobile,name:a.user.name,user_id:a.user.id,pick_address:"",drop_address:"",terminal:null,enterance:null,pick_lat:"",pick_lng:"",drop_lat:null,drop_lng:null,vehicle_type:null,payment_opt:1,goods_type_id:null,transport_type:"",pickup_poc_name:null,drop_poc_name:null,goods_type_quantity:null,is_later:0,assign_method:1,is_rental:0,rental_package_id:null,ride_type:"regular",stops:null,trip_start_time:null,country:a.default_dial_code,drop_poc_mobile:null}),H=h("-");h(!1),h(!1),K(s,e=>{e?(l.drop_poc_name=l.name,l.drop_poc_mobile=l.mobile):(l.drop_poc_name="",l.drop_poc_mobile="")}),K(()=>l.name,e=>{s.value&&(l.drop_poc_name=e)}),K(()=>l.mobile,e=>{s.value&&(l.drop_poc_mobile=e)}),K(()=>l.vehicle_type,e=>{re({lat:v.pick_lat,lng:v.pick_lng})});const S=h(null),M=h(null),D=h({}),N=h([]),W=h([]),T=h([]);let o=null;const p=h({}),z={pick_address:{required:!0},mobile:{required:!0},vehicle_type:{required:!0}},d=h({}),se=h(null),x=h([]);h([]);const ge=h([]),v=fe({pick_lat:"",pick_lng:"",drop_lat:"",drop_lng:"",distance:0,distance_in_unit:0,duration:0}),_e=h("0m");K(()=>v.duration,e=>{const r=Math.floor(e/60),c=e%60;_e.value=r>0?`${r}h ${c}m`:`${c}m`});const ee=async()=>{if(le()){if(l.is_rental)return F.value=!1,loadRentalPack(),!1;F.value=!0}else return F.value=!1,!1;ge.value=[];const{pick_lat:e,pick_lng:r,drop_lat:c,drop_lng:f,distance:n,duration:k}=v.data(),g={pick_lat:e,pick_lng:r,distance:n,duration:k};g.transport_type=l.transport_type,c&&(g.drop_lat=c),f&&(g.drop_lng=f),l.is_out_station&&(g.is_out_station=1,l.trip_start_time&&(g.trip_start_time=l.trip_start_time),l.return_time&&(g.return_time=l.return_time)),g.dispatch=1,b.length>0&&(g.stops=JSON.stringify(b));const y=await O.post("/dispatch/request/eta",g);x.value=y.data.data,x.value.length>0&&(x.value[0].unit_in_words=="MILES"?(v.distance_in_unit=v.distance*.621371,H.value=i("miles")):(v.distance_in_unit=v.distance,H.value=i("km"))),re(S.value)};console.log(ee);const he=h(!1),ue=h(a.successMessage||""),te=h(a.alertMessage||""),ye=()=>{ue.value="",te.value=""},b=Ke([]),be=5,ie=async()=>{var f;const e=[],r={latitude:v.pick_lat,longitude:v.pick_lng};if(e.push(r),Array.isArray(b)&&b.forEach(n=>{const k={latitude:n.latitude,longitude:n.longitude};e.push(k)}),v.drop_lat){const n={latitude:v.drop_lat,longitude:v.drop_lng};e.push(n)}const c={address:e,ride_type:l.ride_type};try{const n=await O.post("/dispatch/serviceVerify",c)}catch(n){if(n.response&&n.response.status===422)d.value=n.response.data.errors;else if(n.response&&n.response.status===500){if(n.response.data.message=="service not available with this location")d.value.pick_address=[i("service_unavailable")];else if(n.response.data.message=="Outstation service not available within this location")delete d.value.pick_address,d.value.drop_address=[i("outstation_service_unavailable")];else if(n.response.data.message=="Pick up and Drop should not be in the same zone")delete d.value.pick_address,d.value.drop_address=[i("same_zone_outstation_unavailable")];else{const k=n.response.data;delete d.value.pick_address,delete d.value.drop_address,e.forEach((g,y)=>{d.value.stop||(d.value.stop={}),y!==0&&(y!==e.length?k[y].available?d.value.stop[y]=[i("ride_service_unavailable")]:delete d.value.stop[y]:k[y].available?d.value.drop_address=[i("ride_service_unavailable")]:delete d.value.drop_address)})}(f=d.value)!=null&&f.stop&&Object.keys(d.value.stop).length==0&&delete d.value.stop}else console.error(i("error_creating_vehicle_price"),n),te.value=i("failed_to_make_booking_contact_admin")}},ke=e=>{e=="pickup"?l.pick_address.length<3?pickSuggestions.value=[]:setTimeout(()=>{fetchAutocompleteResults(l.pick_address,e)},300):e=="drop"&&(l.drop_address.length<3?T.value=[]:setTimeout(()=>{fetchAutocompleteResults(l.drop_address,e)},300))},le=async()=>{var e;return d.value=se.value.validate(),v.pick_lat&&await ie(),l.is_later&&(l.trip_start_time?delete d.value.trip_start_time:d.value.trip_start_time=[i("required")]),l.is_rental?(l.drop_lat="",l.drop_lng="",v.drop_lat="",v.drop_lng="",v.distance=0,v.duration=0,l.drop_address="",M.value=null,routePolyline.value="",p.value={},b.length>0&&(b.forEach((r,c)=>{delete D.value[c]}),b.length=0),l.rental_package_id?delete d.value.rental_package_id:d.value.rental_package_id=[i("required")]):(!a.enable_ride_without_destination||l.is_out_station)&&!l.drop_address&&l.drop_address.length==0?d.value.drop_address=[i("required")]:delete d.value.drop_address,l.is_out_station&&(l.trip_start_time?delete d.value.trip_start_time:d.value.trip_start_time=[i("required")]),l.is_out_station&&l.is_round_trip&&(l.return_time?delete d.value.return_time:d.value.return_time=[i("required")]),l.transport_type=="delivery"&&(l.goods_type_id?delete d.value.goods_type_id:d.value.goods_type_id=[i("required")],l.drop_poc_name?delete d.value.drop_poc_name:d.value.drop_poc_name=[i("required")],l.drop_poc_mobile?delete d.value.drop_poc_mobile:d.value.drop_poc_mobile=[i("required")]),b.length>0&&b.forEach((r,c)=>{d.value.stop||(d.value.stop={}),r.latitude?d.value.stop[c]&&delete d.value.stop[c]:d.value.stop[c]=[i("required")]}),(e=d.value)!=null&&e.stop&&Object.keys(d.value.stop).length==0&&delete d.value.stop,Se(d)},Se=e=>Object.keys(e.value).length>0?(ne.value=!1,!1):(ee(),delete e.value.stop,ne.value=!0,!0),ne=h(!1),we=()=>{b.length<be?b.push({address:"",latitude:null,longitude:null}):V.fire(i("maximum_stopovers_reached"),i("you_can_add_up_to_5_stopovers_only"),"warning")},Me=e=>{var r;(r=D.value)!=null&&r[e]&&D.value[e].remove(),b.splice(e,1),Z()},Z=()=>{if(!S.value||!M.value||!S.value.getLatLng()||!M.value.getLatLng())return;ee();const e=L.latLngBounds([S.value.getLatLng(),...b.map(r=>L.latLng(r.latitude,r.longitude)),M.value.getLatLng()]);map.value.fitBounds(e,{padding:[50,50]}),o!==null&&map.value&&map.value.removeControl(o),o=L.Routing.control({waypoints:[S.value.getLatLng(),...b.map(r=>L.latLng(r.latitude,r.longitude)),M.value.getLatLng()],routeWhileDragging:!1,createMarker:function(){return null},addWaypoints:!1,lineOptions:{styles:[{color:"blue",weight:4}]}}).on("routesfound",function(r){const c=r.routes[0];v.distance=c.summary.totalDistance,v.duration=c.summary.totalTime}).addTo(map.value)},Le=(e={lat:I.value,lng:I.value})=>{S.value&&S.value.remove();const r=L.icon({iconUrl:"/image/map/pickup.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});S.value=L.marker([e.lat,e.lng],{icon:r,draggable:!1}).addTo(map.value),M.value&&Z()},Ce=(e={latitude:I.value,longitude:I.value})=>{M.value&&M.value.remove();const r=L.icon({iconUrl:"/image/map/drop.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});M.value=L.marker([e.lat,e.lng],{icon:r,draggable:!1}).addTo(map.value),S.value&&Z()},Be=async()=>{const e=l.pick_address;if(e.length>2){const r=await O.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}`);N.value=r.data.map(c=>({display_name:c.display_name,lat:c.lat,lon:c.lon}))}else N.value=[]},qe=async()=>{const e=l.drop_address;if(e.length>2){const r=await O.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}`);T.value=r.data.map(c=>({display_name:c.display_name,lat:c.lat,lon:c.lon}))}else T.value=[]},Ie=async e=>{const r=b[e].address;if(r.length>2){const c=await O.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r)}`);W.value[e]=c.data.map(f=>({display_name:f.display_name,lat:f.lat,lon:f.lon}))}else W.value[e]=[]},Ve=e=>{l.pick_address=e.display_name;const r={lat:parseFloat(e.lat),lng:parseFloat(e.lon)};N.value=[],v.pick_lat=r.lat,v.pick_lng=r.lng,S.value?(S.value.setLatLng(r),map.value.setView(r,12)):(map.value.setView(r,12),Le(r),re(r)),M.value&&(Z(),ie()),ee()},pe=e=>{const r="0123456789bcdefghjkmnpqrstuvwxyz",c=[16,8,4,2,1];let f=!0,n=-90,k=90,g=-180,y=180,G,Y;if(e){for(let J=0;J<e.length;J++){let oe=e.charAt(J),E=r.indexOf(oe);for(let j=0;j<5;j++){let ae=c[j];if(f){let R=(g+y)/2;E&ae?g=R:y=R}else{let R=(n+k)/2;E&ae?n=R:k=R}f=!f}}return G=(n+k)/2,Y=(g+y)/2,{lat:G,lon:Y}}},Pe=e=>{l.drop_address=e.display_name;const r={lat:parseFloat(e.lat),lng:parseFloat(e.lon)};T.value=[],v.drop_lat=r.lat,v.drop_lng=r.lng,M.value?M.value.setLatLng(r):(map.value.setView(r,12),Ce(r)),S.value&&(ie(),Z())},Ue=(e,r)=>{var n;(n=D.value)!=null&&n[e]&&D.value[e].remove();const c=L.icon({iconUrl:"/image/map/"+e+".png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});return L.marker([r.lat,r.lng],{icon:c,draggable:!1}).addTo(map.value)},xe=(e,r)=>{console.log(b[e]),b[e].address=r.display_name,b[e].latitude=r.lat,b[e].longitude=r.lon;const c={lat:parseFloat(r.lat),lng:parseFloat(r.lon)},f=Ue(e,c);D[e]=f,W.value[e]=[],Z()},Re=(e,r,c,f)=>{const k=(c-e)*Math.PI/180,g=(f-r)*Math.PI/180,y=Math.sin(k/2)*Math.sin(k/2)+Math.cos(e*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(g/2)*Math.sin(g/2);return 6371*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))},re=async e=>{const r=firebase.database().ref("drivers");x.value.forEach(c=>{c.driver_time=null,c.driver_distance=null}),r.on("value",c=>{c.forEach(f=>{var Y,J;const n=f.val(),k=n.g,g=pe(k);if(g){const oe=Re(e.lat,e.lng,g.lat,g.lon);var y=!0;if(l.vehicle_type){y=!1;var G=(J=(Y=x.value)==null?void 0:Y.find(E=>E.zone_type_id===l.vehicle_type))==null?void 0:J.type_id;G&&n.vehicle_types&&n.vehicle_types.includes(G)&&(y=!0)}if(oe<=10&&De(n,oe),oe<=10&&n.is_available&&n.is_active&&y){const E=L.latLng(g.lat,g.lon),j=`/image/map/${n.vehicle_type_icon}.png`,ae=L.icon({iconUrl:j,iconSize:[30,30]});if(p[n.id])animateDriverMovement(p[n.id],p[n.id].getLatLng(),E,n.bearing,j),p[n.id].setIcon(ae);else{const R=L.marker(E,{icon:ae}).addTo(map.value);p[n.id]=R,animateDriverMovement(R,R.getLatLng(),E,n.bearing,j)}}else p[n.id]&&(p[n.id].remove(),delete p[n.id])}})}),r.on("child_changed",c=>{const f=c.val(),n=f.g,k=pe(n);!f.is_active&&k&&x.value.forEach(g=>{f.vehicle_types.some(y=>y===g.id)&&re({lat:v.pick_lat,lng:v.pick_lng})}),f.lat&&f.lng&&updateDriverMarker(f)})},Ae=e=>e<2?"3 Mins":e>2&&e<5?"5 Mins":e>5&&e<7?"10 Mins":"15 mins",De=(e,r)=>{const c=Ae(r);x.value.forEach(f=>{e.vehicle_types&&e.vehicle_types.includes(f.type_id)&&(!f.driver_distance||f.driver_distance>r)&&(f.driver_time=c)})},me=async()=>{map.value&&(map.value.remove(),map.value=null),map.value=L.map("map",{zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,touchZoom:!1}).setView([I.value,$.value],12),map.value.dragging.disable(),map.value.scrollWheelZoom.disable(),map.value.doubleClickZoom.disable(),map.value.touchZoom.disable(),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(map.value),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){I.value=e.coords.latitude,$.value=e.coords.longitude,map.value.setView({lat:I.value,lng:$.value},12)},function(e){console.error("Error getting location: ",e)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},Te=async()=>{if(!le())return!1;F.value=!1;const{pick_lat:e,pick_lng:r,drop_lat:c,drop_lng:f}=v.data();e&&(l.pick_lat=e),r&&(l.pick_lng=r),c&&(l.drop_lat=c),f&&(l.drop_lng=f),b.length>0&&(l.stops=JSON.stringify(b)),console.log("booking-info"),console.log(l.data());try{let n;n=await O.post("/web-create-request",l.data());const k=n.data.data.id;if(n.data.success===!0){let g;V.fire({title:"Booking Successfull",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,onBeforeOpen:()=>{V.showLoading(),g=setInterval(()=>{V.getContent().querySelector("b").textContent=V.getTimerLeft()},100)},onClose:()=>{clearInterval(g)}}).then(y=>{y.dismiss===V.DismissReason.timer&&(window.location.href=`/history/view/${k}`)}),l.reset(),v.reset(),x.value=[],await me()}else te.value=i("failed_to_make_booking_contact_admin")}catch(n){n.response&&n.response.status===422?d.value=n.response.data.errors:(console.error(i("error_creating_vehicle_price"),n),te.value=i("failed_to_make_booking_contact_admin"))}};ve(async()=>{await it("en"),await me()}),ve(()=>{var e={apiKey:a.firebaseSettings.firebase_api_key,authDomain:a.firebaseSettings.firebase_auth_domain,databaseURL:a.firebaseSettings.firebase_database_url,projectId:a.firebaseSettings.firebase_project_id,storageBucket:a.firebaseSettings.firebase_storage_bucket,messagingSenderId:a.firebaseSettings.firebase_messaging_sender_id,appId:a.firebaseSettings.firebase_app_id};firebase.apps.length||firebase.initializeApp(e),a.transport_type_for_ride.length>0&&(l.transport_type=a.transport_type_for_ride[0]),a.ride_type_for_ride.length>0&&(l.ride_type=a.ride_type_for_ride[0])});const ze=h(""),Ee=h(""),Fe=Qe(()=>{}),je=e=>{X.value=e,l.country=e.dial_code},Oe=Xe(async()=>{const e=await O.get("/dispatch/fetch-user-detail",{params:{mobile:l.mobile}});console.log(e.data.data),e.data.data?(console.log("if"),l.name=e.data.data.name,l.user_id=e.data.data.id):(console.log("else"),l.user_id=null,l.name=null)},300);return K(()=>l.vehicle_type,async e=>{e&&await le()}),{form:l,modalShow:he,successMessage:ue,alertMessage:te,dismissMessage:ye,validationRef:se,validationRules:z,errors:d,mobile:ze,selectedCountry:X,searchQuery:Ee,filteredCountries:Fe,selectCountry:je,validateNumber:Oe,pickupSuggestions:N,dropSuggestions:T,stopSuggestions:W,fetchPickupSuggestions:Be,fetchDropSuggestions:qe,fetchStopSuggestions:Ie,selectPickupSuggestion:Ve,selectDropSuggestion:Pe,selectStopSuggestion:xe,loadVehicleTypes:ee,etaParam:v,vehicleTypes:x,makeBooking:Te,stopovers:b,addStopover:we,removeStopover:Me,showModal:ne,formattedDuration:_e,unit:H,bookValidate:le,handleInput:ke,enableBooking:F}}},ct={class:"row mt-4"},_t={class:"col-lg-6 col-sm-6"},ut={class:"p-0 border border-dashed rounded"},pt={class:"d-flex align-items-center"},mt={class:"flex-grow-1"},ft={class:"text-muted mb-1"},vt={class:"fs-16 fw-bold ms-2"},gt={class:"col-lg-6 col-sm-6"},ht={class:"p-0 border border-dashed rounded"},yt={class:"d-flex align-items-center"},bt={class:"flex-grow-1"},kt={class:"text-muted mb-1"},St={class:"fs-16 fw-bold ms-2"},wt={class:"row"},Mt={class:"col-12 col-lg-6",style:{"max-height":"500px","overflow-y":"auto"}},Lt={class:"row"},Ct={class:"d-flex align-items-center mt-4"},Bt={class:"card-title mb-3 flex-grow-1"},qt={class:"col-6"},It={class:"mb-3"},Vt={for:"type",class:"form-label"},Pt={disabled:"",value:""},Ut={value:"0"},xt={value:"1"},Rt={class:"col-6"},At={class:"col-12"},Dt={class:"mb-3"},Tt={for:"type",class:"form-label"},zt={disabled:"",value:""},Et=["value"],Ft={class:"col-12"},jt={class:"mb-3"},Ot={class:"d-flex align-items-center justify-content-between"},Ht={for:"pickup",class:"form-label"},Nt=["placeholder"],Wt={key:0},Zt=["onClick","value"],Gt={class:"mb-3"},Yt=["for"],Jt={class:"d-flex align-items-center"},Kt=["onUpdate:modelValue","onInput","placeholder","id"],Qt=["onClick"],Xt={key:0},$t=["onClick","value"],eo={key:1,class:"text-danger"},to={key:1,class:"col-12"},oo={class:"mb-3"},ao={for:"drop",class:"form-label"},so=["placeholder"],lo={key:0},ro=["onClick","value"],io={key:2,class:"card-title mb-2 flex-grow-1 mt-4"},no={key:3,class:"px-2 mb-2"},co={class:"badge bg-dark-subtle text-dark p-1 fs-12 text-center"},_o={class:"form-check m-2 mx-3"},uo={class:"form-check-label mt-1",for:"poc"},po={key:4,class:"col-6"},mo={class:"mb-3"},fo={for:"poc_name",class:"form-label"},vo=["placeholder","disabled"],go={key:5,class:"col-6"},ho={class:"mb-3"},yo={for:"poc_mobile",class:"form-label"},bo=["placeholder","disabled"],ko={key:6,class:"card-title mb-2 flex-grow-1 mt-4"},So={key:7,class:"col-6"},wo={class:"mb-3"},Mo={for:"goods_type",class:"form-label"},Lo={disabled:"",value:""},Co=["value"],Bo={key:8,class:"col-6"},qo={class:"mb-3"},Io={for:"goods_type_quantity",class:"form-label"},Vo=["placeholder"],Po={key:9,class:"col-12"},Uo={class:"mb-3"},xo={for:"dispatch-datepicker",class:"form-label"},Ro={key:10,class:"col-12"},Ao={class:"card-title mb-3 flex-grow-1 mt-4"},Do={class:"mb-3",style:{"max-width":"650px","overflow-x":"auto"}},To={class:"d-flex mt-5"},zo=["for"],Eo=["id","value"],Fo={class:"select-checkbox-btn-content"},jo={class:"w-32 me-4 cursor-pointer"},Oo={class:"text-center mt-2 ms-4"},Ho={class:"w-32 h-32 flex-none image-fit rounded-circle"},No=["src"],Wo={class:"text-center mt-2 amount text-dark"},Zo={class:"text-center mt-2"},Go={key:0,class:"bottom-modal"},Yo={class:"modal-content"},Jo={class:"col-12 col-lg-6"},Ko={class:"mb-3 text-center m-auto"},Qo={id:"map",style:{height:"500px"}};function Xo(a,i,X,s,I,$){const F=A("Head"),l=A("UserWebMenu"),H=A("BCardHeader"),S=A("BCol"),M=A("BRow"),D=A("flat-pickr"),N=A("FormValidation"),W=A("BCardBody"),T=A("BCard");return _(),$e(T,null,{default:P(()=>[C(F,{title:"Taxi Ride"}),C(H,{class:"border-0"},{default:P(()=>[C(l,{user:X.user},null,8,["user"])]),_:1}),C(M,null,{default:P(()=>[C(S,{lg:"12"},{default:P(()=>[C(T,{"no-body":"",id:"tasksList"},{default:P(()=>[C(H,{class:"border-0"},{default:P(()=>[C(M,null,{default:P(()=>[C(S,{lg:"6"}),C(S,{lg:"6"},{default:P(()=>[t("div",ct,[t("div",_t,[t("div",ut,[t("div",pt,[i[15]||(i[15]=t("div",{class:"avatar-sm me-2"},[t("div",{class:"avatar-title rounded bg-transparent text-success fs-24"},[t("i",{class:"ri-map-pin-time-line"})])],-1)),t("div",mt,[t("p",ft,[de(u(a.$t("duration"))+" :",1),t("span",vt,u(s.formattedDuration),1)])])])])]),t("div",gt,[t("div",ht,[t("div",yt,[i[16]||(i[16]=t("div",{class:"avatar-sm me-2"},[t("div",{class:"avatar-title rounded bg-transparent text-success fs-24"},[t("i",{class:"ri-pin-distance-line"})])],-1)),t("div",bt,[t("p",kt,[de(u(a.$t("distance"))+" :",1),t("span",St,u(s.etaParam.distance_in_unit)+" "+u(s.unit),1)])])])])])])]),_:1})]),_:1})]),_:1}),C(W,{class:"border border-dashed border-end-0 border-start-0"},{default:P(()=>[t("form",{onSubmit:i[14]||(i[14]=at((...o)=>a.handleSubmit&&a.handleSubmit(...o),["prevent"]))},[C(N,{form:s.form,rules:s.validationRules,ref:"validationRef"},{default:P(()=>[t("div",wt,[t("div",Mt,[t("div",Lt,[t("div",Ct,[t("h4",Bt,u(a.$t("ride_info")),1)]),t("div",qt,[t("div",It,[t("label",Vt,u(a.$t("booking_type")),1),U(t("select",{id:"type",class:"form-select","onUpdate:modelValue":i[0]||(i[0]=o=>s.form.is_later=o)},[t("option",Pt,u(a.$t("choose_type")),1),t("option",Ut,u(a.$t("instant_booking")),1),t("option",xt,u(a.$t("book_later")),1)],512),[[ce,s.form.is_later]]),(_(!0),m(q,null,B(s.errors.is_later,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])]),t("div",Rt,[t("div",At,[t("div",Dt,[t("label",Tt,u(a.$t("transport_type")),1),U(t("select",{id:"type",class:"form-select","onUpdate:modelValue":i[1]||(i[1]=o=>s.form.transport_type=o)},[t("option",zt,u(a.$t("choose_transport_type")),1),(_(!0),m(q,null,B($.transport_options,(o,p)=>(_(),m("option",{key:p,value:o},u(o.charAt(0).toUpperCase()+o.slice(1)),9,Et))),128))],512),[[ce,s.form.transport_type]]),(_(!0),m(q,null,B(s.errors.transport_type,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])]),t("div",Ft,[t("div",jt,[t("div",Ot,[t("label",Ht,u(a.$t("pickup_location")),1)]),U(t("input",{type:"text",id:"pickup",class:"form-control","onUpdate:modelValue":i[2]||(i[2]=o=>s.form.pick_address=o),onInput:i[3]||(i[3]=(...o)=>s.fetchPickupSuggestions&&s.fetchPickupSuggestions(...o)),placeholder:a.$t("enter_pickup")},null,40,Nt),[[Q,s.form.pick_address]]),s.pickupSuggestions.length>0?(_(),m("ul",Wt,[(_(!0),m(q,null,B(s.pickupSuggestions,(o,p)=>(_(),m("li",{key:p,onClick:z=>s.selectPickupSuggestion(o),value:o.display_name},u(o.display_name),9,Zt))),128))])):w("",!0)])]),s.form.ride_type=="regular"?(_(!0),m(q,{key:0},B(s.stopovers,(o,p)=>{var z;return _(),m("div",{class:"col-12",key:p},[t("div",Gt,[t("label",{for:`stop-${p}`,class:"form-label"},u(a.$t("stop_location")),9,Yt),t("div",Jt,[U(t("input",{type:"text",class:"form-control mx-1","onUpdate:modelValue":d=>o.address=d,onInput:d=>s.fetchStopSuggestions(p),placeholder:"Enter stop "+(p+1),id:`stop-${p}`},null,40,Kt),[[Q,o.address]]),t("i",{class:"bx bx-trash text-danger fs-22 btn",onClick:d=>s.removeStopover(p)},null,8,Qt)]),((z=s.stopSuggestions[p])==null?void 0:z.length)>0?(_(),m("ul",Xt,[(_(!0),m(q,null,B(s.stopSuggestions[p],(d,se)=>(_(),m("li",{key:se,onClick:x=>s.selectStopSuggestion(p,d),value:d.display_name},u(d.display_name),9,$t))),128))])):w("",!0),s.form.errors[`stop-${p}`]?(_(),m("span",eo,u(s.form.errors[`stop-${p}`]),1)):w("",!0)])])}),128)):w("",!0),s.form.ride_type=="regular"?(_(),m("div",to,[t("div",oo,[t("label",ao,u(a.$t("drop_location")),1),U(t("input",{type:"text",class:"form-control","onUpdate:modelValue":i[4]||(i[4]=o=>s.form.drop_address=o),onInput:i[5]||(i[5]=(...o)=>s.fetchDropSuggestions&&s.fetchDropSuggestions(...o)),placeholder:a.$t("enter_drop"),id:"drop"},null,40,so),[[Q,s.form.drop_address]]),s.dropSuggestions.length>0?(_(),m("ul",lo,[(_(!0),m(q,null,B(s.dropSuggestions,(o,p)=>(_(),m("li",{key:p,onClick:z=>s.selectDropSuggestion(o),value:o.display_name},u(o.display_name),9,ro))),128))])):w("",!0),(_(!0),m(q,null,B(s.errors.drop_address,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),s.form.transport_type=="delivery"?(_(),m("h4",io,u(a.$t("poc_info")),1)):w("",!0),s.form.transport_type=="delivery"?(_(),m("div",no,[t("span",co,[t("div",_o,[U(t("input",{class:"form-check-input",type:"checkbox",id:"poc","onUpdate:modelValue":i[6]||(i[6]=o=>I.isPocSame=o)},null,512),[[et,I.isPocSame]]),t("label",uo,u(a.$t("check_if_poc_info_as_same_as_personal_info")),1)])])])):w("",!0),s.form.transport_type=="delivery"?(_(),m("div",po,[t("div",mo,[t("label",fo,u(a.$t("drop_poc_name")),1),U(t("input",{type:"text",class:"form-control","onUpdate:modelValue":i[7]||(i[7]=o=>s.form.drop_poc_name=o),placeholder:a.$t("enter_poc_name"),id:"poc_name",disabled:I.isPocSame},null,8,vo),[[Q,s.form.drop_poc_name]]),(_(!0),m(q,null,B(s.errors.drop_poc_name,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),s.form.transport_type=="delivery"?(_(),m("div",go,[t("div",ho,[t("label",yo,u(a.$t("drop_poc_mobile")),1),U(t("input",{type:"text",class:"form-control","onUpdate:modelValue":i[8]||(i[8]=o=>s.form.drop_poc_mobile=o),placeholder:a.$t("enter_poc_mobile"),id:"poc_mobile",disabled:I.isPocSame},null,8,bo),[[Q,s.form.drop_poc_mobile]]),(_(!0),m(q,null,B(s.errors.poc_mobile,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),s.form.transport_type=="delivery"?(_(),m("h4",ko,u(a.$t("select_goods")),1)):w("",!0),s.form.transport_type=="delivery"?(_(),m("div",So,[t("div",wo,[t("label",Mo,u(a.$t("goods_type")),1),U(t("select",{id:"goods_type",class:"form-select","onUpdate:modelValue":i[9]||(i[9]=o=>s.form.goods_type_id=o)},[t("option",Lo,u(a.$t("choose_type")),1),(_(!0),m(q,null,B(X.goodsTypes,o=>(_(),m("option",{key:o.id,value:o.id},u(o.goods_type_name),9,Co))),128))],512),[[ce,s.form.goods_type_id]]),(_(!0),m(q,null,B(s.errors.goods_type_id,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),s.form.transport_type=="delivery"?(_(),m("div",Bo,[t("div",qo,[t("label",Io,u(a.$t("goods_quantity")),1),U(t("input",{type:"text",class:"form-control","onUpdate:modelValue":i[10]||(i[10]=o=>s.form.goods_type_quantity=o),placeholder:a.$t("enter_quantity"),id:"goods_type_quantity"},null,8,Vo),[[Q,s.form.goods_type_quantity]]),(_(!0),m(q,null,B(s.errors.goods_type_quantity,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),s.form.is_later==="1"?(_(),m("div",Po,[t("div",Uo,[t("label",xo,u(a.$t("date")),1),C(D,{placeholder:a.$t("select_date"),modelValue:s.form.trip_start_time,"onUpdate:modelValue":i[11]||(i[11]=o=>s.form.trip_start_time=o),config:I.dateTimeConfig,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"])])])):w("",!0),s.vehicleTypes.length>0?(_(),m("div",Ro,[t("h4",Ao,u(a.$t("select_vehicle")),1),t("div",Do,[t("div",To,[(_(!0),m(q,null,B(s.vehicleTypes,(o,p)=>(_(),m("div",{key:p,class:"select-checkbox-btn text-center"},[t("label",{for:"vehicle_"+o.zone_type_id,class:"select-checkbox-btn-wrapper"},[U(t("input",{id:"vehicle_"+o.zone_type_id,name:"types",type:"radio",value:o.zone_type_id,"onUpdate:modelValue":i[12]||(i[12]=z=>s.form.vehicle_type=z),class:"select-checkbox-btn-input"},null,8,Eo),[[tt,s.form.vehicle_type]]),t("span",Fo,[t("a",jo,[t("div",Oo,[i[17]||(i[17]=t("i",{class:"bx bx-time-five mx-1"},null,-1)),de(u(o.driver_time||"--"),1)]),t("div",Ho,[t("img",{alt:"",class:"rounded-circle img-fluid",src:o.vehicle_icon},null,8,No)]),t("div",Wo,u(o.currency)+" "+u(o.total),1),t("div",Zo,u(o.name),1)])])],8,zo)]))),128))])]),C(ot,{name:"slide-up"},{default:P(()=>[s.showModal?(_(),m("div",Go,[t("div",Yo,[t("button",{type:"submit",onClick:i[13]||(i[13]=(...o)=>s.makeBooking&&s.makeBooking(...o)),class:"btn btn-primary",style:{width:"50%",margin:"auto"}},u(a.$t("make_booking")),1)])])):w("",!0)]),_:1})])):w("",!0)])]),t("div",Jo,[t("div",Ko,[t("div",Qo,u(a.$t("map_loading")),1)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ra=He(dt,[["render",Xo],["__scopeId","data-v-e900cd67"]]);export{ra as default};
