import{_ as Q,Z as U,O as Y,P as j,z,C as G,r as v,T as J,Q as K,a2 as Z,a as E,R as W,g as m,o as r,x as L,w as c,U as T,N as X,k as u,l as t,J as n,q as ee,K as te,i as f,L as I,F as O,y as g,B as w,n as F}from"./vendor-ddfbd976.js";import{L as se}from"./main-306a5ea6.js";import{P as ae}from"./page-header-2dc95532.js";import{P as oe}from"./Pagination-f095ae3c.js";import{s as ne}from"./search-2c17aadd.js";import{s as le}from"./searchbar-3acbc236.js";import{l as re}from"./footer-e648049d.js";import{_ as ie}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const de={data(){return{rightOffcanvas:!1}},components:{Layout:se,PageHeader:ae,Head:U,Pagination:oe,Multiselect:Y,flatPickr:j,Link:z,search:ne,searchbar:le},props:{successMessage:String,alertMessage:String,serviceLocations:{type:Object,required:!0}},setup(s){const{t:e}=G(),B=v(""),a=J({all:"",locked:"",limit:10}),p=v([]),b=v({}),M=v(!1),C=v(!1),k=v(null),q=v({}),h=v(s.successMessage||""),_=v(s.alertMessage||""),D=()=>{h.value="",_.value=""},x=async(d,l)=>{try{await E.post("/faq/update-status",{id:d,status:l});const i=p.value.findIndex(R=>R.id===d);i!==-1&&(p.value[i].active===1?(h.value=e("faq_inactive_successfully"),p.value[i].active=l):(h.value=e("faq_active_successfully"),p.value[i].active=l),setTimeout(()=>{h.value=""},5e3))}catch(i){i.response&&i.response.status==403&&(_.value=i.response.data.alertMessage,setTimeout(()=>{_.value=""},5e3)),console.error(e("error_updating_status"),i)}},H=()=>{C.value=!0},A=()=>{a.reset(),y(),C.value=!1},N=()=>{M.value=!1},S=async d=>{try{await E.delete(`/faq/delete/${d}`);const l=p.value.findIndex(i=>i.id===d);l!==-1&&p.value.splice(l,1),M.value=!1,T.fire(e("success"),e("faq_deleted_successfully"),"success")}catch(l){l.response&&l.response.status==403&&(_.value=l.response.data.alertMessage,setTimeout(()=>{_.value=""},5e3)),T.fire(e("error"),e("failed_to_delete_faq"),"error")}},o=async d=>{T.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await S(d)}catch(i){console.error(e("error_deleting_data"),i),T.fire(e("error"),e("failed_to_delete_the_data"),"error")}})};K(B,Z.debounce(function(d){y(B.value)},300));const y=async(d=1)=>{try{const l=a.data();l.search=B.value,l.page=d;const i=await E.get("/faq/list",{params:l});p.value=i.data.results,b.value=i.data.paginator,$(b.value.total),C.value=!1}catch(l){console.error(e("error_fetching_faq"),l)}},P=async d=>{localStorage.setItem("faq/list",d),y(d)},V=async d=>{X.get(`/faq/edit/${d.id}`)},$=()=>{q.value=[10,25,50,100,200,500]};return{results:p,modalShow:M,deleteItemId:k,successMessage:h,alertMessage:_,filterData:H,deleteModal:o,closeModal:N,deleteData:S,dismissMessage:D,searchTerm:B,paginator:b,modalFilter:C,clearFilter:A,fetchDatas:y,filter:a,handlePageChanged:P,editData:V,toggleActiveStatus:x,paginatorOption:q,changeEntriesPerPage:()=>{y()}}},computed:{...re,...W(["permissions"])},mounted(){this.fetchDatas();const s=localStorage.getItem("cancellation/list");s?this.handlePageChanged(Number(s)):this.handlePageChanged(1)},methods:{truncateText(s,e){return s.length>e?s.substring(0,e)+"...":s}}},ce={class:"d-flex align-items-center mt-3"},ue={class:"me-2 text-muted"},fe=["value"],me={class:"ms-2 text-muted"},ge={class:"d-flex align-items-center gap-2"},pe={class:"table-responsive"},_e={class:"table align-middle position-relative table-nowrap"},ve={class:"table-active"},he={scope:"col"},ye={scope:"col"},be={scope:"col"},Ce={scope:"col"},ke={scope:"col"},we={key:0},Be={class:"dropdown"},Me={class:"dropdown-menu dropdown-menu-end"},Pe={key:0},qe=["onClick"],xe=["onClick"],Se=["onClick"],Le=["onClick"],Te={key:1},De={colspan:"12",class:"text-center"},He={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ae={class:"alert-content"},Ne={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ee={class:"alert-content"};function Ie(s,e,B,a,p,b){const M=m("Head"),C=m("PageHeader"),k=m("BCol"),q=m("BButton"),h=m("Link"),_=m("BRow"),D=m("BCardHeader"),x=m("BBadge"),H=m("BCardBody"),A=m("BCard"),N=m("Pagination"),S=m("Layout");return r(),L(S,null,{default:c(()=>[u(M,{title:"FAQ"}),u(C,{title:s.$t("faq"),pageTitle:s.$t("faq")},null,8,["title","pageTitle"]),u(_,null,{default:c(()=>[u(k,{lg:"12"},{default:c(()=>[u(A,{"no-body":"",id:"tasksList"},{default:c(()=>[u(D,{class:"border-0"},{default:c(()=>[u(_,{class:"g-2"},{default:c(()=>[u(k,{md:"3"},{default:c(()=>[t("div",ce,[t("label",ue,n(s.$t("show")),1),ee(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.filter.limit=o),onChange:e[1]||(e[1]=(...o)=>a.changeEntriesPerPage&&a.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(r(!0),f(O,null,I(a.paginatorOption,o=>(r(),f("option",{key:o,value:o},n(o),9,fe))),128))],544),[[te,a.filter.limit]]),t("label",me,n(s.$t("entries")),1)])]),_:1}),u(k,{md:"3"}),u(k,{md:"auto",class:"ms-auto"},{default:c(()=>[t("div",ge,[s.permissions.includes("add-faq")?(r(),L(h,{key:0,href:"/faq/create"},{default:c(()=>[u(q,{variant:"primary",class:"float-end"},{default:c(()=>[e[4]||(e[4]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),g(" "+n(s.$t("add_faq")),1)]),_:1,__:[4]})]),_:1})):w("",!0)])]),_:1})]),_:1})]),_:1}),u(H,{class:"border border-dashed border-end-0 border-start-0"},{default:c(()=>[t("div",pe,[t("table",_e,[t("thead",ve,[t("tr",null,[t("th",he,n(s.$t("question")),1),t("th",ye,n(s.$t("answer")),1),t("th",be,n(s.$t("user_type")),1),t("th",Ce,n(s.$t("status")),1),t("th",ke,n(s.$t("action")),1)])]),a.results.length>0?(r(),f("tbody",we,[(r(!0),f(O,null,I(a.results,(o,y)=>(r(),f("tr",{key:y},[t("td",null,n(b.truncateText(o.question,50)),1),t("td",null,n(b.truncateText(o.answer,50)),1),t("td",null,n(o.user_type),1),t("td",null,[o.active==1?(r(),L(x,{key:0,variant:"success",class:"text-uppercase"},{default:c(()=>[g(n(s.$t("active")),1)]),_:1})):(r(),L(x,{key:1,variant:"danger",class:"text-uppercase"},{default:c(()=>[g(n(s.$t("inactive")),1)]),_:1}))]),t("td",null,[t("div",Be,[e[9]||(e[9]=t("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[t("span",{class:"text-muted fs-18"},[t("i",{class:"mdi mdi-dots-vertical"})])],-1)),t("div",Me,[s.permissions.includes("toggle-faq")?(r(),f("div",Pe,[o.active===1?(r(),f("a",{key:0,class:"dropdown-item",href:"#",onClick:P=>a.toggleActiveStatus(o.id,0)},[e[5]||(e[5]=t("i",{class:"bx bxs-low-vision align-center text-muted me-2"},null,-1)),g(" "+n(s.$t("inactive")),1)],8,qe)):(r(),f("a",{key:1,class:"dropdown-item",href:"#",onClick:P=>a.toggleActiveStatus(o.id,1)},[e[6]||(e[6]=t("i",{class:"bx bx-show-alt align-center text-muted me-2"},null,-1)),g(" "+n(s.$t("active")),1)],8,xe))])):w("",!0),s.permissions.includes("edit-faq")?(r(),f("a",{key:1,class:"dropdown-item",href:"#",onClick:F(P=>a.editData(o),["prevent"])},[e[7]||(e[7]=t("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),g(n(s.$t("edit")),1)],8,Se)):w("",!0),s.permissions.includes("delete-faq")?(r(),f("a",{key:2,class:"dropdown-item",href:"#",onClick:F(P=>a.deleteModal(o.id),["prevent"])},[e[8]||(e[8]=t("i",{class:"bx bxs-trash align-center text-muted me-2"},null,-1)),g(n(s.$t("delete")),1)],8,Le)):w("",!0)])])])]))),128))])):(r(),f("tbody",Te,[t("tr",null,[t("td",De,[e[10]||(e[10]=t("img",{src:ie,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,n(s.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[a.successMessage?(r(),f("div",He,[t("div",Ae,[e[11]||(e[11]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[12]||(e[12]=g()),e[13]||(e[13]=t("strong",null,"Success",-1)),g(" - "+n(a.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[2]||(e[2]=(...o)=>a.dismissMessage&&a.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):w("",!0),a.alertMessage?(r(),f("div",Ne,[t("div",Ee,[e[14]||(e[14]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[15]||(e[15]=g()),e[16]||(e[16]=t("strong",null,"Alert",-1)),g(" - "+n(a.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[3]||(e[3]=(...o)=>a.dismissMessage&&a.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):w("",!0)]),u(N,{paginator:a.paginator,onPageChanged:a.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Ge=Q(de,[["render",Ie]]);export{Ge as default};
