import{_ as te,Z as se,O as oe,P as ie,z as le,C as ae,r as v,T as ne,R as re,g as f,S as de,o as a,x as H,w as c,U as M,a as Y,N as $,k as d,l as e,q as D,i as r,p as P,J as l,K as ce,L as A,F as N,y as u,B as _,n as b,W as G}from"./vendor-ddfbd976.js";import{L as ue}from"./main-306a5ea6.js";import{P as me}from"./page-header-2dc95532.js";import{P as fe}from"./Pagination-f095ae3c.js";import{s as _e}from"./searchbar-3acbc236.js";import{l as ge}from"./footer-e648049d.js";import{W as pe}from"./warning-f199d39d.js";import{_ as J}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const he={data(){return{rightOffcanvas:!1,isListView:!0,copiedIndex:null}},created(){const s=localStorage.getItem("userViewMode");s&&(this.isListView=s==="list")},methods:{toggleView(s){this.isListView=s==="list",localStorage.setItem("userViewMode",s)},getStarIcons(s){let t=[],w=Math.floor(s),i=s%1>=.5,g=5-w-(i?1:0);for(let h=0;h<w;h++)t.push("ri-star-s-fill text-warning fs-16");i&&t.push("ri-star-half-s-fill text-warning fs-16");for(let h=0;h<g;h++)t.push("ri-star-line text-muted");return t},copyText(s,t){navigator.clipboard.writeText(s).then(()=>{this.copiedIndex=t,setTimeout(()=>{this.copiedIndex=null},2e3)})}},components:{Layout:ue,PageHeader:me,Head:se,Pagination:fe,Multiselect:oe,flatPickr:ie,Link:le,searchbar:_e,Warning:pe},props:{successMessage:String,alertMessage:String,app_for:String,vehicleTypes:{type:Object,required:!0},results:{type:Array,required:!0}},setup(s){const{t}=ae(),w=v(""),i=ne({transport_type:null,dispatch_type:null,status:null,limit:10}),g=v([]),h=v({}),S=v(!1),V=v(!1),R=v(null),C=v({}),I=v(s.successMessage||""),k=v(s.alertMessage||""),E=()=>{I.value="",k.value=""},O=async(n,p)=>{M.fire({title:t("are_you_sure"),text:t("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:t("yes"),cancelButtonText:t("cancel")}).then(async x=>{if(x.isConfirmed)try{await Y.post("/users/update-status",{id:n,status:p});const U=g.value.findIndex(ee=>ee.id===n);U!==-1&&(g.value[U].active=p),M.fire(t("changed"),t("status_updated_successfully"),"success")}catch(U){console.error(t("error_updating_status"),U),M.fire(t("error"),t("failed_to_update_status"),"error")}})},L=v(!1),W=()=>{y(),V.value=!0,L.value=!1},F=()=>{i.reset(),y(),L.value=!1},j=()=>{S.value=!1},T=async n=>{try{await Y.delete(`/users/delete/${n}`);const p=g.value.findIndex(x=>x.id===n);p!==-1&&g.value.splice(p,1),S.value=!1,M.fire(t("success"),t("users_deleted_successfully"),"success")}catch{M.fire("error",t("failed_to_delete_users"),"error")}},z=async n=>{M.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async p=>{if(p.isConfirmed)try{await T(n)}catch(x){console.error(t("error_deleting_data"),x),M.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},q=async n=>{w.value=n,y()},y=async(n=1)=>{try{const p=i.data();p.search=w.value,p.page=n;const x=await Y.get("/users/list",{params:p});g.value=x.data.results,h.value=x.data.paginator,X(h.value.total),V.value=!1}catch(p){console.error(t("error_fetching_users"),p)}},o=n=>s.app_for&&s.app_for=="demo"?"***********":n.mobile_number,B=n=>s.app_for&&s.app_for=="demo"?"***********":n.email,m=async n=>{localStorage.setItem("users/list",n),y(n)},K=async n=>{$.get(`/users/edit/${n.id}`)},Z=async n=>{$.get(`/users/password/edit/${n.id}`)},Q=async n=>{$.get(`/users/view-profile/${n.id}`)},X=()=>{C.value=[10,25,50,100,200,500]};return{results:g,modalShow:S,deleteItemId:R,successMessage:I,alertMessage:k,filterData:W,deleteModal:z,closeModal:j,deleteData:T,dismissMessage:E,searchTerm:w,fetchSearch:q,paginator:h,modalFilter:V,clearFilter:F,fetchDatas:y,filter:i,mobileFromUser:o,emailFromUser:B,handlePageChanged:m,toggleActiveStatus:O,editData:K,viewProfile:Q,rightOffcanvas:L,editPassData:Z,paginatorOption:C,changeEntriesPerPage:()=>{y()}}},computed:{...ge,...re(["permissions"])},mounted(){this.fetchDatas();const s=localStorage.getItem("users/list");s?this.handlePageChanged(Number(s)):this.handlePageChanged(1)}},ve={class:"d-flex align-items-center"},be={class:"toggle-buttons mt-3 me-4"},we=["title"],ye=["title"],ke={class:"d-flex align-items-center mt-3"},xe={class:"me-2 text-muted"},Ce=["value"],Be={class:"ms-2 text-muted"},Me={class:"d-flex align-items-center gap-2"},Pe={class:"table-responsive"},Se={class:"table align-middle position-relative table-nowrap"},Ve={class:"table-active"},Le={scope:"col"},De={scope:"col"},Ie={scope:"col"},Oe={scope:"col"},Fe={scope:"col"},Te={scope:"col"},Ue={key:0},He={key:0},Ae=["onClick","id","checked"],Ne={class:"dropdown"},Re={class:"dropdown-menu dropdown-menu-end"},Ee=["onClick"],We=["onClick"],je=["onClick"],ze=["onClick"],qe={key:1},Ye={colspan:"12",class:"text-center"},$e={key:0,class:"row"},Ge={class:"card card-height-100"},Je={class:"card-body"},Ke={class:"d-flex flex-column h-100"},Ze={class:"d-flex"},Qe={class:"flex-grow-1"},Xe={class:"text-muted mb-4"},et=["onClick"],tt={class:"text-muted mb-4"},st={class:"flex-shrink-0"},ot={class:"d-flex gap-1 align-items-center"},it={class:"dropdown"},lt={class:"dropdown-menu dropdown-menu-end"},at=["onClick"],nt=["onClick"],rt=["onClick"],dt=["onClick"],ct={class:"d-flex mb-2 card-footer bg-transparent border-top-dashed"},ut={class:"flex-shrink-0 me-3"},mt={class:"avatar-sm"},ft={class:"avatar-title bg-warning-subtle rounded p-2"},_t=["src"],gt={class:"flex-grow-1"},pt={class:"mb-1 fs-15"},ht={class:"text-body"},vt={class:"mb-0"},bt={class:"table-responsive table-card mt-2 ms-2"},wt={class:"table table-borderless mb-0"},yt={class:"card-footer bg-transparent border-top-dashed py-2"},kt={class:"d-flex align-items-center"},xt={class:"flex-grow-1"},Ct={scope:"col"},Bt={class:"flex-end"},Mt={key:0},Pt=["onClick","id","checked"],St={class:"table-responsive table-card mt-2 ms-2"},Vt={class:"table table-borderless mb-0"},Lt={colspan:"12",class:"text-center m-auto"},Dt={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},It={class:"alert-content"},Ot={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ft={class:"alert-content"},Tt={class:"offcanvas-body"},Ut={class:"mb-4"},Ht={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},At={class:"form-check form-check-inline"},Nt={class:"form-check-label",for:"active"},Rt={class:"form-check form-check-inline"},Et={class:"form-check-label",for:"inactive"},Wt={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function jt(s,t,w,i,g,h){const S=f("Warning"),V=f("Head"),R=f("PageHeader"),C=f("BCol"),I=f("searchbar"),k=f("BButton"),E=f("Link"),O=f("BRow"),L=f("BCardHeader"),W=f("BCardBody"),F=f("BCard"),j=f("BFrom"),T=f("BOffcanvas"),z=f("Pagination"),q=f("Layout"),y=de("b-tooltip");return a(),H(q,null,{default:c(()=>[d(S),d(V,{title:"Users"}),d(R,{title:s.$t("users"),pageTitle:s.$t("users")},null,8,["title","pageTitle"]),d(O,null,{default:c(()=>[d(C,{lg:"12"},{default:c(()=>[d(F,{"no-body":"",id:"tasksList"},{default:c(()=>[d(L,{class:"border-0"},{default:c(()=>[d(O,{class:"g-2"},{default:c(()=>[d(C,{md:"4"},{default:c(()=>[e("div",ve,[e("div",be,[D((a(),r("a",{"data-bs-toggle":"tooltip",title:s.$t("list_view"),class:P(["list-btn",{active:g.isListView}]),onClick:t[0]||(t[0]=o=>h.toggleView("list"))},t[10]||(t[10]=[e("i",{class:"ri-list-check"},null,-1)]),10,we)),[[y,void 0,void 0,{hover:!0}]]),D((a(),r("a",{"data-bs-toggle":"tooltip",title:s.$t("grid_view"),class:P(["list-btn",{active:!g.isListView}]),onClick:t[1]||(t[1]=o=>h.toggleView("grid"))},t[11]||(t[11]=[e("i",{class:"ri-grid-fill"},null,-1)]),10,ye)),[[y,void 0,void 0,{hover:!0}]])]),e("div",ke,[e("label",xe,l(s.$t("show")),1),D(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.filter.limit=o),onChange:t[3]||(t[3]=(...o)=>i.changeEntriesPerPage&&i.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(a(!0),r(N,null,A(i.paginatorOption,o=>(a(),r("option",{key:o,value:o},l(o),9,Ce))),128))],544),[[ce,i.filter.limit]]),e("label",Be,l(s.$t("entries")),1)])])]),_:1}),d(C,{md:"2"}),d(C,{md:"auto",class:"ms-auto"},{default:c(()=>[e("div",Me,[d(I,{onSearch:i.fetchSearch},null,8,["onSearch"]),d(k,{variant:"danger",onClick:t[4]||(t[4]=o=>i.rightOffcanvas=!0)},{default:c(()=>[t[12]||(t[12]=e("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),u(" "+l(s.$t("filters")),1)]),_:1,__:[12]}),s.permissions.includes("add-user")?(a(),H(E,{key:0,href:"/users/create"},{default:c(()=>[d(k,{variant:"primary",class:"float-end"},{default:c(()=>[t[13]||(t[13]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),u(l(s.$t("add_user")),1)]),_:1,__:[13]})]),_:1})):_("",!0)])]),_:1})]),_:1})]),_:1}),g.isListView?(a(),H(W,{key:0,class:"border border-dashed border-end-0 border-start-0"},{default:c(()=>[e("div",Pe,[e("table",Se,[e("thead",Ve,[e("tr",null,[e("th",Le,l(s.$t("name")),1),e("th",De,l(s.$t("gender")),1),e("th",Ie,l(s.$t("mobile")),1),e("th",Oe,l(s.$t("email")),1),e("th",Fe,l(s.$t("status")),1),e("th",Te,l(s.$t("action")),1)])]),i.results.length>0?(a(),r("tbody",Ue,[(a(!0),r(N,null,A(i.results,(o,B)=>(a(),r("tr",{key:B},[e("td",null,l(o.name),1),e("td",null,l(o.gender),1),e("td",null,l(i.mobileFromUser(o)),1),e("td",null,l(i.emailFromUser(o)),1),s.permissions.includes("toggle-user")?(a(),r("td",He,[e("div",{class:P({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:b(m=>i.toggleActiveStatus(o.id,!o.active),["prevent"]),id:"status_"+o.id,checked:o.active},null,8,Ae)],2)])):_("",!0),e("td",null,[d(k,{class:"btn btn-soft-info btn-sm m-2",size:"sm",type:"button"},{default:c(()=>[e("div",Ne,[t[18]||(t[18]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",Re,[s.permissions.includes("view-user-profile")?(a(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:b(m=>i.viewProfile(o),["prevent"])},[t[14]||(t[14]=e("i",{class:"bx bx-radio-circle-marked align-center text-muted me-2"},null,-1)),u(l(s.$t("view_profile")),1)],8,Ee)):_("",!0),s.permissions.includes("edit-user")?(a(),r("a",{key:1,class:"dropdown-item",href:"#",onClick:b(m=>i.editData(o),["prevent"])},[t[15]||(t[15]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),u(l(s.$t("edit")),1)],8,We)):_("",!0),s.permissions.includes("edit-user")?(a(),r("a",{key:2,class:"dropdown-item",href:"#",onClick:b(m=>i.editPassData(o),["prevent"])},[t[16]||(t[16]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),u(l(s.$t("update_password")),1)],8,je)):_("",!0),s.permissions.includes("delete-user")&&w.app_for!=="demo"?(a(),r("a",{key:3,class:"dropdown-item",href:"#",onClick:b(m=>i.deleteModal(o.id),["prevent"])},[t[17]||(t[17]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),u(l(s.$t("delete")),1)],8,ze)):_("",!0)])])]),_:2},1024)])]))),128))])):(a(),r("tbody",qe,[e("tr",null,[e("td",Ye,[t[19]||(t[19]=e("img",{src:J,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,l(s.$t("no_data_found")),1)])])]))])])]),_:1})):_("",!0)]),_:1})]),_:1})]),_:1}),g.isListView?_("",!0):(a(),r("div",$e,[i.results.length>0?(a(!0),r(N,{key:0},A(i.results,(o,B)=>(a(),r("div",{class:"col-xxl-3 col-sm-6 project-card",key:B},[e("div",Ge,[e("div",Je,[e("div",Ke,[e("div",Ze,[e("div",Qe,[e("h6",null,[u(l(s.$t("referral_code"))+" : ",1),e("span",Xe,l(o.refferal_code??"----"),1),e("button",{onClick:m=>h.copyText(o.refferal_code,B),class:"btn btn-light btn-sm ms-2"},[e("i",{class:P(g.copiedIndex===B?"bx bxs-check-circle text-success":"bx bx-copy")},null,2)],8,et)]),e("h6",null,[u(l(s.$t("referred_by"))+" : ",1),e("span",tt,l(o.referred_by_name??"----"),1)])]),e("div",st,[e("div",ot,[e("div",it,[t[24]||(t[24]=e("button",{class:"btn btn-link text-muted p-1 mt-n2 py-0 text-decoration-none fs-15","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-more-horizontal icon-sm"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})])],-1)),e("div",lt,[s.permissions.includes("view-user-profile")?(a(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:b(m=>i.viewProfile(o),["prevent"])},[t[20]||(t[20]=e("i",{class:"bx bx-radio-circle-marked align-center text-muted me-2"},null,-1)),u(l(s.$t("view_profile")),1)],8,at)):_("",!0),s.permissions.includes("edit-user")?(a(),r("a",{key:1,class:"dropdown-item",href:"#",onClick:b(m=>i.editData(o),["prevent"])},[t[21]||(t[21]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),u(l(s.$t("edit")),1)],8,nt)):_("",!0),s.permissions.includes("edit-user")?(a(),r("a",{key:2,class:"dropdown-item",href:"#",onClick:b(m=>i.editPassData(o),["prevent"])},[t[22]||(t[22]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),u(l(s.$t("update_password")),1)],8,rt)):_("",!0),s.permissions.includes("delete-user")&&w.app_for!=="demo"?(a(),r("a",{key:3,class:"dropdown-item",href:"#",onClick:b(m=>i.deleteModal(o.id),["prevent"])},[t[23]||(t[23]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),u(l(s.$t("delete")),1)],8,dt)):_("",!0)])])])])]),e("div",ct,[e("div",ut,[e("div",mt,[e("span",ft,[e("img",{class:"avatar-xs rounded-circle p-1",alt:"profile picture",src:o.profile_picture},null,8,_t)])])]),e("div",gt,[e("h5",pt,[e("a",ht,l(o.name??"----"),1)]),e("p",vt,[(a(),r(N,null,A(5,m=>e("i",{key:m,class:P([{"bx bxs-star text-warning":m<=Math.floor(o.rating),"bx bxs-star-half text-warning":m===Math.ceil(o.rating)&&o.rating%1!==0,"bx bx-star text-muted":m>o.rating},"align-center me-2"])},null,2)),64))])])]),e("div",bt,[e("table",wt,[e("tbody",null,[e("tr",null,[t[25]||(t[25]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-transgender fs-24"})],-1)),e("td",null,l(o.gender??"----"),1)]),e("tr",null,[t[26]||(t[26]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-phone fs-24"})],-1)),e("td",null,l(i.mobileFromUser(o)??"----"),1)]),e("tr",null,[t[27]||(t[27]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-envelope-open-text fs-24"})],-1)),e("td",null,l(i.emailFromUser(o)??"----"),1)])])])])])]),e("div",yt,[e("div",kt,[e("div",xt,[e("th",Ct,l(s.$t("status")),1)]),e("div",Bt,[s.permissions.includes("toggle-user")?(a(),r("td",Mt,[e("div",{class:P({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:b(m=>i.toggleActiveStatus(o.id,!o.active),["prevent"]),id:"status_"+o.id,checked:o.active},null,8,Pt)],2)])):_("",!0)])])])])]))),128)):(a(),H(F,{key:1},{default:c(()=>[e("div",St,[e("table",Vt,[e("tbody",null,[e("tr",null,[e("td",Lt,[t[28]||(t[28]=e("img",{src:J,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,l(s.$t("no_data_found")),1)])])])])])]),_:1}))])),e("div",null,[i.successMessage?(a(),r("div",Dt,[e("div",It,[t[29]||(t[29]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[30]||(t[30]=u()),t[31]||(t[31]=e("strong",null,"Success",-1)),u(" - "+l(i.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[5]||(t[5]=(...o)=>i.dismissMessage&&i.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):_("",!0),i.alertMessage?(a(),r("div",Ot,[e("div",Ft,[t[32]||(t[32]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[33]||(t[33]=u()),t[34]||(t[34]=e("strong",null,"Alert",-1)),u(" - "+l(i.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[6]||(t[6]=(...o)=>i.dismissMessage&&i.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):_("",!0)]),d(T,{modelValue:i.rightOffcanvas,"onUpdate:modelValue":t[9]||(t[9]=o=>i.rightOffcanvas=o),placement:"end",title:s.$t("users_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:c(()=>[d(j,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:c(()=>[e("div",Tt,[e("div",Ut,[e("label",Ht,l(s.$t("status")),1),e("div",null,[e("div",At,[D(e("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=o=>i.filter.status=o),type:"radio",name:"inlineRadioOptions",id:"active",value:"1"},null,512),[[G,i.filter.status]]),e("label",Nt,l(s.$t("active")),1)]),e("div",Rt,[D(e("input",{class:"form-check-input","onUpdate:modelValue":t[8]||(t[8]=o=>i.filter.status=o),type:"radio",name:"inlineRadioOptions",id:"inactive",value:"0"},null,512),[[G,i.filter.status]]),e("label",Et,l(s.$t("inactive")),1)])])])]),e("div",Wt,[d(k,{variant:"light",onClick:i.clearFilter,class:"w-100"},{default:c(()=>[u(l(s.$t("clear_filter")),1)]),_:1},8,["onClick"]),d(k,{type:"submit",onClick:i.filterData,variant:"success",class:"w-100"},{default:c(()=>[u(l(s.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),d(z,{paginator:i.paginator,onPageChanged:i.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const es=te(he,[["render",jt],["__scopeId","data-v-47dcfd19"]]);export{es as default};
