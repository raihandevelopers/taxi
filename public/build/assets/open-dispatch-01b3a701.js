import{_ as Ye,Z as Qe,z as Je,Y as Ke,P as Xe,R as $e,C as et,r as h,Q as T,T as ke,a0 as fe,$ as tt,D as ot,G as at,a as Q,g as A,o as d,x as st,w as $,U as N,X as I,N as lt,k as E,l as e,J as i,q as S,M as P,i as c,L as v,F as y,K as de,a1 as nt,B as b,H as rt,W as ce,y as Se,n as it}from"./vendor-ddfbd976.js";import{L as dt}from"./main-306a5ea6.js";import{P as ct}from"./page-header-2dc95532.js";import{F as _t}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";const mt={data(){return{isPocSame:!1,dateTimeConfig:{enableTime:!0,dateFormat:"Y-m-d H:i:ss",minDate:this.getMinTime()}}},watch:{isPocSame(s){s?(this.form.drop_poc_name=this.form.name,this.form.drop_poc_mobile=this.form.mobile):(this.form.drop_poc_name="",this.form.drop_poc_mobile="")},"form.name"(s){this.isPocSame&&(this.form.drop_poc_name=s)},"form.mobile"(s){this.isPocSame&&(this.form.drop_poc_mobile=s)}},components:{Layout:dt,PageHeader:ct,Head:Qe,Link:Je,Scrollbar:Ke,FormValidation:_t,flatPickr:Xe},computed:{...$e(["permissions"])},props:{countries:Array,default_flag:String,default_dial_code:String,default_lat:String,default_lng:String,successMessage:String,alertMessage:String,validate:Function,transport_type_for_ride:Array,ride_type_for_ride:Array,is_rental:Boolean,goodsTypes:Array,firebaseSettings:Object,map_key:String,transport_type_outstation:Array,transport_type_regular:Array,transport_type_rental:Array,settings:Object,schedule_a_ride:Number},computed:{transport_options(){let s=[];return this.form.ride_type==="regular"?(s=this.transport_type_regular,this.form.transport_type=s[0]):this.form.ride_type==="rental"?this.transport_type_rental.length===0?(this.form.transport_type="",s=[]):s=this.transport_type_rental:this.form.ride_type==="outstation"&&(this.transport_type_outstation.length===0?(this.form.transport_type="",s=[]):s=this.transport_type_outstation),s.length===1&&(this.form.transport_type=s[0]),s},dateTimeConfigReturnTime(){return{enableTime:!0,dateFormat:"Y-m-d H:i:ss",minDate:this.getMinReturnTime()}}},setup(s){const{t:r}=et(),le=h({dial_code:s.default_dial_code||"",flag:s.default_flag||""}),a=h(!1);h({});let Z=null;const U=h(parseFloat(s.default_lat)),ee=h(parseFloat(s.default_lng)),V=h(null),q=h(null),g=h(null),G=h([]),Y=h([]),J=h([]),M=h({});T(a,t=>{t?(n.drop_poc_name=n.name,n.drop_poc_mobile=n.mobile):(n.drop_poc_name="",n.drop_poc_mobile="")});const _e=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){U.value=t.coords.latitude,ee.value=t.coords.longitude,g.value.setView({lat:U.value,lng:ee.value},12)},function(t){switch(t.code){case t.PERMISSION_DENIED:console.error("User denied the request for Geolocation.");break;case t.POSITION_UNAVAILABLE:console.error("Location information is unavailable.");break;case t.TIMEOUT:console.error("The request to get user location timed out.");break;case t.UNKNOWN_ERROR:console.error("An unknown error occurred.");break}},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},me=()=>{const t=new Date,l=this.schedule_a_ride?parseInt(this.schedule_a_ride):0;t.setMinutes(t.getMinutes()+l),t.setSeconds(0);const m=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+" "+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":00";return console.log("Formatted Time:",m),m},o=()=>{let t;N.fire({title:"Booking alert!",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,onBeforeOpen:()=>{N.showLoading(),t=setInterval(()=>{N.getContent().querySelector("b").textContent=N.getTimerLeft()},100)},onClose:()=>{clearInterval(t)}}).then(l=>{l.dismiss===N.DismissReason.timer&&console.log("I was closed by the timer")})},_=()=>{if(!V.value||!q.value||!V.value.getLatLng()||!q.value.getLatLng())return;z();let t=V.value.getLatLng(),l=q.value.getLatLng();const m=I.latLngBounds([t,l]);g.value.fitBounds(m,{padding:[50,50]}),Z!==null&&g.value&&g.value.removeControl(Z),Z=I.Routing.control({waypoints:[V.value.getLatLng(),q.value.getLatLng()],routeWhileDragging:!1,createMarker:function(){return null},addWaypoints:!1,lineOptions:{styles:[{color:"blue",weight:4}]}}).on("routesfound",function(p){const u=p.routes[0];L.distance=u.summary.totalDistance,L.duration=Math.round(u.summary.totalTime/60)}).addTo(g.value)},B=(t={lat:U.value,lng:U.value})=>{V.value&&V.value.remove();const l=I.icon({iconUrl:"/image/map/pickup.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});V.value=I.marker([t.lat,t.lng],{icon:l,draggable:!1}).addTo(g.value)},we=(t={lat:U.value,lng:U.value})=>{q.value&&q.value.remove();const l=I.icon({iconUrl:"/image/map/drop.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});q.value=I.marker(t,{icon:l,draggable:!1}).addTo(g.value)},Me=async()=>{const t=n.pick_address;if(t.length>2){const l=await Q.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t)}`);G.value=l.data.map(m=>({display_name:m.display_name,lat:m.lat,lon:m.lon}))}else G.value=[]},Le=async()=>{const t=n.drop_address;if(t.length>2){const l=await Q.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t)}`);J.value=l.data.map(m=>({display_name:m.display_name,lat:m.lat,lon:m.lon}))}else J.value=[]},Ce=async t=>{const l=R[t].address;if(l.length>2){const m=await Q.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`);Y.value[t]=m.data.map(p=>({display_name:p.display_name,lat:p.lat,lon:p.lon}))}else Y.value[t]=[]},Te=t=>{n.pick_address=t.display_name;const l={lat:parseFloat(t.lat),lng:parseFloat(t.lon)};G.value=[],L.pick_lat=l.lat,L.pick_lng=l.lng,V.value?(V.value.setLatLng(l),g.value.setView(l,12)):(g.value.setView(l,12),B(l),pe(l)),q.value&&_(),z()},Ve=t=>{n.drop_address=t.display_name;const l={lat:parseFloat(t.lat),lng:parseFloat(t.lon)};J.value=[],L.drop_lat=l.lat,L.drop_lng=l.lng,q.value?q.value.setLatLng(l):we(l),V.value&&_()},qe=(t,l)=>{R[t].address=l.display_name;const m={lat:parseFloat(l.lat),lng:parseFloat(l.lon)};te.value[t].setLatLng(m),Y.value[t]=[],_()},n=ke({mobile:"",name:null,user_id:null,pick_address:"",drop_address:"",terminal:null,enterance:null,pick_lat:"",pick_lng:"",drop_lat:null,drop_lng:null,distance:0,duration:0,vehicle_type:null,payment_opt:1,goods_type_id:null,transport_type:"",pickup_poc_name:null,drop_poc_name:null,goods_type_quantity:null,is_later:0,assign_method:0,is_rental:0,rental_package_id:null,ride_type:"regular",stops:null,trip_start_time:null,country:s.default_dial_code,drop_poc_mobile:null}),F=h(null),x=h(!1);T(()=>n.name,t=>{a.value&&(n.drop_poc_name=t)}),T(()=>n.mobile,t=>{a.value&&(n.drop_poc_mobile=t)});const xe=fe(t=>{t&&n.vehicle_type?(F.value.scrollTop=F.value.scrollHeight,x.value=!0):x.value=!1},300);T(()=>n.name,async t=>{xe(t)});const Ie=h(!1),Ue=h(!1),Be={name:{required:!0},pick_address:{required:!0},mobile:{required:!0},transport_type:{required:!0},vehicle_type:{required:!0}},k=h({}),he=h(null),O=h([]),ue=h([]),ne=h([]),te=h([]),L=ke({pick_lat:"",pick_lng:"",drop_lat:"",drop_lng:"",distance:0,duration:0}),D=async()=>(k.value=he.value.validate(),n.is_later&&(n.trip_start_time?delete k.value.trip_start_time:k.value.trip_start_time=[r("required")]),n.is_rental?n.rental_package_id?delete k.value.rental_package_id:k.value.rental_package_id=[r("required")]:n.drop_address?delete k.value.drop_address:k.value.drop_address=[r("required")],n.is_out_station&&(n.trip_start_time?delete k.value.trip_start_time:k.value.trip_start_time=[r("required")]),n.is_out_station&&n.is_round_trip&&(n.return_time?delete k.value.return_time:k.value.return_time=[r("required")]),n.transport_type=="delivery"&&(n.goods_type_id?delete k.value.goods_type_id:k.value.goods_type_id=[r("required")],n.drop_poc_name?delete k.value.drop_poc_name:k.value.drop_poc_name=[r("required")],n.drop_poc_mobile?delete k.value.drop_poc_mobile:k.value.drop_poc_mobile=[r("required")]),Object.keys(k.value).length>0?(x.value=!1,F.value&&(F.value.scrollTop=0),!1):(x.value=!0,F.value.scrollTop=F.value.scrollHeight,!0)),z=async()=>{if(D()){if(n.is_rental)return x.value=!1,Re(),!1;x.value=!0}else return x.value=!1,!1;ne.value=[];const{pick_lat:t,pick_lng:l,distance:m,duration:p,drop_lat:u,drop_lng:C}=L.data(),f={pick_lat:t,pick_lng:l,distance:m,duration:p,if_dispatch:1,transport_type:n.transport_type};u&&(f.drop_lat=u),C&&(f.drop_lng=C),n.is_out_station&&(f.is_out_station=1,n.trip_start_time&&(f.trip_start_time=n.trip_start_time),n.return_time&&(f.return_time=n.return_time)),f.dispatch=1,R.length>0&&(f.stops=JSON.stringify(R));const w=await Q.post("/dispatch/request/eta",f);O.value=w.data.data},Re=async()=>{O.value=[];const{pick_lat:t,pick_lng:l}=L.data(),m={pick_lat:t,pick_lng:l,transport_type:n.transport_type},p=await Q.post("/dispatch/request/list_packages",m);ue.value=p.data.data},Pe=h(!1),ge=h(s.successMessage||""),re=h(s.alertMessage||""),De=()=>{ge.value="",re.value=""},R=tt([]),Ae=t=>{te[t]&&(console.log("removing",te[t]),te[t].setMap(null)),R.splice(t,1),R.forEach((l,m)=>{addStopMarker(m)}),t>0&&_()},ie=(t,l,m,p,u)=>{l.lat,l.lng,m.lat,m.lng},Ne=t=>t<2?"3 Mins":t>2&&t<5?"5 Mins":t>5&&t<7?"10 Mins":"15 mins",ve=t=>{const l="0123456789bcdefghjkmnpqrstuvwxyz",m=[16,8,4,2,1];let p=!0,u=-90,C=90,f=-180,w=180,j,K;if(t){for(let X=0;X<t.length;X++){let oe=t.charAt(X),W=l.indexOf(oe);for(let ae=0;ae<5;ae++){let se=m[ae];if(p){let H=(f+w)/2;W&se?f=H:w=H}else{let H=(u+C)/2;W&se?u=H:C=H}p=!p}}return j=(u+C)/2,K=(f+w)/2,{lat:j,lon:K}}},Ee=t=>{const l=I.latLng(t.latitude,t.longitude),m=`/image/map/${t.vehicle_type_icon}.png`;M[t.id]||(M[t.id]=I.marker(l,{icon:I.icon({iconUrl:m,iconSize:[30,30]}),draggable:!1}).addTo(g.value)),ie(M[t.id],M[t.id].getLatLng(),l,t.bearing)},Fe=(t,l,m,p)=>{const C=(m-t)*Math.PI/180,f=(p-l)*Math.PI/180,w=Math.sin(C/2)*Math.sin(C/2)+Math.cos(t*Math.PI/180)*Math.cos(m*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 6371*(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)))},pe=async t=>{const l=firebase.database().ref("drivers");O.value.forEach(m=>{m.driver_time=null,m.driver_distance=null}),l.on("value",m=>{m.forEach(p=>{var K,X;const u=p.val(),C=u.g,f=ve(C);if(f){const oe=Fe(t.lat,t.lng,f.lat,f.lon);var w=!0;if(n.vehicle_type){w=!1;var j=(X=(K=O.value)==null?void 0:K.find(W=>W.zone_type_id===n.vehicle_type))==null?void 0:X.type_id;j&&u.vehicle_types&&u.vehicle_types.includes(j)&&(w=!0)}if(oe<=10&&u.is_available&&u.is_active&&ze(u,oe),oe<=10&&u.is_available&&u.is_active&&w){const W=I.latLng(f.lat,f.lon),ae=`/image/map/${u.vehicle_type_icon}.png`,se=I.icon({iconUrl:ae,iconSize:[30,30]});if(M[u.id])ie(M[u.id],M[u.id].getLatLng(),W,u.bearing),M[u.id].setIcon(se);else{const H=I.marker(W,{icon:se}).addTo(g.value);M[u.id]=H,ie(H,H.getLatLng(),W,u.bearing)}}else M[u.id]&&(M[u.id].remove(),delete M[u.id])}})}),l.on("child_changed",m=>{const p=m.val(),u=p.g,C=ve(u);!p.is_active&&C&&O.value.forEach(f=>{p.vehicle_types.some(w=>w===f.id)&&pe({lat:L.pick_lat,lng:L.pick_lng})}),p.lat&&p.lng&&Ee(p)})},ze=(t,l)=>{const m=Ne(l);O.value.forEach(p=>{t.vehicle_types&&t.vehicle_types.includes(p.type_id)&&(!p.driver_distance||p.driver_distance>l)&&(p.driver_time=m)})},ye=async()=>{_e(),Z!==null&&g.value&&g.value.removeControl(Z),V.value&&V.value.remove(),q.value&&q.value.remove(),g.value=I.map("map",{zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,touchZoom:!1}).setView([U.value,ee.value],12),g.value.dragging.disable(),g.value.scrollWheelZoom.disable(),g.value.doubleClickZoom.disable(),g.value.touchZoom.disable(),I.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(g.value),T(()=>n.pick_address,l=>{l||(G.value=[])}),T(()=>R,l=>{l.forEach((m,p)=>{T(()=>R[p].address,u=>{u||(Y[p]=[])})})}),T(()=>n.vehicle_type,async l=>{l&&(pe(),D()?x.value=!0:x.value=!1)}),T(()=>n.transport_type,async l=>{l&&(l=="taxi"?n.goods_type_quantity=null:n.goods_type_quantity=n.goods_type_quantity??0,n.pick_address&&D()&&z())}),T(()=>n.rental_package_id,async l=>{if(l){const p=ue.value.find(u=>u.id===l).typesWithPrice.data;ne.value=p}}),T(()=>n.is_later,async l=>{n.pick_address&&(D(),z())}),T(()=>n.ride_type,async l=>{n.pick_address&&D()&&z()});const t=fe(l=>{l&&n.vehicle_type?(F.value.scrollTop=F.value.scrollHeight,x.value=!0):x.value=!1},300);return T(()=>n.name,async l=>{t(l),n.pick_address&&D()}),T(()=>n.return_time,async l=>{l&&z()}),T(()=>L.pick_lat,async l=>{l&&(z(),D())}),T(()=>L.distance,async l=>{l&&(await z(),await D())}),g},He=async()=>{if(!D())return!1;x.value=!1;const{pick_lat:t,pick_lng:l,drop_lat:m,distance:p,duration:u,drop_lng:C}=L.data();t&&(n.pick_lat=t),l&&(n.pick_lng=l),m&&(n.drop_lat=m),C&&(n.drop_lng=C),p&&(n.distance=p),u&&(n.duration=u),R.length>0&&(n.stops=JSON.stringify(R));try{let f;if(f=await Q.post("/dispatch/create-request",n.data()),f.data.success===!0){let w;N.fire({title:"Booking Successfull",html:"Your Ride has been Booked Successfully.",timer:2e3,timerProgressBar:!0,onBeforeOpen:()=>{N.showLoading(),w=setInterval(()=>{N.getContent().querySelector("b").textContent=N.getTimerLeft()},100)},onClose:()=>{clearInterval(w)}}).then(j=>{j.dismiss===N.DismissReason.timer&&console.log("I was closed by the timer"),x.value=!0}),n.assign_method==1&&lt.get("ongoing-rides/assign/"+f.data.data.id),n.reset(),L.reset(),ye(),ne.value=[],O.value=[]}else re.value=r("failed_to_make_booking_contact_admin")}catch(f){f.response&&f.response.status===422?k.value=f.response.data.errors:(console.error(r("error_creating_vehicle_price"),f),re.value=r("failed_to_make_booking_contact_admin"))}};ot(async()=>{const t={apiKey:s.firebaseSettings.firebase_api_key,authDomain:s.firebaseSettings.firebase_auth_domain,databaseURL:s.firebaseSettings.firebase_database_url,projectId:s.firebaseSettings.firebase_project_id,storageBucket:s.firebaseSettings.firebase_storage_bucket,messagingSenderId:s.firebaseSettings.firebase_messaging_sender_id,appId:s.firebaseSettings.firebase_app_id};firebase.apps.length||firebase.initializeApp(t),await ye(),s.transport_type_for_ride.length>0&&(n.transport_type=s.transport_type_for_ride[0]),s.ride_type_for_ride.length>0&&(n.ride_type=s.ride_type_for_ride[0])});const Oe=h(""),be=h(""),je=at(()=>s.countries.filter(t=>t.name.toLowerCase().includes(be.value.toLowerCase()))),We=t=>{t=="outstation"?(n.is_out_station=1,n.is_rental=0):t=="rental"?(n.is_out_station=0,n.is_rental=1):(n.is_out_station=0,n.is_rental=0),n.ride_type=t},Ze=t=>{le.value=t,n.country=t.dial_code},Ge=fe(async t=>{t.target.value=t.target.value.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1");const l=await Q.get("/dispatch/fetch-user-detail",{params:{mobile:n.mobile}});n.pick_address&&D(),l.data.data?(n.name=l.data.data.name,n.user_id=l.data.data.id):(n.user_id=null,n.name=null)},300);return{form:n,modalShow:Pe,successMessage:ge,alertMessage:re,dismissMessage:De,validationRef:he,validationRules:Be,isPocSame:a,pickupMarker:V,dropMarker:q,stopMarkers:te,pickupSuggestions:G,stopSuggestions:Y,dropSuggestions:J,timer:o,changelater:We,getMinTime:me,packageTypes:ue,getMinReturnTime:()=>{const t=L.duration,l=n.trip_start_time,m=new Date(l);return m.setMinutes(m.getMinutes()+t),m},rentalVehicleTypes:ne,scrollContainer:F,enableBooking:x,fetchPickupSuggestions:Me,fetchDropSuggestions:Le,fetchStopSuggestions:Ce,selectPickupSuggestion:Te,selectDropSuggestion:Ve,selectStopSuggestion:qe,errors:k,mobile:Oe,selectedCountry:le,searchQuery:be,filteredCountries:je,selectCountry:Ze,validateNumber:Ge,showAiportTerminal:Ie,showTrainStationEnterance:Ue,loadVehicleTypes:z,etaParam:L,vehicleTypes:O,makeBooking:He,stopovers:R,removeStopover:Ae}}},ut={class:"row"},pt={class:"col-12 col-lg-6",ref:"scrollContainer",style:{"max-height":"500px","overflow-y":"auto"}},ft={class:"row"},ht={class:"card-title mb-3 flex-grow-1"},gt={class:"col-6"},vt={class:"form-label"},yt={class:"input-group","data-input-flag":""},bt={class:"btn btn-light border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},kt=["src"],St={class:"ms-2 country-codeno"},wt=["placeholder"],Mt={class:"dropdown-menu w-100"},Lt={class:"p-2 px-3 pt-1 searchlist-input"},Ct=["placeholder"],Tt={class:"list-unstyled dropdown-menu-list mb-0"},Vt=["onClick"],qt=["src"],xt={class:"align-middle"},It={class:"col-6"},Ut={class:"mb-3"},Bt={for:"name",class:"form-label"},Rt=["placeholder"],Pt={class:"d-flex align-items-center mt-4"},Dt={class:"card-title mb-3 flex-grow-1"},At={class:"col-6"},Nt={class:"mb-3"},Et={for:"type",class:"form-label"},Ft={disabled:"",value:""},zt={value:"0"},Ht={value:"1"},Ot={class:"col-12"},jt={class:"mb-3"},Wt={for:"type",class:"form-label"},Zt={disabled:"",value:""},Gt=["value"],Yt={class:"mt-4 mb-4"},Qt={class:"card-title mb-3 flex-grow-1"},Jt={class:"form-check form-check-inline"},Kt=["checked"],Xt={class:"form-check-label",for:"later_ride"},$t={class:"form-check form-check-inline"},eo=["checked"],to={class:"form-check-label",for:"rental"},oo={class:"col-12"},ao={class:"mb-3"},so={class:"d-flex align-items-center justify-content-between"},lo={for:"pickup",class:"form-label"},no=["placeholder"],ro={key:0},io=["onClick"],co={class:"mb-3"},_o=["for"],mo={class:"d-flex align-items-center"},uo=["onUpdate:modelValue","placeholder","id","onInput"],po=["onClick"],fo={key:0,class:"text-danger"},ho={key:1,class:"col-12"},go={class:"mb-3"},vo={for:"terminal",class:"form-label"},yo={key:2,class:"col-12"},bo={class:"mb-3"},ko={for:"enterance",class:"form-label"},So={key:3,class:"col-12"},wo={class:"mb-3"},Mo={for:"drop",class:"form-label"},Lo=["placeholder"],Co={key:0},To=["onClick"],Vo={key:4,class:"card-title mb-2 flex-grow-1 mt-4"},qo={key:5,class:"px-2 mb-2"},xo={class:"badge bg-dark-subtle text-dark p-1 fs-12 text-center"},Io={class:"form-check m-2 mx-3"},Uo={class:"form-check-label mt-1",for:"poc"},Bo={key:6,class:"col-6"},Ro={class:"mb-3"},Po={for:"poc_name",class:"form-label"},Do=["placeholder","disabled"],Ao={key:7,class:"col-6"},No={class:"mb-3"},Eo={for:"poc_mobile",class:"form-label"},Fo=["placeholder","disabled"],zo={key:8,class:"card-title mb-2 flex-grow-1 mt-4"},Ho={key:9,class:"col-6"},Oo={class:"mb-3"},jo={for:"goods_type",class:"form-label"},Wo={disabled:"",value:""},Zo=["value"],Go={key:10,class:"col-6"},Yo={class:"mb-3"},Qo={for:"goods_type_quantity",class:"form-label"},Jo=["placeholder"],Ko={key:11,class:"card-title mb-3 flex-grow-1 mt-4"},Xo={key:12,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},$o={class:"mb-3"},ea={for:"rental_package_id",class:"form-label"},ta={disabled:"",value:""},oa=["value"],aa={key:13,class:"col-12"},sa={class:"mb-3"},la={for:"dispatch-datepicker",class:"form-label"},na={key:14,class:"col-12"},ra={class:"mb-3"},ia={for:"dispatch-datepicker",class:"form-label"},da={class:"card-title mb-3 flex-grow-1 mt-4"},ca={key:15,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},_a={class:"mb-3"},ma={class:"d-flex mt-5"},ua=["for"],pa=["id","value"],fa={class:"select-checkbox-btn-content"},ha={class:"w-32 me-4 cursor-pointer"},ga={class:"text-center mt-2 ms-4"},va={class:"w-32 h-32 flex-none image-fit rounded-circle"},ya=["src"],ba={class:"text-center mt-2 amount"},ka={class:"text-center mt-2"},Sa={key:16,class:"card-title mb-3 flex-grow-1 mt-4"},wa={key:17,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},Ma={class:"mb-3"},La={class:"d-flex mt-5"},Ca=["for"],Ta=["id","value"],Va={class:"select-checkbox-btn-content"},qa={class:"w-32 me-4 cursor-pointer"},xa={class:"text-center mt-2 ms-4"},Ia={class:"w-32 h-32 flex-none image-fit rounded-circle"},Ua=["src"],Ba={class:"text-center mt-2 amount"},Ra={class:"text-center mt-2"},Pa={class:"mt-4 mb-4"},Da={class:"card-title mb-3 flex-grow-1"},Aa={class:"form-check form-check-inline"},Na=["checked"],Ea={class:"form-check-label",for:"WithoutinlineRadio1"},Fa={class:"form-check form-check-inline"},za=["checked"],Ha={class:"form-check-label",for:"WithoutinlineRadio2"},Oa={class:"col-lg-12"},ja={class:"text-center"},Wa=["disabled"],Za={class:"col-12 col-lg-6"},Ga={class:"mb-3 text-center m-auto"},Ya={id:"map",style:{height:"500px"}};function Qa(s,r,le,a,Z,U){const ee=A("Head"),V=A("PageHeader"),q=A("BCardHeader"),g=A("flat-pickr"),G=A("FormValidation"),Y=A("BCardBody"),J=A("BCard"),M=A("BCol"),_e=A("BRow"),me=A("Layout");return d(),st(me,null,{default:$(()=>[E(ee,{title:"Taxi Ride"}),E(V,{title:s.$t("book"),pageTitle:s.$t("dispatch"),pageLink:"/dispatch"},null,8,["title","pageTitle"]),E(_e,null,{default:$(()=>[E(M,{lg:"12"},{default:$(()=>[E(J,{"no-body":"",id:"tasksList"},{default:$(()=>[E(q,{class:"border-0"}),E(Y,{class:"border border-dashed border-end-0 border-start-0"},{default:$(()=>[e("form",{onSubmit:r[27]||(r[27]=it((...o)=>s.handleSubmit&&s.handleSubmit(...o),["prevent"]))},[E(G,{form:a.form,rules:a.validationRules,ref:"validationRef"},{default:$(()=>[e("div",ut,[e("div",pt,[e("div",ft,[e("h4",ht,i(s.$t("personal_info")),1),e("div",gt,[e("div",null,[e("label",vt,i(s.$t("mobile")),1),e("div",yt,[e("button",bt,[e("img",{src:a.selectedCountry.flag,alt:"flag",height:"20",class:"country-flagimg rounded"},null,8,kt),e("span",St,i(a.selectedCountry.dial_code),1)]),S(e("input",{type:"text",class:"form-control rounded-end flag-input","onUpdate:modelValue":r[0]||(r[0]=o=>a.form.mobile=o),placeholder:s.$t("enter_number"),onInput:r[1]||(r[1]=(...o)=>a.validateNumber&&a.validateNumber(...o))},null,40,wt),[[P,a.form.mobile]]),e("div",Mt,[e("div",Lt,[S(e("input",{type:"text",class:"form-control form-control-sm border search-countryList",placeholder:s.$t("search_country_name_or_country_code"),"onUpdate:modelValue":r[2]||(r[2]=o=>a.searchQuery=o)},null,8,Ct),[[P,a.searchQuery]])]),e("ul",Tt,[(d(!0),c(y,null,v(a.filteredCountries,o=>(d(),c("li",{key:o.id},[e("a",{href:"javascript:void(0);",class:"dropdown-item notify-item language py-2",onClick:_=>a.selectCountry(o)},[e("img",{src:o.flag,alt:"flag",class:"me-2 rounded",height:"18"},null,8,qt),e("span",xt,i(o.name)+" "+i(o.dial_code),1)],8,Vt)]))),128))])])]),(d(!0),c(y,null,v(a.errors.mobile,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])]),e("div",It,[e("div",Ut,[e("label",Bt,i(s.$t("name")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[3]||(r[3]=o=>a.form.name=o),placeholder:s.$t("enter_name"),id:"name"},null,8,Rt),[[P,a.form.name]]),(d(!0),c(y,null,v(a.errors.name,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])]),e("div",Pt,[e("h4",Dt,i(s.$t("ride_info")),1)]),e("div",At,[e("div",Nt,[e("label",Et,i(s.$t("booking_type")),1),S(e("select",{id:"type",class:"form-select","onUpdate:modelValue":r[4]||(r[4]=o=>a.form.is_later=o)},[e("option",Ft,i(s.$t("choose_type")),1),e("option",zt,i(s.$t("instant_booking")),1),e("option",Ht,i(s.$t("book_later")),1)],512),[[de,a.form.is_later]]),(d(!0),c(y,null,v(a.errors.is_later,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])]),e("div",{class:"col-6",style:nt({display:U.transport_options.length===0?"none":"block"})},[e("div",Ot,[e("div",jt,[e("label",Wt,i(s.$t("transport_type")),1),S(e("select",{id:"type",class:"form-select","onUpdate:modelValue":r[5]||(r[5]=o=>a.form.transport_type=o)},[e("option",Zt,i(s.$t("choose_transport_type")),1),(d(!0),c(y,null,v(U.transport_options,(o,_)=>(d(),c("option",{key:_,value:o},i(o.charAt(0).toUpperCase()+o.slice(1)),9,Gt))),128))],512),[[de,a.form.transport_type]]),(d(!0),c(y,null,v(a.errors.transport_type,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])])],4),e("div",Yt,[e("h4",Qt,i(s.$t("schedule_type")),1),e("div",null,[e("div",Jt,[e("input",{class:"form-check-input",type:"radio",name:"ScheduleType",checked:a.form.ride_type=="regular",onClick:r[6]||(r[6]=o=>a.changelater("regular")),id:"later_ride",value:"later"},null,8,Kt),e("label",Xt,i(s.$t("normal")),1)]),e("div",$t,[e("input",{class:"form-check-input",onClick:r[7]||(r[7]=o=>a.changelater("rental")),type:"radio",name:"ScheduleType",checked:a.form.ride_type=="rental",id:"rental",value:"rental"},null,8,eo),e("label",to,i(s.$t("rental_pack")),1)])])]),e("div",oo,[e("div",ao,[e("div",so,[e("label",lo,i(s.$t("pickup_location")),1)]),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[8]||(r[8]=o=>a.form.pick_address=o),placeholder:s.$t("enter_pickup"),id:"pickup",onInput:r[9]||(r[9]=(...o)=>a.fetchPickupSuggestions&&a.fetchPickupSuggestions(...o)),autocomplete:"off"},null,40,no),[[P,a.form.pick_address]]),a.pickupSuggestions.length?(d(),c("ul",ro,[(d(!0),c(y,null,v(a.pickupSuggestions,(o,_)=>(d(),c("li",{key:_,onClick:B=>a.selectPickupSuggestion(o)},i(o.display_name),9,io))),128))])):b("",!0),(d(!0),c(y,null,v(a.errors.pick_address,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])]),a.form.ride_type=="regular"?(d(!0),c(y,{key:0},v(a.stopovers,(o,_)=>(d(),c("div",{class:"col-12",key:_},[e("div",co,[e("label",{for:`stop-${_}`,class:"form-label"},i(s.$t("stop_location")),9,_o),e("div",mo,[S(e("input",{type:"text",class:"form-control mx-1","onUpdate:modelValue":B=>o.address=B,placeholder:"Enter stop "+(_+1),id:`stop-${_}`,onInput:B=>a.fetchStopSuggestions(_),autocomplete:"off"},null,40,uo),[[P,o.address]]),e("i",{class:"bx bx-trash text-danger fs-22 btn",onClick:B=>a.removeStopover(_)},null,8,po)]),a.form.errors[`stop-${_}`]?(d(),c("span",fo,i(a.form.errors[`stop-${_}`]),1)):b("",!0)])]))),128)):b("",!0),a.showAiportTerminal?(d(),c("div",ho,[e("div",go,[e("label",vo,i(s.$t("aiport_terminal_info")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[10]||(r[10]=o=>a.form.terminal=o),placeholder:"$t('enter_terminal_info')",id:"terminal"},null,512),[[P,a.form.terminal]])])])):b("",!0),a.showTrainStationEnterance?(d(),c("div",yo,[e("div",bo,[e("label",ko,i(s.$t("station_enterance_info")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[11]||(r[11]=o=>a.form.enterance=o),placeholder:"$t('enter_enterance_info')",id:"enterance"},null,512),[[P,a.form.enterance]])])])):b("",!0),a.form.ride_type=="regular"?(d(),c("div",So,[e("div",wo,[e("label",Mo,i(s.$t("drop_location")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[12]||(r[12]=o=>a.form.drop_address=o),placeholder:s.$t("enter_drop"),onInput:r[13]||(r[13]=(...o)=>a.fetchDropSuggestions&&a.fetchDropSuggestions(...o)),id:"drop"},null,40,Lo),[[P,a.form.drop_address]]),a.dropSuggestions.length?(d(),c("ul",Co,[(d(!0),c(y,null,v(a.dropSuggestions,(o,_)=>(d(),c("li",{key:_,onClick:B=>a.selectDropSuggestion(o)},i(o.display_name),9,To))),128))])):b("",!0),(d(!0),c(y,null,v(a.errors.drop_address,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])])):b("",!0),a.form.transport_type=="delivery"?(d(),c("h4",Vo,i(s.$t("poc_info")),1)):b("",!0),a.form.transport_type=="delivery"?(d(),c("div",qo,[e("span",xo,[e("div",Io,[S(e("input",{class:"form-check-input",type:"checkbox",id:"poc","onUpdate:modelValue":r[14]||(r[14]=o=>a.isPocSame=o)},null,512),[[rt,a.isPocSame]]),e("label",Uo,i(s.$t("check_if_poc_info_as_same_as_personal_info")),1)])])])):b("",!0),a.form.transport_type=="delivery"?(d(),c("div",Bo,[e("div",Ro,[e("label",Po,i(s.$t("drop_poc_name")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[15]||(r[15]=o=>a.form.drop_poc_name=o),placeholder:s.$t("enter_poc_name"),id:"poc_name",disabled:a.isPocSame},null,8,Do),[[P,a.form.drop_poc_name]]),(d(!0),c(y,null,v(a.errors.drop_poc_name,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])])):b("",!0),a.form.transport_type=="delivery"?(d(),c("div",Ao,[e("div",No,[e("label",Eo,i(s.$t("drop_poc_mobile")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[16]||(r[16]=o=>a.form.drop_poc_mobile=o),placeholder:s.$t("enter_poc_mobile"),id:"poc_mobile",disabled:a.isPocSame},null,8,Fo),[[P,a.form.drop_poc_mobile]]),(d(!0),c(y,null,v(a.errors.drop_poc_mobile,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])])):b("",!0),a.form.transport_type=="delivery"?(d(),c("h4",zo,i(s.$t("select_goods")),1)):b("",!0),a.form.transport_type=="delivery"?(d(),c("div",Ho,[e("div",Oo,[e("label",jo,i(s.$t("goods_type")),1),S(e("select",{id:"goods_type",class:"form-select","onUpdate:modelValue":r[17]||(r[17]=o=>a.form.goods_type_id=o)},[e("option",Wo,i(s.$t("choose_type")),1),(d(!0),c(y,null,v(le.goodsTypes,o=>(d(),c("option",{key:o.id,value:o.id},i(o.goods_type_name),9,Zo))),128))],512),[[de,a.form.goods_type_id]]),(d(!0),c(y,null,v(a.errors.goods_type_id,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])])):b("",!0),a.form.transport_type=="delivery"?(d(),c("div",Go,[e("div",Yo,[e("label",Qo,i(s.$t("goods_quantity")),1),S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":r[18]||(r[18]=o=>a.form.goods_type_quantity=o),placeholder:s.$t("enter_quantity"),id:"goods_type_quantity"},null,8,Jo),[[P,a.form.goods_type_quantity]]),(d(!0),c(y,null,v(a.errors.goods_type_quantity,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])])):b("",!0),a.form.is_rental==1?(d(),c("h4",Ko,i(s.$t("select_pack")),1)):b("",!0),a.form.is_rental==1?(d(),c("div",Xo,[e("div",$o,[e("label",ea,i(s.$t("rental_package_id")),1),S(e("select",{id:"rental_package_id",class:"form-select","onUpdate:modelValue":r[19]||(r[19]=o=>a.form.rental_package_id=o)},[e("option",ta,i(s.$t("choose_type")),1),(d(!0),c(y,null,v(a.packageTypes,o=>(d(),c("option",{key:o.id,value:o.id},i(o.package_name),9,oa))),128))],512),[[de,a.form.rental_package_id]]),(d(!0),c(y,null,v(a.errors.rental_package_id,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])])):b("",!0),a.form.is_later==="1"?(d(),c("div",aa,[e("div",sa,[e("label",la,i(s.$t("date")),1),E(g,{placeholder:s.$t("select_date"),modelValue:a.form.trip_start_time,"onUpdate:modelValue":r[20]||(r[20]=o=>a.form.trip_start_time=o),config:Z.dateTimeConfig,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"]),(d(!0),c(y,null,v(a.errors.trip_start_time,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])])):b("",!0),a.form.is_round_trip==1&&a.form.is_out_station==1?(d(),c("div",na,[e("div",ra,[e("label",ia,i(s.$t("return_time")),1),E(g,{placeholder:s.$t("return_time"),modelValue:a.form.return_time,"onUpdate:modelValue":r[21]||(r[21]=o=>a.form.return_time=o),config:U.dateTimeConfigReturnTime,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"])]),(d(!0),c(y,null,v(a.errors.return_time,(o,_)=>(d(),c("span",{key:_,class:"text-danger"},i(o),1))),128))])):b("",!0),e("h4",da,i(s.$t("select_vehicle")),1),a.vehicleTypes.length>0?(d(),c("div",ca,[e("div",_a,[e("div",ma,[(d(!0),c(y,null,v(a.vehicleTypes,(o,_)=>(d(),c("div",{key:_,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+o.zone_type_id,class:"select-checkbox-btn-wrapper"},[S(e("input",{id:"vehicle_"+o.zone_type_id,name:"types",type:"radio",value:o.zone_type_id,"onUpdate:modelValue":r[22]||(r[22]=B=>a.form.vehicle_type=B),class:"select-checkbox-btn-input"},null,8,pa),[[ce,a.form.vehicle_type]]),e("span",fa,[e("a",ha,[e("div",ga,[r[28]||(r[28]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),Se(i(o.driver_time||"--"),1)]),e("div",va,[e("img",{alt:"",class:"rounded-circle img-fluid",src:o.vehicle_icon},null,8,ya)]),e("div",ba,i(o.total_with_currency),1),e("div",ka,i(o.name),1)])])],8,ua)]))),128))])])])):b("",!0),a.rentalVehicleTypes.length>0?(d(),c("h4",Sa,i(s.$t("select_vehicle")),1)):b("",!0),a.rentalVehicleTypes.length>0?(d(),c("div",wa,[e("div",Ma,[e("div",La,[(d(!0),c(y,null,v(a.rentalVehicleTypes,(o,_)=>(d(),c("div",{key:_,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+o.zone_type_id,class:"select-checkbox-btn-wrapper"},[S(e("input",{id:"vehicle_"+o.zone_type_id,name:"types",type:"radio",value:o.zone_type_id,"onUpdate:modelValue":r[23]||(r[23]=B=>a.form.vehicle_type=B),class:"select-checkbox-btn-input"},null,8,Ta),[[ce,a.form.vehicle_type]]),e("span",Va,[e("a",qa,[e("div",xa,[r[29]||(r[29]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),Se(i(o.driver_time||"--"),1)]),e("div",Ia,[e("img",{alt:"",class:"rounded-circle img-fluid",src:o.icon},null,8,Ua)]),e("div",Ba,i(o.fare_amount),1),e("div",Ra,i(o.name),1)])])],8,Ca)]))),128))])])])):b("",!0),e("div",Pa,[e("h4",Da,i(s.$t("assign")),1),e("div",null,[e("div",Aa,[S(e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",checked:a.form.assign_method==1,id:"WithoutinlineRadio1",value:"1","onUpdate:modelValue":r[24]||(r[24]=o=>a.form.assign_method=o)},null,8,Na),[[ce,a.form.assign_method]]),e("label",Ea,i(s.$t("manual_assign")),1)]),e("div",Fa,[S(e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio2",value:"0","onUpdate:modelValue":r[25]||(r[25]=o=>a.form.assign_method=o),checked:a.form.assign_method==0},null,8,za),[[ce,a.form.assign_method]]),e("label",Ha,i(s.$t("automatic_assign")),1)])])]),e("div",Oa,[e("div",ja,[e("button",{type:"submit",disabled:!a.enableBooking,onClick:r[26]||(r[26]=(...o)=>a.makeBooking&&a.makeBooking(...o)),class:"btn btn-primary"},i(s.$t("make_booking")),9,Wa)])])])],512),e("div",Za,[e("div",Ga,[e("div",Ya,i(s.$t("map_loading")),1),r[30]||(r[30]=e("div",{id:"route-directions"},null,-1))])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const as=Ye(mt,[["render",Qa]]);export{as as default};
