import{_ as x,O as T,P as j,Z as F,z as H,U as y,a as I,C as R,T as E,r as P,D as O,g as m,o as u,x as N,w as a,k as r,l as e,i as _,J as c,B,F as U,L as V,q as b,M as h,K as W,n as D}from"./vendor-ddfbd976.js";import{L as q}from"./main-306a5ea6.js";import{P as z}from"./page-header-2dc95532.js";import{i as A}from"./app-042fb454.js";import{_ as J}from"./UserWebMenu-2e0e812c.js";import"./footer-e648049d.js";const K=""+new URL("user-dummy-img-c16f7d26.jpg",import.meta.url).href;const Z={components:{Layout:q,Multiselect:T,flatPickr:j,PageHeader:z,Head:F,Link:H,Swal:y,axios:I,UserWebMenu:J},data(){return{user:null}},props:{user:Object,successMessage:String},setup(t){const{t:s}=R(),l=E({name:t.user.name||"",mobile:t.user.mobile||"",email:t.user.email||"",gender:t.user.gender||"",password:t.user&&t.user.password||"",confirm_password:t.user&&t.user.password||"",profile_picture:null}),o=P(t.user.profile_picture||"/assets/images/users/user-dummy-img.jpg"),p=P({}),S=P(t.successMessage||""),k=n=>{const i=n.target.files[0];if(i){l.profile_picture=i;const f=new FileReader;f.onload=w=>{o.value=w.target.result},f.readAsDataURL(i)}},C=()=>{const n={};return l.mobile||(n.mobile=s("this_field_is_required")),n},v=async()=>{if(p.value=C(),Object.keys(p.value).length>0)return;const n=new FormData;n.append("name",l.name),n.append("mobile",l.mobile),n.append("email",l.email),n.append("gender",l.gender),l.profile_picture&&n.append("profile_picture",l.profile_picture);try{await l.post(route("user.updateProfile"),{data:n,onSuccess:()=>{y.fire({icon:"success",title:s("profile_updated_successfully")})},onError:i=>{p.value=i}})}catch(i){console.error(s("an_error_occurred_during_form_submission"),i)}},g=async()=>{const n=new FormData;if(l.password!==l.confirm_password){y.fire({title:"Error!",text:"Passwords do not match!",icon:"error"});return}n.append("password",l.password),n.append("confirm_password",l.confirm_password),l.profile_picture&&n.append("profile_picture",l.profile_picture);try{await l.post(route("user.updateProfile"),{data:n,onSuccess:()=>{y.fire({icon:"success",title:s("password_updated_successfully")}),l.password="",l.confirm_password=""},onError:i=>{p.value=i}})}catch(i){console.error(s("an_error_occurred_during_form_submission"),i)}};return O(async()=>{await A("en")}),{t:s,form:l,profilePhotoUrl:o,onProfileImageChange:k,handleSubmit:v,errors:p,successMessage:S,handlePasswordSubmit:g}}},G={class:"text-center"},Q={class:"profile-user position-relative d-inline-block mx-auto mb-4"},X=["src"],Y={class:"avatar-xs p-0 rounded-circle profile-photo-edit"},$={key:0,class:"alert alert-success"},ee={key:1,class:"alert alert-danger"},se={class:"mb-3"},oe={for:"name",class:"form-label"},te=["placeholder"],re={class:"mb-3"},ae={for:"gender"},le={value:"",disabled:""},ne={value:"male"},ie={value:"female"},de={value:"others"},ce={class:"mb-3"},me={for:"mobile",class:"form-label"},ue=["placeholder"],_e={class:"mb-3"},fe={for:"email",class:"form-label"},pe=["placeholder"],be={class:"col-sm-auto ms-auto"},ge={class:"list-grid-nav hstack gap-1 float-end"},he={type:"submit",class:"btn btn-success"},ve={key:0,class:"alert alert-success"},we={key:1,class:"alert alert-danger"},ye={class:"mb-3"},Be={for:"password",class:"form-label"},ke=["placeholder"],Ce={class:"mb-3"},Me={for:"confirm_password",class:"form-label"},Pe=["placeholder"],Se={class:"col-sm-auto ms-auto"},Ue={class:"list-grid-nav hstack gap-1 float-end"},Ve={type:"submit",class:"btn btn-success"};function De(t,s,l,o,p,S){const k=m("Head"),C=m("UserWebMenu"),v=m("BCardHeader"),g=m("BCardBody"),n=m("BCard"),i=m("BCol"),f=m("BRow"),w=m("BTab"),L=m("BTabs");return u(),N(n,null,{default:a(()=>[r(k,{title:"Taxi Ride"}),r(v,{class:"border-0"},{default:a(()=>[r(C,{user:l.user},null,8,["user"])]),_:1}),r(f,null,{default:a(()=>[r(i,{lg:"12"},{default:a(()=>[r(n,{"no-body":"",id:"tasksList"},{default:a(()=>[r(v,{class:"border-0"},{default:a(()=>s[9]||(s[9]=[e("div",{class:"row g-2"},[e("div",{class:"col-sm-4"})],-1)])),_:1,__:[9]}),r(g,{class:"border border-dashed border-end-0 border-start-0"},{default:a(()=>[s[11]||(s[11]=e("div",{class:"position-relative mx-n4 mt-n4"},[e("div",{class:"profile-wid-bg profile-setting-img"},[e("img",{src:K,class:"profile-wid-img",alt:""})])],-1)),r(f,null,{default:a(()=>[r(i,{xxl:"3"},{default:a(()=>[r(n,{"no-body":"",class:"mt-n5"},{default:a(()=>[r(g,{class:"p-4"},{default:a(()=>[e("div",G,[e("div",Q,[e("img",{src:o.profilePhotoUrl,class:"rounded-circle avatar-xl img-thumbnail user-profile-image",alt:"user-profile-image"},null,8,X),e("div",Y,[e("input",{id:"profile-img-file-input",type:"file",class:"profile-img-file-input",onChange:s[0]||(s[0]=(...d)=>o.onProfileImageChange&&o.onProfileImageChange(...d))},null,32),s[10]||(s[10]=e("label",{for:"profile-img-file-input",class:"profile-photo-edit avatar-xs"},[e("span",{class:"avatar-title rounded-circle bg-light text-body"},[e("i",{class:"ri-camera-fill"})])],-1))])])])]),_:1})]),_:1})]),_:1}),r(i,{xxl:"9"},{default:a(()=>[r(n,{"no-body":"",class:"mt-xxl-n5"},{default:a(()=>[r(g,{class:"p-4 pt-2"},{default:a(()=>[r(L,{"nav-class":"nav-tabs-custom rounded border-bottom-0"},{default:a(()=>[r(w,{class:"nav-item",title:t.$t("personal_details"),active:""},{default:a(()=>[e("form",{onSubmit:s[5]||(s[5]=D((...d)=>o.handleSubmit&&o.handleSubmit(...d),["prevent"]))},[o.successMessage?(u(),_("div",$,c(o.successMessage),1)):B("",!0),Object.keys(o.errors).length?(u(),_("div",ee,[e("ul",null,[(u(!0),_(U,null,V(o.errors,(d,M)=>(u(),_("li",{key:M},c(d),1))),128))])])):B("",!0),r(f,{class:"pt-4"},{default:a(()=>[r(i,{lg:"6"},{default:a(()=>[e("div",se,[e("label",oe,c(t.$t("name")),1),b(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>o.form.name=d),type:"text",class:"form-control",id:"name",placeholder:t.$t("enter_name")},null,8,te),[[h,o.form.name]])])]),_:1}),r(i,{lg:"6"},{default:a(()=>[e("div",re,[e("label",ae,c(o.t("gender")),1),b(e("select",{"onUpdate:modelValue":s[2]||(s[2]=d=>o.form.gender=d),id:"gender",class:"form-control"},[e("option",le,c(t.$t("choose_gender")),1),e("option",ne,c(t.$t("male")),1),e("option",ie,c(t.$t("female")),1),e("option",de,c(t.$t("others")),1)],512),[[W,o.form.gender]])])]),_:1}),r(i,{lg:"6"},{default:a(()=>[e("div",ce,[e("label",me,c(t.$t("mobile")),1),b(e("input",{"onUpdate:modelValue":s[3]||(s[3]=d=>o.form.mobile=d),type:"text",class:"form-control",id:"mobile",placeholder:t.$t("enter_number")},null,8,ue),[[h,o.form.mobile]])])]),_:1}),r(i,{lg:"6"},{default:a(()=>[e("div",_e,[e("label",fe,c(t.$t("email")),1),b(e("input",{"onUpdate:modelValue":s[4]||(s[4]=d=>o.form.email=d),type:"email",class:"form-control",id:"email",placeholder:t.$t("enter_email")},null,8,pe),[[h,o.form.email]])])]),_:1})]),_:1}),e("div",be,[e("div",ge,[e("button",he,c(t.$t("update")),1)])])],32)]),_:1},8,["title"]),r(w,{class:"nav-item",title:t.$t("manage_password")},{default:a(()=>[e("form",{onSubmit:s[8]||(s[8]=D((...d)=>o.handlePasswordSubmit&&o.handlePasswordSubmit(...d),["prevent"]))},[o.successMessage?(u(),_("div",ve,c(o.successMessage),1)):B("",!0),Object.keys(o.errors).length?(u(),_("div",we,[e("ul",null,[(u(!0),_(U,null,V(o.errors,(d,M)=>(u(),_("li",{key:M},c(d),1))),128))])])):B("",!0),r(f,{class:"pt-4"},{default:a(()=>[r(i,{lg:"6"},{default:a(()=>[e("div",ye,[e("label",Be,c(t.$t("password")),1),b(e("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[6]||(s[6]=d=>o.form.password=d),placeholder:t.$t("enter_password")},null,8,ke),[[h,o.form.password]])])]),_:1}),r(i,{lg:"6"},{default:a(()=>[e("div",Ce,[e("label",Me,c(t.$t("confirm_password")),1),b(e("input",{type:"password",class:"form-control",id:"confirm_password","onUpdate:modelValue":s[7]||(s[7]=d=>o.form.confirm_password=d),placeholder:t.$t("confirm_password")},null,8,Pe),[[h,o.form.confirm_password]])])]),_:1})]),_:1}),e("div",Se,[e("div",Ue,[e("button",Ve,c(t.$t("update")),1)])])],32)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1,__:[11]})]),_:1})]),_:1})]),_:1})]),_:1})}const Ie=x(Z,[["render",De],["__scopeId","data-v-9c5b4d7d"]]);export{Ie as default};
