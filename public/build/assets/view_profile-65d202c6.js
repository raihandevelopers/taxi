import{_ as A,Z as E,O as z,P as R,z as q,C as I,r,T as J,D as K,Q,g as u,o as d,x as V,w as c,a as H,N as Z,k as m,l as e,J as s,y as v,n as G,q as D,M as W,i as f,B as F,K as j,L as O,F as U}from"./vendor-ddfbd976.js";import{L as X}from"./main-306a5ea6.js";import{P as Y}from"./page-header-2dc95532.js";import{P as $}from"./Pagination-f095ae3c.js";import{s as ee}from"./search-2c17aadd.js";import{s as te}from"./searchbar-3acbc236.js";import{g as se}from"./getChartColorsArray-cf54c295.js";import{_ as ae}from"./search-file-ab3e1046.js";import"./footer-e648049d.js";import"./app-042fb454.js";const oe={data(){},components:{Layout:X,PageHeader:Y,Head:E,Pagination:$,Multiselect:z,flatPickr:R,Link:q,search:ee,searchbar:te,getChartColorsArray:se},props:{successMessage:String,alertMessage:String,driver:Object,currency:String,app_for:String,driver_date:Object,driver_wallet:Object},setup(a){const{t}=I();r([]),r([]);const n=r("");r("");const o=J({all:"",locked:"",limit:10}),S=r(""),k=r(""),M=r({}),_=r({amount:"",operation:"add"}),C=r(""),g=r(!1),h=()=>{_.value.amount?(C.value="",g.value=!0):g.value=!1},P=async()=>{if(h(),!!g.value)try{let i=new FormData;for(let x in _.value)i.append(x,_.value[x]);(await H.post(`/approved-drivers/wallet-add-amount/${a.driver.id}`,i)).status===200?(S.value=t("amount_adjusted_successfully"),_.value.amount="",_.value.operation="add",Z.get(`/negative-balance-drivers/view-profile/${a.driver.id}`)):k.value=t("failed_to_adjust_amount")}catch(i){i.response&&i.response.status===422?M.value=i.response.data.errors:(console.error(t("error_adjusting_amount"),i),k.value=t("failed_to_adjust_amount"))}};K(()=>{}),Q(()=>_.value.amount,h);const p=r([]),y=r({});r([]),r({});const B=r({}),w=async(i=1)=>{try{const b=o.data();b.search=n.value,b.page=i;const x=await H.get(`/approved-drivers/wallet-history/list/${a.driver.id}`,{params:b});p.value=x.data.results,y.value=x.data.paginator,T(y.value.total)}catch(b){console.error(t("error_fetching_first_list_of_data"),b)}},l=i=>a.app_for&&a.app_for=="demo"?"***********":i.mobile_number,L=i=>a.app_for&&a.app_for=="demo"?"***********":i.email,N=async i=>{w(i)},T=()=>{B.value=[10,25,50,100,200,500]};return{form:_,validationMessage:C,isAmountValid:g,handleSubmit:P,searchTerm1:n,results1:p,mobileFromUser:l,emailFromUser:L,paginator1:y,fetchDatas1:w,handlePageChanged1:N,successMessage:S,alertMessage:k,errors:M,paginatorOption:B,changeEntriesPerPage:()=>{w()},filter1:o}},mounted(){this.fetchDatas1()}},le={class:"row"},ne={class:"col-sm-4 mt-3 profile-border"},ie={class:"d-flex align-items-center"},re=["src"],de={class:"ms-2"},ce={class:"col-sm-3 mt-4 profile-border"},me={class:"d-flex align-items-center"},ue={class:"d-flex align-items-center"},_e={class:"d-flex align-items-center"},ve={class:"col-sm-5 mt-3"},fe={class:"d-flex align-items-center"},ge=["src"],be={class:"ms-2"},he={class:"nav nav-tabs mt-4",role:"tablist"},pe={class:"nav-item"},ye={class:"nav-link active","data-bs-toggle":"tab",href:"#payment-history",role:"tab","aria-selected":"false"},we={class:"tab-pane p-3",id:"payment-history",role:"tabpanel"},xe={class:"row row-cols-lg-3 row-cols-1"},ke={class:"col"},Me={class:"card card-body border card-hover"},Ce={class:"d-flex"},Pe={class:"mb-1"},Be={class:"card-text text-muted"},Se={class:"col"},Le={class:"card card-body border card-hover"},Ve={class:"d-flex"},De={class:"mb-1"},Fe={class:"card-text text-muted"},He={class:"col"},je={class:"card card-body border card-hover"},Oe={class:"d-flex"},Ue={class:"mb-1"},Ne={class:"card-text text-muted"},Te={class:"row p-3"},Ae={class:"col-sm-6"},Ee={class:"mb-3"},ze={for:"amount",class:"form-label"},Re=["placeholder"],qe={key:0,class:"text-danger"},Ie={class:"col-sm-6"},Je={class:"mb-3"},Ke={for:"operation",class:"form-label"},Qe={value:"add"},Ze={value:"subtract"},Ge={class:"col-lg-12"},We={class:"text-end"},Xe=["disabled"],Ye={class:"d-flex align-items-center mt-3"},$e={class:"me-2 text-muted"},et=["value"],tt={class:"ms-2 text-muted"},st={class:"table-responsive mt-5"},at={class:"table align-middle position-relative table-nowrap"},ot={class:"table-active"},lt={scope:"col"},nt={scope:"col"},it={scope:"col"},rt={scope:"col"},dt={scope:"col"},ct={key:0},mt={key:1},ut={colspan:"7",class:"text-center"},_t={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},vt={class:"alert-content"},ft={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},gt={class:"alert-content"};function bt(a,t,n,o,S,k){const M=u("Head"),_=u("PageHeader"),C=u("BCardHeader"),g=u("BCard"),h=u("BCardBody"),P=u("BCol"),p=u("BBadge"),y=u("Pagination"),B=u("BRow"),w=u("Layout");return d(),V(w,null,{default:c(()=>[m(M,{title:"Driver Profile"}),m(_,{title:a.$t("driver_profile"),pageTitle:a.$t("driver_profile"),pageLink:"/negative-balance-drivers"},null,8,["title","pageTitle"]),m(B,null,{default:c(()=>[m(P,{lg:"12"},{default:c(()=>[m(g,{"no-body":"",id:"tasksList"},{default:c(()=>[m(C,{class:"border-0"},{default:c(()=>[e("div",le,[e("div",ne,[e("div",ie,[e("div",null,[e("img",{class:"rounded-circle avatar-xl",alt:"200x200",src:n.driver.profile_picture},null,8,re)]),e("div",de,[e("h5",null,s(n.driver.name),1)])])]),e("div",ce,[e("div",me,[t[7]||(t[7]=e("i",{class:"ri-phone-line",style:{"font-size":"20px"}},null,-1)),t[8]||(t[8]=v("    ")),e("span",null,s(o.mobileFromUser(n.driver)),1)]),e("div",ue,[t[9]||(t[9]=e("i",{class:"ri-mail-line",style:{"font-size":"20px"}},null,-1)),t[10]||(t[10]=v("    ")),e("span",null,s(o.emailFromUser(n.driver)),1)]),e("div",_e,[t[11]||(t[11]=e("i",{class:"ri-logout-box-r-line",style:{"font-size":"20px"}},null,-1)),t[12]||(t[12]=v("    ")),e("span",null,s(n.driver_date),1)])]),e("div",ve,[e("div",fe,[e("div",null,[e("img",{class:"rounded-circle avatar-xl",alt:"200x200",src:n.driver.vehicle_type_image},null,8,ge)]),e("div",be,[e("h5",null,s(n.driver.vehicle_type_name),1),e("p",null,s(n.driver.car_make_name),1),e("p",null,s(n.driver.car_model_name),1),e("p",null,s(n.driver.car_number),1)])])])]),t[13]||(t[13]=e("div",{class:"border-bottom mt-4"},null,-1)),e("div",null,[e("ul",he,[e("li",pe,[e("a",ye,s(a.$t("payment_history")),1)])])])]),_:1,__:[13]})]),_:1}),e("div",we,[m(g,null,{default:c(()=>[m(h,null,{default:c(()=>[e("div",xe,[e("div",ke,[e("div",Me,[t[14]||(t[14]=e("div",{class:"d-flex mb-4 align-items-center"},[e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-success-subtle rounded-circle fs-2"},[e("i",{class:"bx bx-money text-success icon-lg"})])])])],-1)),e("div",Ce,[e("h3",Pe,s(n.currency[0])+" "+s(n.driver_wallet.amount_added??0),1)]),e("h5",Be,s(a.$t("total_amount")),1)])]),e("div",Se,[e("div",Le,[t[15]||(t[15]=e("div",{class:"d-flex mb-4 align-items-center"},[e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-danger-subtle rounded-circle fs-2"},[e("i",{class:"bx bx-money text-danger icon-lg"})])])])],-1)),e("div",Ve,[e("h3",De,s(n.currency[0])+" "+s(n.driver_wallet.amount_spent??0),1)]),e("h5",Fe,s(a.$t("spend_amount")),1)])]),e("div",He,[e("div",je,[t[16]||(t[16]=e("div",{class:"d-flex mb-4 align-items-center"},[e("div",null,[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-primary-subtle rounded-circle fs-2"},[e("i",{class:"bx bx-money text-primary icon-lg"})])])])],-1)),e("div",Oe,[e("h3",Ue,s(n.currency[0])+" "+s(n.driver_wallet.amount_balance??0),1)]),e("h5",Ne,s(a.$t("balance_amount")),1)])])])]),_:1})]),_:1}),m(g,null,{default:c(()=>[m(h,null,{default:c(()=>[e("form",{onSubmit:t[2]||(t[2]=G((...l)=>o.handleSubmit&&o.handleSubmit(...l),["prevent"]))},[e("div",Te,[e("div",Ae,[e("div",Ee,[e("label",ze,s(a.$t("amount")),1),D(e("input",{type:"text",class:"form-control",placeholder:a.$t("enter_amount"),id:"amount","onUpdate:modelValue":t[0]||(t[0]=l=>o.form.amount=l)},null,8,Re),[[W,o.form.amount]]),o.validationMessage?(d(),f("div",qe,s(o.validationMessage),1)):F("",!0)])]),e("div",Ie,[e("div",Je,[e("label",Ke,s(a.$t("operation")),1),D(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.form.operation=l),class:"form-control",id:"operation"},[e("option",Qe,s(a.$t("add")),1),e("option",Ze,s(a.$t("subtract")),1)],512),[[j,o.form.operation]])])]),e("div",Ge,[e("div",We,[e("button",{type:"submit",class:"btn btn-primary",disabled:!o.isAmountValid},s(a.$t("submit")),9,Xe)])])])],32),m(P,{md:"3"},{default:c(()=>[e("div",Ye,[e("label",$e,s(a.$t("show")),1),D(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.filter1.limit=l),onChange:t[4]||(t[4]=(...l)=>o.changeEntriesPerPage&&o.changeEntriesPerPage(...l)),class:"form-select form-select-sm w-auto"},[(d(!0),f(U,null,O(o.paginatorOption,l=>(d(),f("option",{key:l,value:l},s(l),9,et))),128))],544),[[j,o.filter1.limit]]),e("label",tt,s(a.$t("entries")),1)])]),_:1}),e("div",st,[e("table",at,[e("thead",ot,[e("tr",null,[e("th",lt,s(a.$t("date")),1),e("th",nt,s(a.$t("amount")),1),e("th",it,s(a.$t("driver_name")),1),e("th",rt,s(a.$t("remarks")),1),e("th",dt,s(a.$t("status")),1)])]),o.results1.length>0?(d(),f("tbody",ct,[(d(!0),f(U,null,O(o.results1,(l,L)=>(d(),f("tr",{key:L},[e("td",null,s(l.created_at),1),e("td",null,s(n.currency[0])+s(l.amount??"-"),1),e("td",null,s(n.driver.name),1),e("td",null,s(l.remarks),1),e("td",null,[l.is_credit==1?(d(),V(p,{key:0,variant:"success",class:"text-uppercase"},{default:c(()=>[v(s(a.$t("credited")),1)]),_:1})):(d(),V(p,{key:1,variant:"danger",class:"text-uppercase"},{default:c(()=>[v(s(a.$t("debited")),1)]),_:1}))])]))),128))])):(d(),f("tbody",mt,[e("tr",null,[e("td",ut,[t[17]||(t[17]=e("img",{src:ae,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,s(a.$t("no_data_found")),1)])])]))]),m(y,{paginator:o.paginator1,onPageChanged:o.handlePageChanged1},null,8,["paginator","onPageChanged"])])]),_:1})]),_:1})])]),_:1})]),_:1}),e("div",null,[o.successMessage?(d(),f("div",_t,[e("div",vt,[t[18]||(t[18]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[19]||(t[19]=v()),t[20]||(t[20]=e("strong",null,"Success",-1)),v(" - "+s(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[5]||(t[5]=(...l)=>a.dismissMessage&&a.dismissMessage(...l)),"aria-label":"Close Success Message"})])])):F("",!0),o.alertMessage?(d(),f("div",ft,[e("div",gt,[t[21]||(t[21]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[22]||(t[22]=v()),t[23]||(t[23]=e("strong",null,"Alert",-1)),v(" - "+s(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[6]||(t[6]=(...l)=>a.dismissMessage&&a.dismissMessage(...l)),"aria-label":"Close Alert Message"})])])):F("",!0)])]),_:1})}const Lt=A(oe,[["render",bt]]);export{Lt as default};
