import{_ as j,Z as G,O as J,P as K,z as Q,C as W,r as _,T as X,R as $,g as c,S as ee,o as d,x as A,w as u,a as E,U as b,N as te,k as i,l as t,J as r,q as I,K as se,i as m,L as V,F,y as w,B as P,p as oe,n as Z}from"./vendor-ddfbd976.js";import{L as ae}from"./main-306a5ea6.js";import{P as ne}from"./page-header-2dc95532.js";import{P as le}from"./Pagination-f095ae3c.js";import{s as ie}from"./searchbar-3acbc236.js";import{l as re}from"./footer-e648049d.js";import{_ as ce}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const de={data(){return{rightOffcanvas:!1}},components:{Layout:ae,PageHeader:ne,Head:G,Pagination:le,Multiselect:J,flatPickr:K,Link:Q,searchbar:ie},props:{successMessage:String,alertMessage:String,countries:Array,timeZones:Array,app_for:String,serviceLocations:{type:Object,required:!0}},setup(o){const{t:e}=W(),v=_(""),s=X({unit:null,country:null,timezone:null,status:null,limit:10}),y=_([]),B=_({}),C=_(!1),p=_(!1),k=_(null),D=_(o.timeZones),L=_(o.serviceLocations),S=_({}),M=_(o.successMessage||""),g=_(o.alertMessage||""),H=()=>{M.value="",g.value=""},T=()=>{p.value=!0},N=()=>{s.reset(),f(),p.value=!1},O=()=>{C.value=!1},x=async l=>{try{await E.delete(`/service-locations/delete/${l}`);const n=y.value.findIndex(h=>h.id===l);n!==-1&&y.value.splice(n,1),C.value=!1,b.fire(e("success"),e("service_location_deleted_successfully"),"success")}catch(n){n.response&&n.response.status==403&&(g.value=n.response.data.alertMessage,setTimeout(()=>{g.value=""},5e3)),b.fire(e("error"),e("failed_to_delete_service_location"),"error")}},a=async l=>{b.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async n=>{if(n.isConfirmed)try{await x(l)}catch(h){console.error(e("error_deleting_data"),h),b.fire(e("error"),e("failed_to_delete_the_data"),"error")}})},z=async l=>{v.value=l,f()},f=async(l=1)=>{try{const n=s.data();n.search=v.value,n.page=l;const h=await E.get("/service-locations/list",{params:n});y.value=h.data.results,B.value=h.data.paginator,Y(B.value.total),p.value=!1}catch(n){console.error(e("error_fetching_service_locations"),n)}},R=async l=>{try{const n=await E.post(`/service-locations/toggle/${l.id}`);l.active=n.data.serviceLocation.active,b.fire(e("success"),e("service_location_status_updated_successfully"),"success")}catch(n){n.response&&n.response.status==403&&(g.value=n.response.data.alertMessage,setTimeout(()=>{g.value=""},5e3)),console.error(e("error_updating_status"),n),b.fire(e("error"),e("failed_to_update_the_status"),"error")}},q=async l=>{localStorage.setItem("service-locations/list",l),f(l)},U=async l=>{te.get(`/service-locations/edit/${l.id}`)},Y=()=>{S.value=[10,25,50,100,200,500]};return{results:y,modalShow:C,deleteItemId:k,successMessage:M,alertMessage:g,filterData:T,deleteModal:a,closeModal:O,deleteData:x,dismissMessage:H,searchTerm:v,paginator:B,fetchSearch:z,modalFilter:p,toggleModel:R,clearFilter:N,serviceLocations:L,timeZones:D,fetchDatas:f,filter:s,handlePageChanged:q,editData:U,paginatorOption:S,changeEntriesPerPage:()=>{f()}}},computed:{...re,...$(["permissions"])},mounted(){this.fetchDatas();const o=localStorage.getItem("service-locations/list");o?this.handlePageChanged(Number(o)):this.handlePageChanged(1)}},ue={class:"d-flex align-items-center mt-3"},_e={class:"me-2 text-muted"},me=["value"],ge={class:"ms-2 text-muted"},fe={class:"d-flex align-items-center gap-2"},ve={class:"table-responsive"},pe={class:"table align-middle position-relative table-nowrap"},he={class:"table-active"},be={scope:"col"},ye={scope:"col"},Ce={key:0,scope:"col"},ke={scope:"col"},Me={key:0},we={class:"d-flex"},Pe={class:"flex-grow-1"},Be=["onClick","id","checked"],Le={class:"d-flex"},Se={key:1},xe={colspan:"4",class:"text-center"},De={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},He={class:"alert-content"},Te={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ne={class:"alert-content"};function Oe(o,e,v,s,y,B){const C=c("Head"),p=c("PageHeader"),k=c("BCol"),D=c("searchbar"),L=c("BButton"),S=c("Link"),M=c("BRow"),g=c("BCardHeader"),H=c("BCardBody"),T=c("BCard"),N=c("Pagination"),O=c("Layout"),x=ee("b-tooltip");return d(),A(O,null,{default:u(()=>[i(C,{title:"Service Locations"}),i(p,{title:o.$t("service_location"),pageTitle:o.$t("service_location")},null,8,["title","pageTitle"]),i(M,null,{default:u(()=>[i(k,{lg:"12"},{default:u(()=>[i(T,{"no-body":"",id:"tasksList"},{default:u(()=>[i(g,{class:"border-0"},{default:u(()=>[i(M,{class:"g-2"},{default:u(()=>[i(k,{md:"3"},{default:u(()=>[t("div",ue,[t("label",_e,r(o.$t("show")),1),I(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.filter.limit=a),onChange:e[1]||(e[1]=(...a)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(d(!0),m(F,null,V(s.paginatorOption,a=>(d(),m("option",{key:a,value:a},r(a),9,me))),128))],544),[[se,s.filter.limit]]),t("label",ge,r(o.$t("entries")),1)])]),_:1}),i(k,{md:"auto",class:"ms-auto"},{default:u(()=>[t("div",fe,[i(D,{onSearch:s.fetchSearch},null,8,["onSearch"]),o.permissions.includes("add_service_Location")?(d(),A(S,{key:0,href:v.app_for==="demo"?"#":"/service-locations/create"},{default:u(()=>[i(L,{variant:"primary",class:"float-end",disabled:v.app_for==="demo"},{default:u(()=>[e[4]||(e[4]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),w(r(o.$t("add_service_location")),1)]),_:1,__:[4]},8,["disabled"])]),_:1},8,["href"])):P("",!0)])]),_:1})]),_:1})]),_:1}),i(H,{class:"border border-dashed border-end-0 border-start-0"},{default:u(()=>[t("div",ve,[t("table",pe,[t("thead",he,[t("tr",null,[t("th",be,r(o.$t("name")),1),t("th",ye,r(o.$t("timezone")),1),o.permissions.includes("toggle_service_Location")?(d(),m("th",Ce,r(o.$t("status")),1)):P("",!0),t("th",ke,r(o.$t("action")),1)])]),s.results.length>0?(d(),m("tbody",Me,[(d(!0),m(F,null,V(s.results,(a,z)=>(d(),m("tr",{key:z},[t("td",null,[t("div",we,[t("div",Pe,r(a.name),1)])]),t("td",null,r(a.timezone),1),t("td",null,[t("div",{class:oe({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":a.active})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:Z(f=>s.toggleModel(a),["prevent"]),id:"status_"+a.id,checked:a.active},null,8,Be)],2)]),t("td",null,[t("div",Le,[o.permissions.includes("edit_service_Location")?I((d(),A(L,{key:0,onClick:Z(f=>s.editData(a),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:o.$t("edit")},{default:u(()=>e[5]||(e[5]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[5]},1032,["onClick","title"])),[[x,void 0,void 0,{hover:!0}]]):P("",!0)])])]))),128))])):(d(),m("tbody",Se,[t("tr",null,[t("td",xe,[e[6]||(e[6]=t("img",{src:ce,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,r(o.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[s.successMessage?(d(),m("div",De,[t("div",He,[e[7]||(e[7]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[8]||(e[8]=w()),e[9]||(e[9]=t("strong",null,"Success",-1)),w(" - "+r(s.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[2]||(e[2]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):P("",!0),s.alertMessage?(d(),m("div",Te,[t("div",Ne,[e[10]||(e[10]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[11]||(e[11]=w()),e[12]||(e[12]=t("strong",null,"Alert",-1)),w(" - "+r(s.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[3]||(e[3]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):P("",!0)]),i(N,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Ue=j(de,[["render",Oe]]);export{Ue as default};
