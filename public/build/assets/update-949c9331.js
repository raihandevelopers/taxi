import{_ as Q,Z,O as G,r as d,T as D,Q as W,a2 as X,a as h,g as i,o as p,x as $,w as u,U,k as n,l as t,y as f,J as v,i as y,B as _,q as H,M as L,p as N,n as ee,K as j}from"./vendor-ddfbd976.js";import{L as oe}from"./main-306a5ea6.js";import{P as te}from"./page-header-2dc95532.js";import{P as se}from"./Pagination-f095ae3c.js";import"./footer-e648049d.js";import"./app-042fb454.js";const le={components:{Layout:oe,PageHeader:te,Head:Z,Pagination:se,Multiselect:G},props:{successMessage:String,alertMessage:String},setup(c){const e=d(""),m=d(null),o=D({name:"",description:""}),w=D({all:"",locked:""}),g=d([]),R=d({}),M=d(!1),b=d(!1),x=d(!1),P=d(null),B=d(c.successMessage||""),E=d(c.alertMessage||""),T=()=>{B.value="",E.value=""},S=()=>{o.reset(),m.value=null,b.value=!0},V=()=>{x.value=!0},A=r=>{m.value=r,o.name=r.name,o.description=r.description,o.clearErrors(),b.value=!0},l=()=>{o.reset(),b.value=!1,m.value=null},q=()=>{w.reset(),F(),x.value=!1},O=()=>{const{name:r,description:s}=o,a={},C={name:{test:()=>!r,message:"Role name is required"},description:{test:()=>!s,message:"Role description is required"}};return Object.keys(C).forEach(k=>{C[k].test()&&(a[k]=C[k].message)}),a},Y=async()=>{const r=O();if(Object.keys(r).length===0)try{let s;if(m.value?s=await h.put(`/roles/update/${m.value.id}`,o.data()):s=await h.post("/roles",o.data()),s.status===200||s.status===201){B.value=s.data.successMessage;const a=s.data.roles;if(m.value){const C=g.value.findIndex(k=>k.id===m.value.id);C!==-1&&(g.value[C]=a)}else g.value.push(a);b.value=!1,o.reset()}else console.error("Unexpected response status:",s.status)}catch(s){if(console.error("Error handling form submission:",s),s.response&&s.response.status===422){const a=s.response.data.errors;o.errors=a}else console.error("An unexpected error occurred:",s)}else o.errors=r},z=r=>{o.errors[r]=""},K=()=>{M.value=!1},I=async r=>{try{await h.delete(`/roles/delete/${r}`);const s=g.value.findIndex(a=>a.id===r);s!==-1&&g.value.splice(s,1),M.value=!1,U.fire("Success","Role deleted successfully","success")}catch(s){console.error("Error deleting role:",s),U.fire("Error","Failed to delete role","error")}},J=async r=>{U.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async s=>{if(s.isConfirmed)try{await I(r)}catch(a){console.error("Error deleting role:",a),U.fire("Error","Failed to delete the role","error")}})};W(e,X.debounce(function(r){F(e.value)},300));const F=async(r=1)=>{try{const s=w.data();s.search=e.value,s.page=r;const a=await h.get("/roles1/list",{params:s});g.value=a.data.roles,R.value=a.data.paginator,x.value=!1}catch(s){console.error("Error fetching roles:",s)}};return{form:o,roles:g,modalShow:M,modalForm:b,deleteItemId:P,selectedRole:m,successMessage:B,alertMessage:E,createRole:S,filterRole:V,editRole:A,cancelEdit:l,handleSubmit:Y,deleteModal:J,closeModal:K,deleteRole:I,dismissMessage:T,hideError:z,searchTerm:e,paginator:R,modalFilter:x,clearFilter:q,fetchRoles:F,filter:w,handlePageChanged:async r=>{F(r)}}},mounted(){this.fetchRoles()}},re={action:"javascript:void(0);"},ae={class:"row"},ne={class:"col-12"},ie={class:"mb-3"},de={for:"document",class:"form-label d-flex"},ce={key:0},me=["src"],ue={key:1,class:"text-danger"},fe={class:"col-lg-12"},ge={class:"text-end"},pe={type:"submit",class:"btn btn-primary"},ve={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},be={class:"alert-content"},ye={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},_e={class:"alert-content"},xe={class:"form-group mt-3"},Ce={key:0,class:"text-danger"},Me={class:"form-group mt-3"},Be={key:0,class:"text-danger"},ke={type:"submit",class:"btn btn-success m-2 float-end"},we={class:"input-group"};function Re(c,e,m,o,w,g){const R=i("Head"),M=i("PageHeader"),b=i("BCardHeader"),x=i("imageUpload"),P=i("BCardBody"),B=i("BCard"),E=i("BCol"),T=i("BRow"),S=i("BModal"),V=i("BButton"),A=i("Layout");return p(),$(A,null,{default:u(()=>[n(R,{title:"Banner Image"}),n(M,{title:c.$t("update"),pageTitle:c.$t("banner-image")},null,8,["title","pageTitle"]),n(T,null,{default:u(()=>[n(E,{lg:"12"},{default:u(()=>[n(B,{"no-body":"",id:"tasksList"},{default:u(()=>[n(b,{class:"border-0"}),n(P,{class:"border border-dashed border-end-0 border-start-0"},{default:u(()=>[t("form",re,[t("div",ae,[t("div",ne,[t("div",ie,[t("label",de,[f(v(c.$t("banner-image"))+" ",1),e[14]||(e[14]=t("span",null,[t("h5",{class:"text-muted mt-1 mb-0 fs-13"},"(512px x 512px)")],-1))]),c.iconUrl&&!o.form.iconFile?(p(),y("div",ce,[t("img",{src:c.iconUrl,alt:"Vehicle Image",style:{"max-width":"100px","max-height":"100px"}},null,8,me)])):_("",!0),n(x,{modelValue:o.form.iconFile,"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.iconFile=l)},null,8,["modelValue"]),o.form.errors.icon?(p(),y("span",ue,v(o.form.errors.icon),1)):_("",!0)])]),t("div",fe,[t("div",ge,[t("button",pe,v(c.$t("update")),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[o.successMessage?(p(),y("div",ve,[t("div",be,[e[15]||(e[15]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[16]||(e[16]=f()),e[17]||(e[17]=t("strong",null,"Success",-1)),f(" - "+v(o.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[1]||(e[1]=(...l)=>o.dismissMessage&&o.dismissMessage(...l)),"aria-label":"Close Success Message"})])])):_("",!0),o.alertMessage?(p(),y("div",ye,[t("div",_e,[e[18]||(e[18]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[19]||(e[19]=f()),e[20]||(e[20]=t("strong",null,"Alert",-1)),f(" - "+v(o.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[2]||(e[2]=(...l)=>o.dismissMessage&&o.dismissMessage(...l)),"aria-label":"Close Alert Message"})])])):_("",!0)]),n(S,{modelValue:o.modalForm,"onUpdate:modelValue":e[10]||(e[10]=l=>o.modalForm=l),"hide-footer":"",title:o.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:u(()=>[t("form",{onSubmit:e[8]||(e[8]=ee((...l)=>o.handleSubmit&&o.handleSubmit(...l),["prevent"])),onKeydown:e[9]||(e[9]=(...l)=>o.hideError&&o.hideError(...l))},[t("div",xe,[e[21]||(e[21]=t("label",{for:"name",class:"form-label"},[f("Role Name"),t("span",{class:"text-danger"},"*")],-1)),H(t("input",{type:"text",id:"name","onUpdate:modelValue":e[3]||(e[3]=l=>o.form.name=l),class:N(["form-control",{"is-invalid":o.form.errors.name}]),onFocus:e[4]||(e[4]=l=>o.hideError("name"))},null,34),[[L,o.form.name]]),o.form.errors.name?(p(),y("div",Ce,v(o.form.errors.name),1)):_("",!0)]),t("div",Me,[e[22]||(e[22]=t("label",{for:"description",class:"form-label"},[f("description"),t("span",{class:"text-danger"},"*")],-1)),H(t("input",{type:"text",id:"description","onUpdate:modelValue":e[5]||(e[5]=l=>o.form.description=l),class:N(["form-control",{"is-invalid":o.form.errors.description}]),onFocus:e[6]||(e[6]=l=>o.hideError("description"))},null,34),[[L,o.form.description]]),o.form.errors.description?(p(),y("div",Be,v(o.form.errors.description),1)):_("",!0)]),t("button",ke,v(o.selectedRole?"Update":"Save"),1),o.selectedRole?(p(),y("button",{key:0,type:"button",onClick:e[7]||(e[7]=(...l)=>o.cancelEdit&&o.cancelEdit(...l)),class:"btn btn-secondary m-2 float-end"},"Cancel")):_("",!0)],32)]),_:1},8,["modelValue","title"]),n(S,{modelValue:o.modalFilter,"onUpdate:modelValue":e[13]||(e[13]=l=>o.modalFilter=l),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:u(()=>[t("form",null,[t("div",we,[H(t("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[11]||(e[11]=l=>o.filter.all=l)},e[23]||(e[23]=[t("option",{selected:""},"Select Status",-1),t("option",{value:"1"},"Yes",-1),t("option",{value:"0"},"No",-1)]),512),[[j,o.filter.all]]),H(t("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[12]||(e[12]=l=>o.filter.locked=l)},e[24]||(e[24]=[t("option",{selected:""},"Select Status",-1),t("option",{value:"0"},"Inactive",-1),t("option",{value:"1"},"Active",-1)]),512),[[j,o.filter.locked]])]),n(V,{variant:"primary",class:"float-end",onClick:o.fetchRoles},{default:u(()=>e[25]||(e[25]=[f(" Apply")])),_:1,__:[25]},8,["onClick"]),n(V,{variant:"outline-primary",class:"float-end mx-2",onClick:o.clearFilter},{default:u(()=>e[26]||(e[26]=[f("Clear")])),_:1,__:[26]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const Pe=Q(le,[["render",Re]]);export{Pe as default};
