import{_ as $e,Z as et,z as tt,Y as st,P as ot,R as at,U as H,C as lt,r as C,T as Ae,Q as N,$ as it,D as nt,G as rt,a0 as Ue,a as ie,g as te,o as i,x as Be,w as $,N as dt,k as G,l as e,i as n,n as ce,J as l,q as T,M as K,F as w,L as x,K as ye,a1 as ct,B as h,H as Me,W as ke,y as q,p as De}from"./vendor-ddfbd976.js";import{L as _t}from"./dispatchmain-37fc6bfb.js";import{P as pt}from"./page-header-2dc95532.js";import{F as ut}from"./FormValidation-a9047131.js";import{s as mt}from"./search-2c17aadd.js";import{_ as Ce}from"./avatar-1-202236df.js";import{_ as ft}from"./search-file-ab3e1046.js";import"./footer-e648049d.js";import"./dispatchHorizontal-7568e444.js";import"./app-042fb454.js";const gt={data(){return{showManualAssign:!1,rightOffcanvas:!1,isPocSame:!1,form:{is_later:"",name:"",mobile:"",drop_poc_name:"",drop_poc_mobile:""},dateTimeConfig:{enableTime:!0,dateFormat:"Y-m-d H:i:ss",minDate:this.getMinTime()}}},watch:{isPocSame(s){s?(this.form.drop_poc_name=this.form.name,this.form.drop_poc_mobile=this.form.mobile):(this.form.drop_poc_name="",this.form.drop_poc_mobile="")},"form.name"(s){this.isPocSame&&(this.form.drop_poc_name=s)},"form.mobile"(s){this.isPocSame&&(this.form.drop_poc_mobile=s)}},components:{Layout:_t,PageHeader:pt,Head:et,Link:tt,Scrollbar:st,FormValidation:ut,flatPickr:ot,search:mt},computed:{...at(["permissions"])},props:{countries:Array,default_flag:String,default_dial_code:String,default_lat:String,default_lng:String,successMessage:String,alertMessage:String,validate:Function,ride_type_for_ride:Array,is_rental:Boolean,goodsTypes:Array,firebaseSettings:Object,map_key:String,transport_type_outstation:Array,transport_type_regular:Array,transport_type_rental:Array,settings:Object,schedule_a_ride:Number,is_pet_available:Boolean,is_luggage_available:Boolean,enable_ride_without_destination:Boolean},methods:{timer(){let s;H.fire({title:"Booking alert!",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,onBeforeOpen:()=>{H.showLoading(),s=setInterval(()=>{H.getContent().querySelector("b").textContent=H.getTimerLeft()},100)},onClose:()=>{clearInterval(s)}}).then(a=>{a.dismiss===H.DismissReason.timer&&console.log("I was closed by the timer")})},getMinTime(){const s=new Date,a=this.schedule_a_ride?parseInt(this.schedule_a_ride):0;s.setMinutes(s.getMinutes()+a),s.setSeconds(0);const F=s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0")+" "+String(s.getHours()).padStart(2,"0")+":"+String(s.getMinutes()).padStart(2,"0")+":00";return console.log("Formatted Time:",F),F}},computed:{transport_options(){let s=[];return this.form.ride_type==="regular"?(s=this.transport_type_regular,this.form.transport_type=s[0]):this.form.ride_type==="rental"?this.transport_type_rental.length===0?(this.form.transport_type="",s=[]):s=this.transport_type_rental:this.form.ride_type==="outstation"&&(this.transport_type_outstation.length===0?(this.form.transport_type="",s=[]):s=this.transport_type_outstation),s.length===1&&(this.form.transport_type=s[0]),s},dateTimeConfigReturnTime(){return{enableTime:!0,dateFormat:"Y-m-d H:i:ss",minDate:this.getMinReturnTime()}}},setup(s){const{t:a}=lt(),F=C({dial_code:s.default_dial_code||"",flag:s.default_flag||""}),o=C(null),I=C(null),A=C(!1),r=Ae({mobile:"",name:null,user_id:null,pick_address:"",drop_address:"",terminal:null,enterance:null,pick_lat:"",pick_lng:"",drop_lat:null,drop_lng:null,vehicle_type:null,distance:0,duration:0,payment_opt:1,goods_type_id:null,transport_type:"",pickup_poc_name:null,drop_poc_name:null,goods_type_quantity:null,is_later:0,assign_method:0,stops:"[]",return_time:null,is_round_trip:0,is_out_station:0,is_rental:0,rental_package_id:null,ride_type:"regular",trip_start_time:null,country:s.default_dial_code,drop_poc_mobile:null,is_pet_available:0,is_luggage_available:0}),_e=c=>{c=="outstation"?(r.is_out_station=1,r.is_rental=0):c=="rental"?(r.is_out_station=0,r.is_rental=1):(r.is_out_station=0,r.is_rental=0),r.ride_type=c},pe=C(!1),ae=C(!1),le=()=>{S.forEach((c,v)=>{X[v]&&X[v].setMap(null);const u=new google.maps.Marker({map:I.value,draggable:!1,icon:{url:"/image/map/"+v+".png",scaledSize:new google.maps.Size(30,30)}});if(c.latitude&&c.longitude){const b=new google.maps.LatLng(c.latitude,c.longitude);u.setPosition(b)}X[v]=u})},ue={name:{required:!0},pick_address:{required:!0},transport_type:{required:!0},mobile:{required:!0},vehicle_type:{required:!0}},f=C({}),me=C(null),t=C([]),p=C([]),R=C([]),X=C([]),j=C(null),Y=C(null),g=Ae({pick_lat:"",pick_lng:"",drop_lat:"",drop_lng:"",distance:0,duration:0}),ne=C("0m");N(()=>g.duration,c=>{const v=Math.floor(c/60),u=c%60;ne.value=v>0?`${v}h ${u}m`:`${u}m`});const Re=async()=>{var b;const c=[],v={latitude:g.pick_lat,longitude:g.pick_lng};if(c.push(v),Array.isArray(S)&&S.forEach(_=>{const L={latitude:_.latitude,longitude:_.longitude};c.push(L)}),g.drop_lat){const _={latitude:g.drop_lat,longitude:g.drop_lng};c.push(_)}const u={address:c,ride_type:r.ride_type};try{await ie.post("/dispatch/serviceVerify",u)}catch(_){if(_.response&&_.response.status===422)f.value=_.response.data.errors;else if(_.response&&_.response.status===500){if(_.response.data.message=="service not available with this location")f.value.pick_address=[a("service_unavailable")];else if(_.response.data.message=="Outstation service not available within this location")delete f.value.pick_address,f.value.drop_address=[a("outstation_service_unavailable")];else{const L=_.response.data;delete f.value.pick_address,c.forEach((P,U)=>{f.value.stop||(f.value.stop={}),U!==0&&(U!==c.length?L[U].available?f.value.stop[U]=[a("ride_service_unavailable")]:delete f.value.stop[U]:L[U].available?f.value.drop_address=[a("ride_service_unavailable")]:delete f.value.drop_address)})}return(b=f.value)!=null&&b.stop&&Object.keys(f.value.stop).length==0&&delete f.value.stop,Object.keys(f.value).length>0?(A.value=!1,o.value&&(o.value.scrollTop=0),!1):(A.value=!0,o.value.scrollTop=o.value.scrollHeight,!0)}else console.error(a("error_creating_vehicle_price"),_),re.value=a("failed_to_make_booking_contact_admin")}},O=async()=>{var c;return f.value=me.value.validate(),g.pick_lat&&Re(),r.is_later&&(r.trip_start_time?delete f.value.trip_start_time:f.value.trip_start_time=[a("required")]),r.is_rental?(r.drop_lat="",r.drop_lng="",g.drop_lat="",g.drop_lng="",g.distance=0,g.duration=0,r.drop_address="",Y.value.setPosition(null)&&Y.value.setMap(null),S.length>0&&(S.forEach((v,u)=>{X[u].setMap(null)}),S.length=0),r.rental_package_id?delete f.value.rental_package_id:f.value.rental_package_id=[a("required")]):(!s.enable_ride_without_destination||r.is_out_station)&&!r.drop_address&&r.drop_address.length==0?f.value.drop_address=[a("required")]:delete f.value.drop_address,r.is_out_station&&(r.trip_start_time?delete f.value.trip_start_time:f.value.trip_start_time=[a("required")]),r.is_out_station&&r.is_round_trip&&(r.return_time?delete f.value.return_time:f.value.return_time=[a("required")]),r.transport_type=="delivery"&&(r.goods_type_id?delete f.value.goods_type_id:f.value.goods_type_id=[a("required")],r.drop_poc_name?delete f.value.drop_poc_name:f.value.drop_poc_name=[a("required")],r.drop_poc_mobile?delete f.value.drop_poc_mobile:f.value.drop_poc_mobile=[a("required")]),S.length>0&&S.forEach((v,u)=>{f.value.stop||(f.value.stop={}),v.latitude?f.value.stop[u]&&delete f.value.stop[u]:f.value.stop[u]=[a("required")]}),(f.value.map||g.pick_lat)&&be(),(c=f.value)!=null&&c.stop&&Object.keys(f.value.stop).length==0&&delete f.value.stop,Object.keys(f.value).length>0?(A.value=!1,o.value&&(o.value.scrollTop=0),!1):(delete f.value.stop,A.value=!0,o.value.scrollTop=o.value.scrollHeight,!0)},ze=C(!1),Pe=C(s.successMessage||""),re=C(s.alertMessage||""),Ee=()=>{Pe.value="",re.value=""},S=it([]),Ie=2,Fe=()=>{S.length<Ie?(S.push({address:"",latitude:null,longitude:null}),le()):H.fire(a("maximum_stopovers_reached"),a("you_can_add_up_to_5_stopovers_only"),"warning")},je=c=>{X[c]&&X[c].setMap(null),S.splice(c,1),le(),be()};let se;const fe=C(null),Ne=async()=>{if(g.pick_lat&&g.pick_lng){se&&se.setMap(null);let b=new google.maps.LatLng(g.pick_lat,g.pick_lng);if(j.value?(j.value.setPosition(b),j.value.setMap(I.value)):j.value=new google.maps.Marker({position:b,map:I.value,title:"Pickup Location"}),r.is_rental){const _=new google.maps.LatLngBounds;_.extend(b),I.value.fitBounds(_);return}}if(!j.value.getPosition()||!Y.value.getPosition())return;const c="https://routes.googleapis.com/directions/v2:computeRoutes",v={origin:{location:{latLng:{latitude:j.value.getPosition().lat(),longitude:j.value.getPosition().lng()}}},destination:{location:{latLng:{latitude:Y.value.getPosition().lat(),longitude:Y.value.getPosition().lng()}}},travelMode:"DRIVE",routingPreference:"TRAFFIC_AWARE",computeAlternativeRoutes:!1,routeModifiers:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1},languageCode:"en-US",units:"IMPERIAL"};v.intermediates=S.map(b=>({location:new google.maps.LatLng(b.latitude,b.longitude)}));const u={"Content-Type":"application/json","X-Goog-Api-Key":s.map_key,"X-Goog-FieldMask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline,routes.viewport"};ie.post(c,v,{headers:u}).then(b=>{var L,P;const _=(L=b.data.routes)==null?void 0:L[0];if(_){if(g.distance=_.distanceMeters,g.duration=Math.round(parseFloat(_.duration.slice(0,-1))/60),se&&se.setMap(null),(P=_.polyline)!=null&&P.encodedPolyline){const U=google.maps.geometry.encoding.decodePath(_.polyline.encodedPolyline);se=new google.maps.Polyline({path:U,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:4,map:I.value})}if(_.viewport&&_.viewport.high&&_.viewport.low){const U=new google.maps.LatLngBounds(new google.maps.LatLng(_.viewport.low.latitude,_.viewport.low.longitude),new google.maps.LatLng(_.viewport.high.latitude,_.viewport.high.longitude));I.value.fitBounds(U)}f.value.map&&delete f.value.map}}).catch(b=>{f.value.map=a("service_not_available"),console.error("Error:",b)})},ge=C([]),ve=C([]),he=C([]),Oe=(c,v=null)=>{var u;c=="pickup"?r.pick_address.length<3?ge.value=[]:setTimeout(()=>{we(r.pick_address,c)},300):c=="drop"?r.drop_address.length<3?ve.value=[]:setTimeout(()=>{we(r.drop_address,c)},300):c=="stop"&&(((u=S[v])==null?void 0:u.address.length)<3?he.value[v]=[]:setTimeout(()=>{var b;we((b=S[v])==null?void 0:b.address,c,v)},300))},we=(c,v,u=null)=>{const b="https://places.googleapis.com/v1/places:autocomplete",_={"Content-Type":"application/json","X-Goog-Api-Key":s.map_key,"X-Goog-FieldMask":"suggestions.placePrediction.placeId,suggestions.placePrediction.place,suggestions.placePrediction.text"};fetch(b,{method:"POST",headers:_,body:JSON.stringify({input:c})}).then(P=>P.json()).then(P=>{var U;((U=P.suggestions)==null?void 0:U.length)>0&&(v=="pickup"?ge.value=P.suggestions.filter(B=>B.placePrediction).map(B=>({placeId:B.placePrediction.placeId,formattedAddress:B.placePrediction.text.text})):v=="drop"?ve.value=P.suggestions.filter(B=>B.placePrediction).map(B=>({placeId:B.placePrediction.placeId,formattedAddress:B.placePrediction.text.text})):v=="stop"&&(he.value[u]=P.suggestions.filter(B=>B.placePrediction).map(B=>({placeId:B.placePrediction.placeId,formattedAddress:B.placePrediction.text.text}))))}).catch(P=>{console.error("Error fetching autocomplete results:",P)})},He=async(c,v,u=null)=>{const b={"X-Goog-Api-Key":s.map_key,"X-Goog-FieldMask":"types,location"};fetch(`https://places.googleapis.com/v1/places/${c.placeId}?fields=types,location`,{headers:b}).then(_=>_.json()).then(_=>{if(_.types.length>0&&(_.types.includes("airport")&&(pe.value=!0),_.types.includes("train_station")&&(ae.value=!0)),v=="pickup"){g.pick_lat=_.location.latitude,g.pick_lng=_.location.longitude,r.pick_address=c.formattedAddress;const L=new google.maps.LatLng(_.location.latitude,_.location.longitude);j.value.setPosition(L),I.value.setCenter(L),I.value.setZoom(15),ge.value=[]}else if(v=="drop"){g.drop_lat=_.location.latitude,g.drop_lng=_.location.longitude,r.drop_address=c.formattedAddress;const L=new google.maps.LatLng(_.location.latitude,_.location.longitude);Y.value.setPosition(L),ve.value=[]}else if(v=="stop"){he.value[u]=[],S[u].address=c.formattedAddress,S[u].latitude=_.location.latitude,S[u].longitude=_.location.longitude;const L=new google.maps.LatLng(_.location.latitude,_.location.longitude);X[u].setPosition(L),be()}}).catch(_=>{console.error("Error fetching autocomplete results:",_)})};let xe=!0;const be=()=>{xe&&setTimeout(()=>{Ne(),xe=!0},1e3),xe=!1},Le=async()=>{I.value=new google.maps.Map(document.getElementById("map"),{center:{lat:parseFloat(s.default_lat),lng:parseFloat(s.default_lng)},zoom:15}),se&&se.setMap(null);const c="/image/map/pickup.png",v="/image/map/drop.png";j.value=new google.maps.Marker({map:I.value,draggable:!1,icon:{url:c,scaledSize:new google.maps.Size(30,30)}}),Y.value=new google.maps.Marker({map:I.value,draggable:!1,icon:{url:v,scaledSize:new google.maps.Size(30,30)}});let u={};N(S,d=>{var k=!1;d.forEach((y,m)=>{y.latitutde&&(k=!0),le()}),k&&(O(),be())},{deep:!0});const b=async()=>{if(O()){if(r.is_rental)return A.value=!1,_(),!1;A.value=!0}else return A.value=!1,!1;R.value=[];const{pick_lat:d,pick_lng:k,drop_lat:y,drop_lng:m,distance:z,duration:V}=g.data(),M={pick_lat:d,pick_lng:k,distance:z,duration:V};M.transport_type=r.transport_type,y&&(M.drop_lat=y),m&&(M.drop_lng=m),r.is_out_station&&(M.is_out_station=1,r.trip_start_time&&(M.trip_start_time=r.trip_start_time),r.return_time&&(M.return_time=r.return_time)),M.dispatch=1,S.length>0&&(M.stops=JSON.stringify(S));const E=await ie.post("/dispatch/request/eta",M);t.value=E.data.data,L()},_=async()=>{t.value=[];const{pick_lat:d,pick_lng:k}=g.data(),y={pick_lat:d,pick_lng:k,transport_type:r.transport_type},m=await ie.post("/dispatch/request/list_packages",y);p.value=m.data.data},L=()=>{let d=j.value.getPosition();t.value.forEach(k=>{k.driver_time=null}),fe.value.on("value",k=>{k.forEach(y=>{var W,ee;const m=y.val(),z=m.g,V=qe(z);if(V&&d){const Q=Je(d.lat(),d.lng(),V.lat,V.lon);Q<=10&&m.is_available&&m.is_active&&U(m,Q);var M=!0;if(r.vehicle_type){M=!1;var E=(ee=(W=t.value)==null?void 0:W.find(D=>D.zone_type_id===r.vehicle_type))==null?void 0:ee.type_id;E&&m.vehicle_types&&m.vehicle_types.includes(E)&&(M=!0)}if(Q<=10&&m.is_available&&m.is_active&&M){const D=new google.maps.LatLng(V.lat,V.lon),J=`/image/map/${m.vehicle_type_icon}.png`;if(u[m.id])Se(u[m.id],u[m.id].getPosition(),D,m.bearing),u[m.id].setIcon({url:J,scaledSize:new google.maps.Size(30,30)});else{const Z=new google.maps.Marker({position:D,map:I.value,icon:{url:J,scaledSize:new google.maps.Size(30,30)}});u[m.id]=Z,Se(Z,Z.getPosition(),D,m.bearing)}}else u[m.id]&&(u[m.id].setMap(null),delete u[m.id])}})}),fe.value.on("child_changed",k=>{const y=k.val();y.is_active?We(y):(t.value.forEach(m=>{y.vehicle_types.some(z=>z===m.type_id)&&L()}),Ve(y.id))}),fe.value.on("child_removed",k=>{const y=k.val();Ve(y.id)})};N(()=>r.vehicle_type,async d=>{d&&(L(),O()?A.value=!0:A.value=!1)}),N(()=>r.transport_type,async d=>{d&&(d=="taxi"?r.goods_type_quantity=null:r.goods_type_quantity=r.goods_type_quantity??0,r.pick_address&&O()&&b())}),N(()=>r.rental_package_id,async d=>{if(d){const y=p.value.find(m=>m.id===d).typesWithPrice.data;R.value=y}}),N(()=>r.is_later,async d=>{r.pick_address&&(O(),b())}),N(()=>r.ride_type,async d=>{r.pick_address&&O()&&b()});const P=Ue(d=>{d&&r.vehicle_type?(o.value.scrollTop=o.value.scrollHeight,A.value=!0):A.value=!1},300);N(()=>r.name,async d=>{P(d),r.pick_address&&O()}),N(()=>r.return_time,async d=>{d&&await b()}),N(()=>g.pick_lat,async d=>{d&&(O(),b())}),N(()=>g.drop_lat,async d=>{d&&g.pick_lat&&O()}),N(()=>g.distance,async d=>{r.ride_type=="rental"?g.pick_lat&&g.pick_lng&&await b():g.pick_lat&&g.pick_lng&&g.drop_lat&&g.drop_lng&&await b()});const U=(d,k)=>{const y=B(k);return t.value.forEach(m=>{d.vehicle_types&&d.vehicle_types.includes(m.type_id)&&(!m.driver_distance||m.driver_distance>k)&&(m.driver_time=y)}),!0},B=d=>d<2?"3 Mins":d>2&&d<5?"5 Mins":d>5&&d<7?"10 Mins":"15 mins",Se=(d,k,y,m)=>{let V=k.lat(),M=k.lng(),E=y.lat(),W=y.lng();if(V===E&&M===W){m!==void 0&&d.setIcon({...d.getIcon(),rotation:m}),d.setPosition(y),d.prevBearing=m;return}const ee=D=>D<.5?2*D*D:-1+(4-2*D)*D,Q=D=>{let J=ee(D/60),Z=new google.maps.LatLng(V+(E-V)*J,M+(W-M)*J);if(d.setPosition(Z),m!==void 0){const de=d.prevBearing||m,oe=m-de,Ze=de+oe*J;d.setIcon({...d.getIcon(),rotation:Ze})}D<60?requestAnimationFrame(()=>Q(D+1)):d.prevBearing=m};Q(0)},We=d=>{const k=d.g,y=qe(k);if(y){const m=new google.maps.LatLng(y.lat,y.lon),z=`/image/map/${d.vehicle_type_icon}.png`;if(u[d.id])Se(u[d.id],u[d.id].getPosition(),m,d.bearing),u[d.id].setIcon({url:z,scaledSize:new google.maps.Size(30,30)});else{const V=new google.maps.Marker({position:m,map:I.value,icon:{url:z,scaledSize:new google.maps.Size(30,30)}});u[d.id]=V}}else console.error(`Failed to decode geohash for driver ID: ${d.id}`)},Ve=d=>{u[d]&&(u[d].setMap(null),delete u[d])},qe=d=>{const k="0123456789bcdefghjkmnpqrstuvwxyz",y=[16,8,4,2,1];let m=!0,z=-90,V=90,M=-180,E=180,W,ee;if(d){for(let Q=0;Q<d.length;Q++){let D=d.charAt(Q),J=k.indexOf(D);for(let Z=0;Z<5;Z++){let de=y[Z];if(m){let oe=(M+E)/2;J&de?M=oe:E=oe}else{let oe=(z+V)/2;J&de?z=oe:V=oe}m=!m}}return W=(z+V)/2,ee=(M+E)/2,{lat:W,lon:ee}}},Je=(d,k,y,m)=>{const V=(y-d)*Math.PI/180,M=(m-k)*Math.PI/180,E=Math.sin(V/2)*Math.sin(V/2)+Math.cos(d*Math.PI/180)*Math.cos(y*Math.PI/180)*Math.sin(M/2)*Math.sin(M/2);return 6371*(2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E)))}},Ge=async()=>{if(!O())return!1;A.value=!1;const{pick_lat:c,pick_lng:v,drop_lat:u,drop_lng:b,distance:_,duration:L}=g.data();c&&(r.pick_lat=c),v&&(r.pick_lng=v),u&&(r.drop_lat=u),b&&(r.drop_lng=b),_&&(r.distance=_),L&&(r.duration=L),S.length>0&&(r.stops=JSON.stringify(S));try{let P;if(P=await ie.post("/dispatch/create-request",r.data()),P.data.success===!0){let U;H.fire({title:"Booking Successfull",html:"Your Ride has been Booked Successfully.",timer:2e3,timerProgressBar:!0,onBeforeOpen:()=>{H.showLoading(),U=setInterval(()=>{H.getContent().querySelector("b").textContent=H.getTimerLeft()},100)},onClose:()=>{clearInterval(U)}}).then(B=>{B.dismiss===H.DismissReason.timer&&console.log("I was closed by the timer"),A.value=!0}),r.assign_method==1&&dt.get("ongoing_request/assign/"+P.data.data.id),r.reset(),g.reset(),Le(),t.value=[],R.value=[],S.length=0}else re.value=a("failed_to_make_booking_contact_admin")}catch(P){P.response&&P.response.status===422?f.value=P.response.data.errors:(console.error(a("error_creating_vehicle_price"),P),re.value=a("failed_to_make_booking_contact_admin"))}};nt(()=>{const c=s.map_key,v=document.createElement("script");v.src=`https://maps.googleapis.com/maps/api/js?key=${c}&libraries=geometry`,v.async=!0,v.defer=!0,v.onload=()=>{Le()},document.head.appendChild(v);var u={apiKey:s.firebaseSettings.firebase_api_key,authDomain:s.firebaseSettings.firebase_auth_domain,databaseURL:s.firebaseSettings.firebase_database_url,projectId:s.firebaseSettings.firebase_project_id,storageBucket:s.firebaseSettings.firebase_storage_bucket,messagingSenderId:s.firebaseSettings.firebase_messaging_sender_id,appId:s.firebaseSettings.firebase_app_id};firebase.apps.length==0&&firebase.initializeApp(u),fe.value=firebase.database().ref("drivers"),s.transport_type_regular.length>0&&(r.transport_type=s.transport_type_regular[0])});const Ke=C(""),Te=C(""),Xe=rt(()=>s.countries.filter(c=>c.name.toLowerCase().includes(Te.value.toLowerCase()))),Ye=c=>{F.value=c,r.country=c.dial_code},Qe=Ue(async c=>{c.target.value=c.target.value.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1");const v=await ie.get("/dispatch/fetch-user-detail",{params:{mobile:r.mobile}});v.data.data?(r.pick_address&&O(),r.name=v.data.data.name,r.user_id=v.data.data.id):(r.user_id=null,r.name=null)},300);return{form:r,modalShow:ze,successMessage:Pe,alertMessage:re,dismissMessage:Ee,scrollContainer:o,validationRef:me,validationRules:ue,errors:f,mobile:Ke,selectedCountry:F,searchQuery:Te,changelater:_e,filteredCountries:Xe,selectCountry:Ye,validateNumber:Qe,showAiportTerminal:pe,showTrainStationEnterance:ae,etaParam:g,vehicleTypes:t,makeBooking:Ge,maxStopovers:Ie,enableBooking:A,stopovers:S,packageTypes:p,rentalVehicleTypes:R,addStopover:Fe,removeStopover:je,getMinReturnTime:()=>{const c=g.duration,v=r.trip_start_time,u=new Date(v);return u.setMinutes(u.getMinutes()+c),u},handleInput:Oe,selectSuggestion:He,pickSuggestions:ge,dropSuggestions:ve,stopSuggestions:he,formattedDuration:ne}}},vt={class:"row"},ht={class:"col-xxl-6"},bt={class:"card card-height-100"},yt={class:"card-body"},kt={key:0},wt={class:"row"},xt={class:"col-12 col-lg-12",ref:"scrollContainer",style:{"max-height":"100vh","overflow-y":"auto"}},St={class:"accordion accordion-flush",id:"accordionform"},Mt={class:"accordion-item border-0"},Ct={class:"card-title accordion-header",id:"personal-one"},Pt={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#personal-info","aria-expanded":"false","aria-controls":"personal-info"},It={class:"card-title flex-grow-1"},Lt={id:"personal-info",class:"accordion-collapse collapse show","aria-labelledby":"personal-info","data-bs-parent":"#accordionform"},Tt={class:"row"},Vt={class:"col-12 col-lg-6"},qt={class:"form-label"},At={class:"input-group","data-input-flag":""},Ut={class:"btn btn-light border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Bt=["src"],Dt={class:"ms-2 country-codeno"},Rt=["placeholder"],zt={class:"dropdown-menu w-100"},Et={class:"p-2 px-3 pt-1 searchlist-input"},Ft=["placeholder"],jt={class:"list-unstyled dropdown-menu-list mb-0"},Nt=["onClick"],Ot=["src"],Ht={class:"align-middle"},Gt={class:"col-12 col-lg-6"},Kt={class:"mb-3"},Xt={for:"name",class:"form-label"},Yt=["placeholder"],Qt={class:"accordion-item border-0"},Wt={class:"card-title accordion-header",id:"ride-one"},Jt={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#ride-info","aria-expanded":"false","aria-controls":"ride-info"},Zt={class:"card-title flex-grow-1"},$t={id:"ride-info",class:"accordion-collapse collapse","aria-labelledby":"ride-info","data-bs-parent":"#accordionform"},es={class:"row"},ts={class:"col-6"},ss={class:"mb-3"},os={for:"type",class:"form-label"},as={disabled:"",value:""},ls={value:"0"},is={value:"1"},ns={class:"col-12"},rs={class:"mb-3"},ds={for:"type",class:"form-label"},cs={disabled:"",value:""},_s=["value"],ps={class:"row"},us={class:"mt-4 mb-4"},ms={class:"card-title mb-3 flex-grow-1"},fs={class:"form-check form-check-inline"},gs=["checked"],vs={class:"form-check-label",for:"later_ride"},hs={class:"form-check form-check-inline"},bs=["checked"],ys={class:"form-check-label",for:"rental"},ks={key:0,class:"form-check form-check-inline"},ws=["checked"],xs={class:"form-check-label",for:"outstation"},Ss={class:"accordion-item border-0"},Ms={class:"card-title accordion-header",id:"location-one"},Cs={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#location-info","aria-expanded":"false","aria-controls":"location-info"},Ps={class:"card-title flex-grow-1"},Is={id:"location-info",class:"accordion-collapse collapse","aria-labelledby":"location-info","data-bs-parent":"#accordionform"},Ls={class:"row"},Ts={class:"mb-3"},Vs={class:"d-flex align-items-center justify-content-between"},qs={for:"pickup",class:"form-label"},As={class:"autocomplete-container"},Us={class:"input-group"},Bs=["placeholder"],Ds={key:0,class:"autocomplete-results"},Rs=["onClick"],zs={class:"row"},Es={class:"mb-3","data-aos":"fade-zoom-in","data-aos-easing":"ease-in-back","data-aos-delay":"50","data-aos-offset":"0"},Fs=["for"],js={class:"d-flex align-items-center"},Ns={class:"autocomplete-container col-8"},Os={class:"input-group"},Hs=["onUpdate:modelValue","placeholder","onInput"],Gs={key:0,class:"autocomplete-results"},Ks=["onClick"],Xs=["onClick"],Ys={class:"row"},Qs={key:0,class:"col-12"},Ws={class:"mb-3"},Js={for:"terminal",class:"form-label"},Zs={class:"row"},$s={key:0,class:"col-12"},eo={class:"mb-3"},to={for:"enterance",class:"form-label"},so={class:"row"},oo={key:0,class:"col-12"},ao={class:"mb-3"},lo={for:"drop",class:"form-label"},io={class:"autocomplete-container"},no={class:"input-group"},ro=["placeholder"],co={key:0,class:"autocomplete-results"},_o=["onClick"],po={key:0,class:"col-12"},uo={class:"mb-3"},mo={class:"row"},fo={key:0,class:"card-title mb-2 flex-grow-1 mt-4"},go={key:1,class:"px-2 mb-2"},vo={class:"badge bg-dark-subtle text-dark p-1 fs-12 text-center"},ho={class:"form-check m-2 mx-3"},bo={class:"form-check-label mt-1",for:"poc"},yo={class:"row"},ko={key:0,class:"col-6"},wo={class:"mb-3"},xo={for:"poc_name",class:"form-label"},So=["placeholder","disabled"],Mo={key:1,class:"col-6"},Co={class:"mb-3"},Po={for:"poc_mobile",class:"form-label"},Io=["placeholder","disabled"],Lo={class:"row"},To={key:0,class:"card-title mb-2 flex-grow-1 mt-4"},Vo={key:1,class:"col-6"},qo={class:"mb-3"},Ao={for:"goods_type",class:"form-label"},Uo={disabled:"",value:""},Bo=["value"],Do={key:2,class:"col-6"},Ro={class:"mb-3"},zo={for:"goods_type_quantity",class:"form-label"},Eo=["placeholder"],Fo={class:"row"},jo={key:0,class:"card-title mb-3 flex-grow-1 mt-4"},No={key:1,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},Oo={class:"mb-3"},Ho={for:"rental_package_id",class:"form-label"},Go={disabled:"",value:""},Ko=["value"],Xo={class:"row"},Yo={key:0,class:"col-12"},Qo={class:"mb-3"},Wo={for:"dispatch-datepicker",class:"form-label"},Jo={class:"row"},Zo={key:0,class:"mt-4 mb-4"},$o={class:"card-title mb-3 flex-grow-1"},ea={class:"form-check form-check-inline"},ta={class:"form-check-label",for:"oneway"},sa={class:"form-check form-check-inline"},oa={class:"form-check-label",for:"roundtrip"},aa={class:"row"},la={key:0,class:"col-12"},ia={class:"mb-3"},na={for:"dispatch-datepicker",class:"form-label"},ra={key:0,class:"accordion-item border-0"},da={class:"card-title accordion-header",id:"vehicle-one"},ca={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#select-vehicle","aria-expanded":"false","aria-controls":"select-vehicle"},_a={class:"card-title flex-grow-1"},pa={id:"select-vehicle",class:"accordion-collapse collapse","aria-labelledby":"select-vehicle","data-bs-parent":"#accordionform"},ua={class:"row"},ma={key:0,class:"mt-4"},fa={key:1,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},ga={class:"mb-0"},va={class:"d-flex mt-2"},ha=["for"],ba=["id","value"],ya={class:"select-checkbox-btn-content"},ka={class:"w-32 me-4 cursor-pointer"},wa={class:"text-center mt-2 ms-4 text-dark"},xa={class:"w-32 h-32 flex-none image-fit rounded-circle"},Sa=["src"],Ma={class:"text-center mt-2 amount text-dark"},Ca={class:"text-center mt-2 text-dark"},Pa={class:"row"},Ia={key:0,class:"card-title flex-grow-1 mt-4"},La={key:1,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},Ta={class:"mb-0"},Va={class:"d-flex mt-5"},qa=["for"],Aa=["id","value"],Ua={class:"select-checkbox-btn-content"},Ba={class:"w-32 me-4 cursor-pointer"},Da={class:"text-center mt-2 ms-4 text-dark"},Ra={class:"w-32 h-32 flex-none image-fit rounded-circle"},za=["src"],Ea={class:"text-center mt-2 amount text-dark"},Fa={class:"text-center mt-2 text-dark"},ja={key:1,class:"accordion-item border-0"},Na={class:"card-title accordion-header",id:"preference-one"},Oa={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#preference-info","aria-expanded":"false","aria-controls":"preference-info"},Ha={class:"card-title flex-grow-1"},Ga={id:"preference-info",class:"accordion-collapse collapse","aria-labelledby":"preference-info","data-bs-parent":"#accordionform"},Ka={key:0,class:"row"},Xa={class:"mt-4 mb-4"},Ya={key:0,class:"form-check form-check-inline"},Qa=["checked"],Wa={class:"form-check-label",for:"is_pet_available"},Ja={key:1,class:"form-check form-check-inline"},Za=["checked"],$a={class:"form-check-label",for:"is_luggage_available"},el={key:2,"data-aos":"fade-zoom-in","data-aos-easing":"ease-in-back","data-aos-delay":"100","data-aos-offset":"0"},tl={class:"row"},sl={class:"mt-4 mb-4"},ol={class:"card-title mb-3 flex-grow-1"},al={class:"mail-list-link fs-16"},ll={class:"col-lg-12"},il={class:"text-center"},nl=["disabled"],rl={key:1,"data-aos":"fade-right","data-aos-offset":"300","data-aos-easing":"ease-in-sine"},dl={class:"d-flex align-items-center justify-content-between"},cl={class:"col-xxl-6"},_l={class:"d-flex flex-column h-100"},pl={class:"row h-100"},ul={class:"col-lg-12 col-md-12"},ml={class:"card"},fl={class:"row mt-4"},gl={class:"col-lg-6 col-sm-6"},vl={class:"p-0 border border-dashed rounded card"},hl={class:"d-flex align-items-center"},bl={class:"flex-grow-1"},yl={class:"text-muted mb-1"},kl={class:"fs-14 fw-bold ms-2"},wl={class:"col-lg-6 col-sm-6"},xl={class:"p-0 border border-dashed rounded card"},Sl={class:"d-flex align-items-center"},Ml={class:"flex-grow-1"},Cl={class:"text-muted mb-1"},Pl={class:"fs-14 fw-bold ms-2"},Il={class:"card-body"},Ll={class:"d-flex align-items-center"},Tl={class:"col-12 col-lg-12"},Vl={class:"mb-3 text-center m-auto"},ql={id:"map",style:{height:"500px"}},Al={class:"row","h-100":""},Ul={class:"col-xl-12"},Bl={class:"card","h-100":""},Dl={class:"card-header border-0 align-items-center d-flex"},Rl={class:"table-responsive"},zl={class:"table align-middle position-relative table-nowrap"},El={class:"table-active"},Fl={scope:"col"},jl={scope:"col"},Nl={scope:"col"},Ol={scope:"col"},Hl={scope:"col"},Gl={class:"dropdown"},Kl={class:"dropdown-menu dropdown-menu-end"},Xl=["onClick"],Yl={key:1},Ql=["onClick"],Wl={key:2},Jl={key:3},Zl=["onClick"],$l=["onClick"],ei={colspan:"10",class:"text-center"};function ti(s,a,F,o,I,A){const r=te("Head"),_e=te("flat-pickr"),pe=te("FormValidation"),ae=te("BCol"),le=te("BRow"),ue=te("BBadge"),f=te("Link"),me=te("Layout");return i(),Be(me,null,{default:$(()=>[G(r,{title:"Taxi Ride"}),e("div",vt,[e("div",ht,[e("div",bt,[a[43]||(a[43]=e("div",{class:"card-header border-0 align-items-center d-flex"},null,-1)),e("div",yt,[I.showManualAssign?(i(),n("div",rl,[e("div",dl,[e("a",{href:"#",onClick:a[34]||(a[34]=ce(t=>I.showManualAssign=s.fasle,["prevent"]))},a[39]||(a[39]=[e("p",{class:"fs-16 lh-base"},[e("i",{class:"mdi mdi-arrow-left"}),q(),e("span",{class:"fw-semibold"},"Manual Assign")],-1)])),a[40]||(a[40]=e("form",{class:"app-search d-none d-md-block"},[e("div",{class:"position-relative"},[e("input",{type:"text",class:"form-control",placeholder:"Search...",autocomplete:"off",id:"search-options",value:""}),e("span",{class:"mdi mdi-magnify search-widget-icon"}),e("span",{class:"mdi mdi-close-circle search-widget-icon search-widget-icon-close d-none",id:"search-close-options"})])],-1))]),a[41]||(a[41]=e("div",{class:"row"},[e("div",{class:"col-xl-12"},[e("div",{class:"card card-animate bg-light"},[e("div",{class:"card-body"},[e("div",{class:"d-flex align-items-center"},[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-primary-subtle text-primary rounded-circle fs-2"},[e("img",{class:"rounded-circle header-profile-user img-fluid",src:Ce,alt:"Loading..."})])]),e("div",{class:"flex-grow-1 overflow-hidden ms-3"},[e("div",{class:"d-flex align-items-center"},[e("h5",{class:"fs-5 flex-grow-1 mb-0"},[e("span",{class:"border border-start-0 border-top-0 border-bottom-0 pe-3 border-3 border-black"},"Test"),e("span",{class:"ms-3 border border-start-0 border-top-0 border-bottom-0 pe-3 border-3 border-black",style:""},"SUV"),e("span",{class:"ms-3"},"9876543210")])]),e("div",{class:"text-muted fs-16 mt-1"},[e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"})])])]),e("div",{class:"text-muted ms-5 mt-3"},[e("i",{class:"ri-album-fill text-success"}),q(),e("span",{class:"text-body fw-medium"},"saravanampatti")]),e("div",{class:"text-muted ms-5 mt-3"},[e("i",{class:"ri-map-pin-fill text-danger"}),q(),e("span",{class:"text-body fw-medium"},"saravanampatti")])])])])],-1)),a[42]||(a[42]=e("div",{class:"row mt-3",style:{height:"400px","overflow-y":"auto"}},[e("div",{class:"col-xl-12"},[e("div",{class:"card card-animate"},[e("div",{class:"card-body"},[e("div",{class:"d-flex align-items-center justify-content-between"},[e("div",null,[e("div",{class:"d-flex align-items-center"},[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-primary-subtle text-primary rounded-circle fs-2"},[e("img",{class:"rounded-circle header-profile-user img-fluid",src:Ce,alt:"Loading..."})]),e("div",{class:"flex-shrink-0 align-self-center",style:{position:"absolute",top:"50px",left:"10px"}},[e("span",{class:"badge bg-success-subtle text-success"},[q("TN37AA0123"),e("span")])])]),e("div",{class:"flex-grow-1 overflow-hidden ms-4"},[e("div",{class:"d-flex align-items-center"},[e("h5",{class:"fs-5 flex-grow-1 mb-0"},[e("span",{class:"border border-start-0 border-top-0 border-bottom-0 pe-3 border-3 border-black"},"Test"),e("span",{class:"ms-3 border border-start-0 border-top-0 border-bottom-0 pe-3 border-3 border-black",style:""},"SUV"),e("span",{class:"ms-3"},"9876543210")])]),e("div",{class:"text-muted fs-16 mt-1"},[e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"})])])]),e("div",{class:"d-flex align-items-center gap-5 ms-4 mt-3"},[e("div",{class:"me-0"}),e("div",{class:"d-flex align-items-center"},[e("div",{class:"flex-grow-1"},[e("h5",{class:"fs-14 mb-1"},[e("a",{href:"",class:"text-body"},"1.25 hr")]),e("p",{class:"text-muted mb-0"},"Active")])]),e("div",{class:"d-flex align-items-center"},[e("div",{class:"flex-grow-1"},[e("h5",{class:"fs-14 mb-1"},[e("a",{href:"",class:"text-body"},"25.25 km")]),e("p",{class:"text-muted mb-0"},"Distance")])]),e("div",{class:"d-flex align-items-center"},[e("div",{class:"flex-grow-1"},[e("h5",{class:"fs-14 mb-1"},[e("a",{href:"",class:"text-body"},"10")]),e("p",{class:"text-muted mb-0"},"Rides Taken")])])])]),e("div",null,[e("a",{href:"",class:"btn btn-success"},[e("i",{class:"ri-add-line align-bottom me-1"}),q(" Assign")])])])])])])],-1))])):(i(),n("div",kt,[e("form",{onSubmit:a[33]||(a[33]=ce((...t)=>s.handleSubmit&&s.handleSubmit(...t),["prevent"]))},[G(pe,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:$(()=>[e("div",wt,[e("div",xt,[e("div",St,[e("div",Mt,[e("h2",Ct,[e("button",Pt,[e("h4",It,l(s.$t("personal_info")),1)])]),e("div",Lt,[e("div",Tt,[e("div",Vt,[e("div",null,[e("label",qt,l(s.$t("mobile")),1),e("div",At,[e("button",Ut,[e("img",{src:o.selectedCountry.flag,alt:"flag",height:"20",class:"country-flagimg rounded"},null,8,Bt),e("span",Dt,l(o.selectedCountry.dial_code),1)]),T(e("input",{type:"text",id:"mobile",class:"form-control rounded-end flag-input","onUpdate:modelValue":a[0]||(a[0]=t=>o.form.mobile=t),onKeydown:a[1]||(a[1]=(...t)=>s.preventDefault&&s.preventDefault(...t)),placeholder:s.$t("enter_number"),onInput:a[2]||(a[2]=(...t)=>o.validateNumber&&o.validateNumber(...t))},null,40,Rt),[[K,o.form.mobile]]),e("div",zt,[e("div",Et,[T(e("input",{type:"text",class:"form-control form-control-sm border search-countryList",placeholder:s.$t("search_country_name_or_country_code"),"onUpdate:modelValue":a[3]||(a[3]=t=>o.searchQuery=t)},null,8,Ft),[[K,o.searchQuery]])]),e("ul",jt,[(i(!0),n(w,null,x(o.filteredCountries,t=>(i(),n("li",{key:t.id},[e("a",{href:"javascript:void(0);",class:"dropdown-item notify-item language py-2",onClick:p=>o.selectCountry(t)},[e("img",{src:t.flag,alt:"flag",class:"me-2 rounded",height:"18"},null,8,Ot),e("span",Ht,l(t.name)+" "+l(t.dial_code),1)],8,Nt)]))),128))])])]),(i(!0),n(w,null,x(o.errors.mobile,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])]),e("div",Gt,[e("div",Kt,[e("label",Xt,l(s.$t("name")),1),T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=t=>o.form.name=t),placeholder:s.$t("enter_name"),id:"name"},null,8,Yt),[[K,o.form.name]]),(i(!0),n(w,null,x(o.errors.name,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])])])]),e("div",Qt,[e("h2",Wt,[e("button",Jt,[e("h4",Zt,l(s.$t("ride_info")),1)])]),e("div",$t,[e("div",es,[a[35]||(a[35]=e("div",{class:"d-flex align-items-center mt-4"},null,-1)),e("div",ts,[e("div",ss,[e("label",os,l(s.$t("booking_type")),1),T(e("select",{id:"type",class:"form-select","onUpdate:modelValue":a[5]||(a[5]=t=>o.form.is_later=t)},[e("option",as,l(s.$t("choose_type")),1),e("option",ls,l(s.$t("instant_booking")),1),e("option",is,l(s.$t("book_later")),1)],512),[[ye,o.form.is_later]]),(i(!0),n(w,null,x(o.errors.is_later,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])]),e("div",{class:"col-6",style:ct({display:A.transport_options.length===0?"none":"block"})},[e("div",ns,[e("div",rs,[e("label",ds,l(s.$t("transport_type")),1),T(e("select",{id:"type",class:"form-select","onUpdate:modelValue":a[6]||(a[6]=t=>o.form.transport_type=t)},[e("option",cs,l(s.$t("choose_transport_type")),1),(i(!0),n(w,null,x(A.transport_options,(t,p)=>(i(),n("option",{key:p,value:t},l(t.charAt(0).toUpperCase()+t.slice(1)),9,_s))),128))],512),[[ye,o.form.transport_type]]),(i(!0),n(w,null,x(o.errors.transport_type,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])],4)]),e("div",ps,[e("div",us,[e("h4",ms,l(s.$t("schedule_type")),1),e("div",null,[e("div",fs,[e("input",{class:"form-check-input",type:"radio",name:"ScheduleType",checked:o.form.ride_type=="regular",onClick:a[7]||(a[7]=t=>o.changelater("regular")),id:"later_ride",value:"later"},null,8,gs),e("label",vs,l(s.$t("normal")),1)]),e("div",hs,[e("input",{class:"form-check-input",onClick:a[8]||(a[8]=t=>o.changelater("rental")),type:"radio",name:"ScheduleType",checked:o.form.ride_type=="rental",id:"rental",value:"rental"},null,8,bs),e("label",ys,l(s.$t("rental_pack")),1)]),o.form.is_later==1?(i(),n("div",ks,[e("input",{class:"form-check-input",type:"radio",name:"ScheduleType",onClick:a[9]||(a[9]=t=>o.changelater("outstation")),id:"outstation",value:"outstation",checked:o.form.ride_type=="outstation"},null,8,ws),e("label",xs,l(s.$t("outstation")),1)])):h("",!0)])])])])]),e("div",Ss,[e("h2",Ms,[e("button",Cs,[e("h4",Ps,l(s.$t("location")),1)])]),e("div",Is,[e("div",Ls,[e("div",Ts,[e("div",Vs,[e("label",qs,l(s.$t("pickup_location")),1),o.form.ride_type=="regular"&&o.stopovers.length<o.maxStopovers?(i(),n("a",{key:0,class:"btn btn-primary mb-3",onClick:a[10]||(a[10]=(...t)=>o.addStopover&&o.addStopover(...t))},l(s.$t("add_stops")),1)):h("",!0)]),e("div",As,[e("div",Us,[T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[11]||(a[11]=t=>o.form.pick_address=t),placeholder:s.$t("enter_pickup"),id:"pickup",autocomplete:"off",onInput:a[12]||(a[12]=t=>o.handleInput("pickup"))},null,40,Bs),[[K,o.form.pick_address]])]),o.pickSuggestions.length>0?(i(),n("div",Ds,[(i(!0),n(w,null,x(o.pickSuggestions,t=>(i(),n("div",{key:t.placeId,class:"autocomplete-item",onClick:p=>o.selectSuggestion(t,"pickup")},l(t.formattedAddress),9,Rs))),128))])):h("",!0)]),(i(!0),n(w,null,x(o.errors.pick_address,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])]),e("div",zs,[o.form.ride_type=="regular"?(i(!0),n(w,{key:0},x(o.stopovers,(t,p)=>{var R,X,j,Y;return i(),n("div",{class:"col-12",key:p},[e("div",Es,[e("label",{for:`stop-${p}`,class:"form-label"},l(s.$t("stop_location")),9,Fs),e("div",js,[e("div",Ns,[e("div",Os,[T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":g=>t.address=g,placeholder:"Enter stop "+(p+1),id:"`stop-${index}`",autocomplete:"off",onInput:g=>o.handleInput("stop",p)},null,40,Hs),[[K,t.address]])]),((X=(R=o.stopSuggestions)==null?void 0:R[p])==null?void 0:X.length)>0?(i(),n("div",Gs,[(i(!0),n(w,null,x((j=o.stopSuggestions)==null?void 0:j[p],g=>(i(),n("div",{key:g.placeId,class:"autocomplete-item",onClick:ne=>o.selectSuggestion(g,"stop",p)},l(g.formattedAddress),9,Ks))),128))])):h("",!0)]),e("i",{class:"bx bx-trash text-danger fs-22 btn",onClick:g=>o.removeStopover(p)},null,8,Xs)]),(i(!0),n(w,null,x((Y=o.errors.stop)==null?void 0:Y[p],(g,ne)=>(i(),n("span",{key:ne,class:"text-danger"},l(g),1))),128))])])}),128)):h("",!0)]),e("div",Ys,[o.showAiportTerminal?(i(),n("div",Qs,[e("div",Ws,[e("label",Js,l(s.$t("aiport_terminal_info")),1),T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[13]||(a[13]=t=>o.form.terminal=t),placeholder:"$t('enter_terminal_info')",id:"terminal"},null,512),[[K,o.form.terminal]])])])):h("",!0)]),e("div",Zs,[o.showTrainStationEnterance?(i(),n("div",$s,[e("div",eo,[e("label",to,l(s.$t("station_enterance_info")),1),T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[14]||(a[14]=t=>o.form.enterance=t),placeholder:"$t('enter_enterance_info')",id:"enterance"},null,512),[[K,o.form.enterance]])])])):h("",!0)]),e("div",so,[o.form.ride_type!=="rental"?(i(),n("div",oo,[e("div",ao,[e("label",lo,l(s.$t("drop_location")),1),e("div",io,[e("div",no,[T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[15]||(a[15]=t=>o.form.drop_address=t),placeholder:s.$t("enter_drop"),id:"drop",autocomplete:"off",onInput:a[16]||(a[16]=t=>o.handleInput("drop"))},null,40,ro),[[K,o.form.drop_address]])]),o.dropSuggestions.length>0?(i(),n("div",co,[(i(!0),n(w,null,x(o.dropSuggestions,t=>(i(),n("div",{key:t.placeId,class:"autocomplete-item",onClick:p=>o.selectSuggestion(t,"drop")},l(t.formattedAddress),9,_o))),128))])):h("",!0)]),(i(!0),n(w,null,x(o.errors.drop_address,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128)),o.errors.map?(i(),n("div",po,[e("div",uo,[(i(!0),n(w,null,x(o.errors.map,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])):h("",!0)])])):h("",!0),e("div",mo,[o.form.transport_type=="delivery"?(i(),n("h4",fo,l(s.$t("poc_info")),1)):h("",!0),o.form.transport_type=="delivery"?(i(),n("div",go,[e("span",vo,[e("div",ho,[T(e("input",{class:"form-check-input",type:"checkbox",id:"poc","onUpdate:modelValue":a[17]||(a[17]=t=>I.isPocSame=t)},null,512),[[Me,I.isPocSame]]),e("label",bo,l(s.$t("check_if_poc_info_as_same_as_personal_info")),1)])])])):h("",!0)]),e("div",yo,[o.form.transport_type=="delivery"?(i(),n("div",ko,[e("div",wo,[e("label",xo,l(s.$t("drop_poc_name")),1),T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[18]||(a[18]=t=>o.form.drop_poc_name=t),placeholder:s.$t("enter_poc_name"),id:"poc_name",disabled:I.isPocSame},null,8,So),[[K,o.form.drop_poc_name]]),(i(!0),n(w,null,x(o.errors.drop_poc_name,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])):h("",!0),o.form.transport_type=="delivery"?(i(),n("div",Mo,[e("div",Co,[e("label",Po,l(s.$t("drop_poc_mobile")),1),T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[19]||(a[19]=t=>o.form.drop_poc_mobile=t),placeholder:s.$t("enter_poc_mobile"),id:"poc_mobile",disabled:I.isPocSame},null,8,Io),[[K,o.form.drop_poc_mobile]]),(i(!0),n(w,null,x(o.errors.drop_poc_mobile,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])):h("",!0)]),e("div",Lo,[o.form.transport_type=="delivery"?(i(),n("h4",To,l(s.$t("select_goods")),1)):h("",!0),o.form.transport_type=="delivery"?(i(),n("div",Vo,[e("div",qo,[e("label",Ao,l(s.$t("goods_type")),1),T(e("select",{id:"goods_type",class:"form-select","onUpdate:modelValue":a[20]||(a[20]=t=>o.form.goods_type_id=t)},[e("option",Uo,l(s.$t("choose_type")),1),(i(!0),n(w,null,x(F.goodsTypes,t=>(i(),n("option",{key:t.id,value:t.id},l(t.goods_type_name),9,Bo))),128))],512),[[ye,o.form.goods_type_id]]),(i(!0),n(w,null,x(o.errors.goods_type_id,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])):h("",!0),o.form.transport_type=="delivery"?(i(),n("div",Do,[e("div",Ro,[e("label",zo,l(s.$t("goods_quantity")),1),T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[21]||(a[21]=t=>o.form.goods_type_quantity=t),placeholder:s.$t("enter_quantity"),id:"goods_type_quantity"},null,8,Eo),[[K,o.form.goods_type_quantity]]),(i(!0),n(w,null,x(o.errors.goods_type_quantity,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])):h("",!0)]),e("div",Fo,[o.form.is_rental==1?(i(),n("h4",jo,l(s.$t("select_pack")),1)):h("",!0),o.form.is_rental==1?(i(),n("div",No,[e("div",Oo,[e("label",Ho,l(s.$t("rental_package_id")),1),T(e("select",{id:"rental_package_id",class:"form-select","onUpdate:modelValue":a[22]||(a[22]=t=>o.form.rental_package_id=t)},[e("option",Go,l(s.$t("choose_type")),1),(i(!0),n(w,null,x(o.packageTypes,t=>(i(),n("option",{key:t.id,value:t.id},l(t.package_name),9,Ko))),128))],512),[[ye,o.form.rental_package_id]]),(i(!0),n(w,null,x(o.errors.rental_package_id,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])):h("",!0)])]),e("div",Xo,[o.form.is_later==="1"?(i(),n("div",Yo,[e("div",Qo,[e("label",Wo,l(s.$t("date")),1),G(_e,{placeholder:s.$t("select_date"),modelValue:o.form.trip_start_time,"onUpdate:modelValue":a[23]||(a[23]=t=>o.form.trip_start_time=t),config:I.dateTimeConfig,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"]),(i(!0),n(w,null,x(o.errors.trip_start_time,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])])):h("",!0)]),e("div",Jo,[o.form.is_out_station==1?(i(),n("div",Zo,[e("h4",$o,l(s.$t("outstation")),1),e("div",null,[e("div",ea,[T(e("input",{class:"form-check-input",type:"radio",name:"is_round_trip",id:"oneway",value:0,"onUpdate:modelValue":a[24]||(a[24]=t=>o.form.is_round_trip=t)},null,512),[[ke,o.form.is_round_trip]]),e("label",ta,l(s.$t("one_way_outstation_trip")),1)]),e("div",sa,[T(e("input",{class:"form-check-input",type:"radio",name:"is_round_trip",id:"roundtrip",value:1,"onUpdate:modelValue":a[25]||(a[25]=t=>o.form.is_round_trip=t)},null,512),[[ke,o.form.is_round_trip]]),e("label",oa,l(s.$t("round_trip_outstation_trip")),1)])])])):h("",!0)]),e("div",aa,[o.form.is_round_trip==1&&o.form.is_out_station==1?(i(),n("div",la,[e("div",ia,[e("label",na,l(s.$t("return_time")),1),G(_e,{placeholder:s.$t("return_time"),modelValue:o.form.return_time,"onUpdate:modelValue":a[26]||(a[26]=t=>o.form.return_time=t),config:A.dateTimeConfigReturnTime,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"])]),(i(!0),n(w,null,x(o.errors.return_time,(t,p)=>(i(),n("span",{key:p,class:"text-danger"},l(t),1))),128))])):h("",!0)])])]),o.vehicleTypes.length>0||o.rentalVehicleTypes.length>0?(i(),n("div",ra,[e("h2",da,[e("button",ca,[e("h4",_a,l(s.$t("select_vehicle")),1)])]),e("div",pa,[e("div",ua,[o.vehicleTypes.length>0?(i(),n("h5",ma,l(s.$t("select_vehicle")),1)):h("",!0),o.vehicleTypes.length>0?(i(),n("div",fa,[e("div",ga,[e("div",va,[(i(!0),n(w,null,x(o.vehicleTypes,(t,p)=>(i(),n("div",{key:p,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+t.zone_type_id,class:"select-checkbox-btn-wrapper"},[T(e("input",{id:"vehicle_"+t.zone_type_id,name:"types",type:"radio",value:t.zone_type_id,"onUpdate:modelValue":a[27]||(a[27]=R=>o.form.vehicle_type=R),class:"select-checkbox-btn-input"},null,8,ba),[[ke,o.form.vehicle_type]]),e("span",ya,[e("a",ka,[e("div",wa,[a[36]||(a[36]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),q(l(t.driver_time||"--"),1)]),e("div",xa,[e("img",{alt:"",class:"rounded-circle img-fluid",src:t.vehicle_icon},null,8,Sa)]),e("div",Ma,l(t.currency)+" "+l(t.total),1),e("div",Ca,l(t.name),1)])])],8,ha)]))),128))])])])):h("",!0)]),e("div",Pa,[o.rentalVehicleTypes.length>0?(i(),n("h4",Ia,l(s.$t("select_vehicle")),1)):h("",!0),o.rentalVehicleTypes.length>0?(i(),n("div",La,[e("div",Ta,[e("div",Va,[(i(!0),n(w,null,x(o.rentalVehicleTypes,(t,p)=>(i(),n("div",{key:p,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+t.zone_type_id,class:"select-checkbox-btn-wrapper"},[T(e("input",{id:"vehicle_"+t.zone_type_id,name:"types",type:"radio",value:t.zone_type_id,"onUpdate:modelValue":a[28]||(a[28]=R=>o.form.vehicle_type=R),class:"select-checkbox-btn-input"},null,8,Aa),[[ke,o.form.vehicle_type]]),e("span",Ua,[e("a",Ba,[e("div",Da,[a[37]||(a[37]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),q(l(t.driver_time||"--"),1)]),e("div",Ra,[e("img",{alt:"",class:"rounded-circle img-fluid",src:t.icon},null,8,za)]),e("div",Ea,l(t.fare_amount),1),e("div",Fa,l(t.name),1)])])],8,qa)]))),128))])])])):h("",!0)])])])):h("",!0),F.is_pet_available==1||F.is_luggage_available==1?(i(),n("div",ja,[e("h2",Na,[e("button",Oa,[e("h4",Ha,l(s.$t("preference_for_user")),1)])]),e("div",Ga,[F.is_pet_available==1||F.is_luggage_available==1?(i(),n("div",Ka,[e("div",Xa,[e("div",null,[F.is_pet_available==1?(i(),n("div",Ya,[T(e("input",{class:"form-check-input",type:"checkbox",name:"is_pet_available",checked:o.form.is_pet_available,id:"is_pet_available",value:1,"onUpdate:modelValue":a[29]||(a[29]=t=>o.form.is_pet_available=t)},null,8,Qa),[[Me,o.form.is_pet_available]]),e("label",Wa,l(s.$t("pet_preference")),1)])):h("",!0),F.is_luggage_available==1?(i(),n("div",Ja,[T(e("input",{class:"form-check-input",type:"checkbox",name:"is_luggage_available",id:"is_luggage_available",value:1,"onUpdate:modelValue":a[30]||(a[30]=t=>o.form.is_luggage_available=t),checked:o.form.is_luggage_available},null,8,Za),[[Me,o.form.is_luggage_available]]),e("label",$a,l(s.$t("luggage_preference")),1)])):h("",!0)])])])):h("",!0)])])):h("",!0),o.form.vehicle_type?(i(),n("div",el,[e("div",tl,[e("div",sl,[e("h4",ol,l(s.$t("assign")),1),e("div",null,[e("a",{href:"#",onClick:a[31]||(a[31]=ce(t=>I.showManualAssign=!0,["prevent"])),class:""},[a[38]||(a[38]=e("i",{class:"ri-add-circle-fill me-1 align-middle fw-medium fs-16"},null,-1)),e("span",al,l(s.$t("manual_assign")),1)])])]),e("div",ll,[e("div",il,[e("button",{type:"submit",disabled:!o.enableBooking,onClick:a[32]||(a[32]=(...t)=>o.makeBooking&&o.makeBooking(...t)),class:"btn btn-primary"},l(s.$t("make_booking")),9,nl)])])])])):h("",!0)])],512)])]),_:1},8,["form","rules"])],32)]))])])]),e("div",cl,[e("div",_l,[e("div",pl,[e("div",ul,[e("div",ml,[G(le,{class:"d-eta"},{default:$(()=>[G(ae,{lg:"12"},{default:$(()=>[G(le,null,{default:$(()=>[G(ae,{lg:"4"}),G(ae,{lg:"8"},{default:$(()=>[e("div",fl,[e("div",gl,[e("div",vl,[e("div",hl,[a[44]||(a[44]=e("div",{class:"avatar-sm me-0"},[e("div",{class:"avatar-title rounded bg-transparent text-success fs-18"},[e("i",{class:"ri-map-pin-time-line"})])],-1)),e("div",bl,[e("p",yl,[q(l(s.$t("duration"))+" :",1),e("span",kl,l(o.formattedDuration),1)])])])])]),e("div",wl,[e("div",xl,[e("div",Sl,[a[45]||(a[45]=e("div",{class:"avatar-sm me-0"},[e("div",{class:"avatar-title rounded bg-transparent text-success fs-18"},[e("i",{class:"ri-pin-distance-line"})])],-1)),e("div",Ml,[e("p",Cl,[q(l(s.$t("distance"))+" :",1),e("span",Pl,l((o.etaParam.distance/1e3).toFixed(2))+" km",1)])])])])])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",Il,[e("div",Ll,[e("div",Tl,[e("div",Vl,[e("div",ql,l(s.$t("map_loading")),1)])])])]),a[46]||(a[46]=e("div",{class:"row p-2"},[e("div",{class:"col-xl-12"},[e("div",{class:"card card-animate"},[e("div",{class:"card-body"},[e("div",{class:"d-flex align-items-center"},[e("div",{class:"avatar-sm flex-shrink-0"},[e("span",{class:"avatar-title bg-primary-subtle text-primary rounded-circle fs-2"},[e("img",{class:"rounded-circle header-profile-user img-fluid",src:Ce,alt:"Loading..."})])]),e("div",{class:"flex-grow-1 overflow-hidden ms-3"},[e("div",{class:"d-flex align-items-center"},[e("h5",{class:"fs-5 flex-grow-1 mb-0"},[e("span",{class:""},"Test")])]),e("div",{class:"text-muted fs-16 mt-1"},[e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"}),e("span",{class:"mdi mdi-star text-warning"})])])]),e("div",{class:"text-muted ms-5 mt-3"},[e("i",{class:"ri-album-fill text-success fs-2"}),q(),e("span",{class:"text-body fw-medium"},"saravanampatti")]),e("div",{class:"text-muted ms-5 mt-3 d-flex gap-2"},[e("div",{class:"avatar-xxs"},[e("span",{class:"avatar-title rounded-circle bg-primary text-white"}," 1 ")]),e("span",{class:"text-body fw-medium"},"saravanampatti")]),e("div",{class:"text-muted ms-5 mt-3"},[e("i",{class:"ri-map-pin-fill text-danger fs-2"}),q(),e("span",{class:"text-body fw-medium"},"saravanampatti")])])])])],-1))])])]),e("div",Al,[e("div",Ul,[e("div",Bl,[e("div",Dl,[e("div",Rl,[e("table",zl,[e("thead",El,[e("tr",null,[e("th",Fl,l(s.$t("trip_info")),1),e("th",jl,l(s.$t("user"))+"/"+l(s.$t("driver")),1),e("th",Nl,l(s.$t("vehicle_type"))+"/"+l(s.$t("status")),1),e("th",Ol,l(s.$t("payment")),1),e("th",Hl,l(s.$t("action")),1)])]),e("tbody",null,[(i(!0),n(w,null,x(s.results,(t,p)=>(i(),n("tr",{key:p},[e("td",null,l(t.request_number)+" "+l(t.converted_updated_at),1),e("td",null,l(t.user_name?t.user_name:"----")+" "+l(t.driver_name?t.driver_name:"----"),1),e("td",null,[q(l(t.transport_type=="taxi"?"Taxi":"Delivery")+" "+l(t.is_bid_ride?s.$t("bidding"):"")+" ",1),G(ue,{class:De({"text-uppercase":!0,"text-bg-success":s.rideStatus(t)==="Completed"||s.rideStatus(t)==="Accepted"||s.rideStatus(t)==="Driver Started","text-bg-danger":s.rideStatus(t)==="Cancelled","text-bg-info":s.rideStatus(t)==="On Trip","text-bg-warning":s.rideStatus(t)==="Upcoming"||s.rideStatus(t)==="Driver Arrived"||s.rideStatus(t)==="Searching"})},{default:$(()=>[q(l(s.rideStatus(t)),1)]),_:2},1032,["class"])]),e("td",null,[G(ue,{class:De({"text-uppercase":!0,"text-bg-success":t.is_paid,"text-bg-danger":!t.is_paid})},{default:$(()=>[q(l(t.payment_opt==1?"Cash":t.payment_opt==2?"Wallet":"Card"),1)]),_:2},1032,["class"])]),e("td",null,[e("div",Gl,[a[52]||(a[52]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",Kl,[s.permissions.includes("dispatcher-ride-request-view")?(i(),n("div",{key:0,class:"dropdown-item",type:"button",onClick:ce(R=>s.editData(t),["prevent"])},[a[47]||(a[47]=e("i",{class:"bx bx-show-alt align-center text-muted me-2"},null,-1)),q(" "+l(s.$t("view")),1)],8,Xl)):h("",!0),s.permissions.includes("dispatcher-ride-request-cancel")?(i(),n("div",Yl,[!t.is_cancelled&&!t.is_completed?(i(),n("div",{key:0,class:"dropdown-item",type:"button",onClick:ce(R=>s.deleteModal(t.id),["prevent"])},[a[48]||(a[48]=e("i",{class:"bx bx-show-alt align-center text-muted me-2"},null,-1)),q(" "+l(s.$t("cancel")),1)],8,Ql)):h("",!0)])):h("",!0),s.permissions.includes("dispatcher-ride-request-assign")?(i(),n("div",Wl,[!t.driver_id&&!t.is_cancelled&&!t.is_completed?(i(),Be(f,{key:0,class:"dropdown-item",type:"button",href:`ongoing_request/assign/${t.id}`},{default:$(()=>[a[49]||(a[49]=e("i",{class:"bx bx-show-alt align-center text-muted me-2"},null,-1)),q(" "+l(s.$t("assign")),1)]),_:2,__:[49]},1032,["href"])):h("",!0)])):h("",!0),t.is_completed?(i(),n("div",Jl,[e("button",{onClick:R=>s.navigateUserInvoice(t.id),class:"dropdown-item"},[a[50]||(a[50]=e("i",{class:"bx bx-file align-center text-muted me-2"},null,-1)),q(" "+l(s.$t("Download User Invoice")),1)],8,Zl),e("button",{onClick:R=>s.navigateDriverInvoice(t.id),class:"dropdown-item"},[a[51]||(a[51]=e("i",{class:"bx bx-file align-center text-muted me-2"},null,-1)),q(" "+l(s.$t("Download Driver Invoice")),1)],8,$l)])):h("",!0)])])])]))),128))]),e("tbody",null,[e("tr",null,[e("td",ei,[a[53]||(a[53]=e("img",{src:ft,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,l(s.$t("no_data_found")),1)])])])])])]),a[54]||(a[54]=e("div",{class:"card-body p-0"},null,-1))])])])])])])]),_:1})}const ui=$e(gt,[["render",ti],["__scopeId","data-v-168c2830"]]);export{ui as default};
