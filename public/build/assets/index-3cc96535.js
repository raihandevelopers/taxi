import{_ as J,Z as K,O as Q,P as Z,z as j,C as G,r as g,T as W,Q as X,g as u,o as r,x as H,w as _,a as T,U as S,N as ee,k as i,l as e,J as o,q as te,K as se,i as c,L as U,F as I,y as p,n as ae,B as O}from"./vendor-ddfbd976.js";import{L as oe}from"./main-306a5ea6.js";import{P as ne}from"./page-header-2dc95532.js";import{P as le}from"./Pagination-f095ae3c.js";import{s as re}from"./search-2c17aadd.js";import{s as ie}from"./searchbar-3acbc236.js";import{u as de}from"./footer-e648049d.js";import{_ as ce}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const ue={data(){return{rightOffcanvas:!1}},components:{Layout:oe,PageHeader:ne,Head:K,Pagination:le,Multiselect:Q,flatPickr:Z,Link:j,search:re,searchbar:ie},props:{successMessage:String,alertMessage:String,app_for:String},setup(s){const{t}=G(),x=g(""),{selectedLocation:a}=de(),b=W({all:"",service_location_id:"all",locked:"",limit:10}),y=g([]),f=g({}),w=g(!1),m=g(!1),B=g(null),P=g({}),C=g(s.successMessage||""),M=g(s.alertMessage||""),L=()=>{C.value="",M.value=""},N=()=>{m.value=!0},F=()=>{b.reset(),v(),m.value=!1},n=()=>{w.value=!1},k=async l=>{try{await T.delete(`/service-locations/delete/${l}`);const d=y.value.findIndex(h=>h.id===l);d!==-1&&y.value.splice(d,1),w.value=!1,S.fire(t("success"),t("negative_balance_driver_deleted_successfully"),"success")}catch{S.fire(t("error"),t("failed_to_delete_negative_balance_drivers"),"error")}},D=async l=>{S.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async d=>{if(d.isConfirmed)try{await k(l)}catch(h){console.error(t("error_deleting_data"),h),S.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},V=l=>s.app_for&&s.app_for=="demo"?"***********":l.mobile_number,$=l=>s.app_for&&s.app_for=="demo"?"***********":l.email,v=async(l=1)=>{try{const d=b.data();d.search=x.value,d.page=l;const h=await T.get("/negative-balance-drivers/list",{params:d});y.value=h.data.results,f.value=h.data.paginator,q(f.value.total),m.value=!1}catch(d){console.error(t("error_fetching_negative_balance_drivers"),d)}},E=async l=>{x.value=l,v()},A=l=>(f.value.current_page-1)*f.value.per_page+l+1,R=async l=>{localStorage.setItem("negative-balance-drivers/list",l),v(l)},Y=async l=>{ee.get(`/negative-balance-drivers/view-profile/${l.id}`)},q=()=>{P.value=[10,25,50,100,200,500]},z=()=>{v()};return X(a,l=>{console.log("value",l),b.service_location_id=l,v()}),{results:y,modalShow:w,deleteItemId:B,successMessage:C,alertMessage:M,filterData:N,deleteModal:D,closeModal:n,deleteData:k,dismissMessage:L,fetchSearch:E,SerialNumber:A,paginator:f,modalFilter:m,clearFilter:F,fetchDatas:v,mobileFromUser:V,emailFromUser:$,filter:b,handlePageChanged:R,viewProfile:Y,paginatorOption:P,changeEntriesPerPage:z,selectedLocation:a}},mounted(){this.filter.service_location_id=this.selectedLocation,this.fetchDatas();const s=localStorage.getItem("negative-balance-drivers/list");s?this.handlePageChanged(Number(s)):this.handlePageChanged(1)}},_e={class:"d-flex align-items-center mt-3"},me={class:"me-2 text-muted"},ge=["value"],fe={class:"ms-2 text-muted"},pe={class:"table-responsive"},ve={class:"table align-middle position-relative table-nowrap"},he={class:"table-active"},be={scope:"col"},ye={scope:"col"},we={scope:"col"},Ce={scope:"col"},Be={scope:"col"},Pe={scope:"col"},Me={scope:"col"},ke={key:0},Se={key:0},xe={key:1},Le={key:2},Ne={class:"dropdown"},Fe={class:"dropdown-menu dropdown-menu-end"},He=["onClick"],De={key:1},Te={colspan:"7",class:"text-center"},Ue={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ie={class:"alert-content"},Oe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ve={class:"alert-content"};function $e(s,t,x,a,b,y){const f=u("Head"),w=u("PageHeader"),m=u("BCol"),B=u("BRow"),P=u("BCardHeader"),C=u("BBadge"),M=u("BCardBody"),L=u("BCard"),N=u("Pagination"),F=u("Layout");return r(),H(F,null,{default:_(()=>[i(f,{title:"Negative Balance Drivers"}),i(w,{title:s.$t("negative_balance_drivers"),pageTitle:s.$t("negative_balance_drivers")},null,8,["title","pageTitle"]),i(B,null,{default:_(()=>[i(m,{lg:"12"},{default:_(()=>[i(L,{"no-body":"",id:"tasksList"},{default:_(()=>[i(P,{class:"border-0"},{default:_(()=>[i(B,{class:"g-2"},{default:_(()=>[i(m,{md:"3"},{default:_(()=>[e("div",_e,[e("label",me,o(s.$t("show")),1),te(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>a.filter.limit=n),onChange:t[1]||(t[1]=(...n)=>a.changeEntriesPerPage&&a.changeEntriesPerPage(...n)),class:"form-select form-select-sm w-auto"},[(r(!0),c(I,null,U(a.paginatorOption,n=>(r(),c("option",{key:n,value:n},o(n),9,ge))),128))],544),[[se,a.filter.limit]]),e("label",fe,o(s.$t("entries")),1)])]),_:1}),i(m,{md:"3"}),i(m,{md:"auto",class:"ms-auto"})]),_:1})]),_:1}),i(M,{class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[e("div",pe,[e("table",ve,[e("thead",he,[e("tr",null,[e("th",be,o(s.$t("name")),1),e("th",ye,o(s.$t("service_location")),1),e("th",we,o(s.$t("email")),1),e("th",Ce,o(s.$t("mobile_number")),1),e("th",Be,o(s.$t("transport_type")),1),e("th",Pe,o(s.$t("approved_status")),1),e("th",Me,o(s.$t("action")),1)])]),a.results.length>0?(r(),c("tbody",ke,[(r(!0),c(I,null,U(a.results,(n,k)=>(r(),c("tr",{key:k},[e("td",null,o(n.name),1),e("td",null,o(n.service_location_name),1),e("td",null,o(a.emailFromUser(n)),1),e("td",null,o(a.mobileFromUser(n)),1),e("td",null,[n.transport_type==="taxi"?(r(),c("span",Se,o(s.$t("taxi")),1)):n.transport_type==="delivery"?(r(),c("span",xe,o(s.$t("delivery")),1)):(r(),c("span",Le,o(s.$t("all")),1))]),e("td",null,[n.active==1?(r(),H(C,{key:0,variant:"success",class:"text-uppercase"},{default:_(()=>[p(o(s.$t("approved")),1)]),_:1})):(r(),H(C,{key:1,variant:"danger",class:"text-uppercase"},{default:_(()=>[p(o(s.$t("disapproved")),1)]),_:1}))]),e("td",null,[e("div",Ne,[t[5]||(t[5]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",Fe,[e("a",{class:"dropdown-item",href:"#",onClick:ae(D=>a.viewProfile(n),["prevent"])},[t[4]||(t[4]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),p(o(s.$t("view_profile")),1)],8,He)])])])]))),128))])):(r(),c("tbody",De,[e("tr",null,[e("td",Te,[t[6]||(t[6]=e("img",{src:ce,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,o(s.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[a.successMessage?(r(),c("div",Ue,[e("div",Ie,[t[7]||(t[7]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[8]||(t[8]=p()),t[9]||(t[9]=e("strong",null,"Success",-1)),p(" - "+o(a.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...n)=>a.dismissMessage&&a.dismissMessage(...n)),"aria-label":"Close Success Message"})])])):O("",!0),a.alertMessage?(r(),c("div",Oe,[e("div",Ve,[t[10]||(t[10]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[11]||(t[11]=p()),t[12]||(t[12]=e("strong",null,"Alert",-1)),p(" - "+o(a.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...n)=>a.dismissMessage&&a.dismissMessage(...n)),"aria-label":"Close Alert Message"})])])):O("",!0)]),i(N,{paginator:a.paginator,onPageChanged:a.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Ze=J(ue,[["render",$e]]);export{Ze as default};
