import{_ as H,Z as L,O as T,C as h,T as V,r as g,g as r,o as _,x as N,w as u,a as x,N as w,k as i,l as a,y as S,J as p,i as v,L as P,F as U,n as D,B as R}from"./vendor-ddfbd976.js";import{L as O}from"./main-306a5ea6.js";import{P as j}from"./page-header-2dc95532.js";import{P as q}from"./Pagination-f095ae3c.js";/* empty css                                                    */import{F as A}from"./FormValidation-a9047131.js";import{I as z}from"./ImageUpload-6f09ff26.js";import"./footer-e648049d.js";import"./app-042fb454.js";const E={components:{Layout:O,PageHeader:j,Head:L,Pagination:q,Multiselect:T,FormValidation:A,ImageUpload:z},props:{successMessage:String,alertMessage:String,bannerimage:{type:Object,required:!0},validate:Function},setup(n){const{t:e}=h(),o=V({image:n.bannerimage&&n.bannerimage.image||""}),s={image:{required:!0}},y=g(null),f=g({}),b=g(n.successMessage||""),d=g(n.alertMessage||""),M=()=>{b.value="",d.value=""},B=async()=>{if(f.value=y.value.validate(),!(Object.keys(f.value).length>0))try{const t=new FormData;for(const c in o)c==="iconFile"&&o[c]?t.append("image",o[c]):t.append(c,o[c]);let m;n.bannerimage&&n.bannerimage.id?m=await x.post(`/banner-image/update/${n.bannerimage.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}):m=await x.post("store",t),m.status===201?(b.value=e("banner_image_created_successfully"),o.reset(),w.get("/banner-image")):d.value=e("failed_to_create_banner_image")}catch(t){t.response&&t.response.status===422?f.value=t.response.data.errors:t.response&&t.response.status===403?(d.value=t.response.data.alertMessage,setTimeout(()=>{w.get("/banner-image")},5e3)):(console.error(e("error_creating_banner_image"),t),d.value=e("failed_to_create_banner_image_catch"))}},C=(t,m)=>{o[m]=t},I=t=>{o[t]=null},k=n.bannerimage?n.bannerimage.image:null;return{form:o,successMessage:b,alertMessage:d,handleSubmit:B,dismissMessage:M,selectedCountry:g(null),selectedTimezone:g(null),validationRules:s,validationRef:y,errors:f,handleImageSelected:C,handleImageRemoved:I,iconUrl:k}}},J={class:"row"},Z={class:"col-sm-12"},G={class:"mb-3"},K={for:"onboarding_image",class:"form-label d-flex"},Q={class:"col-lg-12"},W={class:"text-end"},X={type:"submit",class:"btn btn-primary"},Y={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},$={class:"alert-content"},ee={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},ae={class:"alert-content"};function se(n,e,o,s,y,f){const b=r("Head"),d=r("PageHeader"),M=r("BCardHeader"),B=r("ImageUpload"),C=r("FormValidation"),I=r("BCardBody"),k=r("BCard"),t=r("BCol"),m=r("BRow"),c=r("Layout");return _(),N(c,null,{default:u(()=>[i(b,{title:"Banner Image"}),i(d,{title:o.bannerimage?n.$t("edit"):n.$t("create"),pageTitle:n.$t("banner-image"),pageLink:"/banner-image"},null,8,["title","pageTitle"]),i(m,null,{default:u(()=>[i(t,{lg:"12"},{default:u(()=>[i(k,{"no-body":"",id:"tasksList"},{default:u(()=>[i(M,{class:"border-0"}),i(I,{class:"border border-dashed border-end-0 border-start-0"},{default:u(()=>[a("form",{onSubmit:e[2]||(e[2]=D((...l)=>s.handleSubmit&&s.handleSubmit(...l),["prevent"]))},[i(C,{form:s.form,rules:s.validationRules,ref:"validationRef"},{default:u(()=>[a("div",J,[a("div",Z,[a("div",G,[a("label",K,[S(p(n.$t("banner-image"))+" ",1),e[5]||(e[5]=a("span",null,[a("h5",{class:"text-muted mt-1 mb-0 fs-13"},"(500px x 100px)")],-1)),e[6]||(e[6]=a("span",{class:"text-danger"},"*",-1))]),i(B,{imageType:"banner",flexStyle:"0 0 calc(50% - 20px)",aspectRatio:"5 / 1",initialImageUrl:s.form.image,onImageSelected:e[0]||(e[0]=l=>s.handleImageSelected(l,"image")),onImageRemoved:e[1]||(e[1]=()=>s.handleImageRemoved("image"))},null,8,["initialImageUrl"]),(_(!0),v(U,null,P(s.errors.image,(l,F)=>(_(),v("span",{key:F,class:"text-danger"},p(l),1))),128))])]),a("div",Q,[a("div",W,[a("button",X,p(o.bannerimage?n.$t("update"):n.$t("save")),1)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),a("div",null,[s.successMessage?(_(),v("div",Y,[a("div",$,[e[7]||(e[7]=a("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[8]||(e[8]=a("strong",null,"Success",-1)),S(" - "+p(s.successMessage)+" ",1),a("button",{type:"button",class:"btn-close btn-close-success",onClick:e[3]||(e[3]=(...l)=>s.dismissMessage&&s.dismissMessage(...l)),"aria-label":"Close Success Message"})])])):R("",!0),s.alertMessage?(_(),v("div",ee,[a("div",ae,[e[9]||(e[9]=a("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[10]||(e[10]=a("strong",null,"Alert",-1)),S(" - "+p(s.alertMessage)+" ",1),a("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[4]||(e[4]=(...l)=>s.dismissMessage&&s.dismissMessage(...l)),"aria-label":"Close Alert Message"})])])):R("",!0)])]),_:1})}const ge=H(E,[["render",se]]);export{ge as default};
