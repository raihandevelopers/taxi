import{_ as A,Z as U,O as N,C as P,r as b,T as R,Q as j,D,g as u,o as n,x,w as m,a as H,N as q,k as d,l as t,i as l,L as g,p as O,J as c,F as h,y as M,q as k,M as B,B as F,K as Z,n as E}from"./vendor-ddfbd976.js";import{L as I}from"./main-306a5ea6.js";import{P as J}from"./page-header-2dc95532.js";import{P as K}from"./Pagination-f095ae3c.js";import{F as Q}from"./FormValidation-a9047131.js";import{u as G}from"./footer-e648049d.js";import"./app-042fb454.js";const W={components:{Layout:I,PageHeader:J,Head:U,Pagination:K,Multiselect:N,FormValidation:Q},props:{successMessage:String,alertMessage:String,activeTab:String,countries:Array,timeZones:Array,languages:Array,serviceLocation:Object,validate:Function,app_for:String},setup(o){const{t:s}=P(),{languages:y,fetchData:a}=G(),S=b("English"),_=R({country:o.serviceLocation&&o.serviceLocation.country||"",currency_code:o.serviceLocation&&o.serviceLocation.currency_code||"",currency_symbol:o.serviceLocation&&o.serviceLocation.currency_symbol||"",currency_pointer:"ltr",timezone:o.serviceLocation&&o.serviceLocation.timezone||"",currency_name:o.serviceLocation&&o.serviceLocation.currency_name||"",languageFields:o.serviceLocation?o.serviceLocation.languageFields||{}:{}}),V={country:{required:!0},currency_code:{required:!0},currency_symbol:{required:!0},timezone:{required:!0}},C=b(null),L=b({}),f=b(o.successMessage||""),v=b(o.alertMessage||""),w=()=>{f.value="",v.value=""},z=r=>{S.value=r},p=r=>{const e=o.countries.find(i=>i.id===r);e&&(_.currency_code=e.currency_code,_.currency_symbol=e.currency_symbol,_.currency_name=e.currency_name)};j(()=>_.country,r=>{p(r)});const T=async()=>{if(o.app_for=="demo"){Swal.fire(s("error"),s("you_are_not_authorised"),"error");return}if(L.value=C.value.validate(),!(Object.keys(L.value).length>0))try{let r;o.serviceLocation&&o.serviceLocation.id?r=await H.post(`/service-locations/update/${o.serviceLocation.id}`,_.data()):r=await H.post("store",_.data()),r.status===201?(f.value=s("service_location_created_successfully"),_.reset(),q.get("/service-locations")):v.value=s("failed_to_create_service_location")}catch(r){r.response&&r.response.status===422?L.value=r.response.data.errors:r.response&&r.response.status===403?(v.value=r.response.data.alertMessage,setTimeout(()=>{q.get("/service-locations")},5e3)):(console.error(s("error_creating_service_location"),r),v.value=s("failed_to_create_service_location_catch"))}};return D(async()=>{Object.keys(y).length==0&&await a()}),{form:_,successMessage:f,alertMessage:v,handleSubmit:T,dismissMessage:w,selectedCountry:b(null),selectedTimezone:b(null),validationRules:V,validationRef:C,errors:L,languages:y,setActiveTab:z,activeTab:S,onCountryChange:p}}},X={class:"nav nav-tabs nav-tabs-custom nav-success nav-justified",role:"tablist"},Y={class:"nav-item",role:"presentation"},$=["onClick"],ee=["id"],te={class:"col-sm-6 mt-3"},se={class:"mb-3"},oe=["for"],ae=["placeholder","id","onUpdate:modelValue","required"],re={class:"row"},ne={class:"col-sm-6"},le={class:"mb-3"},ce={for:"select_country",class:"form-label"},ie={disabled:"",value:""},de=["value"],ue={class:"col-sm-6"},me={class:"mb-3"},_e={for:"currency_code",class:"form-label"},ve=["placeholder"],ye={class:"col-sm-6"},fe={class:"mb-3"},be={for:"currency_symbol",class:"form-label"},ge=["placeholder"],he={class:"col-sm-6"},Me={class:"mb-3"},Le={for:"select_timezone",class:"form-label"},ke={class:"col-sm-6"},Ce={class:"mb-3"},pe={class:"col-lg-12"},Be={class:"text-end"},Se=["disabled"],Ve={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},we={class:"alert-content"},ze={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Te={class:"alert-content"};function Fe(o,s,y,a,S,_){const V=u("Head"),C=u("PageHeader"),L=u("BCardHeader"),f=u("BCol"),v=u("BRow"),w=u("Multiselect"),z=u("FormValidation"),p=u("BCardBody"),T=u("BCard"),r=u("Layout");return n(),x(r,null,{default:m(()=>[d(V,{title:"Service Locations"}),d(C,{title:y.serviceLocation?o.$t("edit"):o.$t("create"),pageTitle:o.$t("service_location"),pageLink:"/service-locations"},null,8,["title","pageTitle"]),d(v,null,{default:m(()=>[d(f,{lg:"12"},{default:m(()=>[d(T,{"no-body":"",id:"tasksList"},{default:m(()=>[d(L,{class:"border-0"}),d(p,{class:"border border-dashed border-end-0 border-start-0"},{default:m(()=>[t("form",{onSubmit:s[5]||(s[5]=E((...e)=>a.handleSubmit&&a.handleSubmit(...e),["prevent"]))},[d(z,{form:a.form,rules:a.validationRules,ref:"validationRef"},{default:m(()=>[d(v,null,{default:m(()=>[d(f,{lg:"12"},{default:m(()=>[t("div",null,[t("ul",X,[(n(!0),l(h,null,g(a.languages,e=>(n(),x(v,{key:e.code},{default:m(()=>[d(f,{lg:"12"},{default:m(()=>[t("li",Y,[t("a",{class:O(["nav-link",{active:a.activeTab===e.label}]),onClick:i=>a.setActiveTab(e.label),role:"tab","aria-selected":"true"},c(e.label),11,$)])]),_:2},1024)]),_:2},1024))),128))]),(n(!0),l(h,null,g(a.languages,e=>(n(),l("div",{class:"tab-content text-muted",key:e.code},[a.activeTab===e.label?(n(),l("div",{key:0,class:"tab-pane active show",id:`${e.label}`,role:"tabpanel"},[t("div",te,[t("div",se,[t("label",{for:`name-${e.code}`,class:"form-label"},[M(c(o.$t("name"))+" ",1),s[8]||(s[8]=t("span",{class:"text-danger"},"*",-1))],8,oe),k(t("input",{type:"text",class:"form-control",placeholder:o.$t("enter_name_in",{language:`${e.label}`}),id:`name-${e.code}`,"onUpdate:modelValue":i=>a.form.languageFields[e.code]=i,required:e.code==="en"},null,8,ae),[[B,a.form.languageFields[e.code]]])])])],8,ee)):F("",!0)]))),128))])]),_:1})]),_:1}),t("div",re,[t("div",ne,[t("div",le,[t("label",ce,[M(c(o.$t("select_country"))+" ",1),s[9]||(s[9]=t("span",{class:"text-danger"},"*",-1))]),k(t("select",{id:"select_country",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=e=>a.form.country=e)},[t("option",ie,c(o.$t("choose_country")),1),(n(!0),l(h,null,g(y.countries,e=>(n(),l("option",{key:e.id,value:e.id},c(e.name),9,de))),128))],512),[[Z,a.form.country]]),(n(!0),l(h,null,g(a.errors.country,(e,i)=>(n(),l("span",{key:i,class:"text-danger"},c(e),1))),128))])]),t("div",ue,[t("div",me,[t("label",_e,[M(c(o.$t("currency_code"))+" ",1),s[10]||(s[10]=t("span",{class:"text-danger"},"*",-1))]),k(t("input",{type:"text",class:"form-control",placeholder:o.$t("enter_currency_code"),id:"currency_code","onUpdate:modelValue":s[1]||(s[1]=e=>a.form.currency_code=e)},null,8,ve),[[B,a.form.currency_code]]),(n(!0),l(h,null,g(a.errors.currency_code,(e,i)=>(n(),l("span",{key:i,class:"text-danger"},c(e),1))),128))])]),t("div",ye,[t("div",fe,[t("label",be,[M(c(o.$t("currency_symbol"))+" ",1),s[11]||(s[11]=t("span",{class:"text-danger"},"*",-1))]),k(t("input",{type:"text",class:"form-control",placeholder:o.$t("enter_currency_symbol"),id:"currency_symbol","onUpdate:modelValue":s[2]||(s[2]=e=>a.form.currency_symbol=e)},null,8,ge),[[B,a.form.currency_symbol]]),(n(!0),l(h,null,g(a.errors.currency_symbol,(e,i)=>(n(),l("span",{key:i,class:"text-danger"},c(e),1))),128))])]),t("div",he,[t("div",Me,[t("label",Le,[M(c(o.$t("select_timezone"))+" ",1),s[12]||(s[12]=t("span",{class:"text-danger"},"*",-1))]),d(w,{id:"select_timezone",modelValue:a.form.timezone,"onUpdate:modelValue":s[3]||(s[3]=e=>a.form.timezone=e),options:y.timeZones.map(e=>({value:e.timezone,label:e.timezone})),"close-on-select":!0,searchable:!0,placeholder:o.$t("choose_timezone"),"create-option":!1},null,8,["modelValue","options","placeholder"]),(n(!0),l(h,null,g(a.errors.timezone,(e,i)=>(n(),l("span",{key:i,class:"text-danger"},c(e),1))),128))])]),t("div",ke,[t("div",Ce,[k(t("input",{type:"hidden",class:"form-control",id:"currency_name",name:"currency_name","onUpdate:modelValue":s[4]||(s[4]=e=>a.form.currency_name=e)},null,512),[[B,a.form.currency_name]])])]),t("div",pe,[t("div",Be,[t("button",{type:"submit",class:"btn btn-primary",disabled:y.app_for==="demo"},c(y.serviceLocation?o.$t("update"):o.$t("save")),9,Se)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[a.successMessage?(n(),l("div",Ve,[t("div",we,[s[13]||(s[13]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[14]||(s[14]=t("strong",null,"Success",-1)),M(" - "+c(a.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:s[6]||(s[6]=(...e)=>a.dismissMessage&&a.dismissMessage(...e)),"aria-label":"Close Success Message"})])])):F("",!0),a.alertMessage?(n(),l("div",ze,[t("div",Te,[s[15]||(s[15]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[16]||(s[16]=t("strong",null,"Alert",-1)),M(" - "+c(a.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[7]||(s[7]=(...e)=>a.dismissMessage&&a.dismissMessage(...e)),"aria-label":"Close Alert Message"})])])):F("",!0)])]),_:1})}const Re=A(W,[["render",Fe]]);export{Re as default};
