import{_ as H,Z as q,O as N,C as P,T,r as k,g as r,o as d,x as F,w as m,U as B,a as D,N as O,k as c,l as o,y as f,J as l,B as C,q as S,M as w,i as u,L as R,F as U,n as j}from"./vendor-ddfbd976.js";import{L as A}from"./main-306a5ea6.js";import{P as E}from"./page-header-2dc95532.js";import{P as z}from"./Pagination-f095ae3c.js";import{i as J}from"./imageUpload-4f5efd67.js";import{I as Z}from"./ImageUp-1fee9a5c.js";import{F as G}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const K={components:{Layout:A,PageHeader:E,Head:q,Pagination:z,Multiselect:N,FormValidation:G,imageUpload:J,ImageUp:Z},props:{successMessage:String,alertMessage:String,invoice_configuration:{type:Object,required:!0},app_for:String,validate:Function},setup(i){const{t:e}=P();console.log(i.invoice_configuration);const s=T({privacy_policy_link:i.invoice_configuration&&i.invoice_configuration.privacy_policy_link||"",terms_and_conditions_link:i.invoice_configuration&&i.invoice_configuration.terms_and_conditions_link||"",invoice_email:i.invoice_configuration&&i.invoice_configuration.invoice_email||"",invoice_logo:i.invoice_configuration&&i.invoice_configuration.invoice_logo||""}),t={terms_and_conditions_link:{required:!0},terms_condition_link:{required:!0},invoice_email:{required:!0},invoice_logo:{required:!0}},x=k(null),h=k({}),v=k(i.successMessage||""),g=k(i.alertMessage||""),p=()=>{v.value="",g.value=""},b=()=>{const a=document.getElementById("iconInput");if(a.files.length>0){const _=a.files[0],n=new Image;n.onload=function(){(n.width!==512||n.height!==512)&&(alert("Icon must be 512x512 pixels."),a.value="")},n.src=URL.createObjectURL(_)}},M=async()=>{if(i.app_for=="demo"){B.fire(e("error"),e("you_are_not_authorised"),"error");return}try{const a=new FormData;for(const n in s)n==="iconFile"&&s[n]?a.append("invoice_logo",s[n]):a.append(n,s[n]);let _;_=await D.post("/invoice-configuration/update",a),_.status===201?(v.value=e("invoice_configuration_updated_successfully"),s.reset(),O.get("/invoice-configuration")):g.value=e("failed_to_update_invoice_configuration")}catch(a){console.error(e("error_creating_invoice_configuration"),a),g.value=e("failed_to_create_invoice_configuration_catch"),a.response&&a.response.data.errors&&(h.value=a.response.data.errors)}},I=i.invoice_configuration?i.invoice_configuration.icon:null;return{form:s,successMessage:v,alertMessage:g,handleSubmit:M,dismissMessage:p,validationRules:t,validationRef:x,errors:h,iconUrl:I,validateIconSize:b,handleImageSelected:(a,_)=>{if(i.app_for=="demo"){B.fire(e("error"),e("you_are_not_authorised"),"error");return}s[_]=a},handleImageRemoved:a=>{if(i.app_for=="demo"){B.fire(e("error"),e("you_are_not_authorised"),"error");return}s[a]=null}}}},Q={class:"alert bg-warning border-warning fs-18",role:"alert"},W={class:"row"},X={class:"col-sm-6"},Y={class:"mb-3"},$={for:"privacy_policy_link",class:"form-label"},ee=["readonly","placeholder"],oe={class:"col-sm-6"},ie={class:"mb-3"},ne={for:"terms_and_conditions_link",class:"form-label"},te=["readonly","placeholder"],ae={class:"col-sm-6"},se={class:"mb-3"},le={for:"invoice_email",class:"form-label"},re=["readonly","placeholder"],de={class:"col-sm-6 mt-3"},ce={class:"mb-3"},_e={for:"invoice_logo",class:"form-label"},me={class:"col-lg-12"},ue={class:"text-end"},fe={type:"submit",class:"btn btn-primary"},ge={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},ve={class:"alert-content"},ye={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},pe={class:"alert-content"};function be(i,e,s,t,x,h){const v=r("Head"),g=r("PageHeader"),p=r("BCardHeader"),b=r("BCard"),M=r("ImageUp"),I=r("FormValidation"),L=r("BCardBody"),V=r("BCol"),a=r("BRow"),_=r("Layout");return d(),F(_,null,{default:m(()=>[c(v,{title:"Invoice Configuration"}),c(g,{title:i.$t("invoice-configuration"),pageTitle:i.$t("invoice-configuration")},null,8,["title","pageTitle"]),c(a,null,{default:m(()=>[s.app_for==="demo"?(d(),F(b,{key:0,"no-body":"",id:"tasksList"},{default:m(()=>[c(p,{class:"border-0"},{default:m(()=>[o("div",Q,[o("strong",null,[f(l(i.$t("note"))+" : ",1),o("em",null,l(i.$t("actions_restricted_due_to_demo_mode")),1)])])]),_:1})]),_:1})):C("",!0),c(V,{lg:"12"},{default:m(()=>[c(b,{"no-body":"",id:"tasksList"},{default:m(()=>[c(p,{class:"border-0"}),c(L,{class:"border border-dashed border-end-0 border-start-0"},{default:m(()=>[o("form",{onSubmit:e[5]||(e[5]=j((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"]))},[c(I,{form:t.form,rules:t.validationRules,ref:"validationRef"},{default:m(()=>[o("div",W,[o("div",X,[o("div",Y,[o("label",$,[f(l(i.$t("privacy_policy"))+" ",1),e[8]||(e[8]=o("span",{class:"text-danger"},"*",-1))]),S(o("textarea",{type:"text",readonly:s.app_for==="demo",class:"form-control",placeholder:i.$t("enter_privacy_policy"),id:"privacy_policy_link","onUpdate:modelValue":e[0]||(e[0]=n=>t.form.privacy_policy_link=n)},null,8,ee),[[w,t.form.privacy_policy_link]]),(d(!0),u(U,null,R(t.errors.privacy_policy_link,(n,y)=>(d(),u("span",{key:y,class:"text-danger"},l(n),1))),128))])]),o("div",oe,[o("div",ie,[o("label",ne,[f(l(i.$t("terms_and_conditions_link"))+" ",1),e[9]||(e[9]=o("span",{class:"text-danger"},"*",-1))]),S(o("input",{type:"url",readonly:s.app_for==="demo",class:"form-control",placeholder:i.$t("enter_terms_and_condition_link"),id:"terms_and_conditions_link","onUpdate:modelValue":e[1]||(e[1]=n=>t.form.terms_and_conditions_link=n)},null,8,te),[[w,t.form.terms_and_conditions_link]]),(d(!0),u(U,null,R(t.errors.terms_and_conditions_link,(n,y)=>(d(),u("span",{key:y,class:"text-danger"},l(n),1))),128))])]),o("div",ae,[o("div",se,[o("label",le,[f(l(i.$t("invoice_email"))+" ",1),e[10]||(e[10]=o("span",{class:"text-danger"},"*",-1))]),S(o("input",{type:"email",readonly:s.app_for==="demo",class:"form-control",placeholder:i.$t("enter_invoice_email"),id:"invoice_email","onUpdate:modelValue":e[2]||(e[2]=n=>t.form.invoice_email=n)},null,8,re),[[w,t.form.invoice_email]]),(d(!0),u(U,null,R(t.errors.invoice_email,(n,y)=>(d(),u("span",{key:y,class:"text-danger"},l(n),1))),128))])]),o("div",de,[o("div",ce,[o("label",_e,[f(l(i.$t("invoice_logo"))+" ",1),e[11]||(e[11]=o("span",{class:"text-danger"},"*",-1))]),c(M,{imageType:"invoice",flexStyle:"0 0 calc(60% - 10px)",aspectRatio:"18 / 5",initialImageUrl:t.form.invoice_logo,onImageSelected:e[3]||(e[3]=n=>t.handleImageSelected(n,"invoice_logo")),onImageRemoved:e[4]||(e[4]=()=>t.handleImageRemoved("invoice_logo"))},null,8,["initialImageUrl"])])]),o("div",me,[o("div",ue,[o("button",fe,l(s.invoice_configuration?i.$t("update"):i.$t("save")),1)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),o("div",null,[t.successMessage?(d(),u("div",ge,[o("div",ve,[e[12]||(e[12]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[13]||(e[13]=o("strong",null,"Success",-1)),f(" - "+l(t.successMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-success",onClick:e[6]||(e[6]=(...n)=>t.dismissMessage&&t.dismissMessage(...n)),"aria-label":"Close Success Message"})])])):C("",!0),t.alertMessage?(d(),u("div",ye,[o("div",pe,[e[14]||(e[14]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[15]||(e[15]=o("strong",null,"Alert",-1)),f(" - "+l(t.alertMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[7]||(e[7]=(...n)=>t.dismissMessage&&t.dismissMessage(...n)),"aria-label":"Close Alert Message"})])])):C("",!0)])]),_:1})}const xe=H(K,[["render",be]]);export{xe as default};
