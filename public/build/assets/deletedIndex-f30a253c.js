import{_ as oe,Z as ae,O as le,P as ne,z as re,r as f,T as ie,C as ce,Q as de,R as ue,g as u,S as me,o as d,x as A,w as i,a as z,U as y,N as x,k as r,l as e,J as n,q as g,K as Y,i as v,L as I,F as W,n as j,B as V,y as k,W as F}from"./vendor-ddfbd976.js";import{L as fe}from"./main-306a5ea6.js";import{P as _e}from"./page-header-2dc95532.js";import{P as ve}from"./Pagination-f095ae3c.js";import{s as ge}from"./search-2c17aadd.js";import{s as pe}from"./searchbar-3acbc236.js";import{u as he,l as be}from"./footer-e648049d.js";import{_ as ye}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const we={data(){return{rightOffcanvas:!1}},components:{Layout:fe,PageHeader:_e,Head:ae,Pagination:ve,Multiselect:le,flatPickr:ne,Link:re,search:ge,searchbar:pe},props:{successMessage:String,alertMessage:String,app_for:String,serviceLocations:{type:Object,required:!0}},setup(a){const t=f(""),{selectedLocation:w}=he();f(a.serviceLocations||null);const s=ie({service_location_id:"all",status:null,approveStatus:null,limit:10}),p=f([]),L=f({}),C=f(!1),B=f(!1),M=f(null),{t:m}=ce(),O=f({}),h=f(a.successMessage||""),U=f(a.alertMessage||""),R=()=>{h.value="",U.value=""},P=f(!1),H=()=>{b(),B.value=!0,P.value=!1},T=()=>{s.reset(),b(),P.value=!1},E=()=>{C.value=!1},S=async l=>{try{await z.delete(`/manage-owners/delete/${l}`);const c=p.value.findIndex(_=>_.id===l);c!==-1&&p.value.splice(c,1),C.value=!1,y.fire(m("success"),m("service_location_deleted_successfully"),"success")}catch{y.fire(m("error"),m("failed_to_delete_service_location"),"error")}},o=l=>a.app_for&&a.app_for=="demo"?"***********":l.mobile_number,D=l=>a.app_for&&a.app_for=="demo"?"***********":l.email,N=async l=>{y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async c=>{if(c.isConfirmed)try{await S(l)}catch(_){console.error(m("error_deleting_data"),_),y.fire(m("error"),m("failed_to_delete_the_data"),"error")}})},b=async(l=1)=>{try{const c=s.data();c.page=l,t.value.length>0&&(c.search=t.value);const _=await z.get("/manage-owners/deletedList",{params:c});p.value=_.data.results,L.value=_.data.paginator,ee(L.value.total),B.value=!1}catch(c){console.error(m("error_fetching_manage_owners"),c)}},q=async l=>{b(l)},G=async l=>{t.value=l,b()},J=async l=>{x.get(`/manage-owners/document/${l.id}`)},K=async l=>{x.get(`/manage-owners/edit/${l.id}`)},Q=async()=>{x.get("/manage-owners/create")},Z=async l=>{x.get(`/manage-owners/password/edit/${l.id}`)},X=async l=>{x.get(`/manage-owners/view-profile/${l.id}`)},$=async l=>{if(!l){console.error("Invalid user data:",l);return}y.fire({title:"Are you sure?",text:"Do you want to restore this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, restore it!"}).then(async c=>{if(c.isConfirmed)try{const _=await z.patch(`/users/restore/${l}`);p.value=p.value.filter(se=>se.id!==l),y.fire("Restored!",_.data.message,"success")}catch(_){console.error("Error restoring user:",_),y.fire("Error!","Failed to restore user.","error")}})},ee=()=>{O.value=[10,25,50,100,200,500]},te=()=>{b()};return de(w,l=>{s.service_location_id=l,b()}),{results:p,modalShow:C,deleteItemId:M,successMessage:h,alertMessage:U,filterData:H,deleteModal:N,closeModal:E,deleteData:S,dismissMessage:R,fetchSearch:G,searchTerm:t,paginator:L,modalFilter:B,clearFilter:T,mobileFromUser:o,emailFromUser:D,fetchDatas:b,filter:s,addOwner:Q,handlePageChanged:q,editData:K,viewOwnerDocument:J,rightOffcanvas:P,editPassData:Z,viewProfile:X,restoreUser:$,paginatorOption:O,changeEntriesPerPage:te,selectedLocation:w}},computed:{...be,...ue(["permissions"])},mounted(){this.filter.service_location_id=this.selectedLocation,this.fetchDatas()}},ke={class:"d-flex align-items-center mt-3"},Ce={class:"me-2 text-muted"},Be=["value"],Me={class:"ms-2 text-muted"},Pe={class:"table-responsive"},Se={class:"table align-middle position-relative table-nowrap"},xe={class:"table-owner"},Le={scope:"col"},Oe={scope:"col"},Ue={scope:"col"},De={scope:"col"},Ve={key:0},Fe={key:1},Re={colspan:"7",class:"text-center"},He={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Te={class:"alert-content"},Ee={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ne={class:"alert-content"},Ae={class:"offcanvas-body"},ze={class:"mb-4"},Ie={for:"service-location",class:"form-label text-muted text-uppercase fw-semibold mb-3"},We={value:"all"},Ye=["value"],je={class:"mb-4"},qe={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ge={class:"form-check form-check-inline"},Je={class:"form-check-label",for:"inlineRadio1"},Ke={class:"form-check form-check-inline"},Qe={class:"form-check-label",for:"WithoutinlineRadio2"},Ze={class:"mb-4"},Xe={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},$e={class:"form-check form-check-inline"},et={class:"form-check-label",for:"active"},tt={class:"form-check form-check-inline"},st={class:"form-check-label",for:"inactive"},ot={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function at(a,t,w,s,p,L){const C=u("Head"),B=u("PageHeader"),M=u("BCol"),m=u("BRow"),O=u("BCardHeader"),h=u("BButton"),U=u("BCardBody"),R=u("BCard"),P=u("BFrom"),H=u("BOffcanvas"),T=u("Pagination"),E=u("Layout"),S=me("b-tooltip");return d(),A(E,null,{default:i(()=>[r(C,{title:"Manage Deleted Owners"}),r(B,{title:a.$t("manage_deleted_owners"),pageTitle:a.$t("manage_owners")},null,8,["title","pageTitle"]),r(m,null,{default:i(()=>[r(M,{lg:"12"},{default:i(()=>[r(R,{"no-body":"",id:"tasksList"},{default:i(()=>[r(O,{class:"border-0"},{default:i(()=>[r(m,{class:"g-2"},{default:i(()=>[r(M,{md:"3"},{default:i(()=>[e("div",ke,[e("label",Ce,n(a.$t("show")),1),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.filter.limit=o),onChange:t[1]||(t[1]=(...o)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(d(!0),v(W,null,I(s.paginatorOption,o=>(d(),v("option",{key:o,value:o},n(o),9,Be))),128))],544),[[Y,s.filter.limit]]),e("label",Me,n(a.$t("entries")),1)])]),_:1}),r(M,{md:"3"})]),_:1})]),_:1}),r(U,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[e("div",Pe,[e("table",Se,[e("thead",xe,[e("tr",null,[e("th",Le,n(a.$t("name")),1),e("th",Oe,n(a.$t("email")),1),e("th",Ue,n(a.$t("mobile_number")),1),e("th",De,n(a.$t("action")),1)])]),s.results.length>0?(d(),v("tbody",Ve,[(d(!0),v(W,null,I(s.results,(o,D)=>(d(),v("tr",{key:D},[e("td",null,n(o.name),1),e("td",null,n(s.emailFromUser(o)),1),e("td",null,n(s.mobileFromUser(o)),1),e("td",null,[a.permissions.includes("delete-owner")&&w.app_for!=="demo"?g((d(),A(h,{key:0,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:j(N=>s.deleteModal(o.id),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("delete")},{default:i(()=>t[10]||(t[10]=[e("i",{class:"bx bx-trash bx-xs"},null,-1)])),_:2,__:[10]},1032,["onClick","title"])),[[S,void 0,void 0,{hover:!0}]]):V("",!0),a.permissions.includes("delete-owner")&&w.app_for!=="demo"?g((d(),A(h,{key:1,class:"btn btn-soft-success btn-sm m-2",size:"sm",type:"button",onClick:j(N=>s.restoreUser(o.id),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("restore")},{default:i(()=>t[11]||(t[11]=[e("i",{class:"bx bx-undo bx-xs"},null,-1)])),_:2,__:[11]},1032,["onClick","title"])),[[S,void 0,void 0,{hover:!0}]]):V("",!0)])]))),128))])):(d(),v("tbody",Fe,[e("tr",null,[e("td",Re,[t[12]||(t[12]=e("img",{src:ye,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,n(a.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[s.successMessage?(d(),v("div",He,[e("div",Te,[t[13]||(t[13]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[14]||(t[14]=k()),t[15]||(t[15]=e("strong",null,"Success",-1)),k(" - "+n(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):V("",!0),s.alertMessage?(d(),v("div",Ee,[e("div",Ne,[t[16]||(t[16]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[17]||(t[17]=k()),t[18]||(t[18]=e("strong",null,"Alert",-1)),k(" - "+n(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):V("",!0)]),r(H,{modelValue:s.rightOffcanvas,"onUpdate:modelValue":t[9]||(t[9]=o=>s.rightOffcanvas=o),placement:"end",title:a.$t("filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:i(()=>[r(P,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:i(()=>[e("div",Ae,[e("div",ze,[e("label",Ie,n(a.$t("service_location")),1),g(e("select",{class:"form-control","data-choices":"","data-choices-search-false":"",name:"choices-select-status",id:"service-location","onUpdate:modelValue":t[4]||(t[4]=o=>s.filter.service_location_id=o)},[e("option",We,n(a.$t("all")),1),(d(!0),v(W,null,I(w.serviceLocations,(o,D)=>(d(),v("option",{key:o.id,value:o.id},n(o.name),9,Ye))),128))],512),[[Y,s.filter.service_location_id]])]),e("div",je,[e("label",qe,n(a.$t("approval_status")),1),e("div",null,[e("div",Ge,[g(e("input",{class:"form-check-input",type:"radio",name:"approval_status",id:"inlineRadio1",value:"1","onUpdate:modelValue":t[5]||(t[5]=o=>s.filter.approveStatus=o)},null,512),[[F,s.filter.approveStatus]]),e("label",Je,n(a.$t("approved")),1)]),e("div",Ke,[g(e("input",{class:"form-check-input",type:"radio",name:"approval_status",id:"WithoutinlineRadio2",value:"0","onUpdate:modelValue":t[6]||(t[6]=o=>s.filter.approveStatus=o)},null,512),[[F,s.filter.approveStatus]]),e("label",Qe,n(a.$t("disapproved")),1)])])]),e("div",Ze,[e("label",Xe,n(a.$t("status")),1),e("div",null,[e("div",$e,[g(e("input",{class:"form-check-input",type:"radio",name:"status",id:"active",value:"1","onUpdate:modelValue":t[7]||(t[7]=o=>s.filter.status=o)},null,512),[[F,s.filter.status]]),e("label",et,n(a.$t("active")),1)]),e("div",tt,[g(e("input",{class:"form-check-input",type:"radio",name:"status",id:"inactive",value:"0","onUpdate:modelValue":t[8]||(t[8]=o=>s.filter.status=o)},null,512),[[F,s.filter.status]]),e("label",st,n(a.$t("inactive")),1)])])]),t[19]||(t[19]=e("div",null,null,-1))]),e("div",ot,[r(h,{onClick:s.clearFilter,variant:"light",class:"w-100"},{default:i(()=>[k(n(a.$t("clear_filter")),1)]),_:1},8,["onClick"]),r(h,{onClick:s.filterData,type:"submit",variant:"success",class:"w-100"},{default:i(()=>[k(n(a.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),r(T,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const _t=oe(we,[["render",at]]);export{_t as default};
