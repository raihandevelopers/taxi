import{_ as K,Z as Q,O as W,P as Z,z as X,C as ee,r as m,T as te,R as se,g as u,S as ae,o as d,x as E,w as i,U as y,a as $,N as oe,k as n,l as e,J as l,q as b,K as j,i as f,L as q,F as z,y as v,B as P,p as le,n as Y,W as T}from"./vendor-ddfbd976.js";import{L as ne}from"./main-306a5ea6.js";import{P as ie}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import{s as ce}from"./searchbar-3acbc236.js";import{l as de}from"./footer-e648049d.js";import{_ as ue}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const fe={data(){return{rightOffcanvas:!1,SearchQuery:""}},components:{Layout:ne,PageHeader:ie,Head:Q,Pagination:re,Multiselect:W,flatPickr:Z,Link:X,searchbar:ce},props:{successMessage:String,alertMessage:String,vehicleTypes:{type:Object,required:!0}},setup(a){const{t}=ee(),x=m(""),o=te({transport_type:null,dispatch_type:null,status:null,limit:10}),g=m([]),S=m({}),C=m(!1),w=m(!1),_=m(null),O=m({}),p=m(a.successMessage||""),k=m(a.alertMessage||""),B=()=>{p.value="",k.value=""},D=async(c,r)=>{y.fire({title:t("are_you_sure"),text:t("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:t("yes"),cancelButtonText:t("cancel")}).then(async h=>{if(h.isConfirmed)try{await $.post("/vehicle_type/update-status",{id:c,status:r});const L=g.value.findIndex(J=>J.id===c);L!==-1&&(g.value[L].active=r),y.fire(t("changed"),t("status_updated_successfully"),"success")}catch(L){console.error(t("error_updating_status"),L),y.fire(t("error"),t("failed_to_update_status"),"error")}})},M=m(!1),H=()=>{s(),w.value=!0,M.value=!1},U=()=>{o.reset(),s(),M.value=!1},F=()=>{C.value=!1},V=async c=>{try{await $.delete(`/vehicle_type/delete/${c}`);const r=g.value.findIndex(h=>h.id===c);r!==-1&&g.value.splice(r,1),C.value=!1,y.fire(t("success"),t("vehicle_type_deleted_successfully"),"success")}catch(r){r.response&&r.response.status==403&&(k.value=r.response.data.alertMessage,setTimeout(()=>{k.value=""},5e3)),y.fire(t("error"),t("failed_to_delete_vehicle_type"),"error")}},N=async c=>{y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed)try{await V(c)}catch(h){console.error(t("error_deleting_data"),h),y.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},I=async c=>{x.value=c,s()},s=async(c=1)=>{try{const r=o.data();r.search=x.value,r.page=c;const h=await $.get("/vehicle_type/list",{params:r});g.value=h.data.results,S.value=h.data.paginator,G(S.value.total),w.value=!1}catch(r){console.error(t("error_fetching_vehicle_type"),r)}},R=async c=>{localStorage.setItem("vehicle_type/list",c),s(c)},A=async c=>{oe.get(`/vehicle_type/edit/${c.id}`)},G=()=>{O.value=[10,25,50,100,200,500]};return{results:g,modalShow:C,deleteItemId:_,successMessage:p,alertMessage:k,filterData:H,deleteModal:N,closeModal:F,deleteData:V,dismissMessage:B,searchTerm:x,fetchSearch:I,paginator:S,modalFilter:w,clearFilter:U,fetchDatas:s,filter:o,handlePageChanged:R,toggleActiveStatus:D,editData:A,rightOffcanvas:M,paginatorOption:O,changeEntriesPerPage:()=>{s()}}},computed:{...de,...se(["permissions"])},mounted(){this.fetchDatas();const a=localStorage.getItem("vehicle_type/list");a?this.handlePageChanged(Number(a)):this.handlePageChanged(1)}},me={class:"d-flex align-items-center mt-3"},_e={class:"me-2 text-muted"},pe=["value"],he={class:"ms-2 text-muted"},ve={class:"d-flex align-items-center gap-2"},ge={class:"table-responsive"},ye={class:"table align-middle position-relative table-nowrap"},be={class:"table-active"},ke={scope:"col"},Ce={scope:"col"},we={scope:"col"},Be={scope:"col"},Me={scope:"col"},Pe={scope:"col"},xe={key:0},Se={class:"d-flex"},Oe={class:"flex-grow-1"},Ve={key:0},Le={key:1},Te={key:2},De=["src"],He={key:0},Ue=["onClick","id","checked"],Fe={class:"d-flex"},Ne={key:1},Ie={colspan:"4",class:"text-center"},Re={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ae={class:"alert-content"},Ee={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},$e={class:"alert-content"},je={class:"offcanvas-body"},qe={class:"mb-4"},ze={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ye={value:"all"},Ge={value:"taxi"},Je={value:"delivery"},Ke={class:"mb-4"},Qe={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},We={class:"form-check form-check-inline"},Ze={class:"form-check-label",for:"active"},Xe={class:"form-check form-check-inline"},et={class:"form-check-label",for:"inactive"},tt={class:"mb-4"},st={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},at={class:"form-check form-check-inline"},ot={class:"form-check-label",for:"inlineCheckbox1"},lt={class:"form-check form-check-inline"},nt={class:"form-check-label",for:"inlineCheckbox2"},it={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function rt(a,t,x,o,g,S){const C=u("Head"),w=u("PageHeader"),_=u("BCol"),O=u("searchbar"),p=u("BButton"),k=u("Link"),B=u("BRow"),D=u("BCardHeader"),M=u("BCardBody"),H=u("BCard"),U=u("BFrom"),F=u("BOffcanvas"),V=u("Pagination"),N=u("Layout"),I=ae("b-tooltip");return d(),E(N,null,{default:i(()=>[n(C,{title:"Vehicle Type"}),n(w,{title:a.$t("vehicle_type"),pageTitle:a.$t("vehicle_type")},null,8,["title","pageTitle"]),n(B,null,{default:i(()=>[n(_,{lg:"12"},{default:i(()=>[n(H,{"no-body":"",id:"tasksList"},{default:i(()=>[n(D,{class:"border-0"},{default:i(()=>[n(B,{class:"g-2"},{default:i(()=>[n(_,{md:"3"},{default:i(()=>[e("div",me,[e("label",_e,l(a.$t("show")),1),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.filter.limit=s),onChange:t[1]||(t[1]=(...s)=>o.changeEntriesPerPage&&o.changeEntriesPerPage(...s)),class:"form-select form-select-sm w-auto"},[(d(!0),f(z,null,q(o.paginatorOption,s=>(d(),f("option",{key:s,value:s},l(s),9,pe))),128))],544),[[j,o.filter.limit]]),e("label",he,l(a.$t("entries")),1)])]),_:1}),n(_,{md:"3"}),n(_,{md:"auto",class:"ms-auto"},{default:i(()=>[e("div",ve,[n(O,{onSearch:o.fetchSearch},null,8,["onSearch"]),n(p,{variant:"danger",onClick:t[2]||(t[2]=s=>o.rightOffcanvas=!0)},{default:i(()=>[t[11]||(t[11]=e("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),v(" "+l(a.$t("filters")),1)]),_:1,__:[11]}),a.permissions.includes("add-vehicle-types")?(d(),E(k,{key:0,href:"/vehicle_type/create"},{default:i(()=>[n(p,{variant:"primary",class:"float-end"},{default:i(()=>[t[12]||(t[12]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),v(" "+l(a.$t("add_vehicle")),1)]),_:1,__:[12]})]),_:1})):P("",!0)])]),_:1})]),_:1})]),_:1}),n(M,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[e("div",ge,[e("table",ye,[e("thead",be,[e("tr",null,[e("th",ke,l(a.$t("vehicle")),1),e("th",Ce,l(a.$t("dispatch_type")),1),e("th",we,l(a.$t("transport_type")),1),e("th",Be,l(a.$t("image")),1),e("th",Me,l(a.$t("status")),1),e("th",Pe,l(a.$t("action")),1)])]),o.results.length>0?(d(),f("tbody",xe,[(d(!0),f(z,null,q(o.results,(s,R)=>(d(),f("tr",{key:R},[e("td",null,[e("div",Se,[e("div",Oe,l(s.name),1)])]),e("td",null,l(s.trip_dispatch_type),1),e("td",null,[s.is_taxi==="taxi"?(d(),f("span",Ve,l(a.$t("taxi")),1)):s.is_taxi==="delivery"?(d(),f("span",Le,l(a.$t("delivery")),1)):(d(),f("span",Te,l(a.$t("all")),1))]),e("td",null,[e("img",{src:s.icon,alt:"",class:"avatar-xs rounded-circle me-2"},null,8,De)]),a.permissions.includes("toggle-vehicle-types")?(d(),f("td",He,[e("div",{class:le({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":s.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:Y(A=>o.toggleActiveStatus(s.id,!s.active),["prevent"]),id:"status_"+s.id,checked:s.active},null,8,Ue)],2)])):P("",!0),e("td",null,[e("div",Fe,[a.permissions.includes("edit-vehicle-types")?b((d(),E(p,{key:0,onClick:Y(A=>o.editData(s),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:a.$t("edit")},{default:i(()=>t[13]||(t[13]=[e("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[13]},1032,["onClick","title"])),[[I,void 0,void 0,{hover:!0}]]):P("",!0)])])]))),128))])):(d(),f("tbody",Ne,[e("tr",null,[e("td",Ie,[t[14]||(t[14]=e("img",{src:ue,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,l(a.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[o.successMessage?(d(),f("div",Re,[e("div",Ae,[t[15]||(t[15]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[16]||(t[16]=v()),t[17]||(t[17]=e("strong",null,"Success",-1)),v(" - "+l(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[3]||(t[3]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):P("",!0),o.alertMessage?(d(),f("div",Ee,[e("div",$e,[t[18]||(t[18]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[19]||(t[19]=v()),t[20]||(t[20]=e("strong",null,"Alert",-1)),v(" - "+l(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[4]||(t[4]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):P("",!0)]),n(F,{modelValue:o.rightOffcanvas,"onUpdate:modelValue":t[10]||(t[10]=s=>o.rightOffcanvas=s),placement:"end",title:a.$t("vehicle_type_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:i(()=>[n(U,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:i(()=>[e("div",je,[e("div",qe,[e("label",ze,l(a.$t("transport_type")),1),b(e("select",{class:"form-control","data-choices":"","data-choices-search-false":"",name:"choices-select-status",id:"choices-select-status","onUpdate:modelValue":t[5]||(t[5]=s=>o.filter.transport_type=s)},[e("option",Ye,l(a.$t("all")),1),e("option",Ge,l(a.$t("taxi")),1),e("option",Je,l(a.$t("delivery")),1)],512),[[j,o.filter.transport_type]])]),e("div",Ke,[e("label",Qe,l(a.$t("status")),1),e("div",null,[e("div",We,[b(e("input",{class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=s=>o.filter.status=s),type:"radio",name:"inlineRadioOptions",id:"active",value:"1"},null,512),[[T,o.filter.status]]),e("label",Ze,l(a.$t("active")),1)]),e("div",Xe,[b(e("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=s=>o.filter.status=s),type:"radio",name:"inlineRadioOptions",id:"inactive",value:"0"},null,512),[[T,o.filter.status]]),e("label",et,l(a.$t("inactive")),1)])])]),e("div",tt,[e("label",st,l(a.$t("dispatch_type")),1),n(B,{class:"g-2"},{default:i(()=>[n(_,{lg:"6"},{default:i(()=>[e("div",at,[b(e("input",{class:"form-check-input","onUpdate:modelValue":t[8]||(t[8]=s=>o.filter.dispatch_type=s),type:"radio",id:"inlineCheckbox1",value:"bidding"},null,512),[[T,o.filter.dispatch_type]]),e("label",ot,l(a.$t("bidding")),1)])]),_:1}),n(_,{lg:"6"},{default:i(()=>[e("div",lt,[b(e("input",{class:"form-check-input","onUpdate:modelValue":t[9]||(t[9]=s=>o.filter.dispatch_type=s),type:"radio",id:"inlineCheckbox2",value:"normal"},null,512),[[T,o.filter.dispatch_type]]),e("label",nt,l(a.$t("normal")),1)])]),_:1})]),_:1})]),t[21]||(t[21]=e("div",null,null,-1))]),e("div",it,[n(p,{variant:"light",onClick:o.clearFilter,class:"w-100"},{default:i(()=>[v(l(a.$t("clear_filter")),1)]),_:1},8,["onClick"]),n(p,{type:"submit",onClick:o.filterData,variant:"success",class:"w-100"},{default:i(()=>[v(l(a.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),n(V,{paginator:o.paginator,onPageChanged:o.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const gt=K(fe,[["render",rt]]);export{gt as default};
