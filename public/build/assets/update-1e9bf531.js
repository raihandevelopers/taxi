import{_ as Z,Z as G,O as h,r as c,T as q,Q as $,a2 as ee,a as P,g as m,o as n,x as oe,w as p,U as T,k as d,l as o,q as C,K as w,i,L as H,J as v,F as N,y as b,B as R,M as O,p as Y,n as se}from"./vendor-ddfbd976.js";import{L as te}from"./main-306a5ea6.js";import{P as le}from"./page-header-2dc95532.js";import{P as re}from"./Pagination-f095ae3c.js";import"./footer-e648049d.js";import"./app-042fb454.js";const ae={components:{Layout:te,PageHeader:le,Head:G,Pagination:re,Multiselect:h},props:{successMessage:String,alertMessage:String},setup(y){const e=c(""),u=c(null),s=q({name:"",description:""}),E=q({all:"",locked:""}),g=c([]),F=c({}),x=c(!1),_=c(!1),M=c(!1),D=c(null),B=c(y.successMessage||""),V=c(y.alertMessage||""),U=()=>{B.value="",V.value=""},A=()=>{s.reset(),u.value=null,_.value=!0},I=()=>{M.value=!0},t=r=>{u.value=r,s.name=r.name,s.description=r.description,s.clearErrors(),_.value=!0},f=()=>{s.reset(),_.value=!1,u.value=null},z=()=>{E.reset(),L(),M.value=!1},K=()=>{const{name:r,description:l}=s,a={},k={name:{test:()=>!r,message:"Role name is required"},description:{test:()=>!l,message:"Role description is required"}};return Object.keys(k).forEach(S=>{k[S].test()&&(a[S]=k[S].message)}),a},J=async()=>{const r=K();if(Object.keys(r).length===0)try{let l;if(u.value?l=await P.put(`/roles/update/${u.value.id}`,s.data()):l=await P.post("/roles",s.data()),l.status===200||l.status===201){B.value=l.data.successMessage;const a=l.data.roles;if(u.value){const k=g.value.findIndex(S=>S.id===u.value.id);k!==-1&&(g.value[k]=a)}else g.value.push(a);_.value=!1,s.reset()}else console.error("Unexpected response status:",l.status)}catch(l){if(console.error("Error handling form submission:",l),l.response&&l.response.status===422){const a=l.response.data.errors;s.errors=a}else console.error("An unexpected error occurred:",l)}else s.errors=r},Q=r=>{s.errors[r]=""},W=()=>{x.value=!1},j=async r=>{try{await P.delete(`/roles/delete/${r}`);const l=g.value.findIndex(a=>a.id===r);l!==-1&&g.value.splice(l,1),x.value=!1,T.fire("Success","Role deleted successfully","success")}catch(l){console.error("Error deleting role:",l),T.fire("Error","Failed to delete role","error")}},X=async r=>{T.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await j(r)}catch(a){console.error("Error deleting role:",a),T.fire("Error","Failed to delete the role","error")}})};$(e,ee.debounce(function(r){L(e.value)},300));const L=async(r=1)=>{try{const l=E.data();l.search=e.value,l.page=r;const a=await P.get("/roles1/list",{params:l});g.value=a.data.roles,F.value=a.data.paginator,M.value=!1}catch(l){console.error("Error fetching roles:",l)}};return{form:s,roles:g,modalShow:x,modalForm:_,deleteItemId:D,selectedRole:u,successMessage:B,alertMessage:V,createRole:A,filterRole:I,editRole:t,cancelEdit:f,handleSubmit:J,deleteModal:X,closeModal:W,deleteRole:j,dismissMessage:U,hideError:Q,searchTerm:e,paginator:F,modalFilter:M,clearFilter:z,fetchRoles:L,filter:E,handlePageChanged:async r=>{L(r)}}},mounted(){this.fetchRoles()}},ne={action:"javascript:void(0);"},ie={class:"row"},de={class:"col-sm-6"},ce={class:"mb-3"},me={class:"col-sm-6"},ue={class:"mb-3"},fe={class:"col-sm-6"},pe={class:"mb-3"},ve={class:"col-sm-6"},ge={class:"mb-3"},be={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},ye={class:"alert-content"},_e={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Ce={class:"alert-content"},Me={class:"form-group mt-3"},ke={key:0,class:"text-danger"},xe={class:"form-group mt-3"},Be={key:0,class:"text-danger"},Se={type:"submit",class:"btn btn-success m-2 float-end"},we={class:"input-group"};function Re(y,e,u,s,E,g){const F=m("Head"),x=m("PageHeader"),_=m("BCardHeader"),M=m("BCardBody"),D=m("BCard"),B=m("BCol"),V=m("BRow"),U=m("BModal"),A=m("BButton"),I=m("Layout");return n(),oe(I,null,{default:p(()=>[d(F,{title:"Manage Fleet"}),d(x,{title:"Update",pageTitle:"Manage Fleet"}),d(V,null,{default:p(()=>[d(B,{lg:"12"},{default:p(()=>[d(D,{"no-body":"",id:"tasksList"},{default:p(()=>[d(_,{class:"border-0"}),d(M,{class:"border border-dashed border-end-0 border-start-0"},{default:p(()=>[o("form",ne,[o("div",ie,[o("div",de,[o("div",ce,[e[17]||(e[17]=o("label",{for:"select_type",class:"form-label"},"Select Type",-1)),C(o("select",{id:"select_type",class:"form-select","onUpdate:modelValue":e[0]||(e[0]=t=>s.form.goods_type_for=t)},e[16]||(e[16]=[o("option",{disabled:"",value:""},"Select",-1),o("option",{value:"sedan"},"Sedan",-1),o("option",{value:"lcv"},"LCV",-1),o("option",{value:"scooter"},"Scooter",-1),o("option",{value:"bike"},"Bike",-1),o("option",{value:"suv"},"SUV",-1)]),512),[[w,s.form.goods_type_for]]),(n(!0),i(N,null,H(y.errors.goods_type_for,(t,f)=>(n(),i("span",{key:f,class:"text-danger"},v(t),1))),128))])]),o("div",me,[o("div",ue,[e[19]||(e[19]=o("label",{for:"car_brand",class:"form-label"},"Car Brand",-1)),C(o("select",{id:"car_brand",class:"form-select","onUpdate:modelValue":e[1]||(e[1]=t=>s.form.goods_type_for=t)},e[18]||(e[18]=[o("option",{disabled:"",value:""},"Select",-1),o("option",{value:"tata"},"TATA",-1),o("option",{value:"ashok_leyland"},"Ashok Leyland",-1),o("option",{value:"fiat"},"FIAT",-1),o("option",{value:"acura"},"Acura",-1),o("option",{value:"bmw"},"BMW",-1),o("option",{value:"Audi"},"Audi",-1)]),512),[[w,s.form.goods_type_for]]),(n(!0),i(N,null,H(y.errors.goods_type_for,(t,f)=>(n(),i("span",{key:f,class:"text-danger"},v(t),1))),128))])]),o("div",fe,[o("div",pe,[e[21]||(e[21]=o("label",{for:"car_model",class:"form-label"},"Car Model",-1)),C(o("select",{id:"car_model",class:"form-select","onUpdate:modelValue":e[2]||(e[2]=t=>s.form.goods_type_for=t)},e[20]||(e[20]=[o("option",{disabled:"",value:""},"Select",-1),o("option",{value:"124_spider"},"124 Spider",-1),o("option",{value:"500"},"500",-1),o("option",{value:"500l"},"500L",-1),o("option",{value:"500x"},"500X",-1),o("option",{value:"500e"},"500e",-1)]),512),[[w,s.form.goods_type_for]]),(n(!0),i(N,null,H(y.errors.goods_type_for,(t,f)=>(n(),i("span",{key:f,class:"text-danger"},v(t),1))),128))])]),o("div",ve,[o("div",ge,[e[22]||(e[22]=o("label",{for:"license_plate_number",class:"form-label"},"License Plate Number",-1)),e[23]||(e[23]=o("input",{type:"text",class:"form-control",placeholder:"Enter License Plate Number",id:"license_plate_number"},null,-1)),(n(!0),i(N,null,H(y.errors.name,(t,f)=>(n(),i("span",{key:f,class:"text-danger"},v(t),1))),128))])]),e[24]||(e[24]=o("div",{class:"col-lg-12"},[o("div",{class:"text-end"},[o("button",{type:"submit",class:"btn btn-primary"},"Update")])],-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),o("div",null,[s.successMessage?(n(),i("div",be,[o("div",ye,[e[25]||(e[25]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[26]||(e[26]=b()),e[27]||(e[27]=o("strong",null,"Success",-1)),b(" - "+v(s.successMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-success",onClick:e[3]||(e[3]=(...t)=>s.dismissMessage&&s.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):R("",!0),s.alertMessage?(n(),i("div",_e,[o("div",Ce,[e[28]||(e[28]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[29]||(e[29]=b()),e[30]||(e[30]=o("strong",null,"Alert",-1)),b(" - "+v(s.alertMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[4]||(e[4]=(...t)=>s.dismissMessage&&s.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):R("",!0)]),d(U,{modelValue:s.modalForm,"onUpdate:modelValue":e[12]||(e[12]=t=>s.modalForm=t),"hide-footer":"",title:s.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:p(()=>[o("form",{onSubmit:e[10]||(e[10]=se((...t)=>s.handleSubmit&&s.handleSubmit(...t),["prevent"])),onKeydown:e[11]||(e[11]=(...t)=>s.hideError&&s.hideError(...t))},[o("div",Me,[e[31]||(e[31]=o("label",{for:"name",class:"form-label"},[b("Role Name"),o("span",{class:"text-danger"},"*")],-1)),C(o("input",{type:"text",id:"name","onUpdate:modelValue":e[5]||(e[5]=t=>s.form.name=t),class:Y(["form-control",{"is-invalid":s.form.errors.name}]),onFocus:e[6]||(e[6]=t=>s.hideError("name"))},null,34),[[O,s.form.name]]),s.form.errors.name?(n(),i("div",ke,v(s.form.errors.name),1)):R("",!0)]),o("div",xe,[e[32]||(e[32]=o("label",{for:"description",class:"form-label"},[b("description"),o("span",{class:"text-danger"},"*")],-1)),C(o("input",{type:"text",id:"description","onUpdate:modelValue":e[7]||(e[7]=t=>s.form.description=t),class:Y(["form-control",{"is-invalid":s.form.errors.description}]),onFocus:e[8]||(e[8]=t=>s.hideError("description"))},null,34),[[O,s.form.description]]),s.form.errors.description?(n(),i("div",Be,v(s.form.errors.description),1)):R("",!0)]),o("button",Se,v(s.selectedRole?"Update":"Save"),1),s.selectedRole?(n(),i("button",{key:0,type:"button",onClick:e[9]||(e[9]=(...t)=>s.cancelEdit&&s.cancelEdit(...t)),class:"btn btn-secondary m-2 float-end"},"Cancel")):R("",!0)],32)]),_:1},8,["modelValue","title"]),d(U,{modelValue:s.modalFilter,"onUpdate:modelValue":e[15]||(e[15]=t=>s.modalFilter=t),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:p(()=>[o("form",null,[o("div",we,[C(o("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[13]||(e[13]=t=>s.filter.all=t)},e[33]||(e[33]=[o("option",{selected:""},"Select Status",-1),o("option",{value:"1"},"Yes",-1),o("option",{value:"0"},"No",-1)]),512),[[w,s.filter.all]]),C(o("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[14]||(e[14]=t=>s.filter.locked=t)},e[34]||(e[34]=[o("option",{selected:""},"Select Status",-1),o("option",{value:"0"},"Inactive",-1),o("option",{value:"1"},"Active",-1)]),512),[[w,s.filter.locked]])]),d(A,{variant:"primary",class:"float-end",onClick:s.fetchRoles},{default:p(()=>e[35]||(e[35]=[b(" Apply")])),_:1,__:[35]},8,["onClick"]),d(A,{variant:"outline-primary",class:"float-end mx-2",onClick:s.clearFilter},{default:p(()=>e[36]||(e[36]=[b("Clear")])),_:1,__:[36]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const Te=Z(ae,[["render",Re]]);export{Te as default};
