import{_ as H,Z as O,an as j,C as D,r as M,T as E,D as P,am as N,g,o as m,x as U,w as _,U as F,a as q,N as A,k as i,l as e,y as p,J as l,B as y,i as u,L as V,p as z,F as R,q as J,M as K,n as Z}from"./vendor-ddfbd976.js";import{L as G}from"./main-306a5ea6.js";import{P as Q}from"./page-header-2dc95532.js";import{F as W}from"./FormValidation-a9047131.js";import{i as X}from"./imageUpload-4f5efd67.js";import{I as Y}from"./ImageUp-1fee9a5c.js";import{u as $}from"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const ee={methods:{stripHtmlTags(n){return new DOMParser().parseFromString(n,"text/html").body.textContent||""}},components:{Layout:G,PageHeader:Q,Head:O,FormValidation:W,imageUpload:X,ImageUp:Y,ckeditor:j.component},props:{successMessage:String,alertMessage:String,app_for:String,onboarding:Object},setup(n){const{t:o}=D(),{languages:c,fetchData:s}=$(),C=M("English"),b=E({onboarding_image:n.onboarding&&n.onboarding.onboarding_image||"",title:Object.keys(n.onboarding.languageFields).reduce((t,d)=>{var r;return t[d]=((r=n.onboarding.languageFields[d])==null?void 0:r.title)||"",t},{}),description:Object.keys(n.onboarding.languageFields).reduce((t,d)=>{var r;return t[d]=((r=n.onboarding.languageFields[d])==null?void 0:r.description)||"",t},{})}),I={onboarding_image:{required:!0}},S=M(null),h=M({}),f=M(n.successMessage||""),v=M(n.alertMessage||""),k=()=>{f.value="",v.value=""},w=t=>{C.value=t},B=()=>{const t=document.getElementById("iconInput");if(t.files.length>0){const d=t.files[0],r=new Image;r.onload=function(){(r.width!==512||r.height!==512)&&(alert("Icon must be 512x512 pixels."),t.value="")},r.src=URL.createObjectURL(d)}},x=async()=>{if(n.app_for=="demo"){F.fire(o("error"),o("you_are_not_authorised"),"error");return}try{const t=new FormData;for(const r in b)r==="iconFile"&&b[r]?t.append("onboarding_image",b[r]):t.append(r,b[r]);let d;Object.keys(b.title).forEach(r=>{t.append(`title[${r}]`,b.title[r])}),Object.keys(b.description).forEach(r=>{t.append(`description[${r}]`,b.description[r])}),n.onboarding&&n.onboarding.id&&(d=await q.post(`/onboarding-screen/update/${n.onboarding.id}`,t,{headers:{"Content-Type":"multipart/form-data"}}),console.log("response",d)),d.status===201?(f.value=o("onboarding_saved_successfully"),b.reset(),A.get("/onboarding-screen")):v.value=o("failed_to_save_onboarding_screen")}catch(t){t.response&&t.response.status===422?h.value=t.response.data.errors:(console.error(o("error_saving_onboarding"),t),v.value=o("failed_to_save_onboarding_screen"))}},T=(t,d)=>{if(n.app_for=="demo"){F.fire(o("error"),o("you_are_not_authorised"),"error");return}b[d]=t},L=t=>{if(n.app_for=="demo"){F.fire(o("error"),o("you_are_not_authorised"),"error");return}b[t]=null},a=n.onboarding?n.onboarding.icon:null;return P(async()=>{Object.keys(c).length==0&&await s()}),{form:b,successMessage:f,alertMessage:v,handleSubmit:x,dismissMessage:k,validationRules:I,validationRef:S,errors:h,handleImageSelected:T,handleImageRemoved:L,iconUrl:a,validateIconSize:B,editor:N,editorData:"",languages:c,setActiveTab:w,activeTab:C}}},oe={class:"alert bg-warning border-warning fs-18",role:"alert"},te={class:"col-sm-12"},se={class:"mb-3",style:{display:"grid","place-items":"center"}},ne={class:"onboardingScreen"},ae={class:"overlap"},re=["src"],ie={class:"card cards",style:{"background-color":"white"}},de={key:0,class:"text-center text-black"},le={key:1,class:"fs-10 text-center text-black"},ce=["innerHTML"],me={class:"nav nav-tabs nav-tabs-custom nav-success nav-justified",role:"tablist"},_e={class:"nav-item",role:"presentation"},be=["onClick"],ge={class:"row mt-3"},ue=["id"],fe={class:"col-sm-12"},ve={class:"mb-3"},ye=["for"],he=["readonly","placeholder","id","onUpdate:modelValue","required"],pe={key:0,class:"text-danger"},ke={class:"col-sm-12"},Me={class:"mb-3"},we=["for"],Ce={class:"col-sm-12"},Ie={class:"mb-3"},Se={for:"onboarding_image",class:"form-label"},Be={class:"col-lg-12"},xe={class:"text-end"},Te={type:"submit",class:"btn btn-primary"},Le={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Ue={class:"alert-content"},Fe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Ve={class:"alert-content"};function Re(n,o,c,s,C,b){const I=g("Head"),S=g("PageHeader"),h=g("BCardHeader"),f=g("BCard"),v=g("BCardBody"),k=g("BCol"),w=g("BRow"),B=g("ckeditor"),x=g("ImageUp"),T=g("FormValidation"),L=g("Layout");return m(),U(L,null,{default:_(()=>[i(I,{title:"Onboarding"}),i(S,{title:n.$t("edit"),pageTitle:n.$t("onboarding_screen"),pageLink:"/onboarding-screen"},null,8,["title","pageTitle"]),i(w,null,{default:_(()=>[c.app_for==="demo"?(m(),U(f,{key:0,"no-body":"",id:"tasksList"},{default:_(()=>[i(h,{class:"border-0"},{default:_(()=>[e("div",oe,[e("strong",null,[p(l(n.$t("note"))+" : ",1),e("em",null,l(n.$t("actions_restricted_due_to_demo_mode")),1)])])]),_:1})]),_:1})):y("",!0),i(k,{lg:"6"},{default:_(()=>[i(f,{"no-body":"",id:"tasksList"},{default:_(()=>[i(h,{class:"border-0"},{default:_(()=>[e("h5",null,l(n.$t("mobile_view")),1)]),_:1}),i(v,{class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[e("div",te,[e("div",se,[e("div",ne,[e("div",ae,[e("div",null,[e("img",{src:`/storage/uploads/onboarding/${s.form.onboarding_image}`,class:"onboardingImage"},null,8,re)]),e("div",ie,[c.onboarding&&c.onboarding.title?(m(),u("h6",de,l(c.onboarding.title),1)):y("",!0),c.onboarding&&c.onboarding.description?(m(),u("p",le,[e("div",{innerHTML:c.onboarding.description},null,8,ce)])):y("",!0)])])])])])]),_:1})]),_:1})]),_:1}),i(k,{lg:"6"},{default:_(()=>[i(f,{"no-body":"",id:"tasksList"},{default:_(()=>[i(h,{class:"border-0"}),i(v,{class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[e("form",{onSubmit:o[2]||(o[2]=Z((...a)=>s.handleSubmit&&s.handleSubmit(...a),["prevent"]))},[i(T,{form:s.form,rules:s.validationRules,ref:"validationRef"},{default:_(()=>[e("ul",me,[(m(!0),u(R,null,V(s.languages,a=>(m(),U(w,{key:a.code},{default:_(()=>[i(k,{lg:"12"},{default:_(()=>[e("li",_e,[e("a",{class:z(["nav-link",{active:s.activeTab===a.label}]),onClick:t=>s.setActiveTab(a.label),role:"tab","aria-selected":"true"},l(a.label),11,be)])]),_:2},1024)]),_:2},1024))),128))]),e("div",ge,[(m(!0),u(R,null,V(s.languages,a=>(m(),u("div",{class:"tab-content text-muted",key:a.code},[s.activeTab===a.label?(m(),u("div",{key:0,class:"tab-pane active show",id:`${a.label}`,role:"tabpanel"},[e("div",fe,[e("div",ve,[e("label",{for:`title- ${a.code}`,class:"form-label"},[p(l(n.$t("onboarding_title"))+"("+l(a.label)+") ",1),o[5]||(o[5]=e("span",{class:"text-danger"},"*",-1))],8,ye),J(e("input",{type:"text",readonly:c.app_for==="demo",class:"form-control",placeholder:n.$t("enter_onboarding_title",{language:a.label}),id:`title-${a.code}`,"onUpdate:modelValue":t=>s.form.title[a.code]=t,required:a.code==="en"},null,8,he),[[K,s.form.title[a.code]]]),s.form.errors.name?(m(),u("span",pe,l(s.form.errors.title),1)):y("",!0)])]),e("div",ke,[e("div",Me,[e("label",{for:`description-${a.code}`,class:"form-label"},[p(l(n.$t("onboarding_description"))+"("+l(a.label)+") ",1),o[6]||(o[6]=e("span",{class:"text-danger"},"*",-1))],8,we),i(B,{disabled:c.app_for==="demo",modelValue:s.form.description[a.code],"onUpdate:modelValue":t=>s.form.description[a.code]=t,editor:s.editor,id:`description-${a.code}`},null,8,["disabled","modelValue","onUpdate:modelValue","editor","id"]),(m(!0),u(R,null,V(s.errors.description,(t,d)=>(m(),u("span",{key:d,class:"text-danger"},l(t),1))),128))])])],8,ue)):y("",!0)]))),128)),e("div",Ce,[e("div",Ie,[e("label",Se,[p(l(n.$t("onboarding_image"))+" ",1),o[7]||(o[7]=e("span",{class:"text-danger"},"*",-1))]),i(x,{imageType:"onboarding",flexStyle:"0 0 calc(40% - 10px)",aspectRatio:"4 / 7",initialImageUrl:s.form.onboarding_image,onImageSelected:o[0]||(o[0]=a=>s.handleImageSelected(a,"onboarding_image")),onImageRemoved:o[1]||(o[1]=()=>s.handleImageRemoved("onboarding_image"))},null,8,["initialImageUrl"])])]),e("div",Be,[e("div",xe,[e("button",Te,l(c.onboarding?n.$t("update"):n.$t("save")),1)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[s.successMessage?(m(),u("div",Le,[e("div",Ue,[o[8]||(o[8]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[9]||(o[9]=e("strong",null,"Success",-1)),p(" - "+l(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:o[3]||(o[3]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):y("",!0),s.alertMessage?(m(),u("div",Fe,[e("div",Ve,[o[10]||(o[10]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[11]||(o[11]=e("strong",null,"Alert",-1)),p(" - "+l(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:o[4]||(o[4]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):y("",!0)])]),_:1})}const ze=H(ee,[["render",Re]]);export{ze as default};
