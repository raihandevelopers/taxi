import{_ as P,Z as U,O as N,P as T,C as q,T as A,r as w,G as O,g as d,o as r,x as j,w as p,a as x,N as E,k as m,l as e,y as g,J as l,i as n,L as M,F as k,q as S,K as F,B as R,n as G}from"./vendor-ddfbd976.js";import{L as I}from"./main-306a5ea6.js";import{P as J}from"./page-header-2dc95532.js";import{P as K}from"./Pagination-f095ae3c.js";import{i as Y}from"./imageUpload-4f5efd67.js";import{F as Z}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const z={components:{Layout:I,PageHeader:J,Head:U,Pagination:K,Multiselect:N,FormValidation:Z,imageUpload:Y,flatPickr:T},props:{successMessage:String,alertMessage:String,validate:Function,serviceLocations:Array},setup(a){const{t}=q(),c=A({date:"",select_status:"",select_date_option:"",file_format:"",service_locations:[]}),o={select_status:{required:!0},select_date_option:{required:!0},file_format:{required:!0}},B=w(null),v=w({}),b=w(a.successMessage||""),h=w(a.alertMessage||""),C=()=>{b.value="",h.value=""},y=w(!1),V=async()=>{if(v.value=B.value.validate(),!(Object.keys(v.value).length>0)){y.value=!0;try{console.log("Form Data:",c.data());const i=await x.post("/report/owner-report-download",c.data(),{responseType:"blob"}),f=window.URL.createObjectURL(new Blob([i.data])),_=document.createElement("a");_.href=f,_.setAttribute("download",`owner_report.${c.file_format}`),document.body.appendChild(_),_.click(),_.remove(),b.value=t("report_downloaded_successfully"),c.reset(),E.get("/report/owner-report")}catch(i){i.response&&i.response.status===422?v.value=i.response.data.errors:(console.error(t("error_downloading_report"),i),h.value=t("failed_to_download_report"))}finally{y.value=!1}}},L=O(()=>{if(c.date&&c.date.length===2){const i=new Date(c.date[0]),f=new Date(c.date[1]),_=i.toLocaleString("default",{month:"short"}),D=f.toLocaleString("default",{month:"short"});return`${i.getDate()} ${_} - ${f.getDate()} ${D}`}return""});return{form:c,successMessage:b,alertMessage:h,handleSubmit:V,dismissMessage:C,validationRules:o,validationRef:B,errors:v,formattedDate:L,rangeDateconfig:{mode:"range",dateFormat:"d M, Y",maxDate:"today"},serviceLocations:a.serviceLocations,loading:y}}},Q={class:"row"},W={class:"col-sm-6"},X={class:"mb-3"},$={for:"service_locations",class:"form-label"},ee={class:"col-sm-6"},te={class:"mb-3"},oe={for:"select_status",class:"form-label"},se={selected:"",disabled:"",value:""},ae={value:"1"},le={value:"0"},re={class:"col-sm-6"},ne={class:"mb-3"},ie={for:"select_date_option",class:"form-label"},de={disabled:"",value:""},ce={value:"today"},me={value:"this_week"},_e={value:"this_month"},ue={value:"this_year"},fe={value:"date"},pe={key:0,class:"col-sm-6"},ge={class:"mb-4"},ve={for:"datepicker-range",class:"form-label"},be={class:"col-sm-6"},he={class:"mb-3"},ye={for:"file_format",class:"form-label"},we={disabled:"",selected:"",value:""},Me={value:"xlsx"},ke={value:"csv"},Be={class:"col-lg-12"},Ce={class:"text-end"},Ve=["disabled"],Le={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},De={class:"alert-content"},Se={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Fe={class:"alert-content"};function Re(a,t,c,o,B,v){const b=d("Head"),h=d("PageHeader"),C=d("BCardHeader"),y=d("Multiselect"),V=d("flat-pickr"),L=d("FormValidation"),H=d("BCardBody"),i=d("BCard"),f=d("BCol"),_=d("BRow"),D=d("Layout");return r(),j(D,null,{default:p(()=>[m(b,{title:"Owner Report"}),m(h,{title:a.$t("owner_report"),pageTitle:a.$t("owner_report")},null,8,["title","pageTitle"]),m(_,null,{default:p(()=>[m(f,{lg:"12"},{default:p(()=>[m(i,{"no-body":"",id:"tasksList"},{default:p(()=>[m(C,{class:"border-0"}),m(H,{class:"border border-dashed border-end-0 border-start-0"},{default:p(()=>[e("form",{onSubmit:t[5]||(t[5]=G((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"]))},[m(L,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:p(()=>[e("div",Q,[e("div",W,[e("div",X,[e("label",$,[g(l(a.$t("select_service_location"))+" ",1),t[8]||(t[8]=e("span",{class:"text-danger"},"*",-1))]),m(y,{id:"service_locations",mode:"tags",modelValue:o.form.service_locations,"onUpdate:modelValue":t[0]||(t[0]=s=>o.form.service_locations=s),"close-on-select":!1,searchable:!0,"create-option":!1,options:o.serviceLocations.map(s=>({value:s.id,label:s.name})),placeholder:a.$t("select_service_location"),multiple:!0},null,8,["modelValue","options","placeholder"]),(r(!0),n(k,null,M(o.errors.select_service_location,(s,u)=>(r(),n("span",{key:u,class:"text-danger"},l(s),1))),128))])]),e("div",ee,[e("div",te,[e("label",oe,[g(l(a.$t("select_approval_status"))+" ",1),t[9]||(t[9]=e("span",{class:"text-danger"},"*",-1))]),S(e("select",{id:"select_status",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=s=>o.form.select_status=s)},[e("option",se,l(a.$t("select")),1),e("option",ae,l(a.$t("approved")),1),e("option",le,l(a.$t("disapproved")),1)],512),[[F,o.form.select_status]]),(r(!0),n(k,null,M(o.errors.select_status,(s,u)=>(r(),n("span",{key:u,class:"text-danger"},l(s),1))),128))])]),e("div",re,[e("div",ne,[e("label",ie,[g(l(a.$t("date_option"))+" ",1),t[10]||(t[10]=e("span",{class:"text-danger"},"*",-1))]),S(e("select",{id:"select_date_option",class:"form-select","onUpdate:modelValue":t[2]||(t[2]=s=>o.form.select_date_option=s)},[e("option",de,l(a.$t("select")),1),e("option",ce,l(a.$t("today")),1),e("option",me,l(a.$t("this_week")),1),e("option",_e,l(a.$t("this_month")),1),e("option",ue,l(a.$t("this_year")),1),e("option",fe,l(a.$t("date")),1)],512),[[F,o.form.select_date_option]]),(r(!0),n(k,null,M(o.errors.select_date_option,(s,u)=>(r(),n("span",{key:u,class:"text-danger"},l(s),1))),128))])]),o.form.select_date_option==="date"?(r(),n("div",pe,[e("div",ge,[e("label",ve,l(a.$t("from_to_date")),1),m(V,{placeholder:a.$t("select_date"),modelValue:o.form.date,"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.date=s),config:o.rangeDateconfig,class:"form-control flatpickr-input",id:"datepicker-range"},null,8,["placeholder","modelValue","config"]),(r(!0),n(k,null,M(o.errors.date,(s,u)=>(r(),n("span",{key:u,class:"text-danger"},l(s),1))),128))])])):R("",!0),e("div",be,[e("div",he,[e("label",ye,[g(l(a.$t("file_format"))+" ",1),t[11]||(t[11]=e("span",{class:"text-danger"},"*",-1))]),S(e("select",{id:"file_format",class:"form-select","onUpdate:modelValue":t[4]||(t[4]=s=>o.form.file_format=s)},[e("option",we,l(a.$t("select_file_format")),1),e("option",Me,l(a.$t("excel")),1),e("option",ke,l(a.$t("csv")),1)],512),[[F,o.form.file_format]]),(r(!0),n(k,null,M(o.errors.file_format,(s,u)=>(r(),n("span",{key:u,class:"text-danger"},l(s),1))),128))])]),e("div",Be,[e("div",Ce,[e("button",{type:"submit",class:"btn btn-primary",disabled:o.loading},l(a.$t("download")),9,Ve)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[o.successMessage?(r(),n("div",Le,[e("div",De,[t[12]||(t[12]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[13]||(t[13]=e("strong",null,"Success",-1)),g(" - "+l(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[6]||(t[6]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):R("",!0),o.alertMessage?(r(),n("div",Se,[e("div",Fe,[t[14]||(t[14]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[15]||(t[15]=e("strong",null,"Alert",-1)),g(" - "+l(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[7]||(t[7]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):R("",!0)])]),_:1})}const xe=P(z,[["render",Re]]);export{xe as default};
