import{_ as R,O as W,P as q,Z as j,z as A,T as U,N as w,C as I,r as $,G as z,D as E,g as c,S as G,o as d,x as b,w as a,a as J,k as l,l as e,J as o,n as F,y as _,i as k,F as K,L as Z,B as T,q as D,K as Q,W as O}from"./vendor-ddfbd976.js";import{L as X}from"./main-306a5ea6.js";import{s as Y}from"./searchbar-3acbc236.js";import{_ as x}from"./UserWebMenu-2e0e812c.js";import{P as ee}from"./Pagination-f095ae3c.js";import{i as te}from"./app-042fb454.js";import{_ as se}from"./search-file-ab3e1046.js";import"./footer-e648049d.js";const oe={props:{user:Object},data(){return{searchTerm:""}},components:{Layout:X,Multiselect:W,flatPickr:q,Head:j,searchbar:Y,UserWebMenu:x,Pagination:ee,Link:A,useForm:U,router:w},setup(t){const{t:n}=I(),v=$(""),i=$(""),P=U({transport_type:null,dispatch_type:null,status:null}),h=$([]),y=$({}),V=async s=>{v.value=s,p()},p=async(s=1)=>{try{const u=P.data();u.search=v.value,u.page=s;const C=await J.get("/get-support/list",{params:u});h.value=C.data.results,y.value=C.data.paginator}catch(u){console.error(n("error_fetching_users"),u)}},f=async s=>{p(s)},L=s=>s.is_cancelled?"Cancelled":s.is_completed?"Completed":s.is_trip_start?"On Trip":s.is_driver_arrived?"Driver Arrived":s.is_later&&s.is_driver_started?"Driver Started":s.is_driver_started?"Accepted":s.is_later?"Upcoming":"Searching",m=z(()=>i.value?h.value.filter(s=>i.value==="_completed"?s.is_completed:i.value==="_cancelled"?s.is_cancelled:i.value==="_upcoming"?!s.is_completed&&!s.is_cancelled:!0):h.value),g=async s=>{w.get(`/history/view/${s.id}`)};return E(async()=>{await te("en")}),{results:h,searchTerm:v,rideStatus:L,fetchSearch:V,paginator:y,fetchDatas:p,filter:P,handlePageChanged:f,filteredResults:m,selectedStatus:i,viewData:g,createTicket:async s=>{w.get("/create-ticket",{titleType:"general"})},viewTicket:async s=>{w.get(`/ticket/view/${s.id}`)}}},computed:{},mounted(){this.fetchDatas()},methods:{applyFilter(){}}},ae={class:"tab-content text-muted"},ne={class:"tab-pane active border p-4"},le={class:"d-flex float-end gap-3 mb-3"},ie={class:"table-responsive px-3 mx-n3"},re={class:"table align-middle position-relative table-nowrap"},ce={class:"table-active"},de={scope:"col"},ue={scope:"col"},_e={scope:"col"},pe={scope:"col"},fe={scope:"col"},me={scope:"col"},ve={key:0},he={key:0},ge={key:1},be={colspan:"7",class:"text-center"},ke={class:"offcanvas-body"},ye={class:"mb-4"},Be={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ce={value:"truck"},we={value:"motor_bike"},$e={value:"both"},Te={class:"mb-4"},De={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Pe={class:"form-check"},Ve={class:"form-check-label",for:"active"},Le={class:"form-check"},Me={class:"form-check-label",for:"inactive"},Se={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function Ue(t,n,v,i,P,h){const y=c("Head"),V=c("UserWebMenu"),p=c("BCardHeader"),f=c("BButton"),L=c("Link"),m=c("BCol"),g=c("BRow"),B=c("BBadge"),M=c("BCardBody"),s=c("BCard"),u=c("Pagination"),C=c("BFrom"),N=c("BOffcanvas"),H=G("b-tooltip");return d(),b(s,null,{default:a(()=>[l(y,{title:"Taxi Ride"}),l(p,{class:"border-0"},{default:a(()=>[l(V,{user:v.user},null,8,["user"])]),_:1}),l(g,null,{default:a(()=>[l(m,{lg:"12"},{default:a(()=>[l(s,{"no-body":"",id:"tasksList"},{default:a(()=>[l(p,{class:"border-0"},{default:a(()=>[e("h3",null,o(t.$t("support_tickets")),1)]),_:1}),l(M,{class:"border border-dashed border-end-0 border-start-0"},{default:a(()=>[e("div",ae,[e("div",ne,[l(g,null,{default:a(()=>[l(m,{lg:"12"},{default:a(()=>[e("div",le,[l(L,{onClick:n[0]||(n[0]=F(r=>i.createTicket(t.general),["prevent"]))},{default:a(()=>[l(f,{variant:"primary",class:"float-end"},{default:a(()=>[n[5]||(n[5]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),_(" "+o(t.$t("make_ticket")),1)]),_:1,__:[5]})]),_:1})])]),_:1})]),_:1}),e("div",ie,[e("table",re,[e("thead",ce,[e("tr",null,[e("th",de,o(t.$t("s_no")),1),e("th",ue,o(t.$t("ticket_id")),1),e("th",_e,o(t.$t("support_type")),1),e("th",pe,o(t.$t("title")),1),e("th",fe,o(t.$t("status")),1),e("th",me,o(t.$t("action")),1)])]),i.results.length>0?(d(),k("tbody",ve,[(d(!0),k(K,null,Z(i.results,(r,S)=>(d(),k("tr",{key:S},[e("td",null,o(S+1),1),e("td",null,o(r.ticket_id),1),e("td",null,[_(o(r.support_type)+" ",1),r.request_id?(d(),k("span",he,"("+o(r.request_id)+")",1)):T("",!0)]),e("td",null,o(r.title),1),e("td",null,[r.status==1?(d(),b(B,{key:0,variant:"success",class:"text-uppercase"},{default:a(()=>[_(o(t.$t("pending")),1)]),_:1})):T("",!0),r.status==2?(d(),b(B,{key:1,variant:"warning",class:"text-uppercase"},{default:a(()=>[_(o(t.$t("acknowledge")),1)]),_:1})):T("",!0),r.status==3?(d(),b(B,{key:2,variant:"danger",class:"text-uppercase"},{default:a(()=>[_(o(t.$t("closed")),1)]),_:1})):T("",!0)]),e("td",null,[D((d(),b(f,{class:"btn btn-soft-success btn-sm m-2","data-bs-toggle":"tooltip",title:t.$t("view"),onClick:F(Fe=>i.viewTicket(r),["prevent"])},{default:a(()=>n[6]||(n[6]=[e("i",{class:"ri-account-circle-line bx-xs"},null,-1)])),_:2,__:[6]},1032,["title","onClick"])),[[H,void 0,void 0,{hover:!0}]])])]))),128))])):(d(),k("tbody",ge,[e("tr",null,[e("td",be,[n[7]||(n[7]=e("img",{src:se,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,o(t.$t("no_data_found")),1)])])]))])])])])]),_:1})]),_:1})]),_:1})]),_:1}),l(u,{paginator:i.paginator,onPageChanged:i.handlePageChanged},null,8,["paginator","onPageChanged"]),l(N,{modelValue:t.rightOffcanvas,"onUpdate:modelValue":n[4]||(n[4]=r=>t.rightOffcanvas=r),placement:"end",title:t.$t("goods_type"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:a(()=>[l(C,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:a(()=>[e("div",ke,[e("div",ye,[e("label",Be,o(t.$t("goods_type_for")),1),D(e("select",{class:"form-control","data-choices":"","data-choices-search-false":"",goods_type_name:"choices-select-status",id:"choices-select-status","onUpdate:modelValue":n[1]||(n[1]=r=>i.filter.goods_types_for=r)},[e("option",Ce,o(t.$t("truck")),1),e("option",we,o(t.$t("motor_bike")),1),e("option",$e,o(t.$t("all")),1)],512),[[Q,i.filter.goods_types_for]])]),e("div",Te,[e("label",De,o(t.$t("status")),1),l(g,{class:"g-2"},{default:a(()=>[l(m,{lg:"6"},{default:a(()=>[e("div",Pe,[D(e("input",{class:"form-check-input",type:"radio",id:"active","onUpdate:modelValue":n[2]||(n[2]=r=>i.filter.status=r),value:"1"},null,512),[[O,i.filter.status]]),e("label",Ve,o(t.$t("active")),1)])]),_:1}),l(m,{lg:"6"},{default:a(()=>[e("div",Le,[D(e("input",{class:"form-check-input",type:"radio",id:"inactive","onUpdate:modelValue":n[3]||(n[3]=r=>i.filter.status=r),value:"0"},null,512),[[O,i.filter.status]]),e("label",Me,o(t.$t("inactive")),1)])]),_:1})]),_:1})]),n[8]||(n[8]=e("div",null,null,-1))]),e("div",Se,[l(f,{variant:"light",onClick:t.clearFilter,class:"w-100"},{default:a(()=>[_(o(t.$t("clear_filter")),1)]),_:1},8,["onClick"]),l(f,{type:"submit",onClick:t.filterData,variant:"success",class:"w-100"},{default:a(()=>[_(o(t.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"])]),_:1})}const Ie=R(oe,[["render",Ue]]);export{Ie as default};
