import{_ as N,Z as R,C as x,T as j,r as g,D as O,g as d,o,x as A,w as v,a as F,N as D,k as _,l as s,q as m,M as b,y as p,J as n,K as E,i as l,L as u,F as f,B as q,n as I}from"./vendor-ddfbd976.js";import{L as J}from"./main-306a5ea6.js";import{P as K}from"./page-header-2dc95532.js";import{P as Z}from"./Pagination-f095ae3c.js";import{F as G}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";const Q={components:{Layout:J,PageHeader:K,Head:R,Pagination:Z,FormValidation:G},props:{successMessage:String,alertMessage:String,packageTypes:Array,zoneTypePrice:Object,zoneTypePackage:Object,zone_unit:Object},setup(r){var h,B,C,t,i,H,L,U;const{t:e}=x(),y=j({zone_type_price_id:((h=r.zoneTypePrice)==null?void 0:h.id)||"",package_type_id:((B=r.zoneTypePackage)==null?void 0:B.package_type_id)||"",base_price:((C=r.zoneTypePackage)==null?void 0:C.base_price)||"",distance_price_per_km:((t=r.zoneTypePackage)==null?void 0:t.distance_price_per_km)||"",free_min:((i=r.zoneTypePackage)==null?void 0:i.free_min)||"",time_price_per_min:((H=r.zoneTypePackage)==null?void 0:H.time_price_per_min)||"",base_distance:((L=r.zoneTypePackage)==null?void 0:L.free_distance)||"",cancellation_fee:((U=r.zoneTypePackage)==null?void 0:U.cancellation_fee)||""}),a={package_type_id:{required:!0},base_price:{required:!0},distance_price_per_km:{required:!0},free_min:{required:!0},time_price_per_min:{required:!0},base_distance:{required:!0},cancellation_fee:{required:!0}},V=g(null),M=g({}),z=g(r.successMessage||""),k=g(r.alertMessage||""),T=g(r.zone_unit),P=g(),w=async()=>{if(M.value=V.value.validate(y),!(Object.keys(M.value).length>0))try{let c;r.zoneTypePackage&&r.zoneTypePackage.id?c=await F.post(`/set-prices/packages/update/${r.zoneTypePackage.id}`,y):c=await F.post("/set-prices/packages/store",y),c.status===201?(z.value=e("package_price_created_successfully"),D.get(`/set-prices/packages/${r.zoneTypePrice.zone_type_id}`)):k.value=e("failed_to_create_package_price")}catch(c){c.response&&c.response.status===422?M.value=c.response.data.errors:(console.error(e("error_creating_package_price"),c),k.value=e("failed_to_create_package_price"))}},S=()=>{z.value="",k.value=""};return O(()=>{T.value==1?P.value=e("kilo_meter"):T.value==2&&(P.value=e("miles"))}),{form:y,packageTypes:g(r.packageTypes||[]),successMessage:z,alertMessage:k,handleSubmit:w,dismissMessage:S,validationRules:a,validationRef:V,errors:M,unit:P}}},W={class:"row"},X={class:"col-sm-6"},Y={class:"mb-3"},$={for:"select_package_type",class:"form-label"},ee={disabled:"",value:""},se=["value"],te={class:"col-sm-6"},ae={class:"mb-3"},re={for:"base_price",class:"form-label"},oe=["placeholder"],ne={class:"col-sm-6"},le={class:"mb-3"},ie={for:"base_distance",class:"form-label"},de={key:0},ce=["placeholder"],_e={class:"col-sm-6"},me={class:"mb-3"},pe={for:"distance_price_per_km",class:"form-label"},ue=["placeholder"],fe={class:"col-sm-6"},ge={class:"mb-3"},be={for:"free_min",class:"form-label"},ye=["placeholder"],ke={class:"col-sm-6"},ve={class:"mb-3"},Me={for:"time_price_per_min",class:"form-label"},ze=["placeholder"],Pe={class:"col-sm-6"},Te={class:"mb-3"},he={for:"cancellation_fee",class:"form-label"},Be=["placeholder"],Ce={class:"col-12 text-end"},Ve={type:"submit",class:"btn btn-success"},we={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Se={class:"alert-content"},qe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},He={class:"alert-content"};function Le(r,e,y,a,V,M){const z=d("Head"),k=d("PageHeader"),T=d("BCardHeader"),P=d("FormValidation"),w=d("BCardBody"),S=d("BCard"),h=d("BCol"),B=d("BRow"),C=d("Layout");return o(),A(C,null,{default:v(()=>[_(z,{title:"Set Prices"}),_(k,{title:y.zoneTypePackage?r.$t("edit"):r.$t("create"),pageTitle:r.$t("set_prices"),pageLink:"/set-prices"},null,8,["title","pageTitle"]),_(B,null,{default:v(()=>[_(h,{lg:"12"},{default:v(()=>[_(S,{"no-body":"",id:"tasksList"},{default:v(()=>[_(T,{class:"border-0"}),_(w,{class:"border border-dashed border-end-0 border-start-0"},{default:v(()=>[s("form",{onSubmit:e[8]||(e[8]=I((...t)=>a.handleSubmit&&a.handleSubmit(...t),["prevent"]))},[_(P,{form:a.form,rules:a.validationRules,ref:"validationRef"},{default:v(()=>[s("div",W,[m(s("input",{type:"hidden",class:"form-control",id:"zone_type_price_id","onUpdate:modelValue":e[0]||(e[0]=t=>a.form.zone_type_price_id=t)},null,512),[[b,a.form.zone_type_price_id,void 0,{number:!0}]]),s("div",X,[s("div",Y,[s("label",$,[p(n(r.$t("package_type"))+" ",1),e[11]||(e[11]=s("span",{class:"text-danger"},"*",-1))]),m(s("select",{id:"package_type",class:"form-select","onUpdate:modelValue":e[1]||(e[1]=t=>a.form.package_type_id=t)},[s("option",ee,n(r.$t("select_package_type")),1),(o(!0),l(f,null,u(a.packageTypes,t=>(o(),l("option",{key:t.id,value:t.id},n(t.name),9,se))),128))],512),[[E,a.form.package_type_id]]),(o(!0),l(f,null,u(a.errors.package_type_id,(t,i)=>(o(),l("span",{key:i,class:"text-danger"},n(t),1))),128))])]),s("div",te,[s("div",ae,[s("label",re,[p(n(r.$t("base_price"))+" ",1),e[12]||(e[12]=s("span",{class:"text-danger"},"* ",-1))]),m(s("input",{type:"number",step:"any",class:"form-control",placeholder:r.$t("enter_base_price"),id:"base_price","onUpdate:modelValue":e[2]||(e[2]=t=>a.form.base_price=t)},null,8,oe),[[b,a.form.base_price,void 0,{number:!0}]]),(o(!0),l(f,null,u(a.errors.base_price,(t,i)=>(o(),l("span",{key:i,class:"text-danger"},n(t),1))),128))])]),s("div",ne,[s("div",le,[s("label",ie,[p(n(r.$t("free_distance"))+" ",1),e[13]||(e[13]=s("span",{class:"text-danger"},"*",-1)),a.unit?(o(),l("span",de,"("+n(a.unit)+")",1)):q("",!0)]),m(s("input",{type:"number",step:"any",class:"form-control",placeholder:r.$t("enter_free_distance"),id:"base_distance","onUpdate:modelValue":e[3]||(e[3]=t=>a.form.base_distance=t)},null,8,ce),[[b,a.form.base_distance,void 0,{number:!0}]]),(o(!0),l(f,null,u(a.errors.base_distance,(t,i)=>(o(),l("span",{key:i,class:"text-danger"},n(t),1))),128))])]),s("div",_e,[s("div",me,[s("label",pe,[p(n(r.$t("distance_price"))+" ",1),e[14]||(e[14]=s("span",{class:"text-danger"},"*",-1))]),m(s("input",{type:"number",step:"any",class:"form-control",placeholder:r.$t("enter_price_per_distance"),id:"distance_price_per_km","onUpdate:modelValue":e[4]||(e[4]=t=>a.form.distance_price_per_km=t)},null,8,ue),[[b,a.form.distance_price_per_km,void 0,{number:!0}]]),(o(!0),l(f,null,u(a.errors.distance_price_per_km,(t,i)=>(o(),l("span",{key:i,class:"text-danger"},n(t),1))),128))])]),s("div",fe,[s("div",ge,[s("label",be,n(r.$t("free_time_in_minute")),1),m(s("input",{type:"number",step:"any",class:"form-control",placeholder:r.$t("enter_free_min"),id:"free_min","onUpdate:modelValue":e[5]||(e[5]=t=>a.form.free_min=t)},null,8,ye),[[b,a.form.free_min,void 0,{number:!0}]]),(o(!0),l(f,null,u(a.errors.free_min,(t,i)=>(o(),l("span",{key:i,class:"text-danger"},n(t),1))),128))])]),s("div",ke,[s("div",ve,[s("label",Me,[p(n(r.$t("time_price"))+" ",1),e[15]||(e[15]=s("span",{class:"text-danger"},"*",-1))]),m(s("input",{type:"number",step:"any",class:"form-control",placeholder:r.$t("enter_time_price"),id:"time_price_per_min","onUpdate:modelValue":e[6]||(e[6]=t=>a.form.time_price_per_min=t)},null,8,ze),[[b,a.form.time_price_per_min,void 0,{number:!0}]]),(o(!0),l(f,null,u(a.errors.time_price_per_min,(t,i)=>(o(),l("span",{key:i,class:"text-danger"},n(t),1))),128))])]),s("div",Pe,[s("div",Te,[s("label",he,[p(n(r.$t("cancellation_fee"))+" ",1),e[16]||(e[16]=s("span",{class:"text-danger"},"*",-1))]),m(s("input",{type:"number",class:"form-control",placeholder:r.$t("cancellation_fee"),id:"cancellation_fee","onUpdate:modelValue":e[7]||(e[7]=t=>a.form.cancellation_fee=t)},null,8,Be),[[b,a.form.cancellation_fee,void 0,{number:!0}]]),(o(!0),l(f,null,u(a.errors.cancellation_fee,(t,i)=>(o(),l("span",{key:i,class:"text-danger"},n(t),1))),128))])]),s("div",Ce,[s("button",Ve,n(r.$t("save")),1)])])]),_:1},8,["form","rules"])],32),a.successMessage?(o(),l("div",we,[s("div",Se,[e[17]||(e[17]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[18]||(e[18]=s("strong",null,"Success",-1)),p(" - "+n(a.successMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-success",onClick:e[9]||(e[9]=(...t)=>a.dismissMessage&&a.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):q("",!0),a.alertMessage?(o(),l("div",qe,[s("div",He,[e[19]||(e[19]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[20]||(e[20]=s("strong",null,"Alert",-1)),p(" - "+n(a.alertMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[10]||(e[10]=(...t)=>a.dismissMessage&&a.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):q("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Ae=N(Q,[["render",Le]]);export{Ae as default};
