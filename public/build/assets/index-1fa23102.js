import{_ as G,Z as J,O as K,P as Q,z as W,C as X,r as d,T as $,R as ee,g as p,o as l,x as g,w as n,a as R,U as w,k as c,l as e,y as m,J as r,B as i,i as h,q as U,M as z,F as te,L as se,n as ae}from"./vendor-ddfbd976.js";import{L as oe}from"./main-306a5ea6.js";import{P as re}from"./page-header-2dc95532.js";import{P as le}from"./Pagination-f095ae3c.js";import{d as ne}from"./dropZone-8bd498a8.js";import{s as de}from"./search-2c17aadd.js";import{s as ie}from"./searchbar-3acbc236.js";import{i as _e}from"./imageUpload-4f5efd67.js";import{l as ce}from"./footer-e648049d.js";import{_ as ue}from"./search-file-ab3e1046.js";import"./app-042fb454.js";/* empty css                                                    */const me={data(){return{rightOffcanvas:!1}},components:{Layout:oe,PageHeader:re,Head:J,Pagination:le,Multiselect:K,flatPickr:Q,Link:W,dropZone:ne,imageUpload:_e,search:de,searchbar:ie},props:{levels:Object,show_driver_level_feature:Boolean,reward_point_value:Number,minimun_reward_point:Number,currency_symbol:CharacterData,app_for:String,zone_type:Object},setup(s){const{t}=X(),u=d(""),o=$({zone_type_id:s.zone_type.id}),M=d({}),F=d(!1),H=d(!1),x=d(!1),V=d(null),L=d(s.successMessage||""),k=d(s.alertMessage||""),y=d(s.levels||!1),b=d(s.show_driver_level_feature),v=d(s.reward_point_value),C=d(s.minimun_reward_point),S=d(s.currency_symbol);let P=d(1),a=d(v.value);const T=_=>{o.errors[_]=""},D=async _=>{try{await R.delete(`/drivers-levelup/delete/${_}`);const f=y.value.findIndex(B=>B.id===_);f!==-1&&y.value.splice(f,1),F.value=!1,w.fire(t("success"),t("delete_drivers_level_deleted_successfully"),"success")}catch{w.fire(t("error"),t("failed_to_delete_drivers_level"),"error")}},j=async()=>{},O=async()=>{try{v.value=v.value>0?v.value:0,C.value=C.value>0?C.value:0,await R.post("/drivers-levelup/settingsUpdate",{id:"reward_point_value",status:v.value??0}),await R.post("/drivers-levelup/settingsUpdate",{id:"minimun_reward_point",status:C.value??0}),w.fire(t("success"),t("show_driver_level_feature_updated_successfully"),"success"),I()}catch{w.fire(t("error"),t("failed_to_update_show_driver_level_feature"),"error")}},A=async()=>{try{await R.post("/drivers-levelup/settingsUpdate",{id:"show_driver_level_feature",status:b.value?0:1}),b.value=!b.value,w.fire(t("success"),t("show_driver_level_feature_updated_successfully"),"success")}catch{w.fire(t("error"),t("failed_to_update_show_driver_level_feature"),"error")}},E=async _=>{w.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async f=>{if(f.isConfirmed)try{await D(_)}catch(B){console.error(t("error_deleting_data"),B),w.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},Y=()=>{filter.reset(),N(),x.value=!1},N=async(_=1)=>{try{const f=o.data();f.search=u.value,f.page=_;const B=await R.get("/drivers-levelup/list",{params:f});y.value=B.data.results,M.value=B.data.paginator,x.value=!1}catch(f){console.error(t("error_fetching_goods_type"),f)}},Z=_=>(M.value.current_page-1)*M.value.per_page+_+1,q=async _=>{N(_)},I=()=>{a.value=(parseFloat(P.value)*v.value).toFixed(2)};return{form:o,modalShow:F,modalForm:H,deleteItemId:V,successMessage:L,alertMessage:k,hideError:T,fetchDatas:N,clearFilter:Y,deleteModal:E,searchTerm:u,SerialNumber:Z,paginator:M,levels:y,handleSettingChange:j,minimun_reward_point:C,modalFilter:x,show_driver_level_feature:b,handleLevelUpUpdate:A,currency_symbol:S,currency_value:P,reward_value:a,updateRewardValue:I,updateCurrencyValue:()=>{P.value=(parseFloat(a.value)/v.value).toFixed(2)},handlePageChanged:q,reward_point_value:v,handleRewardValueChange:O}},mounted(){this.fetchDatas()},computed:{...ce,...ee(["permissions"])}},ve={class:"alert bg-warning border-warning fs-18",role:"alert"},fe={class:"row"},pe={class:"col-sm-3"},he={class:"card border border-dashed border-primary"},ge={class:"card-body text-center"},ye={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},be={class:"col-sm-3"},we={class:"card border border-dashed border-primary"},Ce={class:"card-body text-center"},ke={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},Be={key:0,class:"col-sm-6"},Me={class:"mb-3"},xe={class:"form-check-label p-2 mt-2",for:"reward_point_value"},Ve={href:"",class:"text-success","data-bs-toggle":"modal","data-bs-target":"#reward_point_conversion"},Le=["readonly","placeholder"],Pe={class:"col-sm-6"},Re={class:"mb-3"},Ue={class:"form-check-label p-2 mt-2",for:"minimun_reward_point"},ze=["readonly","placeholder"],Fe={class:"gap-2"},He={class:"d-flex align-items-center gap-2"},Se={class:"todo-task",id:"todo-task"},Ne={class:"table-responsive"},Te={class:"table align-middle position-relative table-nowrap"},De={class:"table-active"},Ie={scope:"col"},je={scope:"col"},Oe={scope:"col"},Ae={scope:"col"},Ee={key:0,scope:"col"},Ye={key:0},Ze={class:"d-flex align-items-center mb-2"},qe={class:"flex-grow-1 ms-2"},Ge={class:"d-flex align-items-center"},Je=["src"],Ke={class:"text-muted"},Qe={key:0,class:"d-flex align-items-center mb-2"},We={class:"flex-shrink-0"},Xe={class:"text-muted mb-0"},$e={class:"flex-grow-1 ms-2"},et={class:"mb-0"},tt={key:1,class:"d-flex align-items-center mb-2"},st={class:"flex-shrink-0"},at={class:"text-muted mb-0"},ot={class:"flex-grow-1 ms-2"},rt={class:"mb-0"},lt={class:"d-flex align-items-center mb-2"},nt={class:"flex-shrink-0"},dt={class:"text-muted mb-0"},it={class:"flex-grow-1 ms-2"},_t={class:"mb-0"},ct={key:0},ut={class:"hstack gap-2"},mt={key:1},vt={colspan:"6",class:"text-center"},ft={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},pt={class:"alert-content"},ht={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},gt={class:"alert-content"},yt={id:"reward_point_conversion",class:"modal fade",tabindex:"-1","aria-labelledby":"lowLabel","aria-hidden":"true",style:{display:"none"}},bt={class:"modal-dialog"},wt={class:"modal-content"},Ct={class:"modal-body"},kt={class:"text-muted"},Bt={class:"text-muted"},Mt={class:"text-muted"};function xt(s,t,u,o,M,F){const H=p("Head"),x=p("PageHeader"),V=p("BCardHeader"),L=p("BCard"),k=p("BCol"),y=p("BRow"),b=p("BButton"),v=p("Link"),C=p("BCardBody"),S=p("Pagination"),P=p("Layout");return l(),g(P,null,{default:n(()=>[c(H,{title:s.$t("driver_levelup")},null,8,["title"]),c(x,{title:s.$t("driver_levelup"),pageTitle:s.$t("driver_levelup"),pageLink:"/set-prices"},null,8,["title","pageTitle"]),c(y,null,{default:n(()=>[c(k,{lg:"12"},{default:n(()=>[u.app_for==="demo"?(l(),g(L,{key:0,"no-body":"",id:"tasksList"},{default:n(()=>[c(V,{class:"border-0"},{default:n(()=>[e("div",ve,[e("strong",null,[m(r(s.$t("note"))+" : ",1),e("em",null,r(s.$t("actions_restricted_due_to_demo_mode")),1)])])]),_:1})]),_:1})):i("",!0),c(L,{"no-body":"",id:""},{default:n(()=>[c(V,{class:"border-0"},{default:n(()=>[c(y,null,{default:n(()=>[c(k,{lg:"12"},{default:n(()=>[e("div",fe,[e("div",pe,[e("div",he,[e("div",ge,[e("h4",ye,r(s.$t("zone")),1),e("h5",null,r(u.zone_type.zone_name),1)])])]),e("div",be,[e("div",we,[e("div",Ce,[e("h4",ke,r(s.$t("vehicle_type")),1),e("h5",null,r(u.zone_type.vehicle_type_name),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),s.permissions.includes("change-reward-value")?(l(),g(L,{key:1},{default:n(()=>[c(V,{class:"border-0"},{default:n(()=>[c(y,{class:"g-2"},{default:n(()=>[s.permissions.includes("add-drivers-levelup")?(l(),h("div",Be,[e("div",Me,[e("label",xe,[m(r(s.$t("reward_point_value"))+" ",1),e("a",Ve,r(s.$t("how_it_works")),1)]),U(e("input",{type:"number",readonly:u.app_for=="demo",class:"form-control",placeholder:s.$t("enter_reward_point_value"),id:"reward_point_value",onChange:t[0]||(t[0]=(...a)=>o.handleRewardValueChange&&o.handleRewardValueChange(...a)),"onUpdate:modelValue":t[1]||(t[1]=a=>o.reward_point_value=a)},null,40,Le),[[z,o.reward_point_value]])])])):i("",!0),e("div",Pe,[e("div",Re,[e("label",Ue,r(s.$t("minimun_reward_point")),1),U(e("input",{type:"number",class:"form-control",readonly:u.app_for=="demo",placeholder:s.$t("enter_minimun_reward_point"),id:"minimun_reward_point",onChange:t[2]||(t[2]=(...a)=>o.handleRewardValueChange&&o.handleRewardValueChange(...a)),"onUpdate:modelValue":t[3]||(t[3]=a=>o.minimun_reward_point=a)},null,40,ze),[[z,o.minimun_reward_point]])]),u.app_for!=="demo"?(l(),g(k,{key:0,md:"auto",class:"ms-auto"},{default:n(()=>[e("div",Fe,[c(b,{variant:"primary",onClick:o.handleRewardValueChange,class:"float-end"},{default:n(()=>[m(r(s.$t("save")),1)]),_:1},8,["onClick"])])]),_:1})):i("",!0)]),u.app_for!=="demo"?(l(),g(k,{key:1,md:"auto",class:"ms-auto"},{default:n(()=>[e("div",He,[s.permissions.includes("add-drivers-levelup")&&o.show_driver_level_feature?(l(),g(v,{key:0,href:`/drivers-levelup/create/${u.zone_type.id??""}`},{default:n(()=>[c(b,{variant:"primary",class:"float-end"},{default:n(()=>[t[10]||(t[10]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),m(" "+r(s.$t("add_level")),1)]),_:1,__:[10]})]),_:1},8,["href"])):i("",!0)])]),_:1})):i("",!0)]),_:1})]),_:1}),o.show_driver_level_feature?(l(),g(C,{key:0,class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[e("div",Se,[e("div",Ne,[e("table",Te,[e("thead",De,[e("tr",null,[e("th",Ie,r(s.$t("level")),1),e("th",je,r(s.$t("level_name")),1),e("th",Oe,r(s.$t("target_to_proceed")),1),e("th",Ae,r(s.$t("reward")),1),u.app_for!=="demo"?(l(),h("th",Ee,r(s.$t("action")),1)):i("",!0)])]),o.levels&&o.levels.length>0?(l(),h("tbody",Ye,[(l(!0),h(te,null,se(o.levels,(a,T)=>(l(),h("tr",null,[e("td",null,[e("div",Ze,[e("div",qe,[e("h6",null,r(a.level),1)])])]),e("td",null,[e("div",Ge,[e("img",{src:a.image??"/assets/images/users/avatar-1.jpg",alt:"@assets/images/users/avatar-1.jpg",class:"avatar-xs rounded-circle me-2"},null,8,Je),e("span",Ke,r(a.name),1)])]),e("td",null,[a.is_min_ride_complete?(l(),h("div",Qe,[e("div",We,[e("p",Xe,r(s.$t("ride_completed"))+":",1)]),e("div",$e,[e("h6",et,r(a.min_ride_count)+" ("+r(a.ride_points)+")",1)])])):i("",!0),a.is_min_ride_amount_complete?(l(),h("div",tt,[e("div",st,[e("p",at,r(s.$t("min_ride_amount"))+":",1)]),e("div",ot,[e("h6",rt,r(a.min_ride_amount)+" ("+r(a.amount_points)+")",1)])])):i("",!0)]),e("td",null,[e("div",lt,[e("div",nt,[e("p",dt,r(s.$t(a.reward_type)),1)]),e("div",it,[e("h6",_t,r(a.reward),1)])])]),u.app_for!=="demo"?(l(),h("td",ct,[e("div",ut,[c(v,{href:`/drivers-levelup/edit/${a.id}`,class:"btn btn-soft-info btn-sm m-2"},{default:n(()=>t[11]||(t[11]=[e("i",{class:"bx bxs-edit-alt"},null,-1)])),_:2,__:[11]},1032,["href"]),a.level>1?(l(),g(b,{key:0,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",id:"sa-warning",onClick:ae(D=>o.deleteModal(a.id),["prevent"])},{default:n(()=>t[12]||(t[12]=[e("i",{class:"bx bx-trash"},null,-1)])),_:2,__:[12]},1032,["onClick"])):i("",!0)])])):i("",!0)]))),256))])):(l(),h("tbody",mt,[e("tr",null,[e("td",vt,[t[13]||(t[13]=e("img",{src:ue,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,r(s.$t("no_data_found")),1)])])]))])])])]),_:1})):i("",!0)]),_:1})):i("",!0)]),_:1})]),_:1}),e("div",null,[o.successMessage?(l(),h("div",ft,[e("div",pt,[t[14]||(t[14]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[15]||(t[15]=m()),t[16]||(t[16]=e("strong",null,"Success",-1)),m(" - "+r(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[4]||(t[4]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):i("",!0),o.alertMessage?(l(),h("div",ht,[e("div",gt,[t[17]||(t[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[18]||(t[18]=m()),t[19]||(t[19]=e("strong",null,"Alert",-1)),m(" - "+r(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[5]||(t[5]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):i("",!0)]),e("div",yt,[e("div",bt,[e("div",wt,[t[22]||(t[22]=e("div",{class:"modal-header"},[e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",Ct,[t[21]||(t[21]=e("h5",{class:"fs-15"}," LoyaltyPoint Conversion Calculation ",-1)),e("p",kt,[m(r(s.$t("currency_in_currency"))+" ("+r(o.currency_symbol)+") ",1),U(e("input",{type:"number",class:"form-control",id:"currency_value",onInput:t[6]||(t[6]=(...a)=>o.updateRewardValue&&o.updateRewardValue(...a)),"onUpdate:modelValue":t[7]||(t[7]=a=>o.currency_value=a)},null,544),[[z,o.currency_value]])]),e("p",Bt,[m(r(s.$t("currency_in_rewards"))+" ",1),U(e("input",{type:"number",class:"form-control",id:"reward_value",onInput:t[8]||(t[8]=(...a)=>o.updateCurrencyValue&&o.updateCurrencyValue(...a)),"onUpdate:modelValue":t[9]||(t[9]=a=>o.reward_value=a)},null,544),[[z,o.reward_value]])]),e("p",Mt,[m(r(s.$t("currency_in_currency"))+" ",1),e("strong",null,r(o.currency_symbol)+" 1 ",1),t[20]||(t[20]=m(" = ")),e("strong",null,r(o.reward_point_value),1),m(" "+r(s.$t("reward_points")),1)])])])])]),o.show_driver_level_feature?(l(),g(S,{key:0,paginator:o.paginator,onPageChanged:o.handlePageChanged},null,8,["paginator","onPageChanged"])):i("",!0)]),_:1})}const jt=G(me,[["render",xt]]);export{jt as default};
