import{_ as j,Z as E,O as Z,C as J,r as v,T as K,D as z,g,o as a,x as G,w as h,a as C,N as Q,k as b,l as s,y as u,J as l,q as w,K as V,i,L as c,F as m,M as B,n as W,B as N}from"./vendor-ddfbd976.js";import{L as X}from"./main-306a5ea6.js";import{P as Y}from"./page-header-2dc95532.js";import{P as $}from"./Pagination-f095ae3c.js";import{i as ee}from"./imageUpload-4f5efd67.js";import{F as se}from"./FormValidation-a9047131.js";import{I as re}from"./ImageUpload-6f09ff26.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const oe={components:{Layout:X,PageHeader:Y,Head:E,Pagination:$,Multiselect:Z,FormValidation:se,imageUpload:ee,ImageUpload:re},props:{successMessage:String,alertMessage:String,countries:Array,serviceLocation:Array,timeZones:Array,owner:Object,driver:Object,validate:Function},setup(r){var A,O;const{t:o}=J();r.serviceLocation;const k=v([]),e=K({owner_id:r.driver&&r.driver.owner_id||"",service_location_id:r.driver&&r.driver.service_location_id||"",country:r.driver?r.driver.country||"":"null",name:r.driver&&r.driver.name||"",mobile:r.driver&&r.driver.mobile||"",email:r.driver&&r.driver.email||"",transport_type:r.driver&&r.driver.transport_type||"",password:"",confirm_password:"",gender:r.driver&&r.driver.gender||"",profile_picture:r.driver&&r.driver.profile_picture||""}),H={owner_id:{required:!0},name:{required:!0},service_location_id:{required:!0},country:{required:!0},mobile:{required:!0,regex:/^\d+$/},gender:{required:!0},profile_picture:{required:!0}},S=v(null),f=v({}),R=v(!1),M=v(r.successMessage||""),y=v(r.alertMessage||""),x=v((A=r.owner.area)==null?void 0:A.name),I=v((O=r.owner)==null?void 0:O.name),L=v(r.countries),F=()=>{M.value="",y.value=""},D=_=>{const d=_.target.files[0];e.profile_picture=d,d&&new FileReader().readAsDataURL(d)},q=v(r.driver?r.driver.profile_picture:"/default-profile.jpeg"),t=async()=>{try{const _=await C.get("/fleet-drivers/list-owners",{params:{service_location_id:e.service_location_id}});k.value=_.data.results||[]}catch(_){console.error("Error fetching owners:",_),k.value=[]}};z(()=>{e.service_location_id&&t()});const n=async()=>{var _;if(console.log(e.password,e.confirm_password),e.password!==e.confirm_password){f.value={confirm_password:[o("password_mismatch")]};return}else(_=f.value)==null||delete _.confirm_password;if(f.value=S.value.validate(),!(Object.keys(f.value).length>0))try{if(e.mobile&&(!r.driver||e.mobile!==r.driver.mobile)&&(await C.get(`/fleet-drivers/check-mobile/${e.mobile}${r.driver?`/${r.driver.id}`:""}`)).data.exists){f.value.mobile=o("mobile_number_already_exists");return}if(e.email&&(!r.driver||e.email!==r.driver.email)&&(await C.get(`/fleet-drivers/check-email/${e.email}${r.driver?`/${r.driver.id}`:""}`)).data.exists){f.value.email=o("email_already_exists");return}const d=new FormData;for(const p in e)p==="iconFile"&&e[p]?d.append("profile_picture",e[p]):d.append(p,e[p]);let U;R.value=!0,r.driver&&r.driver.id?U=await C.post(`/fleet-drivers/update/${r.driver.id}`,d):U=await C.post("/fleet-drivers/store",d),U.status===201?(M.value=o("fleet_drivers_created_successfully"),e.reset(),Q.get("/fleet-drivers")):y.value=o("failed_to_create_fleet_drivers")}catch(d){d.response&&d.response.status===422?f.value=d.response.data.errors:(console.error(o("error_creating_fleet_drivers"),d),y.value=o("failed_to_create_fleet_drivers_catch"))}},P=(_,d)=>{e[d]=_},T=_=>{e[_]=null};return{form:e,successMessage:M,alertMessage:y,handleSubmit:n,dismissMessage:F,location_name:x,owner_name:I,onFileChange:D,validationRules:H,validationRef:S,imageSrc:q,countries:L,driver,fetchOwners:t,owners:k,errors:f,handleImageSelected:P,handleImageRemoved:T,isButtonDisabled:R}}},te={class:"row"},le={class:"col-sm-6"},ae={class:"mb-3"},ie={for:"service_location_id",class:"form-label"},ne={value:"",disabled:""},de=["value"],ce={class:"col-sm-6"},me={class:"mb-3"},_e={for:"owner",class:"form-label"},ue={value:"",disabled:""},fe=["value"],ve={class:"col-sm-6"},ge={class:"mb-3"},be={for:"country",class:"form-label"},we={disabled:"",value:""},pe=["value"],ye={class:"col-sm-6"},he={class:"mb-3"},ke={for:"name",class:"form-label"},Me=["placeholder"],Ce={class:"col-sm-6"},Be={class:"mb-3"},Re={for:"mobile_number",class:"form-label"},Ue=["placeholder"],Ve={class:"col-sm-6"},Se={class:"mb-3"},xe={for:"email",class:"form-label"},Ie=["placeholder"],Le={class:"col-sm-6"},Fe={class:"mb-3"},De={for:"password",class:"form-label"},qe=["placeholder"],He={class:"col-sm-6"},Ae={class:"mb-3"},Oe={for:"confirm_password",class:"form-label"},Ne=["placeholder"],Pe={class:"col-sm-6"},Te={class:"mb-3"},je={for:"select_gender",class:"form-label"},Ee={disabled:"",value:""},Ze={value:"male"},Je={value:"female"},Ke={value:"others"},ze={class:"col-12"},Ge={class:"mb-3 row"},Qe={for:"icon",class:"form-label d-flex"},We={class:"col-sm-6"},Xe={class:"col-lg-12"},Ye={class:"text-end"},$e=["disabled"],es={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},ss={class:"alert-content"},rs={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},os={class:"alert-content"};function ts(r,o,k,e,H,S){const f=g("Head"),R=g("PageHeader"),M=g("BCardHeader"),y=g("ImageUpload"),x=g("FormValidation"),I=g("BCardBody"),L=g("BCard"),F=g("BCol"),D=g("BRow"),q=g("Layout");return a(),G(q,null,{default:h(()=>[b(f,{title:"Approved Drivers"}),b(R,{title:r.$t("create"),pageTitle:r.$t("approved_drivers"),pageLink:"/fleet-drivers"},null,8,["title","pageTitle"]),b(D,null,{default:h(()=>[b(F,{lg:"12"},{default:h(()=>[b(L,{"no-body":"",id:"tasksList"},{default:h(()=>[b(M,{class:"border-0"}),b(I,{class:"border border-dashed border-end-0 border-start-0"},{default:h(()=>[s("form",{onSubmit:o[12]||(o[12]=W((...t)=>e.handleSubmit&&e.handleSubmit(...t),["prevent"]))},[b(x,{form:e.form,rules:e.validationRules,ref:"validationRef"},{default:h(()=>[s("div",te,[s("div",le,[s("div",ae,[s("label",ie,[u(l(r.$t("select_area"))+" ",1),o[15]||(o[15]=s("span",{class:"text-danger"},"*",-1))]),w(s("select",{class:"form-control",id:"service_location_id","onUpdate:modelValue":o[0]||(o[0]=t=>e.form.service_location_id=t),onChange:o[1]||(o[1]=(...t)=>e.fetchOwners&&e.fetchOwners(...t))},[s("option",ne,l(r.$t("select_area")),1),(a(!0),i(m,null,c(k.serviceLocation,t=>(a(),i("option",{key:t.id,value:t.id},l(t.name),9,de))),128))],544),[[V,e.form.service_location_id]]),(a(!0),i(m,null,c(e.errors.service_location_id,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",ce,[s("div",me,[s("label",_e,[u(l(r.$t("owner"))+" ",1),o[16]||(o[16]=s("span",{class:"text-danger"},"*",-1))]),w(s("select",{class:"form-control",id:"owner","onUpdate:modelValue":o[2]||(o[2]=t=>e.form.owner_id=t)},[s("option",ue,l(r.$t("select_owner")),1),(a(!0),i(m,null,c(e.owners,t=>(a(),i("option",{key:t.id,value:t.id},l(t.company_name),9,fe))),128))],512),[[V,e.form.owner_id]]),(a(!0),i(m,null,c(e.errors.owner_id,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",ve,[s("div",ge,[s("label",be,[u(l(r.$t("country"))+" ",1),o[17]||(o[17]=s("span",{class:"text-danger"},"*",-1))]),w(s("select",{id:"select_country",class:"form-select","onUpdate:modelValue":o[3]||(o[3]=t=>e.form.country=t)},[s("option",we,l(r.$t("choose_country")),1),(a(!0),i(m,null,c(e.countries,t=>(a(),i("option",{key:t.id,value:t.id},l(t.name),9,pe))),128))],512),[[V,e.form.country]]),(a(!0),i(m,null,c(e.errors.country,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",ye,[s("div",he,[s("label",ke,[u(l(r.$t("name"))+" ",1),o[18]||(o[18]=s("span",{class:"text-danger"},"*",-1))]),w(s("input",{type:"text",class:"form-control",placeholder:r.$t("enter_name"),id:"name","onUpdate:modelValue":o[4]||(o[4]=t=>e.form.name=t)},null,8,Me),[[B,e.form.name]]),(a(!0),i(m,null,c(e.errors.name,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",Ce,[s("div",Be,[s("label",Re,[u(l(r.$t("enter_mobile_number"))+" ",1),o[19]||(o[19]=s("span",{class:"text-danger"},"*",-1))]),w(s("input",{type:"text",class:"form-control",placeholder:r.$t("enter_mobile_number"),id:"mobile_number","onUpdate:modelValue":o[5]||(o[5]=t=>e.form.mobile=t)},null,8,Ue),[[B,e.form.mobile]]),(a(!0),i(m,null,c(e.errors.mobile,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",Ve,[s("div",Se,[s("label",xe,[u(l(r.$t("email"))+" ",1),o[20]||(o[20]=s("span",{class:"text-danger"},"*",-1))]),w(s("input",{type:"email",class:"form-control",placeholder:r.$t("enter_email"),id:"email","onUpdate:modelValue":o[6]||(o[6]=t=>e.form.email=t)},null,8,Ie),[[B,e.form.email]]),(a(!0),i(m,null,c(e.errors.email,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",Le,[s("div",Fe,[s("label",De,[u(l(r.$t("password"))+" ",1),o[21]||(o[21]=s("span",{class:"text-danger"},"*",-1))]),w(s("input",{type:"password",class:"form-control",placeholder:r.$t("enter_password"),id:"password","onUpdate:modelValue":o[7]||(o[7]=t=>e.form.password=t)},null,8,qe),[[B,e.form.password]]),(a(!0),i(m,null,c(e.errors.password,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",He,[s("div",Ae,[s("label",Oe,[u(l(r.$t("confirm_password"))+" ",1),o[22]||(o[22]=s("span",{class:"text-danger"},"*",-1))]),w(s("input",{type:"password",class:"form-control",placeholder:r.$t("confirm_password"),id:"confirm_password","onUpdate:modelValue":o[8]||(o[8]=t=>e.form.confirm_password=t)},null,8,Ne),[[B,e.form.confirm_password]]),(a(!0),i(m,null,c(e.errors.confirm_password,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",Pe,[s("div",Te,[s("label",je,[u(l(r.$t("gender"))+" ",1),o[23]||(o[23]=s("span",{class:"text-danger"},"*",-1))]),w(s("select",{id:"select_gender",class:"form-select","onUpdate:modelValue":o[9]||(o[9]=t=>e.form.gender=t)},[s("option",Ee,l(r.$t("select")),1),s("option",Ze,l(r.$t("male")),1),s("option",Je,l(r.$t("female")),1),s("option",Ke,l(r.$t("others")),1)],512),[[V,e.form.gender]]),(a(!0),i(m,null,c(e.errors.gender,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])]),s("div",ze,[s("div",Ge,[s("label",Qe,l(r.$t("profile")),1),s("div",We,[b(y,{imageType:"driver",initialImageUrl:e.form.profile_picture,flexStyle:"0 0 calc(50% - 20px)",aspectRatio:"5 / 5",onImageSelected:o[10]||(o[10]=t=>e.handleImageSelected(t,"profile_picture")),onImageRemoved:o[11]||(o[11]=()=>e.handleImageRemoved("profile_picture"))},null,8,["initialImageUrl"]),(a(!0),i(m,null,c(e.errors.profile_picture,(t,n)=>(a(),i("span",{key:n,class:"text-danger"},l(t),1))),128))])])]),s("div",Xe,[s("div",Ye,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.isButtonDisabled},l(e.driver?r.$t("update"):r.$t("save")),9,$e)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),s("div",null,[e.successMessage?(a(),i("div",es,[s("div",ss,[o[24]||(o[24]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[25]||(o[25]=s("strong",null,"Success",-1)),u(" - "+l(e.successMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-success",onClick:o[13]||(o[13]=(...t)=>e.dismissMessage&&e.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):N("",!0),e.alertMessage?(a(),i("div",rs,[s("div",os,[o[26]||(o[26]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[27]||(o[27]=s("strong",null,"Alert",-1)),u(" - "+l(e.alertMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-danger",onClick:o[14]||(o[14]=(...t)=>e.dismissMessage&&e.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):N("",!0)])]),_:1})}const vs=j(oe,[["render",ts]]);export{vs as default};
