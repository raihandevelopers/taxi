import{_ as L,Z as N,O as R,C as q,r as g,T as D,g as n,o as _,x as T,w as i,a as C,N as O,k as l,i as w,l as o,y as p,J as c,B as b,q as k,M as S,n as P}from"./vendor-ddfbd976.js";import{L as U}from"./main-306a5ea6.js";import{P as j}from"./page-header-2dc95532.js";import{i as x}from"./vehicletypeIcon-aaf23b0d.js";import{I as A}from"./ImageUpload-6f09ff26.js";import{F as I}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";const E={components:{Layout:U,PageHeader:j,Head:N,Multiselect:R,imageUpload:x,ImageUpload:A,FormValidation:I},props:{owner:Object,driver:Object,successMessage:String,alertMessage:String,app_for:String},setup(e){const{t:s}=q(),m=g({}),r=g(null),f=D({password:e.driver&&e.driver.password||"",confirm_password:e.driver&&e.driver.password||""}),v=g(e.successMessage||""),y=g(e.alertMessage||""),u={password:{required:!0},confirm_password:{required:!0,sameAs:"password"}},M=()=>{const t={};for(const a in u)u[a].required&&!f[a]&&(t[a]=s("this_field_is_required"));return t};return{form:f,successMessage:v,alertMessage:y,errors:m,handleSubmit:async()=>{if(m.value=M(),Object.keys(m.value).length===0)try{const t=new FormData;t.append("password",f.password),t.append("confirm_password",f.confirm_password);let a;e.driver?a=await C.post(`/fleet-drivers/password/update/${e.driver.id}`,t):a=await C.post("store",t),a.status===200||a.status===201?(v.value=a.data.successMessage,f.reset(),O.get("/fleet-drivers")):console.error(s("unexpected_response_status"),a.status)}catch(t){console.error(s("error_handling_form_submission"),t),t.response&&t.response.status===422?m.value=t.response.data.errors:console.error(s("an_unexpected_error_occurred"),t)}},validationRef:r,validationRules:u}}},J={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Z={class:"alert-content"},z={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},G={class:"alert-content"},K={class:"row"},Q={class:"col-sm-6"},W={class:"mb-3"},X={for:"password",class:"form-label"},Y=["placeholder"],$={key:0,class:"text-danger"},ss={class:"col-sm-6"},es={class:"mb-3"},os={for:"confirm_password",class:"form-label"},rs=["placeholder"],ts={key:0,class:"text-danger"},as={class:"col-sm-12 text-end"},ns={type:"submit",class:"btn btn-primary"};function ds(e,s,m,r,f,v){const y=n("Head"),u=n("PageHeader"),M=n("tab"),B=n("BCardHeader"),t=n("FormValidation"),a=n("BCardBody"),h=n("BCard"),V=n("BCol"),H=n("BRow"),F=n("Layout");return _(),T(F,null,{default:i(()=>[l(y,{title:"Fleet Driver"}),l(u,{title:e.fleet-m.driver?e.$t("edit"):e.$t("create"),pageTitle:e.$t("driver"),pageLink:"/fleet-drivers"},null,8,["title","pageTitle"]),l(H,null,{default:i(()=>[l(V,{lg:"12"},{default:i(()=>[l(h,{"no-body":"",id:"tasksList"},{default:i(()=>[l(B,{class:"border-0"},{default:i(()=>[l(M),r.successMessage?(_(),w("div",J,[o("div",Z,[s[5]||(s[5]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[6]||(s[6]=p()),s[7]||(s[7]=o("strong",null,"Success",-1)),p(" - "+c(r.successMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-success",onClick:s[0]||(s[0]=(...d)=>e.dismissMessage&&e.dismissMessage(...d)),"aria-label":"Close Success Message"})])])):b("",!0),r.alertMessage?(_(),w("div",z,[o("div",G,[s[8]||(s[8]=o("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[9]||(s[9]=p()),s[10]||(s[10]=o("strong",null,"Alert",-1)),p(" - "+c(r.alertMessage)+" ",1),o("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[1]||(s[1]=(...d)=>e.dismissMessage&&e.dismissMessage(...d)),"aria-label":"Close Alert Message"})])])):b("",!0)]),_:1}),l(a,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[o("form",{onSubmit:s[4]||(s[4]=P((...d)=>r.handleSubmit&&r.handleSubmit(...d),["prevent"])),enctype:"multipart/form-data"},[l(t,{form:r.form,rules:r.validationRules,ref:"validationRef"},{default:i(()=>[o("div",K,[o("div",Q,[o("div",W,[o("label",X,[p(c(e.$t("password"))+" ",1),s[11]||(s[11]=o("span",{class:"text-danger"},"*",-1))]),k(o("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[2]||(s[2]=d=>r.form.password=d),placeholder:e.$t("enter_password")},null,8,Y),[[S,r.form.password]]),r.errors.password?(_(),w("span",$,c(r.errors.password),1)):b("",!0)])]),o("div",ss,[o("div",es,[o("label",os,[p(c(e.$t("confirm_password"))+" ",1),s[12]||(s[12]=o("span",{class:"text-danger"},"*",-1))]),k(o("input",{type:"password",class:"form-control",id:"confirm_password","onUpdate:modelValue":s[3]||(s[3]=d=>r.form.confirm_password=d),placeholder:e.$t("confirm_password")},null,8,rs),[[S,r.form.confirm_password]]),r.errors.confirm_password?(_(),w("span",ts,c(r.errors.confirm_password),1)):b("",!0)])]),o("div",as,[o("button",ns,c(e.$t("submit")),1)])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const gs=L(E,[["render",ds]]);export{gs as default};
