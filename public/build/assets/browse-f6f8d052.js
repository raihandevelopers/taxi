import{_ as I,Z as F,O as G,P as R,z as E,U,aC as j,r as w,T as V,C as q,g as f,S as O,o as g,x as H,w as i,a as B,k as c,l as e,J as o,q as $,K as z,y as p,B as T,i as b,F as J,L as K,M as Y,n as D}from"./vendor-ddfbd976.js";import{L as Z}from"./main-306a5ea6.js";import{P as Q}from"./page-header-2dc95532.js";import{_ as W}from"./search-file-ab3e1046.js";import"./footer-e648049d.js";import"./app-042fb454.js";const X={components:{Layout:Z,PageHeader:Q,Head:F,Multiselect:G,flatPickr:R,Link:E,Swal:U},props:{successMessage:String,alertMessage:String,language_id:j,app_for:String,language_name:String,results:{type:Array,required:!0}},setup(s){w("");const a=V({key_value:"",index:"",group:"",current_value:""}),{t:d}=q(),t=s.language_name,k=w([]),N=w(!1),m=V({group:"",all_value:"",translated_keyword:""}),y=w(s.successMessage||""),u=w(s.alertMessage||""),h=w(!1),C=w(!1),A=()=>{y.value="",u.value=""},L=async l=>{const _=l.target.value;n(_)},P=async()=>{m.all_value=!0,h.value=!0;try{const l=await B.post(`/languages/auto-translate-all/${s.language_id}`,m.data());k.value=l.data.data,y.value=d("auto_translated_successfully")}catch(l){console.log("error"),l.response.status===500&&(u.value=l.message),console.log(l.response.data.message)}finally{h.value=!1}},S=async(l,_,v)=>{a.key_value=l,a.index=v,a.group=m.group,a.current_value=_;try{const r=await B.post(`/languages/auto-translate/${s.language_id}`,a.data());k.value[v].translated_value=r.data.data,y.value=d("auto_translated_successfully")}catch(r){console.error(d("error_translating_text"),r),r.response&&r.response.status===500?(u.value=r.message,U.fire({icon:"error",title:"Cloud Translation API Error",html:`
                        <p>The Cloud Translation API has not been used in project before or it is disabled.</p>
                        <p>Please enable it by visiting:<br>
                        <a href="https://console.developers.google.com/apis/api/translate.googleapis.com/" target="_blank">
                            Google API Console
                        </a></p>
                        <p>Then retry.</p>
                        `})):u.value=d("an_error_occurred_while_translating_the_text")}},x=async(l,_,v)=>{a.key_value=l,a.index=v,a.group=m.group,a.current_value=_;try{const r=await B.post(`/languages/translate/update/${s.language_id}`,a.data());k.value[v].translated_value=r.data.data,y.value=d("translation_updated_successfully")}catch(r){console.error(d("error_translating_text"),r),r.response&&r.response.status===500?u.value=r.message:u.value=d("an_error_occurred_while_updating_translation")}},n=async(l="pages_names")=>{try{const _=m.data();_.group=l;const v=await B.get(`/languages/load-translation/${s.language_id}`,{params:_});k.value=v.data.data,C.value=!0}catch(_){console.error(d("error_fetching_languages"),_)}};return{form:m,results:k,modalShow:N,successMessage:y,alertMessage:u,dismissMessage:A,fetchDatas:n,handleGroupChange:L,autoTranslate:S,autoTranslateRef:a,autoTranslateAll:P,updateData:x,loading:h,showAutoTranslateAll:C,downloadFile:async()=>{try{const l=m.data();l.group=m.group;const _=await B.get(`/languages/download-translation/${s.language_id}`,{params:l,responseType:"blob"}),v=window.URL.createObjectURL(new Blob([_.data])),r=document.createElement("a");r.href=v,r.setAttribute("download","translations.arb"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(l){console.error(d("error_downloading_file"),l)}},languageName:t}}},ee={href:"",class:"text-success fs-14","data-bs-toggle":"modal","data-bs-target":"#translate-key"},ae={for:"select_languages",class:"form-label"},se={disabled:"",value:""},te={value:"pages_names"},oe={value:"view_pages_1"},le={value:"view_pages_2"},ne={value:"view_pages_3"},re={value:"error_messages"},ie={value:"success_messages"},de={value:"push_notifications"},ce={value:"wallet_remarks"},ue={value:"user_app"},_e={value:"driver_app"},ge={class:"d-flex align-items-center gap-2"},pe={key:0},me={key:1},ve={class:"table-responsive"},fe={class:"table align-middle position-relative table-nowrap"},be={class:"table-active"},he={scope:"col"},ye={scope:"col"},we={scope:"col"},ke={scope:"col"},Ce={key:0},Me=["title"],Be=["id","onUpdate:modelValue"],Te={class:"d-flex"},Ae={class:"d-flex"},Le={key:1},Pe={colspan:"4",class:"text-center"},Se={id:"translate-key",class:"modal fade modal-lg",tabindex:"-1","aria-labelledby":"lowLabel","aria-hidden":"true",style:{display:"none"}},xe={class:"modal-dialog"},He={class:"modal-content"},$e={class:"modal-body"},Ne={class:"d-flex mt-4"},Ue={class:"flex-grow-1 ms-2"},Ve={class:"text-muted mb-0"},De={href:"/map-setting",class:"text-success"},Ie={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Fe={class:"alert-content"},Ge={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Re={class:"alert-content"};function Ee(s,a,d,t,k,N){const m=f("Head"),y=f("PageHeader"),u=f("BCol"),h=f("BButton"),C=f("BRow"),A=f("BCardHeader"),L=f("BCardBody"),P=f("BCard"),S=f("Layout"),x=O("b-tooltip");return g(),H(S,null,{default:i(()=>[c(m,{title:"Languages"}),c(y,{title:t.languageName,pageTitle:s.$t("languages"),pageLink:"/languages"},null,8,["title","pageTitle"]),c(C,null,{default:i(()=>[c(u,{lg:"12"},{default:i(()=>[c(P,{"no-body":"",id:"tasksList"},{default:i(()=>[c(A,{class:"border-0"},{default:i(()=>[c(C,{class:"g-2"},{default:i(()=>[c(u,{class:"col-12 text-center",md:"12"},{default:i(()=>[e("a",ee,o(s.$t("how_it_works"))+" ?",1)]),_:1}),c(u,{md:"3"},{default:i(()=>[e("label",ae,o(s.$t("select_group")),1),$(e("select",{id:"select_languages",class:"form-select","onUpdate:modelValue":a[0]||(a[0]=n=>t.form.group=n),onChange:a[1]||(a[1]=(...n)=>t.handleGroupChange&&t.handleGroupChange(...n))},[e("option",se,o(s.$t("choose_group"))+".",1),e("option",te,o(s.$t("pages_names")),1),e("option",oe,o(s.$t("view_pages_1")),1),e("option",le,o(s.$t("view_pages_2")),1),e("option",ne,o(s.$t("view_pages_3")),1),e("option",re,o(s.$t("error_messages")),1),e("option",ie,o(s.$t("success_messages")),1),e("option",de,o(s.$t("push_notifications")),1),e("option",ce,o(s.$t("wallet_remarks")),1),e("option",ue,o(s.$t("user_app")),1),e("option",_e,o(s.$t("driver_app")),1)],544),[[z,t.form.group]])]),_:1}),c(u,{md:"auto",class:"ms-auto mt-4"},{default:i(()=>[e("div",ge,[t.form.group==="user_app"||t.form.group==="driver_app"?(g(),H(h,{key:0,variant:"success",class:"float-end",onClick:t.downloadFile},{default:i(()=>[a[4]||(a[4]=e("i",{class:"ri-download-line align-bottom me-1"},null,-1)),p(" "+o(s.$t("download_translations")),1)]),_:1,__:[4]},8,["onClick"])):T("",!0),t.showAutoTranslateAll?(g(),H(h,{key:1,variant:"primary",class:"float-end",onClick:t.autoTranslateAll,disabled:t.loading||d.app_for==="demo"},{default:i(()=>[a[6]||(a[6]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),t.loading?(g(),b("span",pe,[a[5]||(a[5]=e("i",{class:"ri-loader-4-line align-bottom me-1"},null,-1)),p(" "+o(s.$t("loading")),1)])):(g(),b("span",me,o(s.$t("auto_translate_all")),1))]),_:1,__:[6]},8,["onClick","disabled"])):T("",!0)])]),_:1})]),_:1})]),_:1}),c(L,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[e("div",ve,[e("table",fe,[e("thead",be,[e("tr",null,[e("th",he,o(s.$t("keyword")),1),e("th",ye,o(s.$t("translated_word")),1),e("th",we,o(s.$t("google_auto_translate")),1),e("th",ke,o(s.$t("action")),1)])]),t.results.length>0?(g(),b("tbody",Ce,[(g(!0),b(J,null,K(t.results,(n,M)=>(g(),b("tr",{key:M},[$((g(),b("td",{class:"length",title:n.current_value},[p(o(n.current_value),1)],8,Me)),[[x,void 0,void 0,{hover:!0}]]),e("td",null,[$(e("input",{type:"text",class:"form-control",id:"name_"+M,"onUpdate:modelValue":l=>n.translated_value=l},null,8,Be),[[Y,n.translated_value]])]),e("td",null,[e("div",Te,[c(h,{onClick:D(l=>t.autoTranslate(n.key_value,n.current_value,M),["prevent"]),disabled:d.app_for==="demo"||t.languageName=="English",class:"",variant:"primary"},{default:i(()=>[e("i",null,o(s.$t("auto_translate")),1)]),_:2},1032,["onClick","disabled"])])]),e("td",null,[e("div",Ae,[c(h,{onClick:D(l=>t.updateData(n.key_value,n.translated_value,M),["prevent"]),disabled:d.app_for==="demo",class:"",variant:"primary"},{default:i(()=>[e("i",null,o(s.$t("update")),1)]),_:2},1032,["onClick","disabled"])])])]))),128))])):(g(),b("tbody",Le,[e("tr",null,[e("td",Pe,[a[7]||(a[7]=e("img",{src:W,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,o(s.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",Se,[e("div",xe,[e("div",He,[a[11]||(a[11]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"myModalLabel"},"To ensure translations work correctly, please follow the instructions below."),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",$e,[e("div",Ne,[a[9]||(a[9]=e("div",{class:"flex-shrink-0"},[e("i",{class:"ri-checkbox-circle-fill text-success"})],-1)),e("div",Ue,[e("p",Ve,[a[8]||(a[8]=p(" Update the map key for this page ")),e("a",De,o(s.$t("map-settings")),1)])])]),a[10]||(a[10]=e("div",{class:"d-flex mt-4"},[e("div",{class:"flex-shrink-0"},[e("i",{class:"ri-checkbox-circle-fill text-success"})]),e("div",{class:"flex-grow-1 ms-2"},[e("p",{class:"text-muted mb-0"},[p(" If the map key has already been updated on the page but translations still arenâ€™t working, please ensure the Cloud Translation API is enabled. You can enable it by visiting: "),e("a",{href:"https://console.developers.google.com/apis/api/translate.googleapis.com",target:"_blank",class:"text-success"},"https://console.developers.google.com/apis/api/translate.googleapis.com "),p(),e("br"),p(" After enabling, please try again. ")])])],-1))])])])]),e("div",null,[t.successMessage?(g(),b("div",Ie,[e("div",Fe,[a[12]||(a[12]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),a[13]||(a[13]=p()),a[14]||(a[14]=e("strong",null,"Success",-1)),p(" - "+o(t.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:a[2]||(a[2]=(...n)=>t.dismissMessage&&t.dismissMessage(...n)),"aria-label":"Close Success Message"})])])):T("",!0),t.alertMessage?(g(),b("div",Ge,[e("div",Re,[a[15]||(a[15]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),a[16]||(a[16]=p()),a[17]||(a[17]=e("strong",null,"Alert",-1)),p(" - "+o(t.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:a[3]||(a[3]=(...n)=>t.dismissMessage&&t.dismissMessage(...n)),"aria-label":"Close Alert Message"})])])):T("",!0)])]),_:1})}const Ye=I(X,[["render",Ee]]);export{Ye as default};
