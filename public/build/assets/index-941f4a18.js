import{_ as J,Z,O as G,r as m,T as K,C as Q,g as c,S as W,o as l,x as w,w as r,U as T,a as R,N as y,k as _,l as t,J as a,i as k,L as U,p as x,n as f,q as D,F as E,y as q,B as O}from"./vendor-ddfbd976.js";import{L as X}from"./main-306a5ea6.js";import{P as Y}from"./page-header-2dc95532.js";import{P as tt}from"./Pagination-f095ae3c.js";import{i as et}from"./imageUpload-4f5efd67.js";import{I as ot}from"./ImageUp-1fee9a5c.js";import{F as st}from"./FormValidation-a9047131.js";import"./footer-e648049d.js";import"./app-042fb454.js";/* empty css                                                    */const it={components:{Layout:X,PageHeader:Y,Head:Z,Pagination:tt,Multiselect:G,FormValidation:st,imageUpload:et,ImageUp:ot},props:{successMessage:String,alertMessage:String,notification:{type:Object,required:!0},validate:Function},setup(s){const i=m(""),B=K({all:"",locked:""}),{t:o}=Q(),p=m([]),$=m({}),S=m(!1),v=m(!1),I=m(null),g=m(s.successMessage||""),M=m(s.alertMessage||""),F=()=>{g.value="",M.value=""},H=()=>{v.value=!0},N=()=>{B.reset(),d(),v.value=!1},A=async(n,u,C,V)=>{T.fire({title:o("are_you_sure"),text:o("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:o("yes"),cancelButtonText:o("cancel")}).then(async j=>{if(j.isConfirmed)try{await R.post("/notification-channel/update-status",{id:n,push_notification:u,mail:C,sms:V});const b=p.value.findIndex(z=>z.id===n);b!==-1&&(p.value[b].push_notification=u,p.value[b].mail=C,p.value[b].sms=V,y.get("/notification-channel")),T.fire(o("changed"),o("status_updated_successfully"),"success")}catch(b){console.error(o("error_updating_status"),b),T.fire(o("error"),o("failed_to_update_status"),"error")}})},L=async n=>{i.value=n,d()},d=async(n=1)=>{try{const u=B.data();u.search=i.value,u.page=n;const C=await R.get("/notification-channel/list",{params:u});p.value=C.data.results,$.value=C.data.paginator,v.value=!1}catch(u){console.error(o("error_fetching_notification"),u)}};return{results:p,modalShow:S,deleteItemId:I,successMessage:g,alertMessage:M,filterData:H,dismissMessage:F,searchTerm:i,paginator:$,modalFilter:v,clearFilter:N,fetchDatas:d,filter:B,handlePageChanged:async n=>{localStorage.setItem("/notification-channel/list",n),d(n)},editData:async n=>{y.get(`/notification-channel/edit/${n.id}`),n.topics==="Invoice For End of the Ride User"&&y.get(`/notification-channel/user-invoice-edit/${n.id}`),n.topics==="Invoice For End of the Ride Driver"&&y.get(`/notification-channel/driver-invoice-edit/${n.id}`)},fetchSearch:L,toggleActiveStatus:A,editPushData:async n=>{y.get(`/notification-channel/push-template/edit/${n.id}`)}}},mounted(){this.fetchDatas();const s=localStorage.getItem("/notification-channel/list");s?this.handlePageChanged(Number(s)):this.handlePageChanged(1)}},at={class:"nav nav-tabs mb-3",role:"tablist"},nt={class:"nav-item"},lt={class:"nav-link active","data-bs-toggle":"tab",href:"#customers",role:"tab","aria-selected":"false"},ct={class:"nav-item"},dt={class:"nav-link","data-bs-toggle":"tab",href:"#drivers",role:"tab","aria-selected":"false"},rt={class:"tab-content text-muted mt-4"},ht={class:"tab-pane active",id:"customers",role:"tabpanel"},ut={class:"table-responsive"},mt={class:"table align-middle position-relative table-nowrap"},_t={class:"table-active"},ft={scope:"col"},pt={scope:"col"},gt={scope:"col"},vt={scope:"col"},bt={scope:"col"},kt={class:"fw-bold"},Ct=["onClick","id","checked"],wt=["onClick","id","checked"],yt={class:"tab-pane",id:"drivers",role:"tabpanel"},Bt={class:"table-responsive"},Mt={class:"table align-middle position-relative table-nowrap"},Pt={class:"table-active"},xt={scope:"col"},Dt={scope:"col"},$t={scope:"col"},St={scope:"col"},It={scope:"col"},Ft={class:"fw-bold"},Ht=["onClick","id","checked"],Nt=["onClick","id","checked"],At={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Lt={class:"alert-content"},Tt={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Vt={class:"alert-content"};function Rt(s,i,B,o,p,$){const S=c("Head"),v=c("PageHeader"),I=c("BCardHeader"),g=c("BButton"),M=c("Pagination"),F=c("BCardBody"),H=c("BCard"),N=c("BCol"),A=c("BRow"),L=c("Layout"),d=W("b-tooltip");return l(),w(L,null,{default:r(()=>[_(S,{title:"Notification Channel"}),_(v,{title:s.$t("notification-channel"),pageTitle:s.$t("notification-channel")},null,8,["title","pageTitle"]),_(A,null,{default:r(()=>[_(N,{lg:"12"},{default:r(()=>[_(H,{"no-body":"",id:"tasksList"},{default:r(()=>[_(I,{class:"border-0"}),_(F,{class:"border border-dashed border-end-0 border-start-0"},{default:r(()=>[t("ul",at,[t("li",nt,[t("a",lt,a(s.$t("customers")),1)]),t("li",ct,[t("a",dt,a(s.$t("driver")),1)])]),t("div",rt,[t("div",ht,[t("div",ut,[t("table",mt,[t("thead",_t,[t("tr",null,[t("th",ft,a(s.$t("topics")),1),t("th",pt,a(s.$t("push_notifications")),1),t("th",gt,a(s.$t("mail")),1),t("th",vt,a(s.$t("email-template")),1),t("th",bt,a(s.$t("push-template")),1)])]),t("tbody",null,[(l(!0),k(E,null,U(o.results.filter(e=>e.role==="user"),(e,P)=>(l(),k("tr",{key:P},[t("td",null,[t("div",null,[t("h6",kt,a(e.topics),1),t("p",null,a(e.topics_content),1)])]),t("td",null,[t("div",{class:x({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":e.push_notification})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:f(h=>o.toggleActiveStatus(e.id,!e.push_notification,e.mail,e.sms),["prevent"]),id:"status_push_"+e.id,checked:e.push_notification},null,8,Ct)],2)]),t("td",null,[t("div",{class:x({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":e.mail})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:f(h=>o.toggleActiveStatus(e.id,e.push_notification,!e.mail,e.sms),["prevent"]),id:"status_mail_"+e.id,checked:e.mail},null,8,wt)],2)]),t("td",null,[D((l(),w(g,{onClick:f(h=>o.editData(e),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:s.$t("edit")},{default:r(()=>i[2]||(i[2]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[2]},1032,["onClick","title"])),[[d,void 0,void 0,{hover:!0}]])]),t("td",null,[D((l(),w(g,{onClick:f(h=>o.editPushData(e),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:s.$t("edit")},{default:r(()=>i[3]||(i[3]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[3]},1032,["onClick","title"])),[[d,void 0,void 0,{hover:!0}]])])]))),128))])])])]),t("div",yt,[t("div",Bt,[t("table",Mt,[t("thead",Pt,[t("tr",null,[t("th",xt,a(s.$t("topics")),1),t("th",Dt,a(s.$t("push_notifications")),1),t("th",$t,a(s.$t("mail")),1),t("th",St,a(s.$t("email-template")),1),t("th",It,a(s.$t("push-template")),1)])]),t("tbody",null,[(l(!0),k(E,null,U(o.results.filter(e=>e.role==="driver"),(e,P)=>(l(),k("tr",{key:P},[t("td",null,[t("div",null,[t("h6",Ft,a(e.topics),1),t("p",null,a(e.topics_content),1)])]),t("td",null,[t("div",{class:x({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":e.push_notification})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:f(h=>o.toggleActiveStatus(e.id,!e.push_notification,e.mail,e.sms),["prevent"]),id:"status_push_"+e.id,checked:e.push_notification},null,8,Ht)],2)]),t("td",null,[t("div",{class:x({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":e.mail})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:f(h=>o.toggleActiveStatus(e.id,e.push_notification,!e.mail,e.sms),["prevent"]),id:"status_mail_"+e.id,checked:e.mail},null,8,Nt)],2)]),t("td",null,[D((l(),w(g,{onClick:f(h=>o.editData(e),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:s.$t("edit")},{default:r(()=>i[4]||(i[4]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[4]},1032,["onClick","title"])),[[d,void 0,void 0,{hover:!0}]])]),t("td",null,[D((l(),w(g,{onClick:f(h=>o.editPushData(e),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:s.$t("edit")},{default:r(()=>i[5]||(i[5]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[5]},1032,["onClick","title"])),[[d,void 0,void 0,{hover:!0}]])])]))),128))])])])]),_(M,{paginator:o.paginator,onPageChanged:o.handlePageChanged},null,8,["paginator","onPageChanged"])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[o.successMessage?(l(),k("div",At,[t("div",Lt,[i[6]||(i[6]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),i[7]||(i[7]=t("strong",null,"Success",-1)),q(" - "+a(o.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:i[0]||(i[0]=(...e)=>o.dismissMessage&&o.dismissMessage(...e)),"aria-label":"Close Success Message"})])])):O("",!0),o.alertMessage?(l(),k("div",Tt,[t("div",Vt,[i[8]||(i[8]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),i[9]||(i[9]=t("strong",null,"Alert",-1)),q(" - "+a(o.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:i[1]||(i[1]=(...e)=>o.dismissMessage&&o.dismissMessage(...e)),"aria-label":"Close Alert Message"})])])):O("",!0)])]),_:1})}const Qt=J(it,[["render",Rt]]);export{Qt as default};
