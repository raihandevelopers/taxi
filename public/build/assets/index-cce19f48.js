import{_ as Q,Z,O as $,P as G,z as W,C as X,r as m,T as ee,Q as te,g as c,o as f,x as se,w as g,a as N,U as h,N as T,k as i,l as e,J as r,q as oe,K as ae,i as _,L as E,F as O,n as F,y,B as V}from"./vendor-ddfbd976.js";import{L as re}from"./main-306a5ea6.js";import{P as ne}from"./page-header-2dc95532.js";import{P as le}from"./Pagination-f095ae3c.js";import{s as ie}from"./search-2c17aadd.js";import{s as de}from"./searchbar-3acbc236.js";import{u as ce}from"./footer-e648049d.js";import{_ as ue}from"./search-file-ab3e1046.js";import"./app-042fb454.js";const me={data(){return{rightOffcanvas:!1}},components:{Layout:re,PageHeader:ne,Head:Z,Pagination:le,Multiselect:$,flatPickr:G,Link:W,search:ie,searchbar:de},props:{successMessage:String,alertMessage:String,serviceLocations:{type:Object,required:!0}},setup(n){const{t}=X(),{selectedLocation:k}=ce(),s=m(""),C=ee({service_location_id:"all",limit:10}),v=m([]),p=m({}),w=m(!1),u=m(!1),S=m(null),B=m({}),M=m(n.successMessage||""),P=m(n.alertMessage||""),L=()=>{M.value="",P.value=""},q=()=>{u.value=!0},D=()=>{C.reset(),b(),u.value=!1},a=()=>{w.value=!1},x=async o=>{try{await N.delete(`/delete-request-drivers/delete/${o}`);const l=v.value.findIndex(d=>d.id===o);l!==-1&&v.value.splice(l,1),w.value=!1,h.fire(t("success"),t("delete_request_drivers_deleted_successfully"),"success")}catch{h.fire(t("error"),t("failed_to_delete_request_drivers"),"error")}},H=async o=>{h.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await x(o)}catch(d){console.error(t("error_deleting_data"),d),h.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},A=async o=>{T.get(`/negative-balance-drivers/view-profile/${o.id}`)},b=async(o=1)=>{try{const l=C.data();l.search=s.value,l.page=o;const d=await N.get("/delete-request-drivers/list",{params:l});v.value=d.data.results,p.value=d.data.paginator,I(p.value.total),u.value=!1}catch(l){console.error(t("error_fetching_delete_request_drivers"),l)}},R=async o=>{b(o)},U=async o=>{T.get(`/delete-request-drivers/edit/${o.id}`)},Y=async o=>{s.value=o,b()},j=o=>(p.value.current_page-1)*p.value.per_page+o+1,z=async o=>{if(!o){console.error("Invalid user data:",o);return}h.fire({title:"Are you sure?",text:"Do you want to restore this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, restore it!"}).then(async l=>{if(l.isConfirmed)try{const d=await N.patch(`/users/restore/${o}`);v.value=v.value.filter(K=>K.id!==o),h.fire("Restored!",d.data.message,"success")}catch(d){console.error("Error restoring user:",d),h.fire("Error!","Failed to restore user.","error")}})},I=()=>{B.value=[10,25,50,100,200,500]},J=()=>{b()};return te(k,o=>{console.log("value",o),C.service_location_id=o,b()}),{results:v,modalShow:w,deleteItemId:S,successMessage:M,alertMessage:P,filterData:q,deleteModal:H,closeModal:a,deleteData:x,dismissMessage:L,SerialNumber:j,fetchSearch:Y,searchTerm:s,paginator:p,modalFilter:u,clearFilter:D,fetchDatas:b,filter:C,handlePageChanged:R,editData:U,viewProfile:A,restoreUser:z,paginatorOption:B,changeEntriesPerPage:J,selectedLocation:k}},mounted(){this.filter.service_location_id=this.selectedLocation,this.fetchDatas()}},fe={class:"d-flex align-items-center mt-3"},ge={class:"me-2 text-muted"},_e=["value"],ve={class:"ms-2 text-muted"},pe={class:"d-flex align-items-center gap-2"},he={class:"table-responsive"},be={class:"table align-middle position-relative table-nowrap"},ye={class:"table-active"},Ce={scope:"col"},we={scope:"col"},Be={scope:"col"},Me={scope:"col"},Pe={key:0},xe={class:"dropdown"},ke={class:"dropdown-menu dropdown-menu-end"},Se=["onClick"],Le=["onClick"],qe={key:1},De={colspan:"7",class:"text-center"},He={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ne={class:"alert-content"},Te={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ee={class:"alert-content"};function Oe(n,t,k,s,C,v){const p=c("Head"),w=c("PageHeader"),u=c("BCol"),S=c("searchbar"),B=c("BRow"),M=c("BCardHeader"),P=c("BCardBody"),L=c("BCard"),q=c("Pagination"),D=c("Layout");return f(),se(D,null,{default:g(()=>[i(p,{title:"Delete Request Drivers"}),i(w,{title:n.$t("delete_request_drivers"),pageTitle:n.$t("delete_request_drivers")},null,8,["title","pageTitle"]),i(B,null,{default:g(()=>[i(u,{lg:"12"},{default:g(()=>[i(L,{"no-body":"",id:"tasksList"},{default:g(()=>[i(M,{class:"border-0"},{default:g(()=>[i(B,{class:"g-2"},{default:g(()=>[i(u,{md:"3"},{default:g(()=>[e("div",fe,[e("label",ge,r(n.$t("show")),1),oe(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.filter.limit=a),onChange:t[1]||(t[1]=(...a)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(f(!0),_(O,null,E(s.paginatorOption,a=>(f(),_("option",{key:a,value:a},r(a),9,_e))),128))],544),[[ae,s.filter.limit]]),e("label",ve,r(n.$t("entries")),1)])]),_:1}),i(u,{md:"3"}),i(u,{md:"auto",class:"ms-auto"},{default:g(()=>[e("div",pe,[i(S,{onSearch:s.fetchSearch},null,8,["onSearch"])])]),_:1})]),_:1})]),_:1}),i(P,{class:"border border-dashed border-end-0 border-start-0"},{default:g(()=>[e("div",he,[e("table",be,[e("thead",ye,[e("tr",null,[e("th",Ce,r(n.$t("name")),1),e("th",we,r(n.$t("email")),1),e("th",Be,r(n.$t("mobile_number")),1),e("th",Me,r(n.$t("action")),1)])]),s.results.length>0?(f(),_("tbody",Pe,[(f(!0),_(O,null,E(s.results,(a,x)=>(f(),_("tr",{key:x},[e("td",null,r(a.name),1),e("td",null,r(a.email),1),e("td",null,r(a.mobile),1),e("td",null,[e("div",xe,[t[6]||(t[6]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",ke,[e("a",{class:"dropdown-item",onClick:F(H=>s.deleteModal(a.id),["prevent"])},[t[4]||(t[4]=e("i",{class:"bx bxs-trash align-center text-muted me-2"},null,-1)),y(r(n.$t("delete")),1)],8,Se),e("a",{class:"dropdown-item",href:"#",onClick:F(H=>s.restoreUser(a.id),["prevent"])},[t[5]||(t[5]=e("i",{class:"bx bx-undo align-center text-muted me-2"},null,-1)),y(" "+r(n.$t("restore")),1)],8,Le)])])])]))),128))])):(f(),_("tbody",qe,[e("tr",null,[e("td",De,[t[7]||(t[7]=e("img",{src:ue,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,r(n.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[s.successMessage?(f(),_("div",He,[e("div",Ne,[t[8]||(t[8]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[9]||(t[9]=y()),t[10]||(t[10]=e("strong",null,"Success",-1)),y(" - "+r(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):V("",!0),s.alertMessage?(f(),_("div",Te,[e("div",Ee,[t[11]||(t[11]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[12]||(t[12]=y()),t[13]||(t[13]=e("strong",null,"Alert",-1)),y(" - "+r(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):V("",!0)]),i(q,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Je=Q(me,[["render",Oe]]);export{Je as default};
