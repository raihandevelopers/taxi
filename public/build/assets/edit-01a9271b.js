import{_ as H,r as $,$ as L,a2 as N,Z as P,P as E,z as T,g as c,o as f,x as D,w as l,a as M,U as F,k as a,l as e,y as U,J as i,q as h,M as V,i as v,L as S,K as j,B as x,H as R,F as z}from"./vendor-ddfbd976.js";import{L as I}from"./main-306a5ea6.js";import{P as J}from"./page-header-2dc95532.js";import"./footer-e648049d.js";import"./app-042fb454.js";const K={props:{method:Object},setup(t){const n=$((t.method.fields||[]).map(o=>({...o,is_required:o.is_required===1}))),b=$(t.method.method_name||""),s=$([]),u=L({}),w=N.debounce(()=>{n.value.push({id:Date.now()*-1,input_field_name:"",input_field_type:"",placeholder:"",is_required:!1,method:""})},300),y=o=>{const d=n.value[o];d.id>0&&s.value.push(d.id),n.value.splice(o,1)},k=()=>{let o=!0;return u.value={},n.value.forEach((d,m)=>{d.input_field_name||(u.value[`input_field_name_${m}`]="Field name is required.",o=!1),d.input_field_type||(u.value[`input_field_type_${m}`]="Field type is required.",o=!1)}),o};return{fields:n,methodName:b,removedFields:s,errors:u,addField:w,removeField:y,submitForm:async()=>{if(!k()){F.fire({icon:"error",title:"Error",text:"Please fix the errors before submitting the form."});return}try{const o={method:b.value,fields:n.value.map(({id:m,method:q,is_required:B,...C})=>({...C,id:m>0?m:void 0,is_required:B?1:0})),removedFields:s.value},d=t.method.id?`/driver-bank-info/update/${t.method.id}`:"/driver-bank-info/store";await M.post(d,o),F.fire({icon:"success",title:"Success",text:"Fields submitted successfully!"})}catch{F.fire({icon:"error",title:"Error",text:"There was a problem submitting the form."})}}}},components:{Layout:I,PageHeader:J,Head:P,flatPickr:E,Link:T}},O={class:"d-flex align-items-center gap-2"},Z={class:"row"},A={class:"col-sm-4"},G={class:"mb-3"},Q={for:"method_name",class:"form-label"},W=["placeholder"],X={class:"col-12"},Y={class:"mb-1 d-flex justify-content-end"},ee={class:"form-check form-check-inline"},te=["onClick"],oe={class:"col-sm-3"},se={class:"mb-3"},ae={for:"input_field_type",class:"form-label"},le=["onUpdate:modelValue"],ie={disabled:"",value:""},ne={value:"text"},de={value:"number"},re={key:0,class:"text-danger"},ce={class:"col-sm-3"},_e={class:"mb-3"},me={for:"input_field_name",class:"form-label"},ue=["onUpdate:modelValue","placeholder"],pe={key:0,class:"text-danger"},fe={class:"col-sm-3"},he={class:"mb-3"},ve={for:"placeholder",class:"form-label"},be=["onUpdate:modelValue","placeholder"],ye={class:"col-sm-3"},ke={class:"mt-3"},ge={class:"form-check form-check-inline"},Be=["onUpdate:modelValue"],Ce={class:"form-check-label",for:"inlineCheckbox3"},$e={class:"d-flex align-items-center gap-4"};function Fe(t,n,b,s,u,w){const y=c("Head"),k=c("PageHeader"),g=c("BButton"),o=c("BCol"),d=c("BRow"),m=c("BCardHeader"),q=c("BCardBody"),B=c("BCard"),C=c("Layout");return f(),D(C,null,{default:l(()=>[a(y,{title:"Bank Info"}),a(k,{title:t.$t("bank_infos"),pageTitle:t.$t("bank_infos"),pageLink:"/driver-bank-info"},null,8,["title","pageTitle"]),a(d,null,{default:l(()=>[a(o,{lg:"12"},{default:l(()=>[a(B,{"no-body":"",id:"tasksList"},{default:l(()=>[a(m,{class:"border-0"},{default:l(()=>[a(d,{class:"g-2"},{default:l(()=>[a(o,{md:"auto",class:"ms-auto"},{default:l(()=>[e("div",O,[a(g,{variant:"primary",onClick:s.addField},{default:l(()=>[n[1]||(n[1]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),U(" "+i(t.$t("add_new_field")),1)]),_:1,__:[1]},8,["onClick"])])]),_:1})]),_:1})]),_:1}),a(q,{class:"border border-dashed border-end-0 border-start-0"},{default:l(()=>[e("div",Z,[e("div",A,[e("div",G,[e("label",Q,i(t.$t("method_name")),1),h(e("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=r=>s.methodName=r),class:"form-control",placeholder:t.$t("method_name")},null,8,W),[[V,s.methodName]])])])]),(f(!0),v(z,null,S(s.fields,(r,p)=>(f(),v("div",{key:r.id,class:"row d-flex align-items-center bg-light rounded mt-4 p-4"},[e("div",X,[e("div",Y,[e("div",ee,[e("i",{class:"bx bx-trash text-danger fs-22 btn",onClick:_=>s.removeField(p)},null,8,te)])])]),e("div",oe,[e("div",se,[e("label",ae,i(t.$t("input_field_type")),1),h(e("select",{id:"input_field_type",class:"form-select","onUpdate:modelValue":_=>r.input_field_type=_},[e("option",ie,i(t.$t("select")),1),e("option",ne,i(t.$t("text")),1),e("option",de,i(t.$t("number")),1)],8,le),[[j,r.input_field_type]]),s.errors[`input_field_type_${p}`]?(f(),v("span",re,i(s.errors[`input_field_type_${p}`]),1)):x("",!0)])]),e("div",ce,[e("div",_e,[e("label",me,i(t.$t("input_field_name")),1),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":_=>r.input_field_name=_,placeholder:t.$t("input_field_name")},null,8,ue),[[V,r.input_field_name]]),s.errors[`input_field_name_${p}`]?(f(),v("span",pe,i(s.errors[`input_field_name_${p}`]),1)):x("",!0)])]),e("div",fe,[e("div",he,[e("label",ve,i(t.$t("placeholder")),1),h(e("input",{type:"text",class:"form-control","onUpdate:modelValue":_=>r.placeholder=_,placeholder:t.$t("enter_your_placeholder")},null,8,be),[[V,r.placeholder]])])]),e("div",ye,[e("div",ke,[e("div",ge,[h(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":_=>r.is_required=_},null,8,Be),[[R,r.is_required]]),e("label",Ce,i(t.$t("is_required")),1)])])])]))),128)),a(d,{class:"g-4"},{default:l(()=>[a(o,{md:"auto",class:"ms-auto"},{default:l(()=>[e("div",$e,[a(g,{variant:"primary",onClick:s.submitForm},{default:l(()=>[U(i(t.$t("submit")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const He=H(K,[["render",Fe]]);export{He as default};
